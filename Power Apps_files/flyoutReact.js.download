/*! For license information please see FlyoutControl.js.LICENSE.txt */
(function(){return this?this:window}())["@pa-client/flyoutcontrol"]=function(t){var e={};function o(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,o),i.l=!0,i.exports}return o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=5)}([function(t,e){!function(){t.exports=function(){return this?this:window}().React}()},function(t,e,o){"use strict";o.r(e),o.d(e,"Flyout",(function(){return l}));var n=o(0),i=o(4),r=o(2),s=o(3),l=function(t){function e(o){var n=t.call(this,o)||this,i=n.props,r=i.parentId,s=i.targetRef,l=i.fullscreen,a=i.getRoot;return n._previousFocus=document.activeElement,n._id=e.generateFlyoutId(r),n._portalClass="".concat(e.FLYOUT_PREFIX,"-portal"),n._contentClass="".concat(e.FLYOUT_PREFIX,"-content"),n._root=a?a(s):n._getRoot(s),n._fullscreen=l||Core.Environment.getDeviceId()!==Core.Environment.DeviceId.NotMobileDevice,n._setFlyoutRef=n._setFlyoutRef.bind(n),n._onDocumentClick=n._onDocumentClick.bind(n),n._onDocumentScroll=n._onDocumentScroll.bind(n),n._onDocumentFocus=n._onDocumentFocus.bind(n),n._onKeyDown=n._onKeyDown.bind(n),n._dismissFlyout=n._dismissFlyout.bind(n),n._portal=n._createPortal(),n}return __extends(e,t),e.generateFlyoutId=function(t){return"".concat(e.FLYOUT_PREFIX,"-").concat(t)},e.prototype.componentDidMount=function(){this._root.appendChild(this._portal),this._removeEventListeners(),this._addEventListeners()},e.prototype.componentDidUpdate=function(){this._removeEventListeners(),this._addEventListeners()},e.prototype.componentWillUnmount=function(){this._removeEventListeners(),this._root.removeChild(this._portal),this._previousFocus=null,this._portal=null,this._root=null},e.prototype.render=function(){return i.createPortal(this._renderFlyout(),this._portal)},e.prototype._createPortal=function(){if(document.querySelector(".".concat(this._contentClass))){var t=new PointerEvent("pointerdown",{view:window,bubbles:!0,cancelable:!0});this._root.dispatchEvent(t)}var o=this._fullscreen?Object.assign({},r.FullscreenFlyout.PORTAL_STYLE,e.PORTAL_STYLE):e.PORTAL_STYLE,n=document.createElement("div");for(var i in n.setAttribute("class",this._portalClass),o)o.hasOwnProperty(i)&&(n.style[i]=o[i]);return n},e.prototype._renderFlyout=function(){var t=this.props,e=t.children,o=t.getScale,i=t.targetRef,l=t.coverTarget,a=t.onPositioned,u=t.style,c=t.minimumFlyoutHeight;if(!this._fullscreen){var h={id:this._id,target:i,style:u,coverTarget:l,root:this._root,scale:o?o():1,className:this._contentClass,minHeight:c||null,onKeyDown:this._onKeyDown,onPositioned:a,setFlyoutRef:this._setFlyoutRef};return n.createElement(s.InlineFlyout,__assign({},h),e)}var p={id:this._id,style:u,className:this._contentClass,onKeyDown:this._onKeyDown,onPositioned:a,setFlyoutRef:this._setFlyoutRef,onDismiss:this._dismissFlyout};return n.createElement(r.FullscreenFlyout,__assign({},p),e)},e.prototype._setFlyoutRef=function(t){this._flyoutRef=t},e.prototype._dismissFlyout=function(){this.props.onDismiss&&this.props.onDismiss()},e.prototype._restoreFocus=function(){this._previousFocus&&this._previousFocus.focus()},e.prototype._onDocumentClick=function(t){var e=t.target,o=this._flyoutRef;o&&(e===o||o.contains(e)||this._dismissFlyout())},e.prototype._onDocumentScroll=function(t){var e=t.target,o=this._flyoutRef;o&&(e===o||o.contains(e)||this._dismissFlyout())},e.prototype._onDocumentFocus=function(t){var e=t.target,o=this._flyoutRef;o&&(e===o||o.contains(e)||this._dismissFlyout())},e.prototype._onKeyDown=function(t){if(t)return"Escape"===t.key?(t.preventDefault(),t.stopPropagation(),this._dismissFlyout(),void this._restoreFocus()):this.props.preventTabbing&&"Tab"===t.key?(t.preventDefault(),void t.stopPropagation()):void(this.props.onKeyDown&&this.props.onKeyDown(t))},e.prototype._addEventListeners=function(){document.documentElement.addEventListener("pointerdown",this._onDocumentClick),document.documentElement.addEventListener("touchstart",this._onDocumentClick),document.documentElement.addEventListener("focus",this._onDocumentFocus,!0),this._fullscreen||(window.addEventListener("scroll",this._onDocumentScroll),window.addEventListener("mousewheel",this._onDocumentScroll))},e.prototype._removeEventListeners=function(){document.documentElement.removeEventListener("pointerdown",this._onDocumentClick),document.documentElement.removeEventListener("touchstart",this._onDocumentClick),document.documentElement.removeEventListener("focus",this._onDocumentFocus),this._fullscreen||(window.removeEventListener("scroll",this._onDocumentScroll),window.removeEventListener("mousewheel",this._onDocumentScroll))},e.prototype._getRoot=function(t){for(var e=t;null!==e&&!e.classList.contains("canvasContainer")&&e.id!==AppMagic.Constants.PublishedCanvasId;)e=e.parentElement;return e},e.FLYOUT_PREFIX="powerapps-flyout",e.PORTAL_STYLE={position:"absolute",zIndex:9998,top:0,left:0},e.CONTENT_STYLE={position:"absolute",boxSizing:"border-box"},e}(n.Component)},function(t,e,o){"use strict";o.r(e),o.d(e,"FullscreenFlyout",(function(){return r}));var n=o(0),i=o(1),r=function(t){function e(e){var o=t.call(this,e)||this;return o._baseStyle=o._getBaseStyle(),o._setContentRef=o._setContentRef.bind(o),o.state={positioned:!1},o}return __extends(e,t),e.prototype.componentDidMount=function(){this.setState({positioned:!0},this.props.onPositioned)},e.prototype.render=function(){var t=this.props,o=t.children,r=t.id,s=t.onKeyDown,l=t.className,a=Object.assign({},i.Flyout.CONTENT_STYLE,e.BASE_STYLE,this._baseStyle);return n.createElement("div",{ref:this._setContentRef,id:r,className:l,style:a,onKeyDown:s},this._renderTitlebar(),o)},e.prototype._getBaseStyle=function(){var t=this.props.style;return t?{borderWidth:t.borderWidth||0,borderStyle:t.borderStyle,borderColor:t.borderColor,backgroundColor:t.backgroundColor}:null},e.prototype._setContentRef=function(t){this.props.setFlyoutRef(t)},e.prototype._getTitlebarStyle=function(){var t=this.props.style;return{color:t.color,backgroundColor:t.backgroundColor,fontFamily:t.fontFamily,fontSize:t.fontSize,fontStyle:t.fontStyle,fontWeight:t.fontWeight}},e.prototype._renderTitlebar=function(){var t=Object.assign({},e.TITLEBAR_STYLE,this._getTitlebarStyle());return n.createElement("div",{style:t},n.createElement("div",{style:e.TITLE_STYLE}),n.createElement("div",{style:e.CLOSE_CONTAINER_STYLE},this._renderCloseButton()))},e.prototype._renderCloseButton=function(){return n.createElement("button",{style:e.CLOSE_BUTTON_STYLE,onClick:this.props.onDismiss,tabIndex:-1,"aria-label":AppMagic.Strings.Cancel},n.createElement("svg",{xmlns:AppMagic.Constants.Namespaces.svg,viewBox:"0 0 12 12",focusable:"false",style:e.CLOSE_SVG_STYLE},n.createElement("polygon",{points:"12,1.1 10.9,0 6,4.9 1.1,0 0,1.1 4.9,6 0,10.9 1.1,12 6,7.1 10.9,12 12,10.9 7.1,6"})))},e.MAX_WIDTH=600,e.PORTAL_STYLE={bottom:0,right:0,background:"rgba(0, 0, 0, 0.5)"},e.BASE_STYLE={top:0,right:0,bottom:0,left:0,width:"auto",height:"auto",display:"flex",flexDirection:"column",marginTop:"1em",marginBottom:"1em",marginRight:"auto",marginLeft:"auto",maxWidth:e.MAX_WIDTH},e.TITLEBAR_STYLE={display:"flex",lineHeight:"2em"},e.TITLE_STYLE={flex:"1 1 auto",padding:"0 0.5em"},e.CLOSE_CONTAINER_STYLE={flex:"0 0 auto"},e.CLOSE_BUTTON_STYLE={background:"none",border:"none",padding:"0 0.5em",margin:0,fontSize:"inherit",outline:"none"},e.CLOSE_SVG_STYLE={width:"0.75em",height:"0.75em",color:"currentColor",fill:"currentColor",backgroundColor:"transparent",marginRight:"auto",marginLeft:"auto"},e}(n.Component)},function(t,e,o){"use strict";o.r(e),o.d(e,"InlineFlyout",(function(){return s}));var n,i=o(0),r=o(1);!function(t){t[t.Up=0]="Up",t[t.Down=1]="Down"}(n||(n={}));var s=function(t){function e(e){var o=t.call(this,e)||this;return o._root=o.props.root,o._borderWidth=o.props.style&&o.props.style.borderWidth?o.props.style.borderWidth:0,o._borderStyle=o._getBorderStyle(),o._coverTarget=!!o.props.coverTarget,o._setContentRef=o._setContentRef.bind(o),o.state={visible:!1,style:null},o}return __extends(e,t),e.prototype.componentDidMount=function(){var t=this;this._measurementTimer=requestAnimationFrame((function(){t._setInitialPosition(),t._measurementTimer=null}))},e.prototype.componentDidUpdate=function(){this.state.visible&&this._updateSize()},e.prototype.componentWillUnmount=function(){this._measurementTimer&&cancelAnimationFrame(this._measurementTimer),this._flyoutRect=null,this._targetRect=null,this._rootRect=null,this._root=null},e.prototype.render=function(){var t=this.props,o=t.children,n=t.id,s=t.onKeyDown,l=t.className,a=Object.assign({},r.Flyout.CONTENT_STYLE,e.BASE_STYLE,this._borderStyle,this.state.style);return i.createElement("div",{ref:this._setContentRef,id:n,className:l,style:a,onKeyDown:s},o)},e.prototype._getBorderStyle=function(){var t=this.props.style;return t?0===this._borderWidth?null:{borderWidth:this._borderWidth,borderStyle:t.borderStyle,borderColor:t.borderColor}:null},e.prototype._setContentRef=function(t){this._contentRef=t,this.props.setFlyoutRef(t)},e.prototype._setInitialPosition=function(){this._rootRect=this._getUnscaledClientRect(this._root),this._targetRect=this._getRelativeRootRect(this.props.target);var t=this._borderWidth,e=.5*t,o=this._coverTarget?0:this._targetRect.height,n=this._targetRect.width+t,i=Math.max(0,this._targetRect.x-e),r=Math.max(0,this._targetRect.y-e+o);this.setState({style:{left:Math.round(i),top:Math.round(r),width:Math.round(n)}},this._setOrientation)},e.prototype._getAvailableHeight=function(){var t=this._targetRect.top,e=this._targetRect.bottom,o=this._rootRect.height-(this._coverTarget?t:e),n=this._coverTarget?e:t;return{upward:this._getEffectiveSize(n),downward:this._getEffectiveSize(o)}},e.prototype._setOrientation=function(){this._flyoutRect=this._getRelativeRootRect(this._contentRef),this._availableHeight=this._getAvailableHeight();var t=this.props.minHeight||e.MIN_HEIGHT;this._orientation=n.Down,this._availableHeight.downward<t&&this._availableHeight.downward<this._availableHeight.upward&&(this._orientation=n.Up),this._setSize()},e.prototype._setSize=function(){var t=this._getEffectiveSize(this._flyoutRect.height);this._orientation===n.Down?this._availableHeight.downward>=t?this._show():this._setHeight(this._availableHeight.downward):this._renderUpwards()},e.prototype._getEffectiveSize=function(t){return Math.round(t-2*this._borderWidth)},e.prototype._updateSize=function(){this._flyoutRect=this._getRelativeRootRect(this._contentRef);var t=this.state.style.height;if(t&&"auto"!==t){this._contentRef.style.height=null;var e=this._getRelativeRootRect(this._contentRef);Math.round(e.height)<t||(this._contentRef.style.height="".concat(t,"px"))}},e.prototype._renderUpwards=function(){var t=this._getEffectiveSize(this._flyoutRect.height),e=this._availableHeight.upward,o=e>t?"auto":e,n=this._borderWidth,i=.5*n,r=this._coverTarget?this._targetRect.height:0,s=Math.max(0,this._targetRect.y-i),l=-1*Math.round(s+r+n),a=Object.assign({},this.state.style,{bottom:l,height:o,top:"auto"});this.setState({style:a},this._show)},e.prototype._setHeight=function(t){var e=Object.assign({},this.state.style,{height:t});this.setState({style:e},this._show)},e.prototype._setVisible=function(){this._contentRef.style.visibility="visible"},e.prototype._show=function(){var t=this,e=Object.assign({},this.state.style,{visibility:"visible"});this.setState({visible:!0,style:e},(function(){t._setVisible(),t.props.onPositioned&&t.props.onPositioned()}))},e.prototype._getRelativeRootRect=function(t){var e=this._rootRect||this._getUnscaledClientRect(this._root),o=this._getUnscaledClientRect(t),n=o.x-e.x,i=o.y-e.y;return{height:o.height,width:o.width,top:i,bottom:i+o.height,left:n,right:n+o.width,x:n,y:i}},e.prototype._getUnscaledClientRect=function(t){if(!t)return{height:0,width:0,top:0,bottom:0,left:0,right:0,x:0,y:0};var e=this.props.scale||1,o=t.getBoundingClientRect(),n=o.width/e,i=o.height/e,r=o.left/e,s=o.top/e;return{height:i,width:n,top:s,bottom:s+i,left:r,right:r+n,x:r,y:s}},e.MIN_HEIGHT=200,e.BASE_STYLE={position:"absolute",boxSizing:"border-box",visibility:"hidden"},e}(i.Component)},function(t,e){!function(){t.exports=function(){return this?this:window}().ReactDOM}()},function(t,e,o){o(7),t.exports=o(6)},function(t,e,o){"use strict";o.r(e);var n=o(1);o.d(e,"Flyout",(function(){return n.Flyout})),o.d(e,"IFlyoutProps",(function(){return n.IFlyoutProps}));var i=o(2);o.d(e,"FullscreenFlyout",(function(){return i.FullscreenFlyout})),o.d(e,"IFullscreenFlyoutProps",(function(){return i.IFullscreenFlyoutProps})),o.d(e,"IFullscreenFlyoutState",(function(){return i.IFullscreenFlyoutState}));var r=o(3);o.d(e,"IInlineFlyoutProps",(function(){return r.IInlineFlyoutProps})),o.d(e,"IInlineFlyoutState",(function(){return r.IInlineFlyoutState})),o.d(e,"InlineFlyout",(function(){return r.InlineFlyout}))},function(t,e,o){"use strict";o.r(e);var n=o(1);Core.exportToNamespace(["AppMagic","Controls"],n);var i=o(2);Core.exportToNamespace(["AppMagic","Controls"],i);var r=o(3);Core.exportToNamespace(["AppMagic","Controls"],r)}]);
//# sourceMappingURL=D:/a/_work/1/s/obj/Assets/js/FlyoutControl/FlyoutControl.js.map