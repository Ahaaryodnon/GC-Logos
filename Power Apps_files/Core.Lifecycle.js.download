/*! For license information please see Core.Lifecycle.js.LICENSE.txt */
(function(){return this?this:window}())["@pa-client/core-lifecycle"]=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=18)}([function(e,t){!function(){e.exports=function(){return this?this:window}()["@pa-client/core"]}()},function(e,t,n){"use strict";var i;n.r(t),n.d(t,"LifecycleEventType",(function(){return i})),function(e){e[e.LaunchToShell=0]="LaunchToShell",e[e.OpenFromFile=1]="OpenFromFile",e[e.OpenFromUrl=2]="OpenFromUrl",e[e.Suspend=3]="Suspend",e[e.Resume=4]="Resume"}(i||(i={}))},function(e,t,n){"use strict";n.r(t),n.d(t,"PlayerTileId",(function(){return i})),n.d(t,"SienaUrlSchemeName",(function(){return r})),n.d(t,"SienaURL",(function(){return o}));var i="com.microsoft.siena.player",r="projectsiena",o=r+"://"},function(e,t,n){"use strict";n.r(t),n.d(t,"CordovaLifecycleEventDispatcher",(function(){return o}));var i=n(0),r=n(1),o=function(){function e(){this._eventDispatcher=new i.EventObject}return Object.defineProperty(e.prototype,"eventDispatcher",{get:function(){return this._eventDispatcher},enumerable:!1,configurable:!0}),e.prototype.start=function(){var e=this;document.addEventListener("deviceready",(function(){e._eventDispatcher.dispatch({type:r.LifecycleEventType.LaunchToShell})}))},e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"CordovaProtocolHandler",(function(){return s})),n.d(t,"handleOpenUrl",(function(){return a}));var i=n(0),r=n(13),o=n(1),c=new i.EventObject,s=function(){function e(e){this._eventDispatcher=new i.EventObject,this._cordovaLoadPromise=Object(i.createCompletablePromise)(),this._cordovaLifecycleEventDispatcher=e,e.eventDispatcher.addListener(this._waitForCordovaLoading.bind(this))}return Object.defineProperty(e.prototype,"eventDispatcher",{get:function(){return this._eventDispatcher},enumerable:!1,configurable:!0}),e.prototype.start=function(){var e=this;c.addListener((function(t){e._cordovaLoadPromise.promise.then((function(){if(!t||"ms-app://"!==t.substr(0,9))if(t&&"file://"===t.substr(0,7))r.FileSystem.getFileFromPath(t).then((function(t){var n={type:o.LifecycleEventType.OpenFromFile,file:t};e._eventDispatcher.dispatch(n)}));else{var n={type:o.LifecycleEventType.OpenFromUrl,url:t};e._eventDispatcher.dispatch(n)}}),(function(e){return i.CoreLog.error("CordovaProtocolHandler.start",e)}))}))},e.prototype._waitForCordovaLoading=function(){this._cordovaLoadPromise.complete(),this._cordovaLifecycleEventDispatcher.eventDispatcher.removeListener(this._waitForCordovaLoading.bind(this))},e}();function a(e){c.dispatch(e)}},function(e,t,n){"use strict";n.r(t),n.d(t,"LifecycleEventDispatcher",(function(){return r}));var i=n(0),r=function(){function e(){this._eventDispatcher=new i.EventObject,this._eventDispatcherList=[],this._isStarted=!1}return e.prototype.addLifecycleEventDispatcher=function(e){e.eventDispatcher.addListener(this._eventCallback.bind(this)),this._eventDispatcherList.push(e),this._isStarted&&e.start()},Object.defineProperty(e.prototype,"eventDispatcher",{get:function(){return this._eventDispatcher},enumerable:!1,configurable:!0}),e.prototype.start=function(){for(var e=0;e<this._eventDispatcherList.length;e++)this._eventDispatcherList[e].start();this._isStarted=!0},e.prototype._eventCallback=function(e){this._eventDispatcher.dispatch(e)},e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"WindowsLifecycleEventDispatcher",(function(){return s}));var i=n(0),r=n(3),o=n(1),c=n(9),s=function(){function e(e,t){var n=this;this._eventDispatcher=new i.EventObject,this._windowsCompletablePromise=Object(i.createCompletablePromise)(),this._windowsLifecycleListener=e||new c.WindowsLoadEventDispatcher,this._windowsLifecycleListener.eventDispatcher.addListener(this._windowsLoadListener.bind(this)),this._cordovaCompletablePromise=Object(i.createCompletablePromise)(),this._cordovaLifecycle=t||new r.CordovaLifecycleEventDispatcher,this._cordovaLifecycle.eventDispatcher.addListener(this._cordovaLoadListener.bind(this));var o=[this._windowsCompletablePromise.promise,this._cordovaCompletablePromise.promise];Object(i.PromiseUtility_join)(o).then((function(){n._cordovaAndWindowsLoaded()}))}return Object.defineProperty(e.prototype,"eventDispatcher",{get:function(){return this._eventDispatcher},enumerable:!1,configurable:!0}),e.prototype.addListener=function(e){return this._eventDispatcher.addListener(e)},e.prototype.removeListener=function(e){this._eventDispatcher.removeListener(e)},e.prototype.start=function(){this._windowsLifecycleListener.start(),this._cordovaLifecycle.start()},e.prototype._windowsLoadListener=function(e){i.CoreLog.verbose("Windows loaded"),this._windowsCompletablePromise.complete()},e.prototype._cordovaLoadListener=function(){i.CoreLog.verbose("Cordova loaded"),this._cordovaCompletablePromise.complete()},e.prototype._cordovaAndWindowsLoaded=function(){this._eventDispatcher.dispatch({type:o.LifecycleEventType.LaunchToShell})},e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"WindowsProtocolHandler",(function(){return s}));var i=n(0),r=n(13),o=n(2),c=n(1),s=function(){function e(){var e=this;this._eventDispatcher=new i.EventObject,this._eventsBuffer=new Array,this._started=!1,WinJS.Application.addEventListener("activated",(function(t){e._winJSEventBuffer(t)}),!1)}return Object.defineProperty(e.prototype,"eventDispatcher",{get:function(){return this._eventDispatcher},enumerable:!1,configurable:!0}),e.prototype.start=function(){for(var e in this._eventsBuffer)this._windowsLoadListener(this._eventsBuffer[e]);this._started=!0},e.prototype._winJSEventBuffer=function(e){this._started?this._windowsLoadListener(e):this._eventsBuffer.push(e)},e.prototype._windowsLoadListener=function(e){if(e&&e.detail.kind===Windows.ApplicationModel.Activation.ActivationKind.file&&1===e.detail.files.size){var t=e.detail.files[0],n={type:c.LifecycleEventType.OpenFromFile,file:new r.WrappedStorageFile(t)};this._eventDispatcher.dispatch(n)}else if(e&&e.detail.kind===Windows.ApplicationModel.Activation.ActivationKind.protocol){var s=e.detail.uri.rawUri,a={type:c.LifecycleEventType.OpenFromUrl,url:s};this._eventDispatcher.dispatch(a)}else if(e.detail.kind===Windows.ApplicationModel.Activation.ActivationKind.launch&&""!==e.detail.arguments&&e.detail.tileId!==o.PlayerTileId){try{var p=decodeURIComponent(e.detail.arguments)}catch(e){return}var u;u=Object(i.startsWith)(p,"ms-apps://")?p:"ms-apps://"+p;var d=Object(i.tryParse)(u);if(!d)return;var l=d.getQueryParamFirstValue("openApp");if(l&&"false"===l.toLowerCase())return;var f={type:c.LifecycleEventType.OpenFromUrl,url:u};this._eventDispatcher.dispatch(f)}},e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"SuspendResumeDispatcher",(function(){return o}));var i=n(0),r=n(1),o=function(){function e(){this._eventDispatcher=new i.EventObject}return Object.defineProperty(e.prototype,"eventDispatcher",{get:function(){return this._eventDispatcher},enumerable:!1,configurable:!0}),e.prototype.start=function(){var e=this;Object(i.isTestMode)()||(document.addEventListener("pause",(function(){e._eventDispatcher.dispatch({type:r.LifecycleEventType.Suspend})})),document.addEventListener("resume",(function(){e._eventDispatcher.dispatch({type:r.LifecycleEventType.Resume})})))},e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"WindowsLoadEventDispatcher",(function(){return o}));var i=n(0),r=n(1),o=function(){function e(){this._eventDispatcher=new i.EventObject,this._isLoaded=!1}return Object.defineProperty(e.prototype,"eventDispatcher",{get:function(){return this._eventDispatcher},enumerable:!1,configurable:!0}),e.prototype.start=function(){var e=this;WinJS.Application.addEventListener("ready",(function(t){e._isLoaded=!0,e._eventDispatcher.dispatch({type:r.LifecycleEventType.LaunchToShell})}),!1),"function"==typeof isWinJSLoaded&&isWinJSLoaded()&&(this._isLoaded=!0,this._eventDispatcher.dispatch({type:r.LifecycleEventType.LaunchToShell}))},e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"getAppLifeCycleInstance",(function(){return d})),n.d(t,"getLifecycleEventDispatcherInstance",(function(){return l}));var i=n(0),r=n(3),o=n(4),c=n(5),s=n(8),a=n(6),p=n(7),u=null;function d(){if(!u)if(i.PerformanceRecorder.instance.setGlobalMarker("getAppLifeCycleInstance"),Object(i.isAuthoringTool)()){var e=new c.LifecycleEventDispatcher;e.addLifecycleEventDispatcher(new a.WindowsLifecycleEventDispatcher),e.addLifecycleEventDispatcher(new p.WindowsProtocolHandler),u=e}else{var t=new c.LifecycleEventDispatcher;if(WinJS.Utilities.hasWinRT)t.addLifecycleEventDispatcher(new a.WindowsLifecycleEventDispatcher),t.addLifecycleEventDispatcher(new p.WindowsProtocolHandler);else{var n=new r.CordovaLifecycleEventDispatcher;t.addLifecycleEventDispatcher(n),t.addLifecycleEventDispatcher(new o.CordovaProtocolHandler(n))}t.addLifecycleEventDispatcher(new s.SuspendResumeDispatcher),u=t}return u}function l(){return u||d(),u}},function(e,t,n){"use strict";n.r(t),n.d(t,"ProtocolClientValidation",(function(){return i}));n(0);var i=function(){function e(){this._supportedExtensions=new Array,this._supportedProtocols=new Array}return e.prototype.addAllowedFileExtension=function(e){this._supportedExtensions.push(e)},e.prototype.addAllowedProtocol=function(e){this._supportedProtocols.push(e)},e.prototype.isAllowedFileExtension=function(e){var t=e.split(".").pop();for(var n in this._supportedExtensions)if(t===this._supportedExtensions[n])return!0;return!1},e.prototype.isAllowedProtocol=function(e){for(var t in this._supportedProtocols)if(0===e.indexOf(this._supportedProtocols[t]+"://"))return!0;return!1},e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"ProtocolSigninWaiter",(function(){return r}));var i=n(0),r=function(){function e(e){this._userService=e,this._userProfileChangeListener=this._launchBuffered.bind(this)}return e.prototype.waitForSigninAndSendData=function(e){return Object(i.isNullOrUndefined)(this._userService.userProfile)?(this._completablePromise&&(this._userService.userInfoUpdatedEvent.removeListener(this._userProfileChangeListener),this._completablePromise.error("Open call was replaced by a new one.")),this._userService.userInfoUpdatedEvent.addListener(this._userProfileChangeListener),this._holdData=e,this._completablePromise=Object(i.createCompletablePromise)(),this._openingPromise=this._completablePromise.promise):this._openingPromise=Promise.resolve(e),this._openingPromise},e.prototype._launchBuffered=function(){this._userService.userProfile&&(this._userService.userInfoUpdatedEvent.removeListener(this._userProfileChangeListener),this._holdData&&this._completablePromise.complete(this._holdData),this._holdData=null,this._completablePromise=null)},e}()},function(e,t){!function(){e.exports=function(){return this?this:window}()["@pa-client/core-io"]}()},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){n(20),e.exports=n(19)},function(e,t,n){"use strict";n.r(t);var i=n(3);n.d(t,"CordovaLifecycleEventDispatcher",(function(){return i.CordovaLifecycleEventDispatcher}));var r=n(4);n.d(t,"CordovaProtocolHandler",(function(){return r.CordovaProtocolHandler})),n.d(t,"handleOpenUrl",(function(){return r.handleOpenUrl}));var o=n(14);n.d(t,"IFileHandlerLifecycleEvent",(function(){return o.IFileHandlerLifecycleEvent}));var c=n(15);n.d(t,"ILifecycleEvent",(function(){return c.ILifecycleEvent}));var s=n(16);n.d(t,"ILifecycleEventDispatcher",(function(){return s.ILifecycleEventDispatcher}));var a=n(17);n.d(t,"IUrlHandlerLifecycleEvent",(function(){return a.IUrlHandlerLifecycleEvent}));var p=n(2);n.d(t,"PlayerTileId",(function(){return p.PlayerTileId})),n.d(t,"SienaURL",(function(){return p.SienaURL})),n.d(t,"SienaUrlSchemeName",(function(){return p.SienaUrlSchemeName}));var u=n(5);n.d(t,"LifecycleEventDispatcher",(function(){return u.LifecycleEventDispatcher}));var d=n(1);n.d(t,"LifecycleEventType",(function(){return d.LifecycleEventType}));var l=n(10);n.d(t,"getAppLifeCycleInstance",(function(){return l.getAppLifeCycleInstance})),n.d(t,"getLifecycleEventDispatcherInstance",(function(){return l.getLifecycleEventDispatcherInstance}));var f=n(11);n.d(t,"ProtocolClientValidation",(function(){return f.ProtocolClientValidation}));var h=n(12);n.d(t,"ProtocolSigninWaiter",(function(){return h.ProtocolSigninWaiter}));var v=n(8);n.d(t,"SuspendResumeDispatcher",(function(){return v.SuspendResumeDispatcher}));var y=n(6);n.d(t,"WindowsLifecycleEventDispatcher",(function(){return y.WindowsLifecycleEventDispatcher}));var L=n(9);n.d(t,"WindowsLoadEventDispatcher",(function(){return L.WindowsLoadEventDispatcher}));var _=n(7);n.d(t,"WindowsProtocolHandler",(function(){return _.WindowsProtocolHandler}))},function(e,t,n){"use strict";n.r(t);var i=n(0),r=n(3);Object(i.exportToNamespace)(["Core","Lifecycle"],r);var o=n(4);Object(i.exportToNamespace)(["Core","Lifecycle"],o);n(14),n(15),n(16),n(17);var c=n(2);Object(i.exportToNamespace)(["Core","Lifecycle","Constants"],c);var s=n(5);Object(i.exportToNamespace)(["Core","Lifecycle"],s);var a=n(1);Object(i.exportToNamespace)(["Core","Lifecycle"],a);var p=n(10);Object(i.exportToNamespace)(["Core","Lifecycle"],p);var u=n(11);Object(i.exportToNamespace)(["Core","Lifecycle"],u);var d=n(12);Object(i.exportToNamespace)(["Core","Lifecycle"],d);var l=n(8);Object(i.exportToNamespace)(["Core","Lifecycle"],l);var f=n(6);Object(i.exportToNamespace)(["Core","Lifecycle"],f);var h=n(9);Object(i.exportToNamespace)(["Core","Lifecycle"],h);var v=n(7);Object(i.exportToNamespace)(["Core","Lifecycle"],v)}]);
//# sourceMappingURL=D:/a/_work/1/s/obj/Assets/js/Core.Lifecycle/Core.Lifecycle.js.map