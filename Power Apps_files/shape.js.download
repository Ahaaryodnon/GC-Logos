"use strict";
/*!
 * Copyright (C) Microsoft Corporation. All rights reserved.
 */var AppMagic;!function(e){!function(t){!function(o){var i=function(){function o(){}return o.prototype.initControlContext=function(e){e._accessibilityItem=null,e._borderThicknessSubscription=null},o.prototype.initView=function(t,o){var i=this;o.fill=this.getFillComputed(o),o._isFocused=ko.observable(!1),o.borderColor=this._getBorderColorComputed(o),o.borderThickness=this._getBorderThicknessComputed(o),o._borderThicknessSubscription=o.borderThickness.subscribe(this.draw.bind(this,o)),o.onClickHandler=this._clickHandler.bind(null,o),o.shortcutProvider=new e.Controls.ControlShortcutProvider(o.onClickHandler),ko.applyBindings(o,t),this._setTabbability(o,o.viewState.displayMode()===e.Constants.DisplayMode.Edit),o._viewStateDisplayModeSubscription=o.viewState.displayMode.subscribe((function(t){i._setTabbability(o,t===e.Constants.DisplayMode.Edit)})),o._focusInHandler=this.focusHandler.bind(this,o,!0),t.addEventListener("focusin",o._focusInHandler),o._focusOutHandler=this.focusHandler.bind(this,o,!1),t.addEventListener("focusout",o._focusOutHandler)},o.prototype._clickHandler=function(t){return t.viewState.displayMode()===e.Constants.DisplayMode.Edit&&t.behaviors.OnSelect(),!0},o.prototype.focusHandler=function(e,t){e.initialized&&e._isFocused(t)},o.prototype.getFillComputed=function(t){return ko.computed((function(){var t=null;return this.viewState.displayMode()===e.Constants.DisplayMode.Disabled?t=this.properties.DisabledFill():this.viewState.pressed()?t=this.properties.PressedFill():this.viewState.hovering()&&(t=this.properties.HoverFill()),null===t||""===t?this.properties.Fill():t}),t)},o.prototype._getBorderThicknessComputed=function(e){return ko.pureComputed((function(){var e=this._isFocused(),o=this.modelProperties.BorderThickness.modelObservable(),i=this.modelProperties.FocusedBorderThickness.modelObservable();if(""===this.properties.BorderStyle())return 0;var r=e?i:o;return Math.max(t.converters.pxLogicalToNativeHorizontalConverter(r),t.converters.pxLogicalToNativeVerticalConverter(r))}),e)},o.prototype._getBorderColorComputed=function(t){return ko.pureComputed((function(){var t=this.properties,o=t.BorderColor();return this.viewState.displayMode()!==e.Constants.DisplayMode.Edit?t.DisabledBorderColor&&(o=t.DisabledBorderColor()):this._isFocused()?o=t.FocusedBorderColor():this.viewState.pressed()&&t.PressedBorderColor?o=t.PressedBorderColor():this.viewState.hovering()&&t.HoverBorderColor&&(o=t.HoverBorderColor()),null===o||""===o?"transparent":o}),t)},o.prototype._setTabbability=function(e,o){var i=e.container.querySelector(".appmagic-svg");o?e._accessibilityItem||(e._accessibilityItem=t.AccessibilityHelper.createAccessibilityItem(e,i),t.AccessibilityManager.registerItem(e._accessibilityItem)):(this._disposeAccessibilityItem(e),i.removeAttribute("tabindex"))},o.prototype._disposeAccessibilityItem=function(e){e._accessibilityItem&&(t.AccessibilityManager.unregisterItem(e._accessibilityItem),e._accessibilityItem.dispose(),e._accessibilityItem=null)},o.prototype.onChangeWidth=function(e,t){this._onChangeDimension(t)},o.prototype.onChangeLayoutWidth=function(e,t){this._onChangeDimension(t)},o.prototype.onChangeHeight=function(e,t){this._onChangeDimension(t)},o.prototype.onChangeLayoutHeight=function(e,t){this._onChangeDimension(t)},o.prototype.onWindowResize=function(e,t){this._onChangeDimension(e)},o.prototype._onChangeDimension=function(e){e.realized&&this.draw(e)},o.prototype.disposeView=function(e,t){t.borderThickness&&(t.borderThickness.dispose(),t.borderThickness=null),t.borderColor&&(t.borderColor.dispose(),t.borderColor=null),t.fill&&(t.fill.dispose(),t.fill=null),t._borderThicknessSubscription&&(t._borderThicknessSubscription.dispose(),t._borderThicknessSubscription=null),t._viewStateDisplayModeSubscription&&(t._viewStateDisplayModeSubscription.dispose(),t._viewStateDisplayModeSubscription=null),t.onClickHandler=null,e.removeEventListener("focusin",t._focusInHandler),t._focusInHandler=null,e.removeEventListener("focusout",t._focusOutHandler),t._focusOutHandler=null,t.shortcutProvider&&(t.shortcutProvider.dispose(),t.shortcutProvider=null),this._disposeAccessibilityItem(t)},o.prototype.onChangeTabIndex=function(e,o){o.realized&&o._accessibilityItem&&t.AccessibilityHelper.updateTabIndex(o._accessibilityItem,o)},o.prototype.onChangeZIndex=function(e,o){o.realized&&o._accessibilityItem&&t.AccessibilityHelper.updateZIndex(o._accessibilityItem,o)},o.prototype.onChangeX=function(e,t){t.realized&&this._onChangeLocation(t)},o.prototype.onChangeY=function(e,t){t.realized&&this._onChangeLocation(t)},o.prototype._onChangeLocation=function(e){e._accessibilityItem&&t.AccessibilityHelper.updateLocation(e._accessibilityItem,e)},o.prototype.onChangeBorderThickness=function(e,t){t.realized&&this.draw(t)},o.prototype.onChangeTooltip=function(e,t){t.realized&&this._updateSvgTitle(t)},o.prototype._updateSvgTitle=function(t){if(t.container){var o=t.container.getElementsByTagName("svg")[0];if(!o)return;var i=t.modelProperties.Tooltip.getValue(),r=o.getElementsByTagNameNS(e.Constants.Namespaces.svg,"title")[0];if(r)r.textContent=i;else{var n=document.createElementNS(e.Constants.Namespaces.svg,"title");n.textContent=i,o.insertBefore(n,o.firstChild)}}},o.prototype._formatPoints=function(e,o,i){if(void 0===i&&(i=!1),!i)for(var r=t.converters.pxLogicalToNativeHorizontalConverter(1),n=t.converters.pxLogicalToNativeVerticalConverter(1),s=0;s<e.length&&s<o.length;s++)e[s]=r*e[s],o[s]=n*o[s];var a=e[0]+","+o[0];for(s=1;s<e.length&&s<o.length;s++)a+=" ",a+=e[s]+","+o[s];return a},o}();o.Shape=i}(t.Shapes||(t.Shapes={}))}(e.Controls||(e.Controls={}))}(AppMagic||(AppMagic={})),function(e){!function(e){!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.initView=function(t,o){var i=o.controlWidget.variantName,r=o.modelProperties.Width.getValue(),n=o.modelProperties.Height.getValue(),s=o.borderThickness?o.borderThickness.peek():o.modelProperties.BorderThickness.getValue(),a=r-s,c=n-s;o.innerPoints=ko.observable(this._getPoints(i,a,c,s/2)),o.outerPoints=ko.observable(this._getPoints(i,r,n,0)),e.prototype.initView.call(this,t,o)},t.prototype.disposeView=function(t,o){o.innerPoints(null),o.outerPoints(null),e.prototype.disposeView.call(this,t,o)},t.prototype.draw=function(e){var t=e.controlWidget.variantName,o=e.modelProperties.Width.getValue(),i=e.modelProperties.Height.getValue(),r=e.borderThickness?e.borderThickness.peek():e.modelProperties.BorderThickness.getValue(),n=o-r,s=i-r;e.innerPoints(this._getPoints(t,n,s,r/2)),e.outerPoints(this._getPoints(t,o,i,0))},t}(e.Shape);e.Polygon=t}(e.Shapes||(e.Shapes={}))}(e.Controls||(e.Controls={}))}(AppMagic||(AppMagic={})),function(e){!function(t){!function(t){var o=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return __extends(o,t),o.prototype.initView=function(e,o){o.innerCircleThickness=5;var i=.5*o.modelProperties.Width.getValue(),r=.5*o.modelProperties.Height.getValue();o.arrow={points:ko.observable(this._getArrowPoints(o))};var n=o.borderThickness?o.borderThickness.peek():o.modelProperties.BorderThickness.getValue();o.outerCircle={cx:ko.observable(i),cy:ko.observable(r),rx:ko.observable(i),ry:ko.observable(r),strokeWidth:ko.observable(n)};var s=n/2,a=s/2;o.innerCircle={cx:ko.observable(i),cy:ko.observable(r),rx:ko.observable(Math.ceil(i-s-a)),ry:ko.observable(Math.ceil(r-s-a)),strokeWidth:ko.observable(o.innerCircleThickness)},t.prototype.initView.call(this,e,o)},o.prototype.disposeView=function(e,o){o.arrow=null,o.innerCircle=null,o.outerCircle=null,t.prototype.disposeView.call(this,e,o)},o.prototype.onChangeFocusedBorderThickness=function(e,t){t.realized&&this.draw(t)},o.prototype.getFillComputed=function(t){return ko.computed((function(){var t=this.properties.Fill(),o=this.viewState.displayMode()===e.Constants.DisplayMode.View;return this.viewState.displayMode()===e.Constants.DisplayMode.Disabled?t=this.properties.DisabledFill():this.viewState.pressed()&&!o?t=this.properties.PressedFill():this.viewState.hovering()&&!o&&(t=this.properties.HoverFill()),null===t||""===t?"transparent":t}),t)},o.prototype.draw=function(e){e.arrow.points(this._getArrowPoints(e)),this._drawCircles(e)},o.prototype.focusHandler=function(e,t){e.initialized&&(e._isFocused(t),e.realized&&this.draw(e))},o.prototype._getArrowPoints=function(e){return"backArrow"===e.controlWidget.variantName?this._pointsForBackArrow(e):this._pointsForForwardArrow(e)},o.prototype._drawCircles=function(e){var t=e.borderThickness?e.borderThickness.peek():e.modelProperties.BorderThickness.getValue(),o=e.modelProperties.Width.getValue()/2,i=e.modelProperties.Height.getValue()/2;e.outerCircle.cx(o),e.outerCircle.cy(i),e.outerCircle.rx(o),e.outerCircle.ry(i),e.outerCircle.strokeWidth(t);var r=t/2,n=e.innerCircleThickness/2;e.innerCircle.cx(o),e.innerCircle.cy(i),e.innerCircle.rx(Math.ceil(o-r-n)),e.innerCircle.ry(Math.ceil(i-r-n)),e.innerCircle.strokeWidth(e.innerCircleThickness)},o.prototype._pointsForForwardArrow=function(e){var t=e.modelProperties.Width.getValue()-5,o=e.modelProperties.Height.getValue()-5,i=.25*t+2.5,r=.45*o+2.5,n=.57*t+2.5,s=r,a=.42*t+2.5,c=.3*o+2.5,l=.57*t+2.5,p=c,u=.8*t+2.5,h=.5*o+2.5,d=l,g=.7*o+2.5,f=a,y=g,v=n,b=.55*o+2.5,_=i,C=b;return e.innerCircleThickness=(b-r)/2,this._formatPoints([i,n,a,l,u,d,f,v,_],[r,s,c,p,h,g,y,b,C],!0)},o.prototype._pointsForBackArrow=function(e){var t=e.modelProperties.Width.getValue()-5,o=e.modelProperties.Height.getValue()-5,i=.2*t+2.5,r=.5*o+2.5,n=.42*t+2.5,s=.3*o+2.5,a=.57*t+2.5,c=s,l=.42*t+2.5,p=.45*o+2.5,u=.75*t+2.5,h=p,d=u,g=.55*o+2.5,f=l,y=g,v=a,b=.7*o+2.5,_=n,C=b;return e.innerCircleThickness=(g-p)/2,this._formatPoints([i,n,a,l,u,d,f,v,_],[r,s,c,p,h,g,y,b,C],!0)},o}(t.Shape);t.Arrow=o}(t.Shapes||(t.Shapes={}))}(e.Controls||(e.Controls={}))}(AppMagic||(AppMagic={})),function(e){!function(e){!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.initView=function(t,o){var i=.5*o.modelProperties.Width.getValue(),r=.5*o.modelProperties.Height.getValue(),n=(o.borderThickness?o.borderThickness.peek():o.modelProperties.BorderThickness.getValue())/2;o.innerShape={cx:ko.observable(i),cy:ko.observable(r),rx:ko.observable(Math.ceil(i-n)),ry:ko.observable(Math.ceil(r-n))},o.outerShape={cx:ko.observable(i),cy:ko.observable(r),rx:ko.observable(i),ry:ko.observable(r)},e.prototype.initView.call(this,t,o)},t.prototype.disposeView=function(t,o){o.innerShape=null,o.outerShape=null,e.prototype.disposeView.call(this,t,o)},t.prototype.draw=function(e){var t=.5*e.modelProperties.Width.getValue(),o=.5*e.modelProperties.Height.getValue(),i=(e.borderThickness?e.borderThickness.peek():e.modelProperties.BorderThickness.getValue())/2;e.innerShape.cx(t),e.innerShape.cy(o),e.innerShape.rx(Math.ceil(t-i)),e.innerShape.ry(Math.ceil(o-i)),e.outerShape.cx(t),e.outerShape.cy(o),e.outerShape.rx(t),e.outerShape.ry(o)},t}(e.Shape);e.Circle=t}(e.Shapes||(e.Shapes={}))}(e.Controls||(e.Controls={}))}(AppMagic||(AppMagic={})),function(e){!function(e){!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype._getPoints=function(e,t,o,i){var r=.25*t+i,n=i,s=i,a=.5*o+i,c=.25*t+i,l=o+i,p=.75*t+i,u=o+i,h=t+i,d=.5*o+i,g=.75*t+i,f=i;return this._formatPoints([r,s,c,p,h,g],[n,a,l,u,d,f])},t}(e.Polygon);e.Hexagon=t}(e.Shapes||(e.Shapes={}))}(e.Controls||(e.Controls={}))}(AppMagic||(AppMagic={})),function(e){!function(e){!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype._getPoints=function(e,t,o,i){var r=.3*t,n=.3*o,s=.7*t,a=.7*o,c=r+i,l=i,p=i,u=n+i,h=i,d=a+i,g=r+i,f=o+i,y=s+i,v=o+i,b=t+i,_=a+i,C=t+i,P=n+i,m=s+i,k=i;return this._formatPoints([c,p,h,g,y,b,C,m],[l,u,d,f,v,_,P,k])},t}(e.Polygon);e.Octagon=t}(e.Shapes||(e.Shapes={}))}(e.Controls||(e.Controls={}))}(AppMagic||(AppMagic={})),function(e){!function(e){!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.initView=function(t,o){var i=o.controlWidget.variantName,r=o.modelProperties.Width.getValue(),n=o.modelProperties.Height.getValue(),s=o.borderThickness?o.borderThickness.peek():o.modelProperties.BorderThickness.getValue();o.innerPath=ko.observable(this._getPath(i,r,n)),o.outerPath=ko.observable(this._getPath(i,r,n,s/2)),e.prototype.initView.call(this,t,o)},t.prototype.disposeView=function(t,o){o.innerPath(null),o.outerPath(null),e.prototype.disposeView.call(this,t,o)},t.prototype.draw=function(e){var t=e.controlWidget.variantName,o=e.modelProperties.Width.getValue(),i=e.modelProperties.Height.getValue(),r=e.borderThickness?e.borderThickness.peek():e.modelProperties.BorderThickness.getValue();e.innerPath(this._getPath(t,o,i)),e.outerPath(this._getPath(t,o,i,r/2))},t.prototype._getPath=function(e,t,o,i){switch(void 0===i&&(i=0),e){case"quarterCircle":return this._getPathForQuarterCircle(t,o,i);case"threequarterCircle":return this._getPathForThreeQuarterCircle(t,o,i);default:return this._getPathForHalfCircle(t,o,i)}},t.prototype._getPathForHalfCircle=function(e,t,o){void 0===o&&(o=0);var i=e/2,r=t/2;return"M".concat(i,",0 L").concat(i,",").concat(t," A ").concat(i,",").concat(r," 0 0,1 ").concat(i,",0 L").concat(i+o,",0")},t.prototype._getPathForQuarterCircle=function(e,t,o){void 0===o&&(o=0);var i=e/2,r=t/2;return"M".concat(i,",0 L").concat(i,",").concat(r," L0,").concat(r," A ").concat(i,",").concat(r," 0 0,1 ").concat(i,",0 L").concat(i+o,",0")},t.prototype._getPathForThreeQuarterCircle=function(e,t,o){void 0===o&&(o=0);var i=e/2,r=t/2;return"M".concat(i,",0 L").concat(i,",").concat(r," L").concat(e,",").concat(r," A ").concat(i,",").concat(r," 0 1,1 ").concat(i,",0 L").concat(i+o,",0")},t}(e.Shape);e.PartialCircle=t}(e.Shapes||(e.Shapes={}))}(e.Controls||(e.Controls={}))}(AppMagic||(AppMagic={})),function(e){!function(e){!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype._getPoints=function(e,t,o,i){var r=.5*t+i,n=i,s=i,a=.4*o+i,c=.2*t+i,l=o+i,p=.8*t+i,u=o+i,h=t+i,d=.4*o+i;return this._formatPoints([r,s,c,p,h],[n,a,l,u,d])},t}(e.Polygon);e.Pentagon=t}(e.Shapes||(e.Shapes={}))}(e.Controls||(e.Controls={}))}(AppMagic||(AppMagic={})),function(e){!function(e){!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype._getPoints=function(e,t,o,i){var r=i,n=i,s=i,a=o+i,c=t+i,l=o+i,p=t+i,u=i;return this._formatPoints([r,s,c,p],[n,a,l,u])},t}(e.Polygon);e.Rectangle=t}(e.Shapes||(e.Shapes={}))}(e.Controls||(e.Controls={}))}(AppMagic||(AppMagic={})),function(e){!function(e){!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype._getPoints=function(e,t,o,i){switch(e){case"star6":return this._getPointsSixStar(t,o,i);case"star8":return this._getPointsEightStar(t,o,i);case"star12":return this._getPointsTwelveStar(t,o,i);default:return this._getPointsFiveStar(t,o,i)}},t.prototype._getPointsFiveStar=function(e,t,o){var i=.5*e+o,r=o,n=.38*e+o,s=.38*t+o,a=o,c=.38*t+o,l=.31*e+o,p=.62*t+o,u=.19*e+o,h=t+o,d=.5*e+o,g=.76*t+o,f=.81*e+o,y=t+o,v=.69*e+o,b=.62*t+o,_=e+o,C=.38*t+o,P=.62*e+o,m=.38*t+o;return this._formatPoints([i,n,a,l,u,d,f,v,_,P],[r,s,c,p,h,g,y,b,C,m])},t.prototype._getPointsSixStar=function(e,t,o){var i=.5*e+o,r=o,n=.35*e+o,s=.25*t+o,a=.07*e+o,c=.25*t+o,l=.21*e+o,p=.5*t+o,u=.07*e+o,h=.75*t+o,d=.35*e+o,g=.75*t+o,f=.5*e+o,y=t+o,v=.65*e+o,b=.75*t+o,_=.93*e+o,C=.75*t+o,P=.79*e+o,m=.5*t+o,k=.93*e+o,S=.25*t+o,w=.65*e+o,T=.25*t+o;return this._formatPoints([i,n,a,l,u,d,f,v,_,P,k,w],[r,s,c,p,h,g,y,b,C,m,S,T])},t.prototype._getPointsEightStar=function(e,t,o){var i=.5*e+o,r=o,n=.41*e+o,s=.28*t+o,a=.15*e+o,c=.15*t+o,l=.28*e+o,p=.41*t+o,u=o,h=.5*t+o,d=.28*e+o,g=.59*t+o,f=.15*e+o,y=.85*t+o,v=.41*e+o,b=.72*t+o,_=.5*e+o,C=t+o,P=.59*e+o,m=.72*t+o,k=.85*e+o,S=.85*t+o,w=.72*e+o,T=.59*t+o,M=e+o,V=.5*t+o,A=.72*e+o,x=.41*t+o,H=.85*e+o,F=.15*t+o,B=.59*e+o,I=.28*t+o;return this._formatPoints([i,n,a,l,u,d,f,v,_,P,k,w,M,A,H,B],[r,s,c,p,h,g,y,b,C,m,S,T,V,x,F,I])},t.prototype._getPointsTwelveStar=function(e,t,o){var i=.5*e+o,r=o,n=.42*e+o,s=.2*t+o,a=.25*e+o,c=.07*t+o,l=.28*e+o,p=.28*t+o,u=.07*e+o,h=.25*t+o,d=.2*e+o,g=.42*t+o,f=o,y=.5*t+o,v=.2*e+o,b=.58*t+o,_=.07*e+o,C=.75*t+o,P=.28*e+o,m=.72*t+o,k=.25*e+o,S=.93*t+o,w=.42*e+o,T=.8*t+o,M=.5*e+o,V=t+o,A=.58*e+o,x=.8*t+o,H=.75*e+o,F=.93*t+o,B=.72*e+o,I=.72*t+o,D=.93*e+o,L=.75*t+o,W=.8*e+o,E=.58*t+o,N=e+o,z=.5*t+o,O=.8*e+o,q=.42*t+o,Q=.93*e+o,R=.25*t+o,Z=.72*e+o,X=.28*t+o,Y=.75*e+o,j=.07*t+o,G=.58*e+o,J=.2*t+o;return this._formatPoints([i,n,a,l,u,d,f,v,_,P,k,w,M,A,H,B,D,W,N,O,Q,Z,Y,G],[r,s,c,p,h,g,y,b,C,m,S,T,V,x,F,I,L,E,z,q,R,X,j,J])},t}(e.Polygon);e.Star=t}(e.Shapes||(e.Shapes={}))}(e.Controls||(e.Controls={}))}(AppMagic||(AppMagic={})),function(e){!function(e){!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype._getPoints=function(e,t,o,i){return"rightAngled"===e?this._pointsForRightAngled(t,o,i):this._pointsForEquilateral(t,o,i)},t.prototype._pointsForEquilateral=function(e,t,o){var i=.5*e+o,r=o,n=o,s=t+o,a=e+o,c=t+o;return this._formatPoints([i,n,a],[r,s,c])},t.prototype._pointsForRightAngled=function(e,t,o){var i=o,r=o,n=o,s=t+o,a=e+o,c=t+o;return this._formatPoints([i,n,a],[r,s,c])},t}(e.Polygon);e.Triangle=t}(e.Shapes||(e.Shapes={}))}(e.Controls||(e.Controls={}))}(AppMagic||(AppMagic={}));
//# sourceMappingURL=Shapes.js.map