/*! For license information please see Core.IO.js.LICENSE.txt */
(function(){return this?this:window}())["@pa-client/core-io"]=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=46)}([function(e,t){!function(){e.exports=function(){return this?this:window}()["@pa-client/core"]}()},function(e,t,r){"use strict";r.r(t),r.d(t,"convertBlobToArrayBuffer",(function(){return o})),r.d(t,"convertBlobToDataUriAsync",(function(){return i})),r.d(t,"dataURItoBlob",(function(){return a})),r.d(t,"base64ToArrayBuffer",(function(){return s})),r.d(t,"base64ToBlob",(function(){return c})),r.d(t,"base64ToText",(function(){return u})),r.d(t,"convertArrayBufferToString",(function(){return l})),r.d(t,"arrayBufferToBase64",(function(){return f})),r.d(t,"IBufferToArrayBuffer",(function(){return d})),r.d(t,"arrayBufferToIBuffer",(function(){return p})),r.d(t,"blobToString",(function(){return y})),r.d(t,"blobToString2",(function(){return g})),r.d(t,"stringToArrayBuffer",(function(){return h})),r.d(t,"arrayBufferToString",(function(){return v})),r.d(t,"arrayBufferToTextAsync",(function(){return m})),r.d(t,"fileToByteArrayAsync",(function(){return _}));var n=r(0);function o(e){var t=Object(n.createCompletablePromise)(),r=new FileReader;return r.onload=function(){return t.complete(r.result)},r.readAsArrayBuffer(e),t.promise}function i(e){if(e.type||Object(n.errorEx)("Conversion.convertBlobToDataUriAsync",{error:Object(n.throwInline)(new Error("Missing content type."))}),0===e.size)return Promise.resolve(new n.Url(Object(n.formatDataUri)("",e.type)));var t=Object(n.createCompletablePromise)(),r=new FileReader;return r.onloadend=function(){if(r.readyState===FileReader.DONE&&r.result){var e=r.result,o=new n.Url(e);t.complete(o)}else t.error("Error occurred trying to read blob.")},r.readAsDataURL(e),t.promise}function a(e){var t,r=Object(n.tryParseDataUriComponents)(e);if(!r)throw new Error("Invalid data uri.");t=r.isBase64?atob(r.data):decodeURI(r.data);for(var o=new Uint8Array(t.length),i=0;i<t.length;i++)o[i]=t.charCodeAt(i);return new Blob([o],{type:r.contentType})}function s(e){for(var t=window.atob(e),r=t.length,n=new Uint8Array(r),o=0;o<r;o++){var i=t.charCodeAt(o);n[o]=i}return n.buffer}function c(e,t){var r=s(e);return new Blob([r],{type:t})}function u(e){return Object(n.tryDecodeBase64String)(e)}function l(e){if(e.byteLength<=65535)return String.fromCharCode.apply(null,new Uint8Array(e));for(var t="",r=0,n=new Uint8Array(e);r<n.byteLength;r++)t+=String.fromCharCode(n[r]);return t}function f(e){return window.btoa(l(e))}function d(e){var t=new Uint8Array(e.length),r=Windows.Storage.Streams.DataReader.fromBuffer(e);r.readBytes(t),r.close();for(var n=new ArrayBuffer(t.byteLength),o=new Uint8Array(n),i=0;i<t.byteLength;i++)o[i]=t[i];return n}function p(e){var t=new Uint8Array(e);return Windows.Security.Cryptography.CryptographicBuffer.createFromByteArray(t)}function y(e){return __awaiter(this,void 0,Promise,(function(){var t,r;return __generator(this,(function(n){switch(n.label){case 0:return t=URL.createObjectURL(e),[4,WinJS.xhr({url:t,responseType:"text"})];case 1:return r=n.sent(),URL.revokeObjectURL(t),[2,r.responseText]}}))}))}function g(e){var t=new FileReader,r=Object(n.createCompletablePromise)();return t.onload=function(){for(var e=t.result,n="",o=0;o<e.byteLength-1;o+=32768){var i=Math.min(32768,e.byteLength-o);n=n.concat(String.fromCharCode.apply(null,new Uint8Array(e,o,i)))}r.complete(n)},t.readAsArrayBuffer(e),r.promise}function h(e){for(var t=new ArrayBuffer(2*e.length),r=new Uint16Array(t),n=0,o=e.length;n<o;n++)r[n]=e.charCodeAt(n);return t}function v(e){return String.fromCharCode.apply(null,new Uint16Array(e))}function m(e){return y(new Blob([e]))}function _(e){if(!window.File||!window.FileReader)return Promise.resolve(null);var t=Object(n.createCompletablePromise)(),r=new FileReader;return r.onload=function(){var e=null,n=r.result;null!==n&&(e=new Uint8Array(n,0,n.byteLength)),t.complete(e)},r.readAsArrayBuffer(e),t.promise}},function(e,t,r){"use strict";var n;r.r(t),r.d(t,"CreationCollisionOption",(function(){return n})),function(e){e[e.ThrowErrorIfExists=0]="ThrowErrorIfExists",e[e.ReturnExistingIfExists=1]="ReturnExistingIfExists",e[e.OverwriteIfExists=2]="OverwriteIfExists"}(n||(n={}))},function(e,t,r){"use strict";r.r(t),r.d(t,"AppDataFolderLocator",(function(){return n}));var n=function(){return function(){}}()},function(e,t,r){"use strict";r.r(t),r.d(t,"IEncryptedStorageKey",(function(){return n})),r.d(t,"IFileSystemKey",(function(){return o})),r.d(t,"IAsyncSettingsProviderKey",(function(){return i}));var n=Core.Loader.TypeKey.createForInterface("Core.IO.Web.IEncryptedStorage"),o=Core.Loader.TypeKey.createForInterface("AppMagic.Runtime.App.IFileSystem"),i=Core.Loader.TypeKey.createForInterface("Core.IO.SettingsProviders.IAsyncSettingsProvider")},function(e,t,r){"use strict";r.r(t),r.d(t,"TempAppFolder",(function(){return n})),r.d(t,"TempFolder",(function(){return o})),r.d(t,"UserSavedDataFolder",(function(){return i}));var n="TempAppFolder",o="Temp",i="UserSavedData"},function(e,t,r){"use strict";r.r(t),r.d(t,"WindowsUtility",(function(){return n}));r(0);var n=function(){function e(){}return e.fixPathResolution=function(e){var t=Windows.Storage.ApplicationData.current.localFolder.path;return e=e.replace(t,"ms-appdata:///local").replace(/\\/g,"/")},e}()},function(e,t,r){"use strict";r.r(t),r.d(t,"CordovaStorageFile",(function(){return a}));var n=r(0),o=r(1),i=r(6),a=function(){function e(e){Object(n.checkValue)(e),this._file=e,this._pendingWritePromise=Promise.resolve(!0)}return Object.defineProperty(e.prototype,"name",{get:function(){return this._file.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return WinJS.Utilities.hasWinRT?i.WindowsUtility.fixPathResolution(this._file.toURL()):this._file.toURL()},enumerable:!1,configurable:!0}),e.prototype.copyAsync=function(t,r){var o=this;Object(n.checkValue)(t);var i=r||this._file.name;return new Promise((function(r,a){o._file.copyTo(t.folder,i,(function(t){r(new e(t))}),(function(){a(Object(n.throwInline)("Copy file failed"))}))}))},e.prototype.deleteAsync=function(){var e=this;return new Promise((function(t,r){e._file.remove((function(){t()}),(function(){r(Object(n.throwInline)("Delete file failed"))}))}))},e.prototype.writeTextAsync=function(e){var t=this;return this._pendingWritePromise=this._pendingWritePromise.then((function(){return new Promise((function(r,o){t._file.createWriter((function(t){t.onwriteend=function(){r(!0)},t.onerror=function(){r(!1)};var n=new Blob([e],{type:"text/plain"});t.write(n)}),(function(){o(Object(n.throwInline)("Unable to create a filewriter"))}))}))}))},e.prototype.readTextAsync=function(){var e=this;return new Promise((function(t,r){e._file.file((function(e){var o=new FileReader;o.onload=function(){t(o.result)},o.onerror=function(){r(Object(n.throwInline)("File read as text failed"))},o.readAsText(e)}))}))},e.prototype.writeBlobAsync=function(e){var t=this;return Object(n.checkValue)(e),this._pendingWritePromise=this._pendingWritePromise.then((function(){return new Promise((function(r,o){t._file.createWriter((function(t){t.onwriteend=function(){r(!0)},t.onerror=function(){r(!1)},t.write(e)}),(function(){o(Object(n.throwInline)("File write blob failed"))}))}))}))},e.prototype.readBlobAsync=function(){var e=this;return new Promise((function(t,r){e._file.file((function(e){var o=new FileReader;o.onload=function(){if(e.type&&Object(n.isString)(e.type)){var r=e.type.toLowerCase();Object(n.isMimeType)(r)?t(new Blob([o.result],{type:r})):null!==Object(n.tryGetMimeType)(r)?t(new Blob([o.result],{type:Object(n.tryGetMimeType)(r)})):t(new Blob([o.result]))}else t(new Blob([o.result]))},o.onerror=function(){r(Object(n.throwInline)("File read blob failed"))},o.readAsArrayBuffer(e)}))}))},e.prototype.writeArrayBufferAsync=function(e){var t=new Blob([e]);return this.writeBlobAsync(t)},e.prototype.readArrayBufferAsync=function(){return this.readBlobAsync().then((function(e){return Object(o.convertBlobToArrayBuffer)(e)}))},e.prototype.getPlatformSpecificObject=function(){return this._file},e.prototype._getParentAsync=function(){var e=this;return new Promise((function(t,r){e._file.getParent((function(e){t(e)}),(function(){r(Object(n.throwInline)("File get parent failed"))}))}))},e.prototype.renameFileAsync=function(e){var t=this,r=Object(n.createCompletablePromise)();return this._getParentAsync().then((function(n){t._file.moveTo(n,e,(function(e){return r.complete(e)}),(function(e){return r.error(e)}))})),r.promise},e}()},function(e,t,r){"use strict";r.r(t),r.d(t,"CordovaStorageFolder",(function(){return s}));var n=r(0),o=r(7),i=r(2),a=r(6),s=function(){function e(e,t){this._includePath=!1,Object(n.checkValue)(e),this._folder=e,this._includePath=t}return Object.defineProperty(e.prototype,"name",{get:function(){return this._folder.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"folder",{get:function(){return this._folder},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return WinJS.Utilities.hasWinRT?a.WindowsUtility.fixPathResolution(this._folder.toURL()):this._folder.toURL()},enumerable:!1,configurable:!0}),e.prototype.copyAsync=function(t){var r=this;Object(n.checkValue)(t);var o=this._folder.name;return new Promise((function(i,a){r._folder.copyTo(t.folder,o,(function(t){i(new e(t,r._includePath))}),(function(){a(Object(n.throwInline)("Copy folder failed"))}))}))},e.prototype.getParentAsync=function(){var t=this;return this._getParentAsync().then((function(r){return new e(r,t._includePath)}))},e.prototype.createFolderAsync=function(t,r){var n=this,o=!1;return this.folderExistsAsync(t).then((function(e){if(o=e){if(r===i.CreationCollisionOption.OverwriteIfExists)return n.getFolderAsync(t).then((function(e){return e.deleteAsync()}));if(r===i.CreationCollisionOption.ThrowErrorIfExists)throw new Error("Unable to create folder '"+t+"' because it already exists")}return Promise.resolve()})).then((function(){return o&&r===i.CreationCollisionOption.ReturnExistingIfExists?n.getFolderAsync(t):n._createFolderAsync(t).then((function(t){return new e(t,n._includePath)}))}))},e.prototype.deleteAsync=function(){var e=this;return Object(n.verbose)("deleteAsync called on folder: "+this.name),new Promise((function(t,r){if(Object(n.getCordovaPlatformId)()===n.CordovaPlatformId.Android)return Promise.resolve(SienaPlugin.removeFolderRecursively(e._folder.nativeURL)).then((function(){t()}),(function(t){Object(n.verbose)("Delete folder "+e.name+" failed"),r(Object(n.throwInline)("Delete folder "+e.name+" failed"))}));e._folder.removeRecursively((function(){Object(n.verbose)("Delete folder "+e.name+" succeeded"),t()}),(function(){Object(n.verbose)("Delete folder "+e.name+" failed"),r(Object(n.throwInline)("Delete folder "+e.name+" failed"))}))}))},e.prototype.folderExistsAsync=function(e){var t=this;return new Promise((function(r){t._folder.getDirectory(e,{create:!1,includePath:t._includePath},(function(e){r(!0)}),(function(){r(!1)}))}))},e.prototype.getFolderAsync=function(t){var r=this;return Object(n.checkValue)(t),this._getFolderAsync(t).then((function(t){return new e(t,r._includePath)}))},e.prototype.getOrCreateFolder=function(e){var t=this;return this.folderExistsAsync(e).then((function(r){return r?t.getFolderAsync(e):t.createFolderAsync(e)}))},e.prototype.getOrCreateFile=function(e){var t=this;return this.fileExistsAsync(e).then((function(r){return r?t.getFileAsync(e):t.createFileAsync(e)}))},e.prototype.createFileAsync=function(e,t){var r=this;return this.fileExistsAsync(e).then((function(n){if(!n)return r._createFileAsync(e).then((function(e){return new o.CordovaStorageFile(e)}));switch(t){case i.CreationCollisionOption.OverwriteIfExists:return r.getFileAsync(e).then((function(e){return e.deleteAsync()})).then((function(){return r._createFileAsync(e)})).then((function(e){return new o.CordovaStorageFile(e)}));case i.CreationCollisionOption.ReturnExistingIfExists:return r.getFileAsync(e);default:throw new Error("Unable to create file because it already exists.")}}))},e.prototype.getFileAsync=function(e){return Object(n.checkValue)(e),this._getFileAsync(e).then((function(e){return new o.CordovaStorageFile(e)}))},e.prototype.fileExistsAsync=function(e){var t=this;return Object(n.checkValue)(e),new Promise((function(r){t._folder.getFile(e,{create:!1,includePath:t._includePath},(function(e){r(!0)}),(function(){r(!1)}))}))},e.prototype._createFolderAsync=function(e){var t=this;return Object(n.checkValue)(e),new Promise((function(r,n){t._folder.getDirectory(e,{create:!0,includePath:t._includePath},(function(e){r(e)}),(function(e){n(new Error("Folder create directory failed"))}))}))},e.prototype._getFolderAsync=function(e){var t=this;return new Promise((function(r,o){t._folder.getDirectory(e,{create:!1,includePath:t._includePath},(function(e){r(e)}),(function(){o(Object(n.throwInline)("Folder get directory failed"))}))}))},e.prototype._getParentAsync=function(){var e=this;return new Promise((function(t,r){e._folder.getParent((function(e){t(e)}),(function(){r(Object(n.throwInline)("Folder get parent failed"))}))}))},e.prototype._createFileAsync=function(e){var t=this;return new Promise((function(r,o){t._folder.getFile(e,{create:!0,includePath:t._includePath},(function(e){r(e)}),(function(){o(Object(n.throwInline)("Folder create file failed"))}))}))},e.prototype._getFileAsync=function(e){var t=this;return new Promise((function(r,o){t._folder.getFile(e,{create:!1,includePath:t._includePath},(function(e){r(e)}),(function(){o(Object(n.throwInline)("Folder get file failed"))}))}))},e.prototype.renameFolder=function(e){var t=this,r=Object(n.createCompletablePromise)();return this._getParentAsync().then((function(n){t._folder.moveTo(n,e,(function(e){return r.complete(e)}),(function(e){return r.error(e)}))})),r.promise},e}()},function(e,t,r){"use strict";r.r(t),r.d(t,"pathSeparatorCharacter",(function(){return i})),r.d(t,"alternatePathSeparatorCharacter",(function(){return a})),r.d(t,"getFullPath",(function(){return s})),r.d(t,"combine",(function(){return c})),r.d(t,"combineFilesystemPath",(function(){return u})),r.d(t,"createFileFromRelativePathAsync",(function(){return l})),r.d(t,"createFolderFromRelativePathAsync",(function(){return f}));var n=r(0),o=r(2),i="/",a="\\";function s(e){Object(n.checkValue)(e);var t=document.createElement("a");return t.href=e,t.href}function c(e,t){return Object(n.checkValue)(e),Object(n.checkValue)(t),e+i+t}function u(e,t){return Object(n.checkValue)(e),Object(n.checkValue)(t),WinJS.Utilities.hasWinRT?e+a+t:e+i+t}function l(e,t,r){void 0===r&&(r=o.CreationCollisionOption.ThrowErrorIfExists),Object(n.checkValue)(e),Object(n.checkValue)(t);var a,s=(t=d(t)).substring(0,t.lastIndexOf(i));a=0===s.length?Promise.resolve(e):f(e,s);var c=t.split(i),u=c[c.length-1];return 0===u.length?a.then((function(){return null})):a.then((function(e){return e.createFileAsync(u,r)}))}function f(e,t){Object(n.checkValue)(e),Object(n.checkValue)(t);for(var r=(t=d(t)).split(i),o=function(e,t){return t.getOrCreateFolder(e)},a=Promise.resolve(e),s=0,c=r.length;s<c;s++){var u=r[s];a=a.then(o.bind(null,u))}return a}function d(e){return e.replace(a,i)}},function(e,t,r){"use strict";r.r(t),r.d(t,"FileSystem",(function(){return c}));var n=r(0),o=r(4),i=r(5),a=r(3),s=new n.Lazy((function(){return n.ObjectFactory.instance.getSingleton(o.IFileSystemKey)})),c=function(){function e(){}return Object.defineProperty(e,"kind",{get:function(){return s.value.kind},enumerable:!1,configurable:!0}),e.getAppDataFolderAsync=function(e){return s.value.getAppDataFolderAsync(e).then((function(t){return a.AppDataFolderLocator.instance&&!e?a.AppDataFolderLocator.instance.locateAppDataFolder(t):Promise.resolve(t)}))},e.getUserDataFolderAsync=function(t){return e.getAppDataFolderAsync(t).then((function(e){return a.AppDataFolderLocator.instance?e.getOrCreateFolder(i.UserSavedDataFolder):Promise.resolve(e)}))},e.getAppTemporaryFolderAsync=function(){return s.value.getAppTemporaryFolderAsync()},e.getInstalledFolderAsync=function(){return s.value.getInstalledFolderAsync()},e.getFileFromPath=function(e){return s.value.getFileFromPath(e)},e.getOrCreateTempFolder=function(){return e.getAppDataFolderAsync().then((function(e){return e.getOrCreateFolder(i.TempFolder)}))},e}()},function(e,t,r){"use strict";r.r(t),r.d(t,"MemorySettingsProvider",(function(){return o}));var n=r(0),o=function(){function e(){this._dictionary=Object(n.HashTableUtility_create)()}return e.prototype.load=function(){return Promise.resolve(!0)},e.prototype.save=function(){return Promise.resolve(!0)},e.prototype.getValue=function(e){var t=this._dictionary[e];if(Object(n.isUndefined)(t))return null;var r=null;try{r=JSON.parse(this._dictionary[e])}catch(e){}return r},e.prototype.removeValue=function(e){delete this._dictionary[e]},e.prototype.setValue=function(e,t){this._dictionary[e]=JSON.stringify(t)},e.prototype.clear=function(){this._dictionary=Object(n.HashTableUtility_create)()},e}()},function(e,t,r){"use strict";r.r(t),r.d(t,"WrappedStorageFile",(function(){return a}));var n=r(0),o=r(1),i=r(6),a=function(){function e(e){Object(n.checkValue)(e),this._file=e,this._pendingWritePromise=Promise.resolve(!0)}return Object.defineProperty(e.prototype,"name",{get:function(){return this._file.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return i.WindowsUtility.fixPathResolution(this._file.path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"storageFile",{get:function(){return this._file},enumerable:!1,configurable:!0}),e.prototype.copyAsync=function(t,r){var o=this;return Object(n.checkValue)(t),r=r||this._file.name,e._getStorageFolderFromFolder(t).then((function(e){return o._file.copyAsync(e,r,Windows.Storage.NameCollisionOption.replaceExisting)})).then((function(t){return new e(t)}))},e.prototype.deleteAsync=function(){return this._file.deleteAsync()},e.prototype.writeTextAsync=function(e){return this._deferUpdatesAndNotifyAfterWrite(Windows.Storage.FileIO.writeTextAsync,e)},e.prototype.readTextAsync=function(){return Windows.Storage.FileIO.readTextAsync(this._file)},e.prototype.writeBlobAsync=function(t){var r=this;return Object(n.checkValue)(t),e._convertBlobToBuffer(t).then((function(e){return r._deferUpdatesAndNotifyAfterWrite(Windows.Storage.FileIO.writeBufferAsync,e)}))},e.prototype.readBlobAsync=function(){var e=this;return this._file.openReadAsync().then((function(t){return MSApp.createBlobFromRandomAccessStream(t.contentType||e._file.contentType,t)}))},e.prototype.writeArrayBufferAsync=function(e){var t=new Blob([e]);return this.writeBlobAsync(t)},e.prototype.readArrayBufferAsync=function(){return Windows.Storage.FileIO.readBufferAsync(this._file).then((function(e){return Object(o.IBufferToArrayBuffer)(e)}))},e.prototype.getPlatformSpecificObject=function(){return this._file},e.prototype.renameFileAsync=function(e){},e._convertBlobToBuffer=function(e){Object(n.checkValue)(e);var t=URL.createObjectURL(e);return WinJS.xhr({url:t,responseType:"blob"}).then((function(e){var r=e.response.msDetachStream(),n=r.size,o=new Windows.Storage.Streams.Buffer(n);return r.readAsync(o,n,Windows.Storage.Streams.InputStreamOptions.none).then((function(e){return URL.revokeObjectURL(t),e}))}))},e._getStorageFolderFromFolder=function(e){var t=e;return Windows.Storage.StorageFolder.getFolderFromPathAsync(t.windowsStorageFolder.path)},e.prototype._deferUpdatesAndNotifyAfterWrite=function(e,t){var r=this;return Windows.Storage.CachedFileManager.deferUpdates(this._file),this._pendingWritePromise=this._pendingWritePromise.then((function(){return e(r._file,t).then((function(){return Windows.Storage.CachedFileManager.completeUpdatesAsync(r._file).then((function(e){return e===Windows.Storage.Provider.FileUpdateStatus.complete}))}),(function(){return!1}))}))},e}()},function(e,t,r){"use strict";r.r(t),r.d(t,"FileLogWriterBase",(function(){return o}));var n=r(19),o=function(){function e(){this._logFileName=n.FileLogWriter.LogFileName+Date.now().toString()+".log"}return e.LogFileName="core_log",e.LogFileEnterDelimiter="\n",e}()},function(e,t,r){"use strict";r.r(t),r.d(t,"tryGetFolderAsync",(function(){return n})),r.d(t,"tryReadTextFileAsync",(function(){return o})),r.d(t,"tryReadJsonFileAsync",(function(){return i})),r.d(t,"deleteFolderFromFolderIfExists",(function(){return a})),r.d(t,"deleteFileFromFolderIfExists",(function(){return s}));r(0);function n(e,t){return null===e?Promise.resolve(null):e.getFolderAsync(t).then(null,(function(e){return Promise.resolve(null)}))}function o(e,t){return null===e?Promise.resolve(null):e.getFileAsync(t).then((function(e){return e.readTextAsync()})).then(null,(function(e){return Promise.resolve(null)}))}function i(e,t){return o(e,t).then((function(e){if(null===e)return null;try{return JSON.parse(e)}catch(e){return null}}))}function a(e,t){return e.folderExistsAsync(t).then((function(r){return r&&e.getFolderAsync(t)})).then((function(e){return e&&e.deleteAsync()}))}function s(e,t){return e.fileExistsAsync(t).then((function(r){return r&&e.getFileAsync(t)})).then((function(e){return e&&e.deleteAsync()}))}},function(e,t,r){"use strict";r.r(t),r.d(t,"LocalStorageSettingsProvider",(function(){return i}));var n=r(0),o=r(11),i=function(){function e(){}return e.prototype.load=function(){return Promise.resolve(!0)},e.prototype.save=function(){return Promise.resolve(!0)},e.prototype.getValue=function(e){var t,r=null;try{t=window.localStorage[e]}catch(t){return this.backupInMemorySettingProvider.getValue(e)}if(Object(n.isUndefined)(t))return null;try{r=JSON.parse(window.localStorage[e])}catch(e){}return r},e.prototype.removeValue=function(e){try{window.localStorage.removeItem(e)}catch(t){this.backupInMemorySettingProvider.removeValue(e)}},e.prototype.setValue=function(e,t){try{window.localStorage.setItem(e,JSON.stringify(t))}catch(r){this.backupInMemorySettingProvider.setValue(e,t)}},e.prototype.clear=function(){try{this.backupInMemorySettingProvider.clear(),window.localStorage.clear()}catch(e){}},Object.defineProperty(e.prototype,"backupInMemorySettingProvider",{get:function(){return Object(n.warning)("LocalStorageSettingsProvider.backupInMemorySettingProvider","Unable to acquire the local storage. Using in memory storage as a backup."),this._backupInMemorySettingProvider||(this._backupInMemorySettingProvider=new o.MemorySettingsProvider)},enumerable:!1,configurable:!0}),e}()},function(e,t,r){"use strict";r.r(t),r.d(t,"WrappedStorageFolder",(function(){return s}));var n=r(0),o=r(2),i=r(6),a=r(12),s=function(){function e(e){Object(n.checkValue)(e),this._folder=e}return Object.defineProperty(e.prototype,"name",{get:function(){return this._folder.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"folder",{get:function(){return this._folder},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return i.WindowsUtility.fixPathResolution(this._folder.path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"windowsStorageFolder",{get:function(){return this._folder},enumerable:!1,configurable:!0}),e.prototype.getParentAsync=function(){return this._folder.getParentAsync().then((function(t){return new e(t)}))},e.prototype.createFolderAsync=function(t,r){Object(n.isUndefined)(r)&&(r=o.CreationCollisionOption.OverwriteIfExists);var i=this._mapToWindowsCollisionOption(r);return this._folder.createFolderAsync(t,i).then((function(t){return new e(t)}))},e.prototype.deleteAsync=function(){return this._folder.deleteAsync().then(n.noOpFn)},e.prototype.copyAsync=function(t){var r;Object(n.checkValue)(t);var o,i=this._folder.createItemQuery(),s=[];return t.createFolderAsync(this.name).then((function(e){return r=e})).then((function(){return i.getItemCountAsync()})).then((function(e){return o=e})).then((function(){return i.getItemsAsync()})).then((function(t){for(var i=0;i<o;i++){var c=t[i];if(c.isOfType(Windows.Storage.StorageItemTypes.folder)){var u=new e(c);s.push(u.copyAsync(r))}else{var l=new a.WrappedStorageFile(c);s.push(l.copyAsync(r))}}return Object(n.join)(s)})).then((function(){return r}))},e.prototype.folderExistsAsync=function(e){return this._folder.getFolderAsync(e).then((function(){return!0}),(function(){return!1}))},e.prototype.getOrCreateFolder=function(e){var t=this;return this.folderExistsAsync(e).then((function(r){return r?t.getFolderAsync(e):t.createFolderAsync(e)}))},e.prototype.getOrCreateFile=function(e){var t=this;return this.fileExistsAsync(e).then((function(r){return r?t.getFileAsync(e):t.createFileAsync(e)}))},e.prototype.getFolderAsync=function(t){return Object(n.checkValue)(t),this._folder.getFolderAsync(t).then((function(t){return new e(t)}))},e.prototype.createFileAsync=function(e,t){Object(n.checkValue)(e);var r=this._mapToWindowsCollisionOption(t);return this._folder.createFileAsync(e,r).then((function(e){return new a.WrappedStorageFile(e)}))},e.prototype.getFileAsync=function(e){return Object(n.checkValue)(e),this._folder.getFileAsync(e).then((function(e){return new a.WrappedStorageFile(e)}))},e.prototype.fileExistsAsync=function(e){return Object(n.checkValue)(e),this.getFileAsync(e).then((function(){return!0}),(function(){return!1}))},e.prototype._mapToWindowsCollisionOption=function(e){return e===o.CreationCollisionOption.OverwriteIfExists?Windows.Storage.CreationCollisionOption.replaceExisting:e===o.CreationCollisionOption.ReturnExistingIfExists?Windows.Storage.CreationCollisionOption.openIfExists:Windows.Storage.CreationCollisionOption.failIfExists},e.prototype.renameFolder=function(e){},e}()},function(e,t,r){"use strict";r.r(t),r.d(t,"WebStorageFile",(function(){return o}));var n=r(0),o=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.readBlobAsync=function(){var e=this;return new Promise((function(t,r){var o=new FileReader;o.onload=function(){if(e._file.type&&Object(n.isNonEmptyString)(e._file.type)){var r=e._file.type.toLowerCase();if(Object(n.isMimeType)(r))return void t(new Blob([o.result],{type:r}))}t(new Blob([o.result]))},o.onerror=function(){r(Object(n.throwInline)("File read blob failed"))},o.readAsArrayBuffer(e._file)}))},t}(r(7).CordovaStorageFile)},function(e,t,r){"use strict";r.r(t),r.d(t,"CordovaFileSystem",(function(){return c}));var n=r(0),o=r(5),i=r(7),a=r(8),s=r(3),c=function(){function e(){}return Object.defineProperty(e.prototype,"kind",{get:function(){return"CordovaFileSystem"},enumerable:!1,configurable:!0}),e.prototype.getAppDataFolderAsync=function(e){return this._initializeFileSystem().then((function(t){return new a.CordovaStorageFolder(t.root,e)}))},e.prototype.getAppTemporaryFolderAsync=function(){return s.AppDataFolderLocator.instance?this.getAppDataFolderAsync().then((function(e){return s.AppDataFolderLocator.instance.locateAppDataFolder(e)})).then((function(e){return e.getOrCreateFolder(o.TempFolder)})).catch((function(e){throw Object(n.error)("CordovaFileSystem.getAppTemporaryFolderAsync",e.code),new Error("CordovaFileSystem.getAppTemporaryFolderAsync failed with error code: ".concat(e.code))})):new Promise((function(e,t){window.requestFileSystem(window.TEMPORARY,5242880,(function(t){e(new a.CordovaStorageFolder(t.root))}),(function(e){var r="window.requestFileSystem failed with error code: ".concat(e.code);Object(n.error)("CordovaFileSystem.getAppTemporaryFolderAsync",r),t(Object(n.throwInline)("temporary folder request failed."))}))}))},e.prototype.getInstalledFolderAsync=function(){if(WinJS.Utilities.hasWinRT)return new Promise((function(e,t){window.requestFileSystem(window.INSTALLED,5242880,(function(t){e(new a.CordovaStorageFolder(t.root))}),(function(){t(Object(n.throwInline)("installed folder request failed"))}))}));var e=Object(n.createCompletablePromise)();return window.resolveLocalFileSystemURL(cordova.file.applicationDirectory,(function(t){return e.complete(new a.CordovaStorageFolder(t))}),(function(t){return e.error(t)})),e.promise},e.prototype.getFileFromPath=function(e){var t=Object(n.createCompletablePromise)();return window.resolveLocalFileSystemURL(e,(function(e){return t.complete(new i.CordovaStorageFile(e))}),(function(e){return t.error(e)})),t.promise},e.prototype._initializeFileSystem=function(){return new Promise((function(e,t){window.requestFileSystem(window.PERSISTENT,5242880,(function(t){e(t)}),(function(){t(Object(n.throwInline)("FileSystem request failed"))}))}))},e}()},function(e,t,r){"use strict";r.r(t),r.d(t,"FileLogWriter",(function(){return a}));var n=r(0),o=r(13),i=r(10),a=function(e){function t(t,r){var o=e.call(this)||this;return o._logQueue=[],o._rootFolder=t||null,o._logFile=null,o._fileWriteEvent=new n.EventObject,o._initializationCompletablePromise=Object(n.createCompletablePromise)(),o._pendingWritePromise=o._initializeLogFileAsync(),(r||Object(n.writeLogEvent)()).addListener(o._writeLog.bind(o)),o}return __extends(t,e),Object.defineProperty(t.prototype,"initializationPromise",{get:function(){return this._initializationCompletablePromise.promise},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"logQueue",{get:function(){return this._logQueue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fileWriteEvent",{get:function(){return this._fileWriteEvent},enumerable:!1,configurable:!0}),Object.defineProperty(t,"instance",{get:function(){return t._instance},enumerable:!1,configurable:!0}),t.ensureFileLogWriterCreated=function(e,r){t._instance||(t._instance=new t(e,r),n.ErrorHandler.instance.flushPendingLogsMessageCallBack=function(){return t.instance.pendingWritePromise})},t.prototype._getOrCreateLogFileAsync=function(){var e=this;return this._rootFolder.getOrCreateFile(this._logFileName).then((function(t){e._logFile=t,e._initializationCompletablePromise.complete(e._logFile)}))},t.prototype._writeLogToFileAsync=function(e){var r=this;return this._logFile.readTextAsync().then((function(n){return n.length>0&&(n+=t.LogFileEnterDelimiter),r._logFile.writeTextAsync(n+e)})).then((function(){r._fileWriteEvent.dispatch()}),(function(t){r._logQueue.push(e)}))},Object.defineProperty(t.prototype,"pendingWritePromise",{get:function(){return this._pendingWritePromise},enumerable:!1,configurable:!0}),t.prototype._writeLog=function(e){var t=this,r=Object(n.getDefaultLogFormat)(e);this._logQueue.push(r),this._pendingWritePromise=this._pendingWritePromise.then((function(){if(0!==t._logQueue.length){var e=t._logQueue;return t._logQueue=[],t._writeQueueLogToFileAsync(e)}}))},t.prototype._writeQueueLogToFileAsync=function(e){var r=e.join(t.LogFileEnterDelimiter);return this._writeLogToFileAsync(r)},t.prototype._initializeLogFileAsync=function(){var e=this;return this._rootFolder?this._getOrCreateLogFileAsync():i.FileSystem.getAppDataFolderAsync().then((function(t){return e._rootFolder=t,e._getOrCreateLogFileAsync()}))},t}(o.FileLogWriterBase)},function(e,t,r){"use strict";r.r(t),r.d(t,"WindowsFileSystem",(function(){return a}));var n=r(0),o=r(12),i=r(16),a=function(){function e(){}return e.tryParsePathToFileUri=function(e){if(Object(n.isString)(e)){var t=document.createElement("a");try{t.href=e;var r=Object(n.tryParse)(t.href);if(r&&r.scheme===n.File&&r.isAbsolute)return r}catch(e){}}return null},Object.defineProperty(e.prototype,"kind",{get:function(){return"WindowsFileSystem"},enumerable:!1,configurable:!0}),e.prototype.getAppDataFolderAsync=function(){return Promise.resolve(new i.WrappedStorageFolder(Windows.Storage.ApplicationData.current.localFolder))},e.prototype.getAppTemporaryFolderAsync=function(){return Promise.resolve(new i.WrappedStorageFolder(Windows.Storage.ApplicationData.current.temporaryFolder))},e.prototype.getInstalledFolderAsync=function(){return Promise.resolve(new i.WrappedStorageFolder(Windows.ApplicationModel.Package.current.installedLocation))},e.prototype.getFileFromPath=function(e){return Promise.resolve().then((function(){return Windows.Storage.StorageFile.getFileFromPathAsync(e)})).then((function(e){return new o.WrappedStorageFile(e)}))},e}()},function(e,t,r){"use strict";r.r(t),r.d(t,"EncryptedWebSettingsProvider",(function(){return o}));var n=r(0),o=function(){function e(e,t,r){this._settingsName=e,this._encryptedStorage=t,this._savePromise=null,this._settingsData=Object(n.HashTableUtility_create)(),this._isBatchSaveQueued=!1,this._delaySaveMS=Object(n.isValue)(r)?r:15e3}return e.prototype.load=function(){return __awaiter(this,void 0,Promise,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this._encryptedStorage.getStoredDataAsync(this._settingsName)];case 1:return(e=t.sent())?(this._settingsData=JSON.parse(e),[2,!0]):[3,3];case 2:return t.sent(),[3,3];case 3:return this._settingsData=Object(n.HashTableUtility_create)(),[2,!0]}}))}))},e.prototype.save=function(){return __awaiter(this,void 0,Promise,(function(){return __generator(this,(function(e){return this._queueSave(),[2,!0]}))}))},e.prototype.getValue=function(e){return this._settingsData[e]},e.prototype.removeValue=function(e){delete this._settingsData[e],this._queueSave()},e.prototype.setValue=function(e,t){this._settingsData[e]=t,this._queueSave()},e.prototype.clear=function(){return __awaiter(this,void 0,Promise,(function(){return __generator(this,(function(e){switch(e.label){case 0:this._settingsData=Object(n.HashTableUtility_create)(),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this._encryptedStorage.removeStoredDataAsync(this._settingsName)];case 2:return e.sent(),[3,4];case 3:return e.sent(),this._queueSave(),[3,4];case 4:return[2]}}))}))},e.prototype._saveAsync=function(){return __awaiter(this,void 0,Promise,(function(){var e=this;return __generator(this,(function(t){switch(t.label){case 0:return this._savePromise?[4,this._savePromise]:[3,2];case 1:return[2,t.sent()];case 2:return this._savePromise=this._saveCoreAsync(),[4,Object(n.wrapWithFinally)(this._savePromise,(function(){e._savePromise=null}))];case 3:return[2,t.sent()]}}))}))},e.prototype._saveCoreAsync=function(){return __awaiter(this,void 0,Promise,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this._encryptedStorage.storeDataAsync(this._settingsName,JSON.stringify(this._settingsData))];case 1:return t.sent(),[2,!0];case 2:return e=t.sent(),Object(n.error)("EncryptedWebSettingsProvider._save",e),[2,!1];case 3:return[2]}}))}))},e.prototype._queueSave=function(){var e=this;this._isBatchSaveQueued||(this._isBatchSaveQueued=!0,window.setTimeout((function(){e._isBatchSaveQueued=!1,e._saveAsync()}),this._delaySaveMS))},e}()},function(e,t,r){"use strict";r.r(t),r.d(t,"FileSettingsProvider",(function(){return a}));var n=r(0),o=r(2),i=r(10),a=function(){function e(e,t){void 0===t&&(t=!1),this._settings=Object(n.HashTableUtility_create)(),this._dirty=!1,this._savePromise=null,this._fileName=e,this._allowFileCreation=t}return e.prototype.load=function(e){var t=this;return this._initFolder(e).then((function(){return t._loadFile()}))},e.prototype._initFolder=function(e){var t=this;return this._folder?Promise.resolve():e?(this._folder=e,Promise.resolve()):i.FileSystem.getAppDataFolderAsync().then((function(e){return t._folder=e,Promise.resolve()}))},e.prototype.save=function(){var e=this;if(this._dirty&&!this._savePromise){this._dirty=!1,this._savePromise=function(){return e._initFolder().then((function(){return e._folder.createFileAsync(e._fileName,o.CreationCollisionOption.OverwriteIfExists)})).then((function(t){return t.writeTextAsync(JSON.stringify(e._settings))}))}().then((function(){return e._savePromise=null,!0}),(function(){return e._savePromise=null,!1}))}return this._savePromise||Promise.resolve(!1)},e.prototype.getValue=function(e){return e in this._settings?this._settings[e]:null},e.prototype.removeValue=function(e){delete this._settings[e],this._markSaveAndDelayed()},e.prototype.setValue=function(e,t){this._settings[e]=t,this._markSaveAndDelayed()},e.prototype.deleteSettingsFileAsync=function(){var e=this;return this._folder?this._folder.fileExistsAsync(this._fileName).then((function(t){if(t)return e._folder.getFileAsync(e._fileName).then((function(e){return e.deleteAsync()})).then((function(){return e._settings=null}))})):Promise.resolve()},e.prototype.clear=function(){throw new Error("Not Implemented")},e.prototype._markSaveAndDelayed=function(){var e=this;this._dirty||(this._dirty=!0,window.setTimeout((function(){return e.save()}),0))},e.prototype._loadFile=function(){var e=this;return this._folder.fileExistsAsync(this._fileName).then((function(t){return t?e._folder.getFileAsync(e._fileName).then((function(e){return e.readTextAsync()})).then((function(t){return""!==t&&(e._settings=JSON.parse(t),!0)})):(e._settings={},Promise.resolve(e._allowFileCreation))}),(function(){return e._settings={},!1}))},e}()},function(e,t,r){"use strict";r.r(t),r.d(t,"LocalForageSettingsProviderBySetting",(function(){return o}));var n=r(0),o=function(){function e(e,t){this._settingsName=e,this._localForageAsyncSettingsProvider=t,this._settingsData=Object(n.HashTableUtility_create)()}return e.prototype.load=function(){return __awaiter(this,void 0,Promise,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this._localForageAsyncSettingsProvider.getValueAsync(this._settingsName)];case 1:return(e=t.sent())?(this._settingsData=JSON.parse(e),[2,!0]):[3,3];case 2:return t.sent(),[3,3];case 3:return this._settingsData=Object(n.HashTableUtility_create)(),[2,!0]}}))}))},e.prototype.save=function(){return __awaiter(this,void 0,Promise,(function(){return __generator(this,(function(e){switch(e.label){case 0:return[4,this._localForageAsyncSettingsProvider.setValueAsync(this._settingsName,JSON.stringify(this._settingsData))];case 1:return e.sent(),[2,!0]}}))}))},e.prototype.getValue=function(e){return this._settingsData[e]},e.prototype.removeValue=function(e){delete this._settingsData[e],this.save()},e.prototype.setValue=function(e,t){this._settingsData[e]=t,this.save()},e.prototype.clear=function(){return __awaiter(this,void 0,Promise,(function(){return __generator(this,(function(e){return this._settingsData=Object(n.HashTableUtility_create)(),this.save(),[2]}))}))},e}()},function(e,t,r){"use strict";r.r(t),r.d(t,"SessionStorageSettingsProvider",(function(){return o}));var n=r(0),o=function(){function e(){this._settings=Object(n.HashTableUtility_create)(),this._useSessionStorage=!0}return e.prototype.load=function(){try{window.sessionStorage||(this._useSessionStorage=!1)}catch(e){this._useSessionStorage=!1}return Promise.resolve(!0)},e.prototype.save=function(){return Promise.resolve(!0)},e.prototype.getValue=function(e){if(!1===this._useSessionStorage)return this._settings[e];var t=this._settings[e];if(Object(n.isNullOrUndefined)(this._settings[e])){var r=null;try{r=window.sessionStorage[e]}catch(e){this._useSessionStorage=!1}if(Object(n.isNullOrUndefined)(r))return null;try{return JSON.parse(r)}catch(e){}}return t},e.prototype.removeValue=function(e){if(delete this._settings[e],!0===this._useSessionStorage)try{window.sessionStorage.removeItem(e)}catch(e){this._useSessionStorage=!1}},e.prototype.setValue=function(e,t){if(this._settings[e]=t,!0===this._useSessionStorage)try{window.sessionStorage.setItem(e,JSON.stringify(t))}catch(e){this._useSessionStorage=!1}},e.prototype.clear=function(){this._useSessionStorage&&window.sessionStorage.clear(),this._settings=Object(n.HashTableUtility_create)()},e}()},function(e,t,r){"use strict";r.r(t),r.d(t,"WebStorageSettingsProvider",(function(){return a}));var n=r(0),o=r(15),i=r(24),a=function(){function e(){this._durableSettingsProvider=new o.LocalStorageSettingsProvider,this._volatileSettingsProvider=new i.SessionStorageSettingsProvider}return e.prototype.load=function(){return Object(n.join)([this._durableSettingsProvider.load(),this._volatileSettingsProvider.load()])},e.prototype.save=function(){return Object(n.join)([this._durableSettingsProvider.save(),this._volatileSettingsProvider.save()])},e.prototype.getValue=function(e){return this._durableSettingsProvider.getValue(this._getDurableKey(e))||this._volatileSettingsProvider.getValue(e)},e.prototype.removeValue=function(e){this._durableSettingsProvider.removeValue(this._getDurableKey(e)),this._volatileSettingsProvider.removeValue(e)},e.prototype.setValue=function(e,t,r){void 0===r&&(r=!1),this.removeValue(e);var n=this._volatileSettingsProvider;r&&(e=this._getDurableKey(e),n=this._durableSettingsProvider),n.setValue(e,t)},e.prototype.clear=function(){this._durableSettingsProvider.clear(),this._volatileSettingsProvider.clear()},e.prototype._getDurableKey=function(e){return"".concat(this.currentTenantId,".").concat(this.currentObjectId,".").concat(e)},e}()},function(e,t,r){"use strict";r.r(t),r.d(t,"WebStorageFolder",(function(){return a}));r(0);var n=r(8),o=r(2),i=r(17),a=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.createFileAsync=function(e,t){var r=this;return this.fileExistsAsync(e).then((function(n){if(!n)return r._createFileAsync(e).then((function(e){return new i.WebStorageFile(e)}));switch(t){case o.CreationCollisionOption.OverwriteIfExists:return r.getFileAsync(e).then((function(e){return e.deleteAsync()})).then((function(){return r._createFileAsync(e)})).then((function(e){return new i.WebStorageFile(e)}));case o.CreationCollisionOption.ReturnExistingIfExists:return r.getFileAsync(e);default:throw new Error("Unable to create file because it already exists.")}}))},t}(n.CordovaStorageFolder)},function(e,t,r){"use strict";var n;r.r(t),r.d(t,"SaveDataResult",(function(){return n})),function(e){e[e.Success=1]="Success",e[e.QuotaExceeds=2]="QuotaExceeds",e[e.InSufficientStorage=3]="InSufficientStorage",e[e.UnsupportedStorage=4]="UnsupportedStorage",e[e.Unknown=5]="Unknown"}(n||(n={}))},function(e,t,r){},function(e,t,r){"use strict";r.r(t),r.d(t,"LocalForageDataStore",(function(){return o}));var n=r(0),o=function(){function e(){this._localForageInstace=null}return e.prototype.setDatabaseAsync=function(e){return __awaiter(this,void 0,Promise,(function(){var t;return __generator(this,(function(r){switch(r.label){case 0:r.label=1;case 1:return r.trys.push([1,3,,4]),[4,localforage.config({name:e})];case 2:return r.sent(),[3,4];case 3:throw t=r.sent(),Object(n.error)("LocalForageDataStore.constructor",t,"Unable to acquire the local forage."),t;case 4:return[2]}}))}))},e.prototype.setStoreAsync=function(e){return __awaiter(this,void 0,Promise,(function(){var t,r;return __generator(this,(function(o){switch(o.label){case 0:o.label=1;case 1:return o.trys.push([1,3,,4]),t=this,[4,localforage.createInstance({name:e})];case 2:return t._localForageInstace=o.sent(),[3,4];case 3:throw r=o.sent(),Object(n.error)("LocalForageDataStore.setStoreAsync",r,"Unable to acquire the local forage."),r;case 4:return[2]}}))}))},e.prototype.getValueAsync=function(e){return __awaiter(this,void 0,Promise,(function(){var t,r;return __generator(this,(function(o){switch(o.label){case 0:o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this._localForageInstace.getItem(e)];case 2:return t=o.sent(),Object(n.isUndefined)(t)?[2,null]:[2,t];case 3:throw r=o.sent(),Object(n.error)("LocalForageDataStore.getValueAsync",r,"Unable to acquire the local forage."),r;case 4:return[2]}}))}))},e.prototype.removeValueAsync=function(e){return __awaiter(this,void 0,Promise,(function(){var t;return __generator(this,(function(r){switch(r.label){case 0:r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this._localForageInstace.removeItem(e)];case 2:return r.sent(),[3,4];case 3:throw t=r.sent(),Object(n.error)("LocalForageDataStore.removeValueAsync",t,"Unable to acquire the local forage."),t;case 4:return[2]}}))}))},e.prototype.setValueAsync=function(e,t){return __awaiter(this,void 0,Promise,(function(){var r;return __generator(this,(function(o){switch(o.label){case 0:o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this._localForageInstace.setItem(e,t)];case 2:return o.sent(),[3,4];case 3:throw r=o.sent(),Object(n.error)("LocalForageDataStore.removeValueAsync",r,"Unable to acquire the local forage."),r;case 4:return[2]}}))}))},e.prototype.clearAsync=function(){return __awaiter(this,void 0,Promise,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this._localForageInstace.clear()];case 2:return t.sent(),[3,4];case 3:throw e=t.sent(),Object(n.error)("LocalForageDataStore.clearAsync",e,"Unable to acquire the local forage."),e;case 4:return[2]}}))}))},e.prototype.deleteStoreAsync=function(){return __awaiter(this,void 0,Promise,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this._localForageInstace.dropInstance()];case 2:return t.sent(),[3,4];case 3:throw e=t.sent(),Object(n.error)("LocalForageDataStore.deleteStoreAsync",e,"Unable to acquire the local forage."),e;case 4:return[2]}}))}))},e.prototype.getKeysAsync=function(){return __awaiter(this,void 0,Promise,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this._localForageInstace.keys()];case 2:return[2,t.sent()];case 3:throw e=t.sent(),Object(n.error)("LocalForageDataStore.getKeysAsync",e,"Unable to acquire the local forage."),e;case 4:return[2]}}))}))},e.prototype.getDriverAsync=function(){return __awaiter(this,void 0,Promise,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this._localForageInstace.driver()];case 2:return[2,t.sent()];case 3:throw e=t.sent(),Object(n.error)("LocalForageDataStore.getKeysAsync",e,"Unable to acquire the local forage."),e;case 4:return[2]}}))}))},e}()},function(e,t,r){"use strict";r.r(t),r.d(t,"NativeFileLogWriter",(function(){return i}));var n=r(0),o=r(13),i=function(e){function t(t){var r=e.call(this)||this;r._isLogFileInitialized=!1,r._missedLogMessages=[];var o=t||Object(n.writeLogEvent)();return r._logEventListener=o.addListener(r._handleLogEvent.bind(r)),NativeLogger.setLogFileName(r._logFileName,r._setLogFileNameCallback.bind(r)),r}return __extends(t,e),t.prototype._setLogFileNameCallback=function(e,t){if(e){this._isLogFileInitialized=!0;var r=this._missedLogMessages.join(o.FileLogWriterBase.LogFileEnterDelimiter);NativeLogger.log(r)}else Object(n.error)("NativeFileLogWriter._setLogFileNameCallback","Error setting log file name: "+t),this._logEventListener.dispose();this._missedLogMessages=[]},t.prototype._handleLogEvent=function(e){var t=Object(n.getDefaultLogFormat)(e);!1===this._isLogFileInitialized?this._missedLogMessages.push(t):NativeLogger.log(t)},t}(o.FileLogWriterBase)},function(e,t,r){"use strict";r.r(t),r.d(t,"LocalForageAsyncSettingsProvider",(function(){return i}));var n=r(0),o=r(11),i=function(){function e(e,t){this._useLocalForage=!0;try{localforage.config({name:e,storeName:t})}catch(e){this._useLocalForage=!1,Object(n.warning)("LocalForageAsyncSettingsProvider.constructor",e,"Unable to acquire the local forage. Using in memory storage as a backup.")}}return e.prototype.getValueAsync=function(e){return __awaiter(this,void 0,Promise,(function(){var t,r;return __generator(this,(function(o){switch(o.label){case 0:if(!this._useLocalForage)return[3,4];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,localforage.getItem(e)];case 2:return t=o.sent(),Object(n.isUndefined)(t)?[2,null]:[2,t];case 3:return r=o.sent(),this._useLocalForage=!1,Object(n.warning)("LocalForageAsyncSettingsProvider.getValueAsync",r,"Unable to acquire the local forage. Using in memory storage as a backup."),[3,4];case 4:return[2,this.backupInMemorySettingProvider.getValue(e)]}}))}))},e.prototype.removeValueAsync=function(e){return __awaiter(this,void 0,Promise,(function(){var t;return __generator(this,(function(r){switch(r.label){case 0:if(!this._useLocalForage)return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,localforage.removeItem(e)];case 2:return r.sent(),[3,4];case 3:return t=r.sent(),this._useLocalForage=!1,Object(n.warning)("LocalForageAsyncSettingsProvider.removeValueAsync",t,"Unable to acquire the local forage. Using in memory storage as a backup."),[3,4];case 4:return this.backupInMemorySettingProvider.removeValue(e),[2]}}))}))},e.prototype.setValueAsync=function(e,t){return __awaiter(this,void 0,Promise,(function(){var r;return __generator(this,(function(o){switch(o.label){case 0:if(!this._useLocalForage)return[3,4];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,localforage.setItem(e,t)];case 2:return o.sent(),[3,4];case 3:return r=o.sent(),this._useLocalForage=!1,Object(n.warning)("LocalForageAsyncSettingsProvider.setValueAsync",r,"Unable to acquire the local forage. Using in memory storage as a backup."),[3,4];case 4:return this.backupInMemorySettingProvider.setValue(e,t),[2]}}))}))},e.prototype.clearAsync=function(){return __awaiter(this,void 0,Promise,(function(){return __generator(this,(function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),this.backupInMemorySettingProvider.clear(),this._useLocalForage?[4,localforage.clear()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[3,4];case 3:return e.sent(),this._useLocalForage=!1,[3,4];case 4:return[2]}}))}))},Object.defineProperty(e.prototype,"backupInMemorySettingProvider",{get:function(){return this._backupInMemorySettingProvider||(this._backupInMemorySettingProvider=new o.MemorySettingsProvider)},enumerable:!1,configurable:!0}),e}()},function(e,t,r){"use strict";r.r(t),r.d(t,"LocalStorageAsyncSettingsProvider",(function(){return n}));var n=function(){function e(){}return e.prototype.getValueAsync=function(e){return __awaiter(this,void 0,Promise,(function(){return __generator(this,(function(t){return[2,Promise.resolve(JSON.parse(localStorage.getItem(e)))]}))}))},e.prototype.removeValueAsync=function(e){return __awaiter(this,void 0,Promise,(function(){return __generator(this,(function(t){return[2,Promise.resolve().then((function(){localStorage.removeItem(e)}))]}))}))},e.prototype.setValueAsync=function(e,t){return __awaiter(this,void 0,Promise,(function(){return __generator(this,(function(r){return[2,Promise.resolve().then((function(){localStorage.setItem(e,JSON.stringify(t))}))]}))}))},e.prototype.clearAsync=function(){return __awaiter(this,void 0,Promise,(function(){return __generator(this,(function(e){return[2,Promise.resolve().then((function(){localStorage.clear()}))]}))}))},e}()},function(e,t,r){"use strict";r.r(t),r.d(t,"NetworkSettingsProvider",(function(){return n}));var n=function(){function e(){}return e.prototype.isDeviceOnline=function(){return!0},e}()},function(e,t,r){"use strict";r.r(t),r.d(t,"NoOpSettingsProvider",(function(){return n}));var n=function(){function e(){}return e.prototype.load=function(){return Promise.resolve(!0)},e.prototype.save=function(){return Promise.resolve(!0)},e.prototype.getValue=function(e){return null},e.prototype.removeValue=function(e){},e.prototype.setValue=function(e,t){},e.prototype.clear=function(){},e}()},function(e,t,r){"use strict";r.r(t),r.d(t,"SettingsProviderFactory",(function(){return f}));var n=r(0),o=r(4),i=r(21),a=r(22),s=r(15),c=r(11),u=r(25),l=r(23),f=function(){function e(){}return e.getLocalAppSettingsStorage=function(){return e._localAppSettingsStorage?e._localAppSettingsStorage:e.getLocalStorageSettingsProvider("appsettings.json")},e.getLocalStorageSettingsProvider=function(e,t){if(void 0===t&&(t=!1),Object(n.isTestMode)())return new c.MemorySettingsProvider;if(Object(n.isWebPlayer)()){if(Object(n.isWebPlayerEncryptedStorageEnabled)()){if(t){n.Log.trackActivityEvent("WebPlayer.LocalForageSettingsProviderBySetting");var r=n.ObjectFactory.instance.getSingleton(o.IAsyncSettingsProviderKey);return new l.LocalForageSettingsProviderBySetting(e,r)}return n.Log.trackActivityEvent("WebPlayer.EncryptedWebSettingsProvider"),new i.EncryptedWebSettingsProvider(e,n.ObjectFactory.instance.getSingleton(o.IEncryptedStorageKey))}return n.Log.trackActivityEvent("WebPlayer.WebStorageSettingsProvider"),new u.WebStorageSettingsProvider}return WinJS.Utilities.hasWinRT&&this.hasLocalStorage()?new s.LocalStorageSettingsProvider:new a.FileSettingsProvider(e,!0)},e.hasLocalStorage=function(){if(null===this._hasLocalStorage)try{var e=window.localStorage;e.setItem("thisisatestingkey","testingstring");var t="testingstring"===e.getItem("thisisatestingkey");e.removeItem("thisisatestingkey"),this._hasLocalStorage=t&&!!e}catch(e){this._hasLocalStorage=!1}return this._hasLocalStorage},e._hasLocalStorage=null,e._localAppSettingsStorage=null,e}()},function(e,t,r){"use strict";r.r(t),r.d(t,"EncryptedStorage",(function(){return i}));var n=r(0),o=r(1),i=function(){function e(t,r,o){void 0===r&&(r=!1),void 0===o&&(o=!1),this._keyImported=!1,this._keyImportInProgress=!1,this._encryptionDisabled=!1,r||o||!window.crypto||!window.crypto.subtle&&!window.crypto.webkitSubtle?msrCrypto?(this._crypto=msrCrypto,this._subtle=msrCrypto.subtle,this._subtle.forceSync=o,o||this._subtle.preloadWorkers(e._averageMsrCryptoWorkerCount),n.Log.trackActivityEvent("EncryptedStorage",{msrCryptoUsed:!0,forceSync:o})):(this._encryptionDisabled=!0,n.Log.trackActivityEvent("EncryptedStorage",{encryptionDisabled:!0})):(this._crypto=window.crypto,this._subtle=window.crypto.subtle?window.crypto.subtle:window.crypto.webkitSubtle),this._importKeyCompletablePromise=Object(n.createCompletablePromise)(),this._importKeyPromiseWithTimeout=Object(n.wrapWithTimeout)(this._importKeyCompletablePromise.promise,e._importKeyTimeoutInMs),this._storage=t}return e.prototype._checkAndStoreVersionAsync=function(){return __awaiter(this,void 0,void 0,(function(){var t,r;return __generator(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this._storage.getValueAsync(e.versionKey)];case 1:return t=n.sent(),[3,3];case 2:return n.sent(),t=null,[3,3];case 3:return t?[3,6]:[4,this.clearAllDataAsync()];case 4:return n.sent(),[4,this._storage.setValueAsync(e.versionKey,e.cryptoAlgoVersion)];case 5:return n.sent(),[3,9];case 6:return r=parseInt(t,10),isNaN(r)||r<e.cryptoAlgoVersion?[4,this.clearAllDataAsync()]:[3,9];case 7:return n.sent(),[4,this._storage.setValueAsync(e.versionKey,e.cryptoAlgoVersion)];case 8:n.sent(),n.label=9;case 9:return[2]}}))}))},e.prototype.updateKeyAsync=function(e){return __awaiter(this,void 0,Promise,(function(){return __generator(this,(function(t){switch(t.label){case 0:return e?this._key?(n.Log.trackActivityEvent("EncryptedStorage.updateKeyAsync",{updateKey:!0}),[4,this._importKeyAsync(e)]):[3,2]:[3,5];case 1:return t.sent(),[3,4];case 2:return n.Log.trackActivityEvent("EncryptedStorage.updateKeyAsync",{updateKey:!1}),[4,this._importFirstKeyAsync(e)];case 3:t.sent(),t.label=4;case 4:return[3,6];case 5:this._key||(this._importKeyCompletablePromise.complete(),this._keyImported=!0),n.Log.trackActivityEvent("EncryptedStorage.updateKeyAsync",{noKeyProvided:!0}),t.label=6;case 6:return[2]}}))}))},e.prototype.clearAllDataAsync=function(){return __awaiter(this,void 0,Promise,(function(){return __generator(this,(function(e){switch(e.label){case 0:return[4,this._storage.clearAsync()];case 1:return[2,e.sent()]}}))}))},e.prototype.removeStoredDataAsync=function(e){return __awaiter(this,void 0,Promise,(function(){return __generator(this,(function(t){switch(t.label){case 0:return[4,this._storage.removeValueAsync(e)];case 1:return[2,t.sent()]}}))}))},e.prototype.getStoredDataAsync=function(e){return __awaiter(this,void 0,Promise,(function(){var t,r,i,a,s,c,u,l,f,d,p;return __generator(this,(function(y){switch(y.label){case 0:return t=n.Log.startScenario(n.ScenarioName.DecryptData),[4,this._storage.getValueAsync(e)];case 1:return!(r=y.sent())||this._encryptionDisabled?[3,10]:[4,this._importKeyPromiseWithTimeout];case 2:if(i=y.sent(),!this._cryptoKey)return[3,8];y.label=3;case 3:return y.trys.push([3,5,,7]),a=this._parseEncryptedString(r),[4,this._decrypt(a)];case 4:return s=y.sent(),c=decodeURIComponent(Object(o.convertArrayBufferToString)(s)),u=r.length,l=c.length,p={dataKey:e,encryptedStringLength:u,decryptedStringLength:l,encryptedStorage:"EncryptedStorage"},n.Log.passScenario(t,{customScenarioData:p}),[2,c];case 5:return f=y.sent(),d=this._parseErrorData(f),p={error:this._tryStringifyErrorData(d),dataKey:e,encryptedStorage:"EncryptedStorage"},[4,this.clearAllDataAsync()];case 6:return y.sent(),f instanceof DOMException||d.data&&"NULL_RESULT_RETURNED"===d.data?n.Log.passScenario(t,{customScenarioData:p}):n.Log.failScenario(t,{customScenarioData:p}),[2,null];case 7:return[3,9];case 8:return p={coldStart:!1,noKey:!0,dataKey:e,importKeyTimedOut:i.hasTimedOut,encryptedStorage:"EncryptedStorage"},n.Log.passScenario(t,{customScenarioData:p}),[2,null];case 9:return[3,11];case 10:return p={coldStart:!0,dataKey:e,encryptedStorage:"EncryptedStorage"},n.Log.passScenario(t,{customScenarioData:p}),[2,null];case 11:return[2]}}))}))},e.prototype.storeDataAsync=function(t,r){return __awaiter(this,void 0,Promise,(function(){var i,a,s,c,u,l,f,d,p;return __generator(this,(function(y){switch(y.label){case 0:return i=n.Log.startScenario(n.ScenarioName.EncryptData),[4,this._importKeyPromiseWithTimeout];case 1:if(a=y.sent(),!this._cryptoKey||this._encryptionDisabled)return[3,7];y.label=2;case 2:return y.trys.push([2,5,,6]),s=new Uint8Array(e._ivLength),this._crypto.getRandomValues(s),r=encodeURIComponent(r),[4,this._encrypt(s,r)];case 3:return c=y.sent(),u=Object(o.arrayBufferToBase64)(c)+Object(o.arrayBufferToBase64)(s),l=u.length,f=r.length,[4,this._storage.setValueAsync(t,u)];case 4:return y.sent(),p={dataKey:t,encryptedStringLength:l,decryptedStringLength:f,encryptedStorage:"EncryptedStorage"},n.Log.passScenario(i,{customScenarioData:p}),[2,!0];case 5:return d=y.sent(),p={error:this._tryStringifyError(d),dataKey:t,encryptedStorage:"EncryptedStorage"},d instanceof DOMException?n.Log.passScenario(i,{customScenarioData:p}):n.Log.failScenario(i,{customScenarioData:p}),[2,!1];case 6:return[3,8];case 7:return p={noKey:!this._cryptoKey,dataKey:t,importKeyTimedOut:a.hasTimedOut,encryptedStorage:"EncryptedStorage"},n.Log.passScenario(i,{customScenarioData:p}),[2,!1];case 8:return[2]}}))}))},e.prototype._tryStringifyError=function(e){var t=this._parseErrorData(e);return this._tryStringifyErrorData(t)},e.prototype._tryStringifyErrorData=function(e){try{return JSON.stringify(e)}catch(t){return e}},e.prototype._parseErrorData=function(e){var t=e;return e instanceof MessageEvent?t=e.data:e instanceof DOMException&&(t={code:t.code,message:t.message,name:t.message}),t},e.prototype._importFirstKeyAsync=function(e){return __awaiter(this,void 0,Promise,(function(){return __generator(this,(function(t){switch(t.label){case 0:return this._keyImported||this._keyImportInProgress?[3,3]:(this._keyImportInProgress=!0,[4,this._importKeyAsync(e)]);case 1:return t.sent(),[4,this._checkAndStoreVersionAsync()];case 2:t.sent(),this._keyImported=!0,this._importKeyCompletablePromise.complete(),t.label=3;case 3:return[2]}}))}))},e.prototype._importKeyAsync=function(t){return __awaiter(this,void 0,Promise,(function(){var r,o,i,a,s;return __generator(this,(function(c){switch(c.label){case 0:r=n.Log.startScenario(n.ScenarioName.ImportCryptoKey),c.label=1;case 1:return c.trys.push([1,4,,5]),this._encryptionDisabled?[3,3]:(o=this._base64ToBase64Url(t))===this._key?[3,3]:(this._key=o,i=this,[4,this._subtle.importKey(e._cryptoFormat,this._getJsonWebKeyData(),{name:e._cryptoAlgo},new Boolean(!1),e._cryptoUsages)]);case 2:i._cryptoKey=c.sent(),c.label=3;case 3:return n.Log.passScenario(r),[3,5];case 4:return a=c.sent(),s={error:this._tryStringifyError(a)},a instanceof DOMException?n.Log.passScenario(r,{customScenarioData:s}):n.Log.failScenario(r,{customScenarioData:s}),[3,5];case 5:return[2]}}))}))},e.prototype._parseEncryptedString=function(t){var r=t.substr(0,t.length-e._ivBase64Length),n=t.substr(t.length-e._ivBase64Length,t.length),o=window.atob(r),i=atob(n);return{cipherText:this._convertStringToUint8Array(o),iv:this._convertStringToUint8Array(i)}},e.prototype._encrypt=function(e,t){return __awaiter(this,void 0,Promise,(function(){var r,n;return __generator(this,(function(o){switch(o.label){case 0:return r=this._getAlgorithmMetaData(e),n=this._convertStringToUint8Array(t),[4,this._subtle.encrypt(r,this._cryptoKey,n)];case 1:return[2,o.sent()]}}))}))},e.prototype._decrypt=function(e){return __awaiter(this,void 0,Promise,(function(){var t;return __generator(this,(function(r){switch(r.label){case 0:return t=this._getAlgorithmMetaData(e.iv),[4,this._subtle.decrypt(t,this._cryptoKey,e.cipherText)];case 1:return[2,r.sent()]}}))}))},e.prototype._base64ToBase64Url=function(e){return e=(e=(e=e.replace(/\+/g,"-")).replace(/\=+$/g,"")).replace(/\//g,"_")},e.prototype._getAlgorithmMetaData=function(t){return{name:e._cryptoAlgo,iv:t,tagLength:e._tagLength}},e.prototype._getJsonWebKeyData=function(){return{kty:"oct",k:this._key,ext:!0}},e.prototype._convertStringToUint8Array=function(e){for(var t=new Uint8Array(new ArrayBuffer(e.length)),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t},e._importKeyTimeoutInMs=2e3,e._cryptoFormat="jwk",e._cryptoAlgo="AES-GCM",e._cryptoUsages=["encrypt","decrypt"],e._ivLength=12,e._ivBase64Length=16,e._tagLength=128,e._averageMsrCryptoWorkerCount=4,e.cryptoAlgoVersion=1,e.versionKey="Storage.Version",e}()},function(e,t,r){"use strict";r.r(t),r.d(t,"TeamsNativeEncryptedStorage",(function(){return o}));var n=r(0),o=function(){function e(e){if(!Core.Environment.isRunningInTeamsNative())throw new Error("this can't be used on a non-Teams-native environment");n.Log.trackActivityEvent("TeamsNativeEncryptedStorage",{encryptionDisabled:!0}),this._storage=e}return e.prototype.updateKeyAsync=function(e){return __awaiter(this,void 0,Promise,(function(){return __generator(this,(function(e){return n.Log.trackActivityEvent("TeamsNativeEncryptedStorage.updateKeyAsync"),[2]}))}))},e.prototype.clearAllDataAsync=function(){return __awaiter(this,void 0,Promise,(function(){return __generator(this,(function(e){switch(e.label){case 0:return n.Log.trackActivityEvent("TeamsNativeEncryptedStorage.clearAllDataAsync"),[4,this._storage.clearAsync()];case 1:return[2,e.sent()]}}))}))},e.prototype.removeStoredDataAsync=function(e){return __awaiter(this,void 0,Promise,(function(){return __generator(this,(function(t){switch(t.label){case 0:return n.Log.trackActivityEvent("TeamsNativeEncryptedStorage.removeStoredDataAsync"),[4,this._storage.removeValueAsync(e)];case 1:return[2,t.sent()]}}))}))},e.prototype.getStoredDataAsync=function(e){return __awaiter(this,void 0,Promise,(function(){var t,r,o,i;return __generator(this,(function(a){switch(a.label){case 0:t=n.Log.startScenario(n.ScenarioName.DecryptData),r={dataKey:e,encryptedStorage:"TeamsNativeEncryptedStorage"},a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this._storage.getValueAsync(e)];case 2:return o=a.sent(),n.Log.passScenario(t,{customScenarioData:r}),[2,o];case 3:return i=a.sent(),n.Log.failScenario(t,{customScenarioData:r,error:i}),[2,null];case 4:return[2]}}))}))},e.prototype.storeDataAsync=function(e,t){return __awaiter(this,void 0,Promise,(function(){var r,o,i;return __generator(this,(function(a){switch(a.label){case 0:r=n.Log.startScenario(n.ScenarioName.EncryptData),o={noKey:!0,importKeyTimedOut:!1,dataKey:e,encryptedStorage:"TeamsNativeEncryptedStorage"},a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this._storage.setValueAsync(e,t)];case 2:return a.sent(),n.Log.passScenario(r,{customScenarioData:o}),[2,!0];case 3:return i=a.sent(),n.Log.failScenario(r,{customScenarioData:o,error:i}),[2,!1];case 4:return[2]}}))}))},e}()},function(e,t,r){"use strict";r.r(t),r.d(t,"WebFileSystem",(function(){return s}));var n=r(0),o=r(5),i=r(3),a=r(26),s=function(){function e(e){this._maxSize=5242880,this._requestSize=e&&e<this._maxSize?e:this._maxSize}return Object.defineProperty(e.prototype,"kind",{get:function(){return"WebFileSystem"},enumerable:!1,configurable:!0}),e.prototype.getAppDataFolderAsync=function(){return __awaiter(this,void 0,Promise,(function(){return __generator(this,(function(e){throw"Not implemented"}))}))},e.prototype.getAppTemporaryFolderAsync=function(){var e=this;return i.AppDataFolderLocator.instance?this.getAppDataFolderAsync().then((function(e){return i.AppDataFolderLocator.instance.locateAppDataFolder(e)})).then((function(e){return e.getOrCreateFolder(o.TempFolder)})).catch((function(e){throw Object(n.error)("WebFileSystem.getAppTemporaryFolderAsync",e.code),new Error("WebFileSystem.getAppTemporaryFolderAsync failed with error code: ".concat(e.code))})):new Promise((function(t,r){var o=window.webkitRequestFileSystem||window.requestFileSystem;o||r(Object(n.throwInline)(AppMagic.Strings.ExportNotSupported)),o(window.TEMPORARY,e._requestSize,(function(e){t(new a.WebStorageFolder(e.root))}),(function(e){var t=new Error("window.requestFileSystem or window.webKitRequestFileSystem failed with code: "+e.code);Object(n.error)("WebFileSystem.getAppTemporaryFolderAsync",t),r(Object(n.throwInline)("temporary folder request failed."))}))}))},e.prototype.getInstalledFolderAsync=function(){return __awaiter(this,void 0,Promise,(function(){return __generator(this,(function(e){throw"not implemented"}))}))},e.prototype.getFileFromPath=function(e){return __awaiter(this,void 0,Promise,(function(){return __generator(this,(function(e){throw"not implemented"}))}))},e}()},function(e,t,r){"use strict";r.r(t),r.d(t,"BackgroundDownloader",(function(){return c}));var n,o=r(0),i=r(2),a=r(10);!function(e){e[e.GetAppTemporaryFolder=0]="GetAppTemporaryFolder",e[e.CreateTempFile=1]="CreateTempFile",e[e.DownloadFileInBackground=2]="DownloadFileInBackground"}(n||(n={}));var s=function(e){function t(t,r){var n=this,i=AppMagic.Strings.BackgroundDownloaderErrorMessage;return Object(o.isObject)(t)&&Object(o.isNonEmptyString)(t.message)&&(i=t.message),(n=e.call(this,i)||this)._step=r,n}return __extends(t,e),t}(o.ApplicationError),c=function(){function e(){}return e.downloadFromUrlAsync=function(t,r){var o;return a.FileSystem.getAppTemporaryFolderAsync().then((function(e){return e.createFileAsync(r,i.CreationCollisionOption.OverwriteIfExists)}),(function(t){return e._createBackgroundDownloaderErrorAsync(t,n.GetAppTemporaryFolder)})).then((function(e){o=e;var r=e.storageFile;return(new Windows.Networking.BackgroundTransfer.BackgroundDownloader).createDownload(new Windows.Foundation.Uri(t),r).startAsync()}),(function(t){return e._createBackgroundDownloaderErrorAsync(t,n.CreateTempFile)})).then((function(){return o}),(function(t){return e._createBackgroundDownloaderErrorAsync(t,n.DownloadFileInBackground)}))},e._createBackgroundDownloaderErrorAsync=function(e,t){if(e instanceof s)return Promise.reject(e);var r=new s(e,t),i=Object(o.CoreUtility_formatString)(o.backgroundDownloaderFailedStep,n[t]);return o.Log.trackEvent(i,{message:r.message}),o.CoreLog.error(i,e),Promise.reject(r)},e}()},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){r(47),e.exports=r(48)},function(e,t,r){"use strict";r.r(t);var n=r(0),o=r(4);Object(n.exportToNamespace)(["Core","IO"],o);var i=r(5);Object(n.exportToNamespace)(["Core","IO","Constants"],i);var a=r(18);Object(n.exportToNamespace)(["Core","IO"],a);var s=r(7);Object(n.exportToNamespace)(["Core","IO"],s);var c=r(8);Object(n.exportToNamespace)(["Core","IO"],c);var u=r(2);Object(n.exportToNamespace)(["Core","IO"],u);var l=r(19);Object(n.exportToNamespace)(["Core","IO","Log"],l);var f=r(13);Object(n.exportToNamespace)(["Core","IO","Log"],f);var d=r(10);Object(n.exportToNamespace)(["Core","IO"],d);var p=r(14);Object(n.exportToNamespace)(["Core","IO","Folder"],p);var y=r(3);Object(n.exportToNamespace)(["Core","IO"],y);var g=r(27);Object(n.exportToNamespace)(["Core","IO"],g);r(40),r(41),r(42),r(43);var h=r(29);Object(n.exportToNamespace)(["Core","IO"],h);var v=r(30);Object(n.exportToNamespace)(["Core","IO","Log"],v);var m=r(20);WinJS.Utilities.hasWinRT?n.ObjectFactory.instance.register(o.IFileSystemKey,[],(function(){return new m.WindowsFileSystem})):n.ObjectFactory.instance.register(o.IFileSystemKey,[],(function(){return new a.CordovaFileSystem}));var _=r(9);Object(n.exportToNamespace)(["Core","IO","Path"],_);var b=r(21);Object(n.exportToNamespace)(["Core","IO","SettingsProviders"],b);var S=r(22);Object(n.exportToNamespace)(["Core","IO","SettingsProviders"],S);var F=r(31);Object(n.exportToNamespace)(["Core","IO","SettingsProviders"],F);var A=r(23);Object(n.exportToNamespace)(["Core","IO","SettingsProviders"],A);var w=r(32);Object(n.exportToNamespace)(["Core","IO","SettingsProviders"],w);var P=r(15);Object(n.exportToNamespace)(["Core","IO","SettingsProviders"],P);var O=r(11);Object(n.exportToNamespace)(["Core","IO","SettingsProviders"],O);var I=r(33);Object(n.exportToNamespace)(["Core","IO","SettingsProviders"],I);var T=r(34);Object(n.exportToNamespace)(["Core","IO","SettingsProviders"],T);var j=r(24);Object(n.exportToNamespace)(["Core","IO","SettingsProviders"],j);var L=r(35);Object(n.exportToNamespace)(["Core","IO","SettingsProviders"],L);var C=r(25);Object(n.exportToNamespace)(["Core","IO","SettingsProviders"],C);var D=r(1);Object(n.exportToNamespace)(["Core","IO","Utility","Conversion"],D);r(44);var E=r(36);Object(n.exportToNamespace)(["Core","IO"],E);r(45);var x=r(37);Object(n.exportToNamespace)(["Core","IO"],x);var W=r(38);Object(n.exportToNamespace)(["Core","IO"],W);var B=r(17);Object(n.exportToNamespace)(["Core","IO"],B);var U=r(26);Object(n.exportToNamespace)(["Core","IO"],U);var k=r(39);Object(n.exportToNamespace)(["Core","IO"],k);r(28);Object(n.exportToNamespace)(["Core","IO"],m);var N=r(6);Object(n.exportToNamespace)(["Core","IO"],N);var V=r(12);Object(n.exportToNamespace)(["Core","IO"],V);var R=r(16);Object(n.exportToNamespace)(["Core","IO"],R)},function(e,t,r){"use strict";r.r(t);var n=r(4),o=r(5),i=r(18),a=r(7),s=r(8),c=r(2),u=r(19),l=r(13),f=r(10),d=r(14),p=r(3),y=r(27),g=r(40),h=r(41),v=r(42),m=r(43),_=r(29),b=r(30),S=r(9),F=r(21),A=r(22),w=r(31),P=r(23),O=r(32),I=r(15),T=r(11),j=r(33),L=r(34),C=r(24),D=r(35),E=r(25),x=r(1),W=r(44),B=r(36),U=r(45),k=r(37),N=r(38),V=r(17),R=r(26),K=r(39),M=r(28),q=r(20),J=r(6),z=r(12),Q=r(16);r.d(t,"IAsyncSettingsProviderKey",(function(){return n.IAsyncSettingsProviderKey})),r.d(t,"IEncryptedStorageKey",(function(){return n.IEncryptedStorageKey})),r.d(t,"IFileSystemKey",(function(){return n.IFileSystemKey})),r.d(t,"TempAppFolder",(function(){return o.TempAppFolder})),r.d(t,"TempFolder",(function(){return o.TempFolder})),r.d(t,"UserSavedDataFolder",(function(){return o.UserSavedDataFolder})),r.d(t,"CordovaFileSystem",(function(){return i.CordovaFileSystem})),r.d(t,"CordovaStorageFile",(function(){return a.CordovaStorageFile})),r.d(t,"CordovaStorageFolder",(function(){return s.CordovaStorageFolder})),r.d(t,"CreationCollisionOption",(function(){return c.CreationCollisionOption})),r.d(t,"FileLogWriter",(function(){return u.FileLogWriter})),r.d(t,"FileLogWriterBase",(function(){return l.FileLogWriterBase})),r.d(t,"FileSystem",(function(){return f.FileSystem})),r.d(t,"deleteFileFromFolderIfExists",(function(){return d.deleteFileFromFolderIfExists})),r.d(t,"deleteFolderFromFolderIfExists",(function(){return d.deleteFolderFromFolderIfExists})),r.d(t,"tryGetFolderAsync",(function(){return d.tryGetFolderAsync})),r.d(t,"tryReadJsonFileAsync",(function(){return d.tryReadJsonFileAsync})),r.d(t,"tryReadTextFileAsync",(function(){return d.tryReadTextFileAsync})),r.d(t,"AppDataFolderLocator",(function(){return p.AppDataFolderLocator})),r.d(t,"IAppDataFolderLocator",(function(){return p.IAppDataFolderLocator})),r.d(t,"IDataState",(function(){return y.IDataState})),r.d(t,"SaveDataResult",(function(){return y.SaveDataResult})),r.d(t,"IFile",(function(){return g.IFile})),r.d(t,"IFileSystem",(function(){return h.IFileSystem})),r.d(t,"IFolder",(function(){return v.IFolder})),r.d(t,"ILocalForageDataStore",(function(){return m.ILocalForageDataStore})),r.d(t,"LocalForageDataStore",(function(){return _.LocalForageDataStore})),r.d(t,"NativeFileLogWriter",(function(){return b.NativeFileLogWriter})),r.d(t,"alternatePathSeparatorCharacter",(function(){return S.alternatePathSeparatorCharacter})),r.d(t,"combine",(function(){return S.combine})),r.d(t,"combineFilesystemPath",(function(){return S.combineFilesystemPath})),r.d(t,"createFileFromRelativePathAsync",(function(){return S.createFileFromRelativePathAsync})),r.d(t,"createFolderFromRelativePathAsync",(function(){return S.createFolderFromRelativePathAsync})),r.d(t,"getFullPath",(function(){return S.getFullPath})),r.d(t,"pathSeparatorCharacter",(function(){return S.pathSeparatorCharacter})),r.d(t,"EncryptedWebSettingsProvider",(function(){return F.EncryptedWebSettingsProvider})),r.d(t,"FileSettingsProvider",(function(){return A.FileSettingsProvider})),r.d(t,"IAsyncSettingsProvider",(function(){})),r.d(t,"INetworkSettingsProvider",(function(){})),r.d(t,"ISettingsProvider",(function(){})),r.d(t,"LocalForageAsyncSettingsProvider",(function(){return w.LocalForageAsyncSettingsProvider})),r.d(t,"LocalForageSettingsProviderBySetting",(function(){return P.LocalForageSettingsProviderBySetting})),r.d(t,"LocalStorageAsyncSettingsProvider",(function(){return O.LocalStorageAsyncSettingsProvider})),r.d(t,"LocalStorageSettingsProvider",(function(){return I.LocalStorageSettingsProvider})),r.d(t,"MemorySettingsProvider",(function(){return T.MemorySettingsProvider})),r.d(t,"NetworkSettingsProvider",(function(){return j.NetworkSettingsProvider})),r.d(t,"NoOpSettingsProvider",(function(){return L.NoOpSettingsProvider})),r.d(t,"SessionStorageSettingsProvider",(function(){return C.SessionStorageSettingsProvider})),r.d(t,"SettingsProviderFactory",(function(){return D.SettingsProviderFactory})),r.d(t,"WebStorageSettingsProvider",(function(){return E.WebStorageSettingsProvider})),r.d(t,"IBufferToArrayBuffer",(function(){return x.IBufferToArrayBuffer})),r.d(t,"arrayBufferToBase64",(function(){return x.arrayBufferToBase64})),r.d(t,"arrayBufferToIBuffer",(function(){return x.arrayBufferToIBuffer})),r.d(t,"arrayBufferToString",(function(){return x.arrayBufferToString})),r.d(t,"arrayBufferToTextAsync",(function(){return x.arrayBufferToTextAsync})),r.d(t,"base64ToArrayBuffer",(function(){return x.base64ToArrayBuffer})),r.d(t,"base64ToBlob",(function(){return x.base64ToBlob})),r.d(t,"base64ToText",(function(){return x.base64ToText})),r.d(t,"blobToString",(function(){return x.blobToString})),r.d(t,"blobToString2",(function(){return x.blobToString2})),r.d(t,"convertBlobToArrayBuffer",(function(){return x.convertBlobToArrayBuffer})),r.d(t,"convertBlobToDataUriAsync",(function(){return x.convertBlobToDataUriAsync})),r.d(t,"dataURItoBlob",(function(){return x.dataURItoBlob})),r.d(t,"fileToByteArrayAsync",(function(){return x.fileToByteArrayAsync})),r.d(t,"stringToArrayBuffer",(function(){return x.stringToArrayBuffer})),r.d(t,"IBlobEntry",(function(){return W.IBlobEntry})),r.d(t,"EncryptedStorage",(function(){return B.EncryptedStorage})),r.d(t,"IEncryptedStorage",(function(){return U.IEncryptedStorage})),r.d(t,"TeamsNativeEncryptedStorage",(function(){return k.TeamsNativeEncryptedStorage})),r.d(t,"WebFileSystem",(function(){return N.WebFileSystem})),r.d(t,"WebStorageFile",(function(){return V.WebStorageFile})),r.d(t,"WebStorageFolder",(function(){return R.WebStorageFolder})),r.d(t,"BackgroundDownloader",(function(){return K.BackgroundDownloader})),r.d(t,"IBackgroundDownloader",(function(){return M.IBackgroundDownloader})),r.d(t,"IDownloadOperation",(function(){return M.IDownloadOperation})),r.d(t,"WindowsFileSystem",(function(){return q.WindowsFileSystem})),r.d(t,"WindowsUtility",(function(){return J.WindowsUtility})),r.d(t,"WrappedStorageFile",(function(){return z.WrappedStorageFile})),r.d(t,"WrappedStorageFolder",(function(){return Q.WrappedStorageFolder}))}]);
//# sourceMappingURL=D:/a/_work/1/s/obj/Assets/js/Core.IO/Core.IO.js.map