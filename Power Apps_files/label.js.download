/*! For license information please see Label.js.LICENSE.txt */
(function(){return this?this:window}())["@pa-client/label"]=function(t){var e={};function i(o){if(e[o])return e[o].exports;var n=e[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(o,n,function(e){return t[e]}.bind(null,n));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t,e,i){"use strict";i.r(e),i.d(e,"Label",(function(){return o})),i.d(e,"LabelShortcutProvider",(function(){return n}));var o=function(){function t(){this._tagsManager=null}return Object.defineProperty(t.prototype,"getTagsManager",{get:function(){return null===this._tagsManager&&(this._tagsManager=new AppMagic.Controls.SpanTagsManager),this._tagsManager},enumerable:!1,configurable:!0}),t.prototype.initControlContext=function(t){t._containerDiv=null,t._autoHeightOuterContainer=null,t._domObserver=null,t._minHeight=AppMagic.Constants.Controls.MinLabelAutoHeight,t._maxHeight=null,t._parentScreenSubscription=null,t._autoHeightScheduled=!1,t._autoHeightTimeoutId=null},t.prototype.initView=function(t,e){var i=this,o=this._handleClick.bind(this,e);e.handleClick=o,e.shortcutProvider=new n(o),e.shortcutsEnabled=this._shortcutsEnabled.bind(this,e),e.live=ko.pureComputed((function(){var t=e.properties;if(t.IsErrorMessage&&t.IsErrorMessage())return"assertive";var i=t.Live();return"assertive"===i||"polite"===i?i:null})),ko.applyBindings(e,t),this._setTabbability(e,e.viewState.displayMode()===AppMagic.Constants.DisplayMode.Edit),e._viewStateDisplayModeSubscription=e.viewState.displayMode.subscribe((function(t){i._setTabbability(e,t===AppMagic.Constants.DisplayMode.Edit)})),e._autoHeightOuterContainer=t,e._containerDiv=t.querySelector(".appmagic-label-text"),e._maxHeight=e.modelProperties.maximumHeight.getValue(),e._parentScreenSubscription=e.isParentScreenActive.subscribe(function(t,e){e&&this._updateForAutoHeight(t)}.bind(this,e),this),e.modelProperties.AutoHeight.getValue()&&(this._setupDomObserver(e),this._updateForAutoHeight(e,!0))},t.prototype.updateAutoHeightOnParentVisible=function(t){this._updateForAutoHeight(t,!0)},t.prototype.onChangeWidth=function(t,e){e.realized&&!t.self&&e.modelProperties.AutoHeight.getValue()&&this._updateForAutoHeight(e,!0)},t.prototype.onChangeHeight=function(t,e){e.realized&&(t.self||this._updateForAutoHeight(e))},t.prototype.onChangePaddingBottom=function(t,e){this._onChangePadding(e)},t.prototype.onChangePaddingLeft=function(t,e){this._onChangePadding(e)},t.prototype.onChangePaddingRight=function(t,e){this._onChangePadding(e)},t.prototype.onChangePaddingTop=function(t,e){this._onChangePadding(e)},t.prototype._onChangePadding=function(t){var e=!Core.FallbackSwitch.isActivated("Controls.ResizeObserverForAutoHeight");t.realized&&e&&this._updateForAutoHeight(t)},t.prototype.onChangeText=function(t,e){e.realized&&(null!==t.newValue&&""!==t.newValue||this._updateForAutoHeight(e))},t.prototype.onChangeTabIndex=function(t,e){e.realized&&e._accessibilityItem&&AppMagic.Controls.AccessibilityHelper.updateTabIndex(e._accessibilityItem,e)},t.prototype.onChangeZIndex=function(t,e){e.realized&&e._accessibilityItem&&AppMagic.Controls.AccessibilityHelper.updateZIndex(e._accessibilityItem,e)},t.prototype.onChangeX=function(t,e){this._onChangeLocation(e)},t.prototype.onChangeY=function(t,e){this._onChangeLocation(e)},t.prototype._onChangeLocation=function(t){t._accessibilityItem&&AppMagic.Controls.AccessibilityHelper.updateLocation(t._accessibilityItem,t)},t.prototype.onViewPositioningComplete=function(t){t.realized&&this._updateForAutoHeight(t)},t.prototype.onChangeAutoHeight=function(t,e){e.realized&&(e.modelProperties.AutoHeight.getValue()?(this._setupDomObserver(e),this._updateForAutoHeight(e)):(this._disposeDomObserver(e),e._autoHeightTimeoutId&&(window.clearTimeout(e._autoHeightTimeoutId),e._autoHeightTimeoutId=null)))},t.prototype.onChangeVisible=function(t,e){e.realized&&this._updateForAutoHeight(e,!0)},t.prototype._handleClick=function(t){return t.viewState.displayMode()!==AppMagic.Constants.DisplayMode.Edit||t.behaviors.OnSelect(),!1},t.prototype._shortcutsEnabled=function(t){return!Core.Environment.isAuthoringTool()||document.activeElement!==t._containerDiv},t.prototype._shouldUpdateForAutoHeight=function(t){return!!(t.initialized&&t.realized&&t.modelProperties.AutoHeight.getValue()&&t.isParentScreenActive.peek())&&(t.modelProperties.Visible.getValue()&&!t.controlWidget.isAncestorHidden(t))},t.prototype._updateForAutoHeight=function(t,e){var i=this;void 0===e&&(e=!1),this._shouldUpdateForAutoHeight(t)&&!t._autoHeightTimeoutId&&(e?t._autoHeightTimeoutId=window.setTimeout((function(){t._autoHeightTimeoutId=null,i._shouldUpdateForAutoHeight(t)&&i._adjustHeight(t)}),0):this._adjustHeight(t))},t.prototype._adjustHeight=function(t){t._containerDiv&&!t._autoHeightScheduled&&(t._autoHeightScheduled=!0,AppMagic.Controls.ControlAutoSizeUtil.fitControlHeightToContentAsync(t,t._containerDiv,t._minHeight,t._maxHeight,3).then((function(){t._autoHeightScheduled=!1})))},t.prototype._setupDomObserver=function(t){if(t._autoHeightOuterContainer&&!t._domObserver){var e=!Core.FallbackSwitch.isActivated("Controls.ResizeObserverForAutoHeight"),i=this._updateForAutoHeight.bind(this,t,!1);e?(t._domObserver=new ResizeObserver(i),t._domObserver.observe(t._containerDiv,{box:"border-box"})):(t._domObserver=new MutationObserver(i),t._domObserver.observe(t._autoHeightOuterContainer,{childList:!0,attributes:!0,characterData:!0,subtree:!0}))}},t.prototype._disposeDomObserver=function(t){t._domObserver&&(t._domObserver.disconnect(),t._domObserver=null)},t.prototype._setTabbability=function(t,e){var i=t.container.querySelector(".appmagic-label");e?t._accessibilityItem||(t._accessibilityItem=AppMagic.Controls.AccessibilityHelper.createAccessibilityItem(t,i),AppMagic.Controls.AccessibilityManager.registerItem(t._accessibilityItem)):(this._disposeAccessibilityItem(t),i.removeAttribute("tabindex"))},t.prototype._disposeAccessibilityItem=function(t){t._accessibilityItem&&(AppMagic.Controls.AccessibilityManager.unregisterItem(t._accessibilityItem),t._accessibilityItem.dispose(),t._accessibilityItem=null)},t.prototype.disposeView=function(t,e){this._disposeDomObserver(e),e._autoHeightTimeoutId&&(window.clearTimeout(e._autoHeightTimeoutId),e._autoHeightTimeoutId=null),e._parentScreenSubscription&&(e._parentScreenSubscription.dispose(),e._parentScreenSubscription=null),e._parentVisibilityListener&&(e._parentVisibilityListener.dispose(),e._parentVisibilityListener=null),e._viewStateDisplayModeSubscription&&(e._viewStateDisplayModeSubscription.dispose(),e._viewStateDisplayModeSubscription=null),this._disposeAccessibilityItem(e),e.shortcutProvider&&(e.shortcutProvider.dispose(),e.shortcutProvider=null),e.live&&(e.live.dispose(),e.live=null),e._containerDiv=null,e._autoHeightOuterContainer=null,e.handleClick=null,e.shortcutsEnabled=null},t.prototype.enterTextMode=function(){var t=AppMagic.Controls.ControlWidget.getTextModeAuthoringContext(this);if(t){var e=t._containerDiv;if(e)try{Core.Utility.selectAllTextInElement(e)}catch(t){}}},t.prototype.getTextAreaPosition=function(){var t=AppMagic.Controls.ControlWidget.getTextModeAuthoringContext(this);if(t){var e=t._containerDiv;if(e&&e.parentElement)return AppMagic.Controls.PublishedAppInlineEditText.getInlineElementRelativePosition(e)}return null},t}(),n=function(t){function e(e){var i=t.call(this)||this;return i.addShortcutKey(Core.UI.Constants.Keys.enter,e),i.addShortcutKey(Core.UI.Constants.Keys.space,e),i.addShortcutKey(Core.UI.Constants.Keys.end,i.stop),i.addShortcutKey(Core.UI.Constants.Keys.home,i.stop),i}return __extends(e,t),e.prototype.stop=function(t){return t.stopPropagation(),!1},e}(Core.UI.Shortcuts.BaseShortcutProvider)},function(t,e,i){i(3),t.exports=i(2)},function(t,e,i){"use strict";i.r(e);var o=i(0);i.d(e,"ILabelControlContext",(function(){return o.ILabelControlContext})),i.d(e,"Label",(function(){return o.Label})),i.d(e,"LabelShortcutProvider",(function(){return o.LabelShortcutProvider}))},function(t,e,i){"use strict";i.r(e);var o=i(0);Core.exportToNamespace(["AppMagic","Controls"],o)}]);
//# sourceMappingURL=D:/a/_work/1/s/obj/Assets/js/Label/Label.js.map