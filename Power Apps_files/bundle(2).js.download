var pcf_tools_652ac3f36e1e4bca82eb3c1dc44e6fad=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=44)}([
/*!**************************!*\
  !*** external "BABYLON" ***!
  \**************************/
/*! no static exports found */
/*! exports used: AbstractMesh, Camera, Color3, Color4, Constants, CreateGround, DirectionalLight, DynamicTexture, Effect, EffectFallbacks, FreeCamera, ImageProcessingConfiguration, MaterialDefines, MaterialFlags, MaterialHelper, Matrix, Mesh, MeshBuilder, PBRMaterial, Plane, PushMaterial, Quaternion, RegisterClass, RenderTargetTexture, Scene, SerializationHelper, ShaderCodeInliner, ShaderMaterial, ShaderStore, ShadowGenerator, SmartArray, StandardMaterial, Tags, Texture, Tools, TransformNode, Vector2, Vector3, Vector4, VertexBuffer, VertexData, VideoTexture, bindClipPlane, expandToProperty, serialize, serializeAsColor3, serializeAsTexture, serializeAsVector2, serializeAsVector3 */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=BABYLON},
/*!************************!*\
  !*** external "React" ***!
  \************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=React},
/*!*******************************************************************************************************!*\
  !*** /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/fbjs@3.0.5/node_modules/fbjs/lib/invariant.js ***!
  \*******************************************************************************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";var r=function(e){};e.exports=function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];if(r(t),!e){var a;if(void 0===t)a=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=0;(a=new Error(t.replace(/%s/g,(function(){return String(i[s++])})))).name="Invariant Violation"}throw a.framesToPop=1,a}}},
/*!******************************************************************************************************************!*\
  !*** /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/fbjs@3.0.5/node_modules/fbjs/lib/ExecutionEnvironment.js ***!
  \******************************************************************************************************************/
/*! no static exports found */
/*! exports used: canUseDOM, default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";var r=!("undefined"==typeof window||!window.document||!window.document.createElement),i={canUseDOM:r,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};e.exports=i},
/*!********************************!*\
  !*** external "FluentUIReact" ***!
  \********************************/
/*! no static exports found */
/*! exports used: FontIcon, Spinner, SpinnerSize, mergeStyles, registerIcons */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=FluentUIReact},
/*!***************************!*\
  !*** external "ReactDOM" ***!
  \***************************/
/*! no static exports found */
/*! exports used: findDOMNode, render, unmountComponentAtNode */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */,function(e,t){e.exports=ReactDOM},
/*!*******************************************************************************************************************************!*\
  !*** /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/hyphenate-style-name@1.0.4/node_modules/hyphenate-style-name/index.js ***!
  \*******************************************************************************************************************************/
/*! exports provided: default */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is referenced from these modules with unsupported syntax: /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/css-in-js-utils@3.1.0/node_modules/css-in-js-utils/lib/hyphenateProperty.js (referenced with cjs require) */function(e,t,n){"use strict";n.r(t);var r=/[A-Z]/g,i=/^ms-/,o={};function a(e){return"-"+e.toLowerCase()}t.default=function(e){if(o.hasOwnProperty(e))return o[e];var t=e.replace(r,a);return o[e]=i.test(t)?"-"+t:t}},
/*!*********************************************************************************************************************!*\
  !*** /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/serialize-error@4.1.0/node_modules/serialize-error/index.js ***!
  \*********************************************************************************************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const o=(e,t)=>{const n=Array.isArray(e)?[]:{};t.push(e);for(const a of Object.entries(e)){var i=r(a,2);const s=i[0],l=i[1];"function"!=typeof l&&(l&&"object"==typeof l?t.includes(e[s])?n[s]="[Circular]":n[s]=o(e[s],t.slice()):n[s]=l)}const a=["name","message","stack","code"];for(const t of a)"string"==typeof e[t]&&(n[t]=e[t]);return n},a=e=>"object"==typeof e?o(e,[]):"function"==typeof e?`[Function: ${e.name||"anonymous"}]`:e;e.exports=a,e.exports.default=a},
/*!***********************************************************************************************************************************!*\
  !*** /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/css-in-js-utils@3.1.0/node_modules/css-in-js-utils/lib/isPrefixedValue.js ***!
  \***********************************************************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return"string"==typeof e&&r.test(e)};var r=/-webkit-|-moz-|-ms-/},
/*!*****************************************************************************************************!*\
  !*** /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/fbjs@3.0.5/node_modules/fbjs/lib/warning.js ***!
  \*****************************************************************************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";var r=n(/*! ./emptyFunction */40);e.exports=r},
/*!******************************************************************************************************************************************************!*\
  !*** /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/inline-style-prefixer@6.0.4/node_modules/inline-style-prefixer/lib/utils/capitalizeString.js ***!
  \******************************************************************************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},
/*!*************************************************************************************************************************************!*\
  !*** /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/css-in-js-utils@3.1.0/node_modules/css-in-js-utils/es/index.js + 12 modules ***!
  \*************************************************************************************************************************************/
/*! exports provided: assignStyle, camelCaseProperty, cssifyDeclaration, cssifyObject, hyphenateProperty, isPrefixedProperty, isPrefixedValue, isUnitlessProperty, normalizeProperty, resolveArrayValue, unprefixProperty, unprefixValue */
/*! all exports used */
/*! ModuleConcatenation bailout: Cannot concat with /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/hyphenate-style-name@1.0.4/node_modules/hyphenate-style-name/index.js (<- Module is referenced from these modules with unsupported syntax: /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/css-in-js-utils@3.1.0/node_modules/css-in-js-utils/lib/hyphenateProperty.js (referenced with cjs require)) */function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e){return e.filter((function(t,n){return e.lastIndexOf(t)===n}))}function s(e){for(var t=0,n=arguments.length<=1?0:arguments.length-1;t<n;++t){var o=t+1<1||arguments.length<=t+1?void 0:arguments[t+1];for(var l in o){var u=o[l],c=e[l];if(c&&u){if(Array.isArray(c)){e[l]=a(c.concat(u));continue}if(Array.isArray(u)){e[l]=a([c].concat(i(u)));continue}if("object"===r(u)){e[l]=s({},c,u);continue}}e[l]=u}}return e}n.r(t),n.d(t,"assignStyle",(function(){return s})),n.d(t,"camelCaseProperty",(function(){return d})),n.d(t,"cssifyDeclaration",(function(){return m})),n.d(t,"cssifyObject",(function(){return v})),n.d(t,"hyphenateProperty",(function(){return h})),n.d(t,"isPrefixedProperty",(function(){return y})),n.d(t,"isPrefixedValue",(function(){return S})),n.d(t,"isUnitlessProperty",(function(){return L})),n.d(t,"normalizeProperty",(function(){return F})),n.d(t,"resolveArrayValue",(function(){return N})),n.d(t,"unprefixProperty",(function(){return D})),n.d(t,"unprefixValue",(function(){return V}));var l=/-([a-z])/g,u=/^Ms/g,c={};function f(e){return e[1].toUpperCase()}function d(e){if(c.hasOwnProperty(e))return c[e];var t=e.replace(l,f).replace(u,"ms");return c[e]=t,t}var p=n(7);function h(e){return Object(p.default)(e)}function m(e,t){return h(e)+":"+t}function v(e){var t="";for(var n in e){var r=e[n];"string"!=typeof r&&"number"!=typeof r||(t&&(t+=";"),t+=m(n,r))}return t}var g=/^(Webkit|Moz|O|ms)/;function y(e){return g.test(e)}var b=/-webkit-|-moz-|-ms-/;function S(e){return"string"==typeof e&&b.test(e)}var x,_,E={borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},C=["animationIterationCount","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","flex","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridColumn","gridColumnEnd","gridColumnStart","gridRow","gridRowEnd","gridRowStart","lineClamp","order"],T=["Webkit","ms","Moz","O"];for(var P=0,A=C.length;P<A;++P){var R=C[P];E[R]=!0;for(var O=0,w=T.length;O<w;++O)E[(x=T[O],_=R,x+_.charAt(0).toUpperCase()+_.slice(1))]=!0}for(var M in E)E[h(M)]=!0;function L(e){return E.hasOwnProperty(e)}var I=/^(ms|Webkit|Moz|O)/;function D(e){var t=e.replace(I,"");return t.charAt(0).toLowerCase()+t.slice(1)}function F(e){return D(d(e))}function N(e,t){return t.join(";"+h(e)+":")}var B=/(-ms-|-webkit-|-moz-|-o-)/g;function V(e){return"string"==typeof e?e.replace(B,""):e}},
/*!********************************************************************************************************!*\
  !*** /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/earcut@2.2.3/node_modules/earcut/src/earcut.js ***!
  \********************************************************************************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";function r(e,t,n){n=n||2;var r,s,l,u,c,p,h,v=t&&t.length,g=v?t[0]*n:e.length,y=i(e,0,g,n,!0),b=[];if(!y||y.next===y.prev)return b;if(v&&(y=function(e,t,n,r){var a,s,l,u,c,p=[];for(a=0,s=t.length;a<s;a++)l=t[a]*r,u=a<s-1?t[a+1]*r:e.length,(c=i(e,l,u,r,!1))===c.next&&(c.steiner=!0),p.push(m(c));for(p.sort(f),a=0;a<p.length;a++)n=o(n=d(p[a],n),n.next);return n}(e,t,y,n)),e.length>80*n){r=l=e[0],s=u=e[1];for(var S=n;S<g;S+=n)(c=e[S])<r&&(r=c),(p=e[S+1])<s&&(s=p),c>l&&(l=c),p>u&&(u=p);h=0!==(h=Math.max(l-r,u-s))?1/h:0}return a(y,b,n,r,s,h),b}function i(e,t,n,r,i){var o,a;if(i===R(e,t,n,r)>0)for(o=t;o<n;o+=r)a=T(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=T(o,e[o],e[o+1],a);return a&&b(a,a.next)&&(P(a),a=a.next),a}function o(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!b(r,r.next)&&0!==y(r.prev,r,r.next))r=r.next;else{if(P(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function a(e,t,n,r,i,f,d){if(e){!d&&f&&function(e,t,n,r){var i=e;do{null===i.z&&(i.z=h(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,o,a,s,l,u=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<u&&(s++,r=r.nextZ);t++);for(l=u;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,u*=2}while(a>1)}(i)}(e,r,i,f);for(var p,m,v=e;e.prev!==e.next;)if(p=e.prev,m=e.next,f?l(e,r,i,f):s(e))t.push(p.i/n),t.push(e.i/n),t.push(m.i/n),P(e),e=m.next,v=m.next;else if((e=m)===v){d?1===d?a(e=u(o(e),t,n),t,n,r,i,f,2):2===d&&c(e,t,n,r,i,f):a(o(e),t,n,r,i,f,1);break}}}function s(e){var t=e.prev,n=e,r=e.next;if(y(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(v(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&y(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function l(e,t,n,r){var i=e.prev,o=e,a=e.next;if(y(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,l=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,u=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,f=h(s,l,t,n,r),d=h(u,c,t,n,r),p=e.prevZ,m=e.nextZ;p&&p.z>=f&&m&&m.z<=d;){if(p!==e.prev&&p!==e.next&&v(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&y(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,m!==e.prev&&m!==e.next&&v(i.x,i.y,o.x,o.y,a.x,a.y,m.x,m.y)&&y(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(;p&&p.z>=f;){if(p!==e.prev&&p!==e.next&&v(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&y(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;m&&m.z<=d;){if(m!==e.prev&&m!==e.next&&v(i.x,i.y,o.x,o.y,a.x,a.y,m.x,m.y)&&y(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function u(e,t,n){var r=e;do{var i=r.prev,a=r.next.next;!b(i,a)&&S(i,r,r.next,a)&&E(i,a)&&E(a,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(a.i/n),P(r),P(r.next),r=e=a),r=r.next}while(r!==e);return o(r)}function c(e,t,n,r,i,s){var l=e;do{for(var u=l.next.next;u!==l.prev;){if(l.i!==u.i&&g(l,u)){var c=C(l,u);return l=o(l,l.next),c=o(c,c.next),a(l,t,n,r,i,s),void a(c,t,n,r,i,s)}u=u.next}l=l.next}while(l!==e)}function f(e,t){return e.x-t.x}function d(e,t){var n=function(e,t){var n,r=t,i=e.x,o=e.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===a)return n;var l,u=n,c=n.x,f=n.y,d=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&v(o<f?i:a,o,c,f,o<f?a:i,o,r.x,r.y)&&(l=Math.abs(o-r.y)/(i-r.x),E(r,e)&&(l<d||l===d&&(r.x>n.x||r.x===n.x&&p(n,r)))&&(n=r,d=l)),r=r.next}while(r!==u);return n}(e,t);if(!n)return t;var r=C(n,e),i=o(n,n.next);return o(r,r.next),t===n?i:t}function p(e,t){return y(e.prev,e,t.prev)<0&&y(t.next,e,e.next)<0}function h(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function m(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function v(e,t,n,r,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function g(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&S(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(E(e,t)&&E(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(y(e.prev,e,t.prev)||y(e,t.prev,t))||b(e,t)&&y(e.prev,e,e.next)>0&&y(t.prev,t,t.next)>0)}function y(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function b(e,t){return e.x===t.x&&e.y===t.y}function S(e,t,n,r){var i=_(y(e,t,n)),o=_(y(e,t,r)),a=_(y(n,r,e)),s=_(y(n,r,t));return i!==o&&a!==s||(!(0!==i||!x(e,n,t))||(!(0!==o||!x(e,r,t))||(!(0!==a||!x(n,e,r))||!(0!==s||!x(n,t,r)))))}function x(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function _(e){return e>0?1:e<0?-1:0}function E(e,t){return y(e.prev,e,e.next)<0?y(e,t,e.next)>=0&&y(e,e.prev,t)>=0:y(e,t,e.prev)<0||y(e,e.next,t)<0}function C(e,t){var n=new A(e.i,e.x,e.y),r=new A(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function T(e,t,n,r){var i=new A(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function P(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function A(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function R(e,t,n,r){for(var i=0,o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}e.exports=r,e.exports.default=r,r.deviation=function(e,t,n,r){var i=t&&t.length,o=i?t[0]*n:e.length,a=Math.abs(R(e,0,o,n));if(i)for(var s=0,l=t.length;s<l;s++){var u=t[s]*n,c=s<l-1?t[s+1]*n:e.length;a-=Math.abs(R(e,u,c,n))}var f=0;for(s=0;s<r.length;s+=3){var d=r[s]*n,p=r[s+1]*n,h=r[s+2]*n;f+=Math.abs((e[d]-e[h])*(e[p+1]-e[d+1])-(e[d]-e[p])*(e[h+1]-e[d+1]))}return 0===a&&0===f?0:Math.abs((f-a)/a)},r.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)n.vertices.push(e[i][o][a]);i>0&&(r+=e[i-1].length,n.holes.push(r))}return n}},
/*!**********************************************************************************************************************************************!*\
  !*** /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/inline-style-prefixer@6.0.4/node_modules/inline-style-prefixer/lib/createPrefixer.js ***!
  \**********************************************************************************************************************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.prefixMap,n=e.plugins;return function e(s){for(var l in s){var u=s[l];if((0,a.default)(u))s[l]=e(u);else if(Array.isArray(u)){for(var c=[],f=0,d=u.length;f<d;++f){var p=(0,i.default)(n,l,u[f],s,t);(0,o.default)(c,p||u[f])}c.length>0&&(s[l]=c)}else{var h=(0,i.default)(n,l,u,s,t);h&&(s[l]=h),s=(0,r.default)(t,l,s)}}return s}};var r=s(n(/*! ./utils/prefixProperty */32)),i=s(n(/*! ./utils/prefixValue */33)),o=s(n(/*! ./utils/addNewValuesOnly */34)),a=s(n(/*! ./utils/isObject */35));function s(e){return e&&e.__esModule?e:{default:e}}},
/*!******************************************************************************************************************************************************!*\
  !*** /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/inline-style-prefixer@6.0.4/node_modules/inline-style-prefixer/lib/plugins/backgroundClip.js ***!
  \******************************************************************************************************************************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return null}},
/*!*************************************************************************************************************************************************!*\
  !*** /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/inline-style-prefixer@6.0.4/node_modules/inline-style-prefixer/lib/plugins/crossFade.js ***!
  \*************************************************************************************************************************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"==typeof t&&!(0,r.isPrefixedValue)(t)&&-1!==t.indexOf("cross-fade("))return o.map((function(e){return t.replace(i,e+"cross-fade(")}))};var r=n(/*! css-in-js-utils */12),i=/cross-fade\(/g,o=["-webkit-",""]},
/*!**********************************************************************************************************************************************!*\
  !*** /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/inline-style-prefixer@6.0.4/node_modules/inline-style-prefixer/lib/plugins/cursor.js ***!
  \**********************************************************************************************************************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("cursor"===e&&i.hasOwnProperty(t))return r.map((function(e){return e+t}))};var r=["-webkit-","-moz-",""],i={"zoom-in":!0,"zoom-out":!0,grab:!0,grabbing:!0}},
/*!**********************************************************************************************************************************************!*\
  !*** /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/inline-style-prefixer@6.0.4/node_modules/inline-style-prefixer/lib/plugins/filter.js ***!
  \**********************************************************************************************************************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"==typeof t&&!(0,r.isPrefixedValue)(t)&&-1!==t.indexOf("filter("))return o.map((function(e){return t.replace(i,e+"filter(")}))};var r=n(/*! css-in-js-utils */12),i=/filter\(/g,o=["-webkit-",""]},
/*!********************************************************************************************************************************************!*\
  !*** /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/inline-style-prefixer@6.0.4/node_modules/inline-style-prefixer/lib/plugins/flex.js ***!
  \********************************************************************************************************************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("display"===e&&r.hasOwnProperty(t))return r[t]};var r={flex:["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex","flex"],"inline-flex":["-webkit-inline-box","-moz-inline-box","-ms-inline-flexbox","-webkit-inline-flex","inline-flex"]}},
/*!*************************************************************************************************************************************************!*\
  !*** /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/inline-style-prefixer@6.0.4/node_modules/inline-style-prefixer/lib/plugins/flexboxIE.js ***!
  \*************************************************************************************************************************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){i.hasOwnProperty(e)&&(n[i[e]]=r[t]||t);if("flex"===e){if(Object.prototype.hasOwnProperty.call(o,t))return void(n.msFlex=o[t]);if(a.test(t))return void(n.msFlex=t+" 1 0%");if("number"==typeof t&&t<0)return void console.warn(s+': "flex: '+t+'", negative values are not valid and will be ignored.');if(!t.split)return console.warn(s+': "flex: '+t+'", value format are not detected, it will be remain as is'),void(n.msFlex=t);var l=t.split(/\s/);switch(l.length){case 1:return void(n.msFlex="1 1 "+t);case 2:return void(a.test(l[1])?n.msFlex=l[0]+" "+l[1]+" 0%":n.msFlex=l[0]+" 1 "+l[1]);default:n.msFlex=t}}};var r={"space-around":"distribute","space-between":"justify","flex-start":"start","flex-end":"end"},i={alignContent:"msFlexLinePack",alignSelf:"msFlexItemAlign",alignItems:"msFlexAlign",justifyContent:"msFlexPack",order:"msFlexOrder",flexGrow:"msFlexPositive",flexShrink:"msFlexNegative",flexBasis:"msFlexPreferredSize"},o={auto:"1 1 auto",inherit:"inherit",initial:"0 1 auto",none:"0 0 auto",unset:"unset"},a=/^\d+(\.\d+)?$/,s="inline-style-prefixer.flexboxIE plugin"},
/*!**************************************************************************************************************************************************!*\
  !*** /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/inline-style-prefixer@6.0.4/node_modules/inline-style-prefixer/lib/plugins/flexboxOld.js ***!
  \**************************************************************************************************************************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){"flexDirection"===e&&"string"==typeof t&&(t.indexOf("column")>-1?n.WebkitBoxOrient="vertical":n.WebkitBoxOrient="horizontal",t.indexOf("reverse")>-1?n.WebkitBoxDirection="reverse":n.WebkitBoxDirection="normal");i.hasOwnProperty(e)&&(n[i[e]]=r[t]||t)};var r={"space-around":"justify","space-between":"justify","flex-start":"start","flex-end":"end","wrap-reverse":"multiple",wrap:"multiple"},i={alignItems:"WebkitBoxAlign",justifyContent:"WebkitBoxPack",flexWrap:"WebkitBoxLines",flexGrow:"WebkitBoxFlex"}},
/*!************************************************************************************************************************************************!*\
  !*** /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/inline-style-prefixer@6.0.4/node_modules/inline-style-prefixer/lib/plugins/gradient.js ***!
  \************************************************************************************************************************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"==typeof t&&!(0,o.default)(t)&&s.test(t))return a.map((function(e){return t.replace(s,(function(t){return e+t}))}))};var r,i=n(/*! css-in-js-utils/lib/isPrefixedValue */9),o=(r=i)&&r.__esModule?r:{default:r};var a=["-webkit-","-moz-",""],s=/linear-gradient|radial-gradient|repeating-linear-gradient|repeating-radial-gradient/gi},
/*!********************************************************************************************************************************************!*\
  !*** /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/inline-style-prefixer@6.0.4/node_modules/inline-style-prefixer/lib/plugins/grid.js ***!
  \********************************************************************************************************************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function i(e){return"number"==typeof e&&!isNaN(e)}function o(e){return"string"==typeof e&&e.includes("/")}t.default=function(e,t,n){if("display"===e&&t in s)return s[t];if(e in l){(0,l[e])(t,n)}};var a=["center","end","start","stretch"],s={"inline-grid":["-ms-inline-grid","inline-grid"],grid:["-ms-grid","grid"]},l={alignSelf:function(e,t){a.indexOf(e)>-1&&(t.msGridRowAlign=e)},gridColumn:function(e,t){if(i(e))t.msGridColumn=e;else if(o(e)){var n=e.split("/"),a=r(n,2),s=a[0],u=a[1];l.gridColumnStart(+s,t);var c=u.split(/ ?span /),f=r(c,2),d=f[0],p=f[1];""===d?l.gridColumnEnd(+s+ +p,t):l.gridColumnEnd(+u,t)}else l.gridColumnStart(e,t)},gridColumnEnd:function(e,t){var n=t.msGridColumn;i(e)&&i(n)&&(t.msGridColumnSpan=e-n)},gridColumnStart:function(e,t){i(e)&&(t.msGridColumn=e)},gridRow:function(e,t){if(i(e))t.msGridRow=e;else if(o(e)){var n=e.split("/"),a=r(n,2),s=a[0],u=a[1];l.gridRowStart(+s,t);var c=u.split(/ ?span /),f=r(c,2),d=f[0],p=f[1];""===d?l.gridRowEnd(+s+ +p,t):l.gridRowEnd(+u,t)}else l.gridRowStart(e,t)},gridRowEnd:function(e,t){var n=t.msGridRow;i(e)&&i(n)&&(t.msGridRowSpan=e-n)},gridRowStart:function(e,t){i(e)&&(t.msGridRow=e)},gridTemplateColumns:function(e,t){t.msGridColumns=e},gridTemplateRows:function(e,t){t.msGridRows=e},justifySelf:function(e,t){a.indexOf(e)>-1&&(t.msGridColumnAlign=e)}}},
/*!************************************************************************************************************************************************!*\
  !*** /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/inline-style-prefixer@6.0.4/node_modules/inline-style-prefixer/lib/plugins/imageSet.js ***!
  \************************************************************************************************************************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"==typeof t&&!(0,o.default)(t)&&t.indexOf("image-set(")>-1)return a.map((function(e){return t.replace(/image-set\(/g,e+"image-set(")}))};var r,i=n(/*! css-in-js-utils/lib/isPrefixedValue */9),o=(r=i)&&r.__esModule?r:{default:r};var a=["-webkit-",""]},
/*!***********************************************************************************************************************************************!*\
  !*** /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/inline-style-prefixer@6.0.4/node_modules/inline-style-prefixer/lib/plugins/logical.js ***!
  \***********************************************************************************************************************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(Object.prototype.hasOwnProperty.call(r,e))for(var i=r[e],o=0,a=i.length;o<a;++o)n[i[o]]=t};var r={marginBlockStart:["WebkitMarginBefore"],marginBlockEnd:["WebkitMarginAfter"],marginInlineStart:["WebkitMarginStart","MozMarginStart"],marginInlineEnd:["WebkitMarginEnd","MozMarginEnd"],paddingBlockStart:["WebkitPaddingBefore"],paddingBlockEnd:["WebkitPaddingAfter"],paddingInlineStart:["WebkitPaddingStart","MozPaddingStart"],paddingInlineEnd:["WebkitPaddingEnd","MozPaddingEnd"],borderBlockStart:["WebkitBorderBefore"],borderBlockStartColor:["WebkitBorderBeforeColor"],borderBlockStartStyle:["WebkitBorderBeforeStyle"],borderBlockStartWidth:["WebkitBorderBeforeWidth"],borderBlockEnd:["WebkitBorderAfter"],borderBlockEndColor:["WebkitBorderAfterColor"],borderBlockEndStyle:["WebkitBorderAfterStyle"],borderBlockEndWidth:["WebkitBorderAfterWidth"],borderInlineStart:["WebkitBorderStart","MozBorderStart"],borderInlineStartColor:["WebkitBorderStartColor","MozBorderStartColor"],borderInlineStartStyle:["WebkitBorderStartStyle","MozBorderStartStyle"],borderInlineStartWidth:["WebkitBorderStartWidth","MozBorderStartWidth"],borderInlineEnd:["WebkitBorderEnd","MozBorderEnd"],borderInlineEndColor:["WebkitBorderEndColor","MozBorderEndColor"],borderInlineEndStyle:["WebkitBorderEndStyle","MozBorderEndStyle"],borderInlineEndWidth:["WebkitBorderEndWidth","MozBorderEndWidth"]}},
/*!************************************************************************************************************************************************!*\
  !*** /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/inline-style-prefixer@6.0.4/node_modules/inline-style-prefixer/lib/plugins/position.js ***!
  \************************************************************************************************************************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("position"===e&&"sticky"===t)return["-webkit-sticky","sticky"]}},
/*!**********************************************************************************************************************************************!*\
  !*** /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/inline-style-prefixer@6.0.4/node_modules/inline-style-prefixer/lib/plugins/sizing.js ***!
  \**********************************************************************************************************************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(i.hasOwnProperty(e)&&o.hasOwnProperty(t))return r.map((function(e){return e+t}))};var r=["-webkit-","-moz-",""],i={maxHeight:!0,maxWidth:!0,width:!0,height:!0,columnWidth:!0,minWidth:!0,minHeight:!0},o={"min-content":!0,"max-content":!0,"fill-available":!0,"fit-content":!0,"contain-floats":!0}},
/*!**************************************************************************************************************************************************!*\
  !*** /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/inline-style-prefixer@6.0.4/node_modules/inline-style-prefixer/lib/plugins/transition.js ***!
  \**************************************************************************************************************************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,a){if("string"==typeof t&&s.hasOwnProperty(e)){var u=function(e,t){if((0,i.default)(e))return e;for(var n=e.split(/,(?![^()]*(?:\([^()]*\))?\))/g),o=0,a=n.length;o<a;++o){var s=n[o],u=[s];for(var c in t){var f=(0,r.default)(c);if(s.indexOf(f)>-1&&"order"!==f)for(var d=t[c],p=0,h=d.length;p<h;++p)u.unshift(s.replace(f,l[d[p]]+f))}n[o]=u.join(",")}return n.join(",")}(t,a),c=u.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter((function(e){return!/-moz-|-ms-/.test(e)})).join(",");if(e.indexOf("Webkit")>-1)return c;var f=u.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter((function(e){return!/-webkit-|-ms-/.test(e)})).join(",");return e.indexOf("Moz")>-1?f:(n["Webkit"+(0,o.default)(e)]=c,n["Moz"+(0,o.default)(e)]=f,u)}};var r=a(n(/*! css-in-js-utils/lib/hyphenateProperty */36)),i=a(n(/*! css-in-js-utils/lib/isPrefixedValue */9)),o=a(n(/*! ../utils/capitalizeString */11));function a(e){return e&&e.__esModule?e:{default:e}}var s={transition:!0,transitionProperty:!0,WebkitTransition:!0,WebkitTransitionProperty:!0,MozTransition:!0,MozTransitionProperty:!0},l={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-"}},
/*!*****************************************************************************************************************************!*\
  !*** /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/normalize-css-color@1.0.2/node_modules/normalize-css-color/index.js ***!
  \*****************************************************************************************************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){function n(e){var t;return"number"==typeof e?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=l.hex6.exec(e))?parseInt(t[1]+"ff",16)>>>0:p.hasOwnProperty(e)?p[e]:(t=l.rgb.exec(e))?(u(t[1])<<24|u(t[2])<<16|u(t[3])<<8|255)>>>0:(t=l.rgba.exec(e))?(u(t[1])<<24|u(t[2])<<16|u(t[3])<<8|f(t[4]))>>>0:(t=l.hex3.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=l.hex8.exec(e))?parseInt(t[1],16)>>>0:(t=l.hex4.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=l.hsl.exec(e))?(255|i(c(t[1]),d(t[2]),d(t[3])))>>>0:(t=l.hsla.exec(e))?(i(c(t[1]),d(t[2]),d(t[3]))|f(t[4]))>>>0:null}function r(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function i(e,t,n){var i=n<.5?n*(1+t):n+t-n*t,o=2*n-i,a=r(o,i,e+1/3),s=r(o,i,e),l=r(o,i,e-1/3);return Math.round(255*a)<<24|Math.round(255*s)<<16|Math.round(255*l)<<8}var o="[-+]?\\d*\\.?\\d+";function a(e){return Array.prototype.slice.call(e,0)}function s(){return"\\(\\s*("+a(arguments).join(")\\s*,\\s*(")+")\\s*\\)"}var l={rgb:new RegExp("rgb"+s(o,o,o)),rgba:new RegExp("rgba"+s(o,o,o,o)),hsl:new RegExp("hsl"+s(o,"[-+]?\\d*\\.?\\d+%","[-+]?\\d*\\.?\\d+%")),hsla:new RegExp("hsla"+s(o,"[-+]?\\d*\\.?\\d+%","[-+]?\\d*\\.?\\d+%",o)),hex3:/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex4:/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#([0-9a-fA-F]{6})$/,hex8:/^#([0-9a-fA-F]{8})$/};function u(e){var t=parseInt(e,10);return t<0?0:t>255?255:t}function c(e){return(parseFloat(e)%360+360)%360/360}function f(e){var t=parseFloat(e);return t<0?0:t>1?255:Math.round(255*t)}function d(e){var t=parseFloat(e,10);return t<0?0:t>100?1:t/100}var p={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199};n.rgba=function(e){return{r:Math.round((4278190080&e)>>>24),g:Math.round((16711680&e)>>>16),b:Math.round((65280&e)>>>8),a:((255&e)>>>0)/255}},e.exports=n},
/*!****************************************************************************************************************************!*\
  !*** /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/create-react-class@15.7.0/node_modules/create-react-class/index.js ***!
  \****************************************************************************************************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";var r=n(/*! react */1),i=n(/*! ./factory */41);if(void 0===r)throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var o=(new r.Component).updater;e.exports=i(r.Component,r.isValidElement,o)},
/*!*******************************************************************************************************************************************************************************************!*\
  !*** /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/react-native-web@0.17.7_tkd4mrmlyhtsn7kpmqmlevhtga/node_modules/react-native-web/dist/vendor/react-native/FillRateHelper/index.js ***!
  \*******************************************************************************************************************************************************************************************/
/*! exports provided: default */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module uses injected variables (global) */function(e,t,n){"use strict";(function(e){function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=function(){this.any_blank_count=0,this.any_blank_ms=0,this.any_blank_speed_sum=0,this.mostly_blank_count=0,this.mostly_blank_ms=0,this.pixels_blank=0,this.pixels_sampled=0,this.pixels_scrolled=0,this.total_time_spent=0,this.sample_count=0},a=[],s=10,l=null,u=function(){function t(e){this._anyBlankStartTime=null,this._enabled=!1,this._info=new o,this._mostlyBlankStartTime=null,this._samplesStartTime=null,this._getFrameMetrics=e,this._enabled=(l||0)>Math.random(),this._resetData()}t.addListener=function(e){return null===l&&console.warn("Call `FillRateHelper.setSampleRate` before `addListener`."),a.push(e),{remove:function(){a=a.filter((function(t){return e!==t}))}}},t.setSampleRate=function(e){l=e},t.setMinSampleCount=function(e){s=e};var n=t.prototype;return n.activate=function(){this._enabled&&null==this._samplesStartTime&&(this._samplesStartTime=e.performance.now())},n.deactivateAndFlush=function(){if(this._enabled){var t=this._samplesStartTime;if(null!=t)if(this._info.sample_count<s)this._resetData();else{var n=e.performance.now()-t,i=r(r({},this._info),{},{total_time_spent:n});a.forEach((function(e){return e(i)})),this._resetData()}}},n.computeBlankness=function(t,n,r){if(!this._enabled||0===t.getItemCount(t.data)||null==this._samplesStartTime)return 0;var i=r.dOffset,o=r.offset,a=r.velocity,s=r.visibleLength;this._info.sample_count++,this._info.pixels_sampled+=Math.round(s),this._info.pixels_scrolled+=Math.round(Math.abs(i));var l=Math.round(1e3*Math.abs(a)),u=e.performance.now();null!=this._anyBlankStartTime&&(this._info.any_blank_ms+=u-this._anyBlankStartTime),this._anyBlankStartTime=null,null!=this._mostlyBlankStartTime&&(this._info.mostly_blank_ms+=u-this._mostlyBlankStartTime),this._mostlyBlankStartTime=null;for(var c=0,f=n.first,d=this._getFrameMetrics(f);f<=n.last&&(!d||!d.inLayout);)d=this._getFrameMetrics(f),f++;d&&f>0&&(c=Math.min(s,Math.max(0,d.offset-o)));for(var p=0,h=n.last,m=this._getFrameMetrics(h);h>=n.first&&(!m||!m.inLayout);)m=this._getFrameMetrics(h),h--;if(m&&h<t.getItemCount(t.data)-1){var v=m.offset+m.length;p=Math.min(s,Math.max(0,o+s-v))}var g=Math.round(c+p),y=g/s;return y>0?(this._anyBlankStartTime=u,this._info.any_blank_speed_sum+=l,this._info.any_blank_count++,this._info.pixels_blank+=g,y>.5&&(this._mostlyBlankStartTime=u,this._info.mostly_blank_count++)):(l<.01||Math.abs(i)<1)&&this.deactivateAndFlush(),y},n.enabled=function(){return this._enabled},n._resetData=function(){this._anyBlankStartTime=null,this._info=new o,this._mostlyBlankStartTime=null,this._samplesStartTime=null},t}();t.a=u}).call(this,n(/*! ./../../../../../../../webpack@4.42.1/node_modules/webpack/buildin/global.js */43))},
/*!****************************************************************************************************************************************************!*\
  !*** /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/inline-style-prefixer@6.0.4/node_modules/inline-style-prefixer/lib/utils/prefixProperty.js ***!
  \****************************************************************************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=e[t];if(r&&n.hasOwnProperty(t))for(var i=(0,o.default)(t),a=0;a<r.length;++a){var s=r[a]+i;n[s]||(n[s]=n[t])}return n};var r,i=n(/*! ./capitalizeString */11),o=(r=i)&&r.__esModule?r:{default:r}},
/*!*************************************************************************************************************************************************!*\
  !*** /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/inline-style-prefixer@6.0.4/node_modules/inline-style-prefixer/lib/utils/prefixValue.js ***!
  \*************************************************************************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,i){for(var o=0,a=e.length;o<a;++o){var s=e[o](t,n,r,i);if(s)return s}}},
/*!******************************************************************************************************************************************************!*\
  !*** /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/inline-style-prefixer@6.0.4/node_modules/inline-style-prefixer/lib/utils/addNewValuesOnly.js ***!
  \******************************************************************************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";function r(e,t){-1===e.indexOf(t)&&e.push(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(Array.isArray(t))for(var n=0,i=t.length;n<i;++n)r(e,t[n]);else r(e,t)}},
/*!**********************************************************************************************************************************************!*\
  !*** /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/inline-style-prefixer@6.0.4/node_modules/inline-style-prefixer/lib/utils/isObject.js ***!
  \**********************************************************************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e instanceof Object&&!Array.isArray(e)}},
/*!*************************************************************************************************************************************!*\
  !*** /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/css-in-js-utils@3.1.0/node_modules/css-in-js-utils/lib/hyphenateProperty.js ***!
  \*************************************************************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e)};var r,i=n(/*! hyphenate-style-name */7),o=(r=i)&&r.__esModule?r:{default:r}},
/*!************************************************************************************************************!*\
  !*** /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/prop-types@15.6.2/node_modules/prop-types/index.js ***!
  \************************************************************************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){e.exports=n(/*! ./factoryWithThrowingShims */38)()},
/*!*******************************************************************************************************************************!*\
  !*** /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/prop-types@15.6.2/node_modules/prop-types/factoryWithThrowingShims.js ***!
  \*******************************************************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";var r=n(/*! ./lib/ReactPropTypesSecret */39);function i(){}e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=i,n.PropTypes=n,n}},
/*!*******************************************************************************************************************************!*\
  !*** /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/prop-types@15.6.2/node_modules/prop-types/lib/ReactPropTypesSecret.js ***!
  \*******************************************************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},
/*!***********************************************************************************************************!*\
  !*** /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/fbjs@3.0.5/node_modules/fbjs/lib/emptyFunction.js ***!
  \***********************************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";function r(e){return function(){return e}}var i=function(){};i.thatReturns=r,i.thatReturnsFalse=r(!1),i.thatReturnsTrue=r(!0),i.thatReturnsNull=r(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(e){return e},e.exports=i},
/*!******************************************************************************************************************************!*\
  !*** /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/create-react-class@15.7.0/node_modules/create-react-class/factory.js ***!
  \******************************************************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";var r=n(/*! object-assign */42),i={};function o(e,t,n,r,i,o,a,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,o,a,s],c=0;(l=new Error(t.replace(/%s/g,(function(){return u[c++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}e.exports=function(e,t,n){var a=[],s={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",UNSAFE_componentWillMount:"DEFINE_MANY",UNSAFE_componentWillReceiveProps:"DEFINE_MANY",UNSAFE_componentWillUpdate:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},l={getDerivedStateFromProps:"DEFINE_MANY_MERGED"},u={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)f(e,t[n])},childContextTypes:function(e,t){e.childContextTypes=r({},e.childContextTypes,t)},contextTypes:function(e,t){e.contextTypes=r({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=p(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){e.propTypes=r({},e.propTypes,t)},statics:function(e,t){!function(e,t){if(!t)return;for(var n in t){var r=t[n];if(t.hasOwnProperty(n)){if(o(!(n in u),'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',n),n in e)return o("DEFINE_MANY_MERGED"===(l.hasOwnProperty(n)?l[n]:null),"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",n),void(e[n]=p(e[n],r));e[n]=r}}}(e,t)},autobind:function(){}};function c(e,t){var n=s.hasOwnProperty(t)?s[t]:null;y.hasOwnProperty(t)&&o("OVERRIDE_BASE"===n,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",t),e&&o("DEFINE_MANY"===n||"DEFINE_MANY_MERGED"===n,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",t)}function f(e,n){if(n){o("function"!=typeof n,"ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),o(!t(n),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var r=e.prototype,i=r.__reactAutoBindPairs;for(var a in n.hasOwnProperty("mixins")&&u.mixins(e,n.mixins),n)if(n.hasOwnProperty(a)&&"mixins"!==a){var l=n[a],f=r.hasOwnProperty(a);if(c(f,a),u.hasOwnProperty(a))u[a](e,l);else{var d=s.hasOwnProperty(a);if("function"==typeof l&&!d&&!f&&!1!==n.autobind)i.push(a,l),r[a]=l;else if(f){var m=s[a];o(d&&("DEFINE_MANY_MERGED"===m||"DEFINE_MANY"===m),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",m,a),"DEFINE_MANY_MERGED"===m?r[a]=p(r[a],l):"DEFINE_MANY"===m&&(r[a]=h(r[a],l))}else r[a]=l}}}else;}function d(e,t){for(var n in o(e&&t&&"object"==typeof e&&"object"==typeof t,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects."),t)t.hasOwnProperty(n)&&(o(void 0===e[n],"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",n),e[n]=t[n]);return e}function p(e,t){return function(){var n=e.apply(this,arguments),r=t.apply(this,arguments);if(null==n)return r;if(null==r)return n;var i={};return d(i,n),d(i,r),i}}function h(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function m(e,t){return t.bind(e)}var v={componentDidMount:function(){this.__isMounted=!0}},g={componentWillUnmount:function(){this.__isMounted=!1}},y={replaceState:function(e,t){this.updater.enqueueReplaceState(this,e,t)},isMounted:function(){return!!this.__isMounted}},b=function(){};return r(b.prototype,e.prototype,y),function(e){var t=function(e,r,a){this.__reactAutoBindPairs.length&&function(e){for(var t=e.__reactAutoBindPairs,n=0;n<t.length;n+=2){var r=t[n],i=t[n+1];e[r]=m(e,i)}}(this),this.props=e,this.context=r,this.refs=i,this.updater=a||n,this.state=null;var s=this.getInitialState?this.getInitialState():null;o("object"==typeof s&&!Array.isArray(s),"%s.getInitialState(): must return an object or null",t.displayName||"ReactCompositeComponent"),this.state=s};for(var r in t.prototype=new b,t.prototype.constructor=t,t.prototype.__reactAutoBindPairs=[],a.forEach(f.bind(null,t)),f(t,v),f(t,e),f(t,g),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),o(t.prototype.render,"createClass(...): Class specification must implement a `render` method."),s)t.prototype[r]||(t.prototype[r]=null);return t}}},
/*!*****************************************************************************************************************!*\
  !*** /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/object-assign@4.1.1/node_modules/object-assign/index.js ***!
  \*****************************************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,l=a(e),u=1;u<arguments.length;u++){for(var c in n=Object(arguments[u]))i.call(n,c)&&(l[c]=n[c]);if(r){s=r(n);for(var f=0;f<s.length;f++)o.call(n,s[f])&&(l[s[f]]=n[s[f]])}}return l}},
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},
/*!**********************************************!*\
  !*** ./BarcodeReader/index.ts + 208 modules ***!
  \**********************************************/
/*! exports provided: BarcodeReader */
/*! all exports used */
/*! ModuleConcatenation bailout: Cannot concat with /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/create-react-class@15.7.0/node_modules/create-react-class/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/earcut@2.2.3/node_modules/earcut/src/earcut.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/fbjs@3.0.5/node_modules/fbjs/lib/ExecutionEnvironment.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/fbjs@3.0.5/node_modules/fbjs/lib/invariant.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/fbjs@3.0.5/node_modules/fbjs/lib/warning.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/hyphenate-style-name@1.0.4/node_modules/hyphenate-style-name/index.js (<- Module is referenced from these modules with unsupported syntax: /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/css-in-js-utils@3.1.0/node_modules/css-in-js-utils/lib/hyphenateProperty.js (referenced with cjs require)) */
/*! ModuleConcatenation bailout: Cannot concat with /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/inline-style-prefixer@6.0.4/node_modules/inline-style-prefixer/lib/createPrefixer.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/inline-style-prefixer@6.0.4/node_modules/inline-style-prefixer/lib/plugins/backgroundClip.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/inline-style-prefixer@6.0.4/node_modules/inline-style-prefixer/lib/plugins/crossFade.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/inline-style-prefixer@6.0.4/node_modules/inline-style-prefixer/lib/plugins/cursor.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/inline-style-prefixer@6.0.4/node_modules/inline-style-prefixer/lib/plugins/filter.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/inline-style-prefixer@6.0.4/node_modules/inline-style-prefixer/lib/plugins/flex.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/inline-style-prefixer@6.0.4/node_modules/inline-style-prefixer/lib/plugins/flexboxIE.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/inline-style-prefixer@6.0.4/node_modules/inline-style-prefixer/lib/plugins/flexboxOld.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/inline-style-prefixer@6.0.4/node_modules/inline-style-prefixer/lib/plugins/gradient.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/inline-style-prefixer@6.0.4/node_modules/inline-style-prefixer/lib/plugins/grid.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/inline-style-prefixer@6.0.4/node_modules/inline-style-prefixer/lib/plugins/imageSet.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/inline-style-prefixer@6.0.4/node_modules/inline-style-prefixer/lib/plugins/logical.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/inline-style-prefixer@6.0.4/node_modules/inline-style-prefixer/lib/plugins/position.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/inline-style-prefixer@6.0.4/node_modules/inline-style-prefixer/lib/plugins/sizing.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/inline-style-prefixer@6.0.4/node_modules/inline-style-prefixer/lib/plugins/transition.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/normalize-css-color@1.0.2/node_modules/normalize-css-color/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/react-native-web@0.17.7_tkd4mrmlyhtsn7kpmqmlevhtga/node_modules/react-native-web/dist/vendor/react-native/FillRateHelper/index.js (<- Module uses injected variables (global)) */
/*! ModuleConcatenation bailout: Cannot concat with /mnt/vss/_work/1/s/common/temp/node_modules/.pnpm/serialize-error@4.1.0/node_modules/serialize-error/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with external "BABYLON" (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with external "FluentUIReact" (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with external "React" (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with external "ReactDOM" (<- Module is not an ECMAScript module) */function(e,t,n){"use strict";n.r(t),n.d(t,"BarcodeReader",(function(){return Js}));var r,i=n(1),o=n.n(i),a=n(6),s=n(4),l=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},u=function(){function e(t,n,r,i,o){this.r=t,this.g=n,this.b=r,this.a=i,o&&(e.defaultColor=o)}return e.colorFromString=function(t){if(!t)return this.defaultColor;try{if((t=t.replace(/\s/g,"").toLowerCase()).indexOf("rgb")>-1){t=(t=t.indexOf("rgba")>-1?t.slice(t.indexOf("rgba(")+5):t.slice(t.indexOf("rgb(")+4)).slice(0,t.indexOf(")"));var n=l(t.split(","),4),r=n[0],i=n[1],o=n[2],a=n[3],s=void 0===a?"1":a;return new e(parseFloat(r),parseFloat(i),parseFloat(o),parseFloat(s))}if(t.indexOf("#")>-1){var u=this.defaultColor;return 7!==t.length&&9!==t.length||(u=e.fromHexString(t)),u}return e.defaultColor}catch(t){return console.error(t),e.defaultColor}},e.fromHexString=function(t){7==t.length&&(t+="FF");var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return n?new e(parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),parseInt(n[4],16)/255):this.defaultColor},e.validColorToRgbaString=function(t){var n=t||void 0;return n&&(n.startsWith("#")||n.toLowerCase().startsWith("rgb"))&&(n=e.colorFromString(n).toRgbaString()),n},e.numberToRgbaString=function(t){return new e(t>>16&255,t>>8&255,255&t,(t>>24&255)/255).toRgbaString()},e.prototype.toRgbaString=function(){return"rgba(".concat(this.r,", ").concat(this.g,", ").concat(this.b,", ").concat(this.a,")")},e.defaultColor=new e(0,0,0,0),e}(),c=function(){return(c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},f=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},d=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},p=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a};!function(e){e[e.arIcon=0]="arIcon",e[e.none=1]="none"}(r||(r={}));var h,m,v,g,y=function(e){var t,n=p(Object(i.useState)(!1),2),a=n[0],l=n[1],h=p(Object(i.useState)(!1),2),m=h[0],v=h[1],g=p(Object(i.useState)(!1),2),y=g[0],b=g[1],S=p(Object(i.useState)(!1),2),x=S[0],_=S[1],E="center";E="left"===e.textAlignment||"right"===e.textAlignment||"center"===e.textAlignment||"justify"===e.textAlignment?e.textAlignment:"center";var C,T="column";switch(e.verticalAlign.toLowerCase()){case"top":t="unset",T="column";break;case"bottom":t="unset",T="column-reverse";break;default:t="center"}switch(e.textAlignment.toLowerCase()){case"left":C="flex-start";break;case"right":C="flex-end";break;default:C="center"}var P="normal";switch(e.fontBoldness.toLowerCase()){case"bold":P="bold";break;case"600":case"semibold":P=600;break;case"lighter":P="lighter"}var A="";e.underline&&(A+="underline"),e.strikethrough&&(A+=" line-through");var R=e.color,O=e.borderColor,w=e.textColor;e.disabled?(R=e.disabledFill,O=e.disabledBorderColor,w=e.disabledColor):m?(R=e.pressedFill,w=e.pressedColor,O=e.pressedBorderColor):a&&(R=e.hoverFill,O=e.hoverBorderColor,w=e.hoverColor);var M,L={cursor:e.disabled||m?"not-allowed":"pointer",width:"100%",height:"100%",backgroundColor:R,border:"none"},I={fontSize:e.fontSize+"pt",color:w,fontFamily:e.font,fontWeight:P,textDecoration:A,fontStyle:e.italic?"italic":void 0,marginLeft:"0px",marginRight:"0px",textAlign:E,whiteSpace:"pre-line"},D={position:"relative",overflow:"hidden",borderColor:O,borderRadius:e.borderRadius,borderWidth:e.borderWidth,borderStyle:e.borderStyle,height:Math.max(e.height-e.borderWidth,0),width:Math.max(e.width-e.borderWidth,0),margin:e.borderWidth/2*-1,backgroundColor:R},F={paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,paddingRight:e.paddingRight,paddingLeft:e.paddingLeft},N={position:"absolute",width:"100%",height:"100%",alignItems:C,pointerEvents:"none",top:"50%",left:"50%",transform:"translate(-50%, -50%)",overflow:"hidden",display:"flex",borderRadius:e.borderRadius,flexDirection:T,textAlign:E,justifyContent:t,backgroundColor:R},B=Object(s.mergeStyles)({fontSize:1.75*e.fontSize,color:w,marginLeft:"10px",marginRight:"10px",verticalAlign:"middle"}),V=!0;switch(e.specialIconType){case r.arIcon:M=o.a.createElement(s.FontIcon,{iconName:"ViewInAR",className:B});break;case r.none:default:V=!1}function k(){return f(this,void 0,void 0,(function(){var t;return d(this,(function(n){switch(n.label){case 0:if(x)return[2];_(!0),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,e.onClick()];case 2:return n.sent(),[3,5];case 3:return t=n.sent(),console.warn(t),[3,5];case 4:return v(!1),l(!1),_(!1),[7];case 5:return[2]}}))}))}var U=u.colorFromString(e.pressedColor),z={circle:{borderColor:"".concat(U.toRgbaString()," rgba(").concat(U.r,", ").concat(U.g,", ").concat(U.b,", 0.2) rgba(").concat(U.r,", ").concat(U.g,", ").concat(U.b,", 0.2)"),marginLeft:"10px",marginRight:"10px"}},j="icon"===e.displayType.toLowerCase()||"icontext"===e.displayType.toLowerCase(),H="text"===e.displayType.toLowerCase()||"icontext"===e.displayType.toLowerCase(),W=o.a.createElement("table",{style:F},o.a.createElement("tr",null,V&&j&&o.a.createElement("td",{style:{verticalAlign:"middle"}},M),H&&o.a.createElement("td",{style:I},e.buttonText))),G=o.a.createElement("div",{style:c(c({},F),{display:"inline-flex"})},V&&j&&o.a.createElement(s.Spinner,{styles:z,size:s.SpinnerSize.large}),H&&o.a.createElement("p",{style:I},e.loadingText));return o.a.createElement("div",{style:D},o.a.createElement("div",{style:N},m&&G,!m&&W),o.a.createElement("button",{"aria-label":e.buttonText,style:L,onMouseDown:function(){v(!0)},onMouseUp:function(){k()},onKeyDown:function(e){"Enter"===e.key&&v(!0)},onKeyUp:function(e){"Enter"===e.key&&k()},onMouseOver:function(){y||l(!0)},onFocus:function(){y||l(!0)},onMouseOut:function(){l(!1),v(!1)},onBlur:function(){l(!1),v(!1)},onTouchStart:function(){b(!0),v(!0),l(!1)},onTouchEnd:function(e){e.preventDefault(),b(!1),l(!1),x||k()},disabled:e.disabled}))},b=function(){function e(){}return e.createButtonProps=function(e,t){var n,i,o,a="IconText",s=null!==(i=null===(n=e.parameters.DisplayType)||void 0===n?void 0:n.raw)&&void 0!==i?i:"Text";if(s)switch(s.toLowerCase()){case"icon":a="Icon";break;case"text":a="Text";break;default:a="IconText"}var l="Solid",u=e.parameters.BorderStyle.raw;if(u)switch(u.toLowerCase()){case"dotted":l="Dotted";break;case"dashed":l="Dashed";break;case"none":l="None";break;default:l="Solid"}return{onClick:t,specialIconType:r.arIcon,width:e.client.allocatedWidth,height:e.client.allocatedHeight,buttonText:e.parameters.Text.raw||"",loadingText:e.resources.getString("Button_Base_Loading")||"",displayType:a,paddingTop:e.parameters.PaddingTop.raw||0,paddingBottom:e.parameters.PaddingBottom.raw||0,paddingLeft:e.parameters.PaddingLeft.raw||0,paddingRight:e.parameters.PaddingRight.raw||0,color:e.parameters.FillColor.raw||"rgba(0,0,0,0)",textColor:e.parameters.TextColor.raw||"rgba(0,0,0,0)",borderRadius:e.parameters.BorderRadius.raw||0,borderStyle:l,borderWidth:null!==(o=e.parameters.BorderThickness.raw)&&void 0!==o?o:0,borderColor:e.parameters.BorderFillColor.raw||"#2f5197",font:e.parameters.Font.raw||"Open Sans",fontSize:e.parameters.FontSize.raw||0,fontBoldness:e.parameters.FontWeight.raw||"normal",italic:e.parameters.Italic.raw||!1,underline:e.parameters.Underline.raw||!1,strikethrough:e.parameters.Strikethrough.raw||!1,textAlignment:e.parameters.TextAlignment.raw||"center",verticalAlign:e.parameters.VerticalAlign.raw||"middle",disabled:e.parameters.Disabled.raw||e.mode.isControlDisabled||!1,disabledColor:e.parameters.DisabledContentColor.raw||"rgba(0,0,0,0)",disabledFill:e.parameters.DisabledFillColor.raw||"rgba(0,0,0,0)",disabledBorderColor:e.parameters.DisabledBorderColor.raw||"rgba(0,0,0,0)",pressedColor:e.parameters.PressedContentColor.raw||"rgba(0,0,0,0)",pressedFill:e.parameters.PressedFillColor.raw||"rgba(0,0,0,0)",pressedBorderColor:e.parameters.PressedBorderColor.raw||"rgba(0,0,0,0)",hoverColor:e.parameters.HoverContentColor.raw||"rgba(0,0,0,0)",hoverFill:e.parameters.HoverFillColor.raw||"rgba(0,0,0,0)",hoverBorderColor:e.parameters.HoverBorderColor.raw||"rgba(0,0,0,0)"}},e}();
/*!
 * Copyright (C) Microsoft Corporation. All rights reserved.
 */!function(e){e[e.singleSegment=0]="singleSegment",e[e.area=1]="area",e[e.volume=2]="volume",e[e.freeform=3]="freeform"}(h||(h={})),function(e){e[e.Meters=1]="Meters",e[e.Feet=2]="Feet",e[e.Centimeters=3]="Centimeters",e[e.Inches=4]="Inches"}(m||(m={})),function(e){e[e.takeMeasurement=1]="takeMeasurement",e[e.viewModel=2]="viewModel",e[e.viewImage=4]="viewImage",e[e.viewVolume=8]="viewVolume",e[e.getApiVersion=16]="getApiVersion",e[e.placeAnnotations=32]="placeAnnotations",e[e.launchCommunicator=64]="launchCommunicator",e[e.isDeviceARCapable=128]="isDeviceARCapable"}(v||(v={}));!function(e){e[e.AutomaticallySelect=0]="AutomaticallySelect",e[e.SelectToScan=1]="SelectToScan",e[e.ScanMultiple=2]="ScanMultiple",e[e.InlineScan=3]="InlineScan"}(g||(g={}));var S=n(0);n(13);
//!
//! Copyright (C) Microsoft Corporation.  All rights reserved.
//!
const x="#0078D4",_="#F8F8F899",E="#767673",C="#919191",T="#FFFFFF",P="segoeui",A="seguisb",R="ArViewerIcons",O="#459E45",w=S.Color3.White(),M=S.Color3.FromHexString("#F9B23F");
//!
//! Copyright (C) Microsoft Corporation.  All rights reserved.
//!
S.Color3.White(),S.Color3.FromHexString(O),S.Color3.FromHexString("#FF0000"),S.Color3.FromHexString("#0093B4");var L;!function(e){e[e.Other=0]="Other",e[e.HorizontalUpright=1]="HorizontalUpright",e[e.HorizontalUpsideDown=2]="HorizontalUpsideDown",e[e.Vertical=3]="Vertical"}(L||(L={}));new Map([[m.Centimeters,{conversionRatio:100,precisionDecimals:1}],[m.Meters,{conversionRatio:1,precisionDecimals:.01}],[m.Inches,{conversionRatio:39.3701,precisionDecimals:.1}],[m.Feet,{conversionRatio:3.28084,precisionDecimals:.05}]]);new S.Matrix;
//!
//! Copyright (C) Microsoft Corporation.  All rights reserved.
//!
class I{constructor(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.scene=e,this.baseEdgeMeshes=new Map,this.baseEndpointMeshes=new Map,t&&(this.getBaseEdgeMesh(w),this.getBaseEdgeMesh(M),this.getBaseEndpointMesh(w),this.getBaseEndpointMesh(M))}createInstancedEdge(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:w;const s=this.getBaseEdgeMesh(a).createInstance("Wireframe Edge Instance "+e);return s.id=s.uniqueId.toString(),s.parent=t,s.scaling.x=i,s.scaling.y=o?1e-4:i,D(s,n,r),new F(s)}createInstancedEndpoint(e,t){return this.getBaseEndpointMesh(t).createInstance("Wireframe Endpoint Instance "+e)}getBaseEdgeMesh(e){let t=this.baseEdgeMeshes.get(e);if(void 0===t){const n=e.toHexString(),r=new S.StandardMaterial("Wire Frame Material for color "+n,this.scene);r.disableLighting=!0,r.emissiveColor=e,t=S.Mesh.CreateBox("Base Wireframe Edge for color "+n,1,this.scene),t.material=r,t.setEnabled(!1),this.baseEdgeMeshes.set(e,t)}return t}getBaseEndpointMesh(e){let t=this.baseEndpointMeshes.get(e);if(!t){const n=e.toHexString(),r=new S.StandardMaterial("Base endpoint material for color "+n,this.scene);r.disableLighting=!0,r.emissiveColor=e,t=S.Mesh.CreateSphere("baseEndpointMesh for color "+n,64,I.endpointDiameter),t.scaling.y=.01,t.material=r,t.setEnabled(!1),this.baseEndpointMeshes.set(e,t)}return t}dispose(){this.baseEdgeMeshes.forEach(e=>{e.dispose()}),this.baseEndpointMeshes.forEach(e=>{e.dispose()}),this.baseEdgeMeshes.clear(),this.baseEndpointMeshes.clear()}}function D(e,t,n,r){const i=n.subtract(t);if(e.scaling.z=i.length(),e.position=S.Vector3.Center(t,n),e.isEnabled()&&e.scaling.z<.005)e.setEnabled(!1);else if(!e.isEnabled()&&e.scaling.z>.005&&e.setEnabled(!0),r){let t=r.subtract(e.position);const n=t.cross(i);t=i.cross(n),e.rotationQuaternion=S.Quaternion.RotationQuaternionFromAxis(n,t,i)}else e.lookAt(n)}I.endpointDiameter=.033;class F{constructor(e){this.edge=e}update(e,t,n){D(this.edge,e,t,n)}dispose(){this.edge.dispose()}set parent(e){this.edge.setParent(e)}}var N=function(e,t){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function B(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}N(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function V(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}Object.create;Object.create;var k="precision highp float;\n\nuniform vec4 vEyePosition;\nuniform vec4 vDiffuseColor;\n\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n\n#include<helperFunctions>\n\n#include<__decl__lightFragment>[0..maxSimultaneousLights]\n#include<lightsFragmentFunctions>\n#include<shadowsFragmentFunctions>\n\n#ifdef DIFFUSE\nvarying vec2 vDiffuseUV;\nuniform sampler2D diffuseSampler;\nuniform vec2 vDiffuseInfos;\n#endif\n#include<clipPlaneFragmentDeclaration>\n\n#include<fogFragmentDeclaration>\n\nvec3 computeCustomDiffuseLighting(lightingInfo info,vec3 diffuseBase,float shadow)\n{\ndiffuseBase=info.diffuse*shadow;\n#ifdef CELLBASIC\nfloat level=1.0;\nif (info.ndl<0.5)\nlevel=0.5;\ndiffuseBase.rgb*vec3(level,level,level);\n#else\nfloat ToonThresholds[4];\nToonThresholds[0]=0.95;\nToonThresholds[1]=0.5;\nToonThresholds[2]=0.2;\nToonThresholds[3]=0.03;\nfloat ToonBrightnessLevels[5];\nToonBrightnessLevels[0]=1.0;\nToonBrightnessLevels[1]=0.8;\nToonBrightnessLevels[2]=0.6;\nToonBrightnessLevels[3]=0.35;\nToonBrightnessLevels[4]=0.2;\nif (info.ndl>ToonThresholds[0])\n{\ndiffuseBase.rgb*=ToonBrightnessLevels[0];\n}\nelse if (info.ndl>ToonThresholds[1])\n{\ndiffuseBase.rgb*=ToonBrightnessLevels[1];\n}\nelse if (info.ndl>ToonThresholds[2])\n{\ndiffuseBase.rgb*=ToonBrightnessLevels[2];\n}\nelse if (info.ndl>ToonThresholds[3])\n{\ndiffuseBase.rgb*=ToonBrightnessLevels[3];\n}\nelse\n{\ndiffuseBase.rgb*=ToonBrightnessLevels[4];\n}\n#endif\nreturn max(diffuseBase,vec3(0.2));\n}\nvoid main(void)\n{\n#include<clipPlaneFragment>\nvec3 viewDirectionW=normalize(vEyePosition.xyz-vPositionW);\n\nvec4 baseColor=vec4(1.,1.,1.,1.);\nvec3 diffuseColor=vDiffuseColor.rgb;\n\nfloat alpha=vDiffuseColor.a;\n#ifdef DIFFUSE\nbaseColor=texture2D(diffuseSampler,vDiffuseUV);\n#ifdef ALPHATEST\nif (baseColor.a<0.4)\ndiscard;\n#endif\n#include<depthPrePass>\nbaseColor.rgb*=vDiffuseInfos.y;\n#endif\n#ifdef VERTEXCOLOR\nbaseColor.rgb*=vColor.rgb;\n#endif\n\n#ifdef NORMAL\nvec3 normalW=normalize(vNormalW);\n#else\nvec3 normalW=vec3(1.0,1.0,1.0);\n#endif\n\nlightingInfo info;\nvec3 diffuseBase=vec3(0.,0.,0.);\nfloat shadow=1.;\nfloat glossiness=0.;\n#ifdef SPECULARTERM\nvec3 specularBase=vec3(0.,0.,0.);\n#endif\n#include<lightFragment>[0..maxSimultaneousLights]\n#ifdef VERTEXALPHA\nalpha*=vColor.a;\n#endif\nvec3 finalDiffuse=clamp(diffuseBase*diffuseColor,0.0,1.0)*baseColor.rgb;\n\nvec4 color=vec4(finalDiffuse,alpha);\n#include<fogFragment>\ngl_FragColor=color;\n#include<imageProcessingCompatibility>\n}";S.ShaderStore.ShadersStore.cellPixelShader=k;var U="precision highp float;\n\nattribute vec3 position;\n#ifdef NORMAL\nattribute vec3 normal;\n#endif\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#ifdef UV2\nattribute vec2 uv2;\n#endif\n#ifdef VERTEXCOLOR\nattribute vec4 color;\n#endif\n#include<bonesDeclaration>\n#include<bakedVertexAnimationDeclaration>\n\n#include<instancesDeclaration>\nuniform mat4 view;\nuniform mat4 viewProjection;\n#ifdef DIFFUSE\nvarying vec2 vDiffuseUV;\nuniform mat4 diffuseMatrix;\nuniform vec2 vDiffuseInfos;\n#endif\n#ifdef POINTSIZE\nuniform float pointSize;\n#endif\n\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#include<clipPlaneVertexDeclaration>\n#include<fogVertexDeclaration>\n#include<__decl__lightFragment>[0..maxSimultaneousLights]\nvoid main(void) {\n#include<instancesVertex>\n#include<bonesVertex>\n#include<bakedVertexAnimation>\nvec4 worldPos=finalWorld*vec4(position,1.0);\ngl_Position=viewProjection*worldPos;\nvPositionW=vec3(worldPos);\n#ifdef NORMAL\nvNormalW=normalize(vec3(finalWorld*vec4(normal,0.0)));\n#endif\n\n#ifndef UV1\nvec2 uv=vec2(0.,0.);\n#endif\n#ifndef UV2\nvec2 uv2=vec2(0.,0.);\n#endif\n#ifdef DIFFUSE\nif (vDiffuseInfos.x == 0.)\n{\nvDiffuseUV=vec2(diffuseMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvDiffuseUV=vec2(diffuseMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n\n#include<clipPlaneVertex>\n\n#include<fogVertex>\n#include<shadowsVertex>[0..maxSimultaneousLights]\n\n#ifdef VERTEXCOLOR\nvColor=color;\n#endif\n\n#ifdef POINTSIZE\ngl_PointSize=pointSize;\n#endif\n}\n";S.ShaderStore.ShadersStore.cellVertexShader=U;var z=function(e){function t(){var t=e.call(this)||this;return t.DIFFUSE=!1,t.CLIPPLANE=!1,t.CLIPPLANE2=!1,t.CLIPPLANE3=!1,t.CLIPPLANE4=!1,t.CLIPPLANE5=!1,t.CLIPPLANE6=!1,t.ALPHATEST=!1,t.POINTSIZE=!1,t.FOG=!1,t.NORMAL=!1,t.UV1=!1,t.UV2=!1,t.VERTEXCOLOR=!1,t.VERTEXALPHA=!1,t.NUM_BONE_INFLUENCERS=0,t.BonesPerMesh=0,t.INSTANCES=!1,t.NDOTL=!0,t.CUSTOMUSERLIGHTING=!0,t.CELLBASIC=!0,t.DEPTHPREPASS=!1,t.IMAGEPROCESSINGPOSTPROCESS=!1,t.SKIPFINALCOLORCLAMP=!1,t.rebuild(),t}return B(t,e),t}(S.MaterialDefines),j=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.diffuseColor=new S.Color3(1,1,1),r._computeHighLevel=!1,r._disableLighting=!1,r._maxSimultaneousLights=4,r}return B(t,e),t.prototype.needAlphaBlending=function(){return this.alpha<1},t.prototype.needAlphaTesting=function(){return!1},t.prototype.getAlphaTestTexture=function(){return null},t.prototype.isReadyForSubMesh=function(e,t,n){if(this.isFrozen&&t.effect&&t.effect._wasPreviouslyReady)return!0;t.materialDefines||(t.materialDefines=new z);var r=t.materialDefines,i=this.getScene();if(this._isReadyForSubMesh(t))return!0;var o=i.getEngine();if(r._areTexturesDirty&&(r._needUVs=!1,i.texturesEnabled&&this._diffuseTexture&&S.MaterialFlags.DiffuseTextureEnabled)){if(!this._diffuseTexture.isReady())return!1;r._needUVs=!0,r.DIFFUSE=!0}if(r.CELLBASIC=!this.computeHighLevel,S.MaterialHelper.PrepareDefinesForMisc(e,i,!1,this.pointsCloud,this.fogEnabled,this._shouldTurnAlphaTestOn(e),r),r._needNormals=S.MaterialHelper.PrepareDefinesForLights(i,e,r,!1,this._maxSimultaneousLights,this._disableLighting),S.MaterialHelper.PrepareDefinesForFrameBoundValues(i,o,r,!!n),S.MaterialHelper.PrepareDefinesForAttributes(e,r,!0,!0),r.isDirty){r.markAsProcessed(),i.resetCachedMaterial();var a=new S.EffectFallbacks;r.FOG&&a.addFallback(1,"FOG"),S.MaterialHelper.HandleFallbacksForShadows(r,a,this.maxSimultaneousLights),r.NUM_BONE_INFLUENCERS>0&&a.addCPUSkinningFallback(0,e),r.IMAGEPROCESSINGPOSTPROCESS=i.imageProcessingConfiguration.applyByPostProcess;var s=[S.VertexBuffer.PositionKind];r.NORMAL&&s.push(S.VertexBuffer.NormalKind),r.UV1&&s.push(S.VertexBuffer.UVKind),r.UV2&&s.push(S.VertexBuffer.UV2Kind),r.VERTEXCOLOR&&s.push(S.VertexBuffer.ColorKind),S.MaterialHelper.PrepareAttributesForBones(s,e,r,a),S.MaterialHelper.PrepareAttributesForInstances(s,r);var l=r.toString(),u=["world","view","viewProjection","vEyePosition","vLightsType","vDiffuseColor","vFogInfos","vFogColor","pointSize","vDiffuseInfos","mBones","vClipPlane","vClipPlane2","vClipPlane3","vClipPlane4","vClipPlane5","vClipPlane6","diffuseMatrix"],c=["diffuseSampler"],f=new Array;S.MaterialHelper.PrepareUniformsAndSamplersList({uniformsNames:u,uniformBuffersNames:f,samplers:c,defines:r,maxSimultaneousLights:this.maxSimultaneousLights}),t.setEffect(i.getEngine().createEffect("cell",{attributes:s,uniformsNames:u,uniformBuffersNames:f,samplers:c,defines:l,fallbacks:a,onCompiled:this.onCompiled,onError:this.onError,indexParameters:{maxSimultaneousLights:this.maxSimultaneousLights-1}},o),r,this._materialContext)}return!(!t.effect||!t.effect.isReady())&&(r._renderId=i.getRenderId(),t.effect._wasPreviouslyReady=!0,!0)},t.prototype.bindForSubMesh=function(e,t,n){var r=this.getScene(),i=n.materialDefines;if(i){var o=n.effect;o&&(this._activeEffect=o,this.bindOnlyWorldMatrix(e),this._activeEffect.setMatrix("viewProjection",r.getTransformMatrix()),S.MaterialHelper.BindBonesParameters(t,this._activeEffect),this._mustRebind(r,o)&&(this._diffuseTexture&&S.MaterialFlags.DiffuseTextureEnabled&&(this._activeEffect.setTexture("diffuseSampler",this._diffuseTexture),this._activeEffect.setFloat2("vDiffuseInfos",this._diffuseTexture.coordinatesIndex,this._diffuseTexture.level),this._activeEffect.setMatrix("diffuseMatrix",this._diffuseTexture.getTextureMatrix())),S.MaterialHelper.BindClipPlane(this._activeEffect,r),this.pointsCloud&&this._activeEffect.setFloat("pointSize",this.pointSize),r.bindEyePosition(o)),this._activeEffect.setColor4("vDiffuseColor",this.diffuseColor,this.alpha*t.visibility),r.lightsEnabled&&!this.disableLighting&&S.MaterialHelper.BindLights(r,t,this._activeEffect,i,this._maxSimultaneousLights),r.fogEnabled&&t.applyFog&&r.fogMode!==S.Scene.FOGMODE_NONE&&this._activeEffect.setMatrix("view",r.getViewMatrix()),S.MaterialHelper.BindFogParameters(r,t,this._activeEffect),this._afterBind(t,this._activeEffect))}},t.prototype.getAnimatables=function(){var e=[];return this._diffuseTexture&&this._diffuseTexture.animations&&this._diffuseTexture.animations.length>0&&e.push(this._diffuseTexture),e},t.prototype.getActiveTextures=function(){var t=e.prototype.getActiveTextures.call(this);return this._diffuseTexture&&t.push(this._diffuseTexture),t},t.prototype.hasTexture=function(t){return!!e.prototype.hasTexture.call(this,t)||this._diffuseTexture===t},t.prototype.dispose=function(t){this._diffuseTexture&&this._diffuseTexture.dispose(),e.prototype.dispose.call(this,t)},t.prototype.getClassName=function(){return"CellMaterial"},t.prototype.clone=function(e){var n=this;return S.SerializationHelper.Clone((function(){return new t(e,n.getScene())}),this)},t.prototype.serialize=function(){var e=S.SerializationHelper.Serialize(this);return e.customType="BABYLON.CellMaterial",e},t.Parse=function(e,n,r){return S.SerializationHelper.Parse((function(){return new t(e.name,n)}),e,n,r)},V([Object(S.serializeAsTexture)("diffuseTexture")],t.prototype,"_diffuseTexture",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"diffuseTexture",void 0),V([Object(S.serializeAsColor3)("diffuse")],t.prototype,"diffuseColor",void 0),V([Object(S.serialize)("computeHighLevel")],t.prototype,"_computeHighLevel",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"computeHighLevel",void 0),V([Object(S.serialize)("disableLighting")],t.prototype,"_disableLighting",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsLightsDirty")],t.prototype,"disableLighting",void 0),V([Object(S.serialize)("maxSimultaneousLights")],t.prototype,"_maxSimultaneousLights",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsLightsDirty")],t.prototype,"maxSimultaneousLights",void 0),t}(S.PushMaterial);Object(S.RegisterClass)("BABYLON.CellMaterial",j);var H=function(){},W=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.CustomParts=new H,r.customShaderNameResolve=r.Builder,r.FragmentShader=S.Effect.ShadersStore.defaultPixelShader,r.VertexShader=S.Effect.ShadersStore.defaultVertexShader,r}return B(t,e),t.prototype.AttachAfterBind=function(e,t){if(this._newUniformInstances)for(var n in this._newUniformInstances){"vec2"==(r=n.toString().split("-"))[0]?t.setVector2(r[1],this._newUniformInstances[n]):"vec3"==r[0]?t.setVector3(r[1],this._newUniformInstances[n]):"vec4"==r[0]?t.setVector4(r[1],this._newUniformInstances[n]):"mat4"==r[0]?t.setMatrix(r[1],this._newUniformInstances[n]):"float"==r[0]&&t.setFloat(r[1],this._newUniformInstances[n])}if(this._newSamplerInstances)for(var n in this._newSamplerInstances){var r;"sampler2D"==(r=n.toString().split("-"))[0]&&this._newSamplerInstances[n].isReady&&this._newSamplerInstances[n].isReady()&&t.setTexture(r[1],this._newSamplerInstances[n])}},t.prototype.ReviewUniform=function(e,t){if("uniform"==e&&this._newUniforms)for(var n=0;n<this._newUniforms.length;n++)-1==this._customUniform[n].indexOf("sampler")&&t.push(this._newUniforms[n]);if("sampler"==e&&this._newUniforms)for(n=0;n<this._newUniforms.length;n++)-1!=this._customUniform[n].indexOf("sampler")&&t.push(this._newUniforms[n]);return t},t.prototype.Builder=function(e,n,r,i,o,a){var s=this;if(a&&this._customAttributes&&this._customAttributes.length>0&&a.push.apply(a,this._customAttributes),this.ReviewUniform("uniform",n),this.ReviewUniform("sampler",i),this._isCreatedShader)return this._createdShaderName;this._isCreatedShader=!1,t.ShaderIndexer++;var l="custom_"+t.ShaderIndexer,u=this._afterBind.bind(this);return this._afterBind=function(e,t){if(t){s.AttachAfterBind(e,t);try{u(e,t)}catch(t){}}},S.Effect.ShadersStore[l+"VertexShader"]=this.VertexShader.replace("#define CUSTOM_VERTEX_BEGIN",this.CustomParts.Vertex_Begin?this.CustomParts.Vertex_Begin:"").replace("#define CUSTOM_VERTEX_DEFINITIONS",(this._customUniform?this._customUniform.join("\n"):"")+(this.CustomParts.Vertex_Definitions?this.CustomParts.Vertex_Definitions:"")).replace("#define CUSTOM_VERTEX_MAIN_BEGIN",this.CustomParts.Vertex_MainBegin?this.CustomParts.Vertex_MainBegin:"").replace("#define CUSTOM_VERTEX_UPDATE_POSITION",this.CustomParts.Vertex_Before_PositionUpdated?this.CustomParts.Vertex_Before_PositionUpdated:"").replace("#define CUSTOM_VERTEX_UPDATE_NORMAL",this.CustomParts.Vertex_Before_NormalUpdated?this.CustomParts.Vertex_Before_NormalUpdated:"").replace("#define CUSTOM_VERTEX_MAIN_END",this.CustomParts.Vertex_MainEnd?this.CustomParts.Vertex_MainEnd:""),this.CustomParts.Vertex_After_WorldPosComputed&&(S.Effect.ShadersStore[l+"VertexShader"]=S.Effect.ShadersStore[l+"VertexShader"].replace("#define CUSTOM_VERTEX_UPDATE_WORLDPOS",this.CustomParts.Vertex_After_WorldPosComputed)),S.Effect.ShadersStore[l+"PixelShader"]=this.FragmentShader.replace("#define CUSTOM_FRAGMENT_BEGIN",this.CustomParts.Fragment_Begin?this.CustomParts.Fragment_Begin:"").replace("#define CUSTOM_FRAGMENT_MAIN_BEGIN",this.CustomParts.Fragment_MainBegin?this.CustomParts.Fragment_MainBegin:"").replace("#define CUSTOM_FRAGMENT_DEFINITIONS",(this._customUniform?this._customUniform.join("\n"):"")+(this.CustomParts.Fragment_Definitions?this.CustomParts.Fragment_Definitions:"")).replace("#define CUSTOM_FRAGMENT_UPDATE_DIFFUSE",this.CustomParts.Fragment_Custom_Diffuse?this.CustomParts.Fragment_Custom_Diffuse:"").replace("#define CUSTOM_FRAGMENT_UPDATE_ALPHA",this.CustomParts.Fragment_Custom_Alpha?this.CustomParts.Fragment_Custom_Alpha:"").replace("#define CUSTOM_FRAGMENT_BEFORE_LIGHTS",this.CustomParts.Fragment_Before_Lights?this.CustomParts.Fragment_Before_Lights:"").replace("#define CUSTOM_FRAGMENT_BEFORE_FRAGCOLOR",this.CustomParts.Fragment_Before_FragColor?this.CustomParts.Fragment_Before_FragColor:""),this.CustomParts.Fragment_Before_Fog&&(S.Effect.ShadersStore[l+"PixelShader"]=S.Effect.ShadersStore[l+"PixelShader"].replace("#define CUSTOM_FRAGMENT_BEFORE_FOG",this.CustomParts.Fragment_Before_Fog)),this._isCreatedShader=!0,this._createdShaderName=l,l},t.prototype.AddUniform=function(e,t,n){return this._customUniform||(this._customUniform=new Array,this._newUniforms=new Array,this._newSamplerInstances={},this._newUniformInstances={}),n&&(-1!=t.indexOf("sampler")?this._newSamplerInstances[t+"-"+e]=n:this._newUniformInstances[t+"-"+e]=n),this._customUniform.push("uniform "+t+" "+e+";"),this._newUniforms.push(e),this},t.prototype.AddAttribute=function(e){return this._customAttributes||(this._customAttributes=[]),this._customAttributes.push(e),this},t.prototype.Fragment_Begin=function(e){return this.CustomParts.Fragment_Begin=e,this},t.prototype.Fragment_Definitions=function(e){return this.CustomParts.Fragment_Definitions=e,this},t.prototype.Fragment_MainBegin=function(e){return this.CustomParts.Fragment_MainBegin=e,this},t.prototype.Fragment_Custom_Diffuse=function(e){return this.CustomParts.Fragment_Custom_Diffuse=e.replace("result","diffuseColor"),this},t.prototype.Fragment_Custom_Alpha=function(e){return this.CustomParts.Fragment_Custom_Alpha=e.replace("result","alpha"),this},t.prototype.Fragment_Before_Lights=function(e){return this.CustomParts.Fragment_Before_Lights=e,this},t.prototype.Fragment_Before_Fog=function(e){return this.CustomParts.Fragment_Before_Fog=e,this},t.prototype.Fragment_Before_FragColor=function(e){return this.CustomParts.Fragment_Before_FragColor=e.replace("result","color"),this},t.prototype.Vertex_Begin=function(e){return this.CustomParts.Vertex_Begin=e,this},t.prototype.Vertex_Definitions=function(e){return this.CustomParts.Vertex_Definitions=e,this},t.prototype.Vertex_MainBegin=function(e){return this.CustomParts.Vertex_MainBegin=e,this},t.prototype.Vertex_Before_PositionUpdated=function(e){return this.CustomParts.Vertex_Before_PositionUpdated=e.replace("result","positionUpdated"),this},t.prototype.Vertex_Before_NormalUpdated=function(e){return this.CustomParts.Vertex_Before_NormalUpdated=e.replace("result","normalUpdated"),this},t.prototype.Vertex_After_WorldPosComputed=function(e){return this.CustomParts.Vertex_After_WorldPosComputed=e,this},t.prototype.Vertex_MainEnd=function(e){return this.CustomParts.Vertex_MainEnd=e,this},t.ShaderIndexer=1,t}(S.StandardMaterial);Object(S.RegisterClass)("BABYLON.CustomMaterial",W);var G=function(){},X=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.CustomParts=new G,r.customShaderNameResolve=r.Builder,r.FragmentShader=S.Effect.ShadersStore.pbrPixelShader,r.VertexShader=S.Effect.ShadersStore.pbrVertexShader,r.FragmentShader=r.FragmentShader.replace(/#include<pbrBlockAlbedoOpacity>/g,S.Effect.IncludesShadersStore.pbrBlockAlbedoOpacity),r.FragmentShader=r.FragmentShader.replace(/#include<pbrBlockReflectivity>/g,S.Effect.IncludesShadersStore.pbrBlockReflectivity),r.FragmentShader=r.FragmentShader.replace(/#include<pbrBlockFinalColorComposition>/g,S.Effect.IncludesShadersStore.pbrBlockFinalColorComposition),r}return B(t,e),t.prototype.AttachAfterBind=function(e,t){if(this._newUniformInstances)for(var n in this._newUniformInstances){"vec2"==(r=n.toString().split("-"))[0]?t.setVector2(r[1],this._newUniformInstances[n]):"vec3"==r[0]?t.setVector3(r[1],this._newUniformInstances[n]):"vec4"==r[0]?t.setVector4(r[1],this._newUniformInstances[n]):"mat4"==r[0]?t.setMatrix(r[1],this._newUniformInstances[n]):"float"==r[0]&&t.setFloat(r[1],this._newUniformInstances[n])}if(this._newSamplerInstances)for(var n in this._newSamplerInstances){var r;"sampler2D"==(r=n.toString().split("-"))[0]&&this._newSamplerInstances[n].isReady&&this._newSamplerInstances[n].isReady()&&t.setTexture(r[1],this._newSamplerInstances[n])}},t.prototype.ReviewUniform=function(e,t){if("uniform"==e&&this._newUniforms)for(var n=0;n<this._newUniforms.length;n++)-1==this._customUniform[n].indexOf("sampler")&&t.push(this._newUniforms[n]);if("sampler"==e&&this._newUniforms)for(n=0;n<this._newUniforms.length;n++)-1!=this._customUniform[n].indexOf("sampler")&&t.push(this._newUniforms[n]);return t},t.prototype.Builder=function(e,n,r,i,o,a,s){var l=this;if(s){var u=s.processFinalCode;s.processFinalCode=function(e,t){if("vertex"===e)return u?u(e,t):t;var n=new S.ShaderCodeInliner(t);return n.inlineToken="#define pbr_inline",n.processCode(),u?u(e,n.code):n.code}}if(a&&this._customAttributes&&this._customAttributes.length>0&&a.push.apply(a,this._customAttributes),this.ReviewUniform("uniform",n),this.ReviewUniform("sampler",i),this._isCreatedShader)return this._createdShaderName;this._isCreatedShader=!1,t.ShaderIndexer++;var c="custom_"+t.ShaderIndexer,f=this._afterBind.bind(this);return this._afterBind=function(e,t){if(t){l.AttachAfterBind(e,t);try{f(e,t)}catch(t){}}},S.Effect.ShadersStore[c+"VertexShader"]=this.VertexShader.replace("#define CUSTOM_VERTEX_BEGIN",this.CustomParts.Vertex_Begin?this.CustomParts.Vertex_Begin:"").replace("#define CUSTOM_VERTEX_DEFINITIONS",(this._customUniform?this._customUniform.join("\n"):"")+(this.CustomParts.Vertex_Definitions?this.CustomParts.Vertex_Definitions:"")).replace("#define CUSTOM_VERTEX_MAIN_BEGIN",this.CustomParts.Vertex_MainBegin?this.CustomParts.Vertex_MainBegin:"").replace("#define CUSTOM_VERTEX_UPDATE_POSITION",this.CustomParts.Vertex_Before_PositionUpdated?this.CustomParts.Vertex_Before_PositionUpdated:"").replace("#define CUSTOM_VERTEX_UPDATE_NORMAL",this.CustomParts.Vertex_Before_NormalUpdated?this.CustomParts.Vertex_Before_NormalUpdated:"").replace("#define CUSTOM_VERTEX_MAIN_END",this.CustomParts.Vertex_MainEnd?this.CustomParts.Vertex_MainEnd:""),this.CustomParts.Vertex_After_WorldPosComputed&&(S.Effect.ShadersStore[c+"VertexShader"]=S.Effect.ShadersStore[c+"VertexShader"].replace("#define CUSTOM_VERTEX_UPDATE_WORLDPOS",this.CustomParts.Vertex_After_WorldPosComputed)),S.Effect.ShadersStore[c+"PixelShader"]=this.FragmentShader.replace("#define CUSTOM_FRAGMENT_BEGIN",this.CustomParts.Fragment_Begin?this.CustomParts.Fragment_Begin:"").replace("#define CUSTOM_FRAGMENT_MAIN_BEGIN",this.CustomParts.Fragment_MainBegin?this.CustomParts.Fragment_MainBegin:"").replace("#define CUSTOM_FRAGMENT_DEFINITIONS",(this._customUniform?this._customUniform.join("\n"):"")+(this.CustomParts.Fragment_Definitions?this.CustomParts.Fragment_Definitions:"")).replace("#define CUSTOM_FRAGMENT_UPDATE_ALBEDO",this.CustomParts.Fragment_Custom_Albedo?this.CustomParts.Fragment_Custom_Albedo:"").replace("#define CUSTOM_FRAGMENT_UPDATE_ALPHA",this.CustomParts.Fragment_Custom_Alpha?this.CustomParts.Fragment_Custom_Alpha:"").replace("#define CUSTOM_FRAGMENT_BEFORE_LIGHTS",this.CustomParts.Fragment_Before_Lights?this.CustomParts.Fragment_Before_Lights:"").replace("#define CUSTOM_FRAGMENT_UPDATE_METALLICROUGHNESS",this.CustomParts.Fragment_Custom_MetallicRoughness?this.CustomParts.Fragment_Custom_MetallicRoughness:"").replace("#define CUSTOM_FRAGMENT_UPDATE_MICROSURFACE",this.CustomParts.Fragment_Custom_MicroSurface?this.CustomParts.Fragment_Custom_MicroSurface:"").replace("#define CUSTOM_FRAGMENT_BEFORE_FINALCOLORCOMPOSITION",this.CustomParts.Fragment_Before_FinalColorComposition?this.CustomParts.Fragment_Before_FinalColorComposition:"").replace("#define CUSTOM_FRAGMENT_BEFORE_FRAGCOLOR",this.CustomParts.Fragment_Before_FragColor?this.CustomParts.Fragment_Before_FragColor:""),this.CustomParts.Fragment_Before_Fog&&(S.Effect.ShadersStore[c+"PixelShader"]=S.Effect.ShadersStore[c+"PixelShader"].replace("#define CUSTOM_FRAGMENT_BEFORE_FOG",this.CustomParts.Fragment_Before_Fog)),this._isCreatedShader=!0,this._createdShaderName=c,c},t.prototype.AddUniform=function(e,t,n){return this._customUniform||(this._customUniform=new Array,this._newUniforms=new Array,this._newSamplerInstances={},this._newUniformInstances={}),n&&(-1!=t.indexOf("sampler")?this._newSamplerInstances[t+"-"+e]=n:this._newUniformInstances[t+"-"+e]=n),this._customUniform.push("uniform "+t+" "+e+";"),this._newUniforms.push(e),this},t.prototype.AddAttribute=function(e){return this._customAttributes||(this._customAttributes=[]),this._customAttributes.push(e),this},t.prototype.Fragment_Begin=function(e){return this.CustomParts.Fragment_Begin=e,this},t.prototype.Fragment_Definitions=function(e){return this.CustomParts.Fragment_Definitions=e,this},t.prototype.Fragment_MainBegin=function(e){return this.CustomParts.Fragment_MainBegin=e,this},t.prototype.Fragment_Custom_Albedo=function(e){return this.CustomParts.Fragment_Custom_Albedo=e.replace("result","surfaceAlbedo"),this},t.prototype.Fragment_Custom_Alpha=function(e){return this.CustomParts.Fragment_Custom_Alpha=e.replace("result","alpha"),this},t.prototype.Fragment_Before_Lights=function(e){return this.CustomParts.Fragment_Before_Lights=e,this},t.prototype.Fragment_Custom_MetallicRoughness=function(e){return this.CustomParts.Fragment_Custom_MetallicRoughness=e,this},t.prototype.Fragment_Custom_MicroSurface=function(e){return this.CustomParts.Fragment_Custom_MicroSurface=e,this},t.prototype.Fragment_Before_Fog=function(e){return this.CustomParts.Fragment_Before_Fog=e,this},t.prototype.Fragment_Before_FinalColorComposition=function(e){return this.CustomParts.Fragment_Before_FinalColorComposition=e,this},t.prototype.Fragment_Before_FragColor=function(e){return this.CustomParts.Fragment_Before_FragColor=e.replace("result","color"),this},t.prototype.Vertex_Begin=function(e){return this.CustomParts.Vertex_Begin=e,this},t.prototype.Vertex_Definitions=function(e){return this.CustomParts.Vertex_Definitions=e,this},t.prototype.Vertex_MainBegin=function(e){return this.CustomParts.Vertex_MainBegin=e,this},t.prototype.Vertex_Before_PositionUpdated=function(e){return this.CustomParts.Vertex_Before_PositionUpdated=e.replace("result","positionUpdated"),this},t.prototype.Vertex_Before_NormalUpdated=function(e){return this.CustomParts.Vertex_Before_NormalUpdated=e.replace("result","normalUpdated"),this},t.prototype.Vertex_After_WorldPosComputed=function(e){return this.CustomParts.Vertex_After_WorldPosComputed=e,this},t.prototype.Vertex_MainEnd=function(e){return this.CustomParts.Vertex_MainEnd=e,this},t.ShaderIndexer=1,t}(S.PBRMaterial);Object(S.RegisterClass)("BABYLON.PBRCustomMaterial",X);var Y="precision highp float;\n\nuniform vec4 vEyePosition;\n\nvarying vec3 vPositionW;\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n\n#ifdef DIFFUSE\nvarying vec2 vDiffuseUV;\nuniform sampler2D diffuseSampler;\nuniform vec2 vDiffuseInfos;\n#endif\n\nuniform sampler2D distortionSampler;\nuniform sampler2D opacitySampler;\n#ifdef DIFFUSE\nvarying vec2 vDistortionCoords1;\nvarying vec2 vDistortionCoords2;\nvarying vec2 vDistortionCoords3;\n#endif\n#include<clipPlaneFragmentDeclaration>\n\n#include<fogFragmentDeclaration>\nvec4 bx2(vec4 x)\n{\nreturn vec4(2.0)*x-vec4(1.0);\n}\nvoid main(void) {\n\n#include<clipPlaneFragment>\nvec3 viewDirectionW=normalize(vEyePosition.xyz-vPositionW);\n\nvec4 baseColor=vec4(1.,1.,1.,1.);\n\nfloat alpha=1.0;\n#ifdef DIFFUSE\n\nconst float distortionAmount0=0.092;\nconst float distortionAmount1=0.092;\nconst float distortionAmount2=0.092;\nvec2 heightAttenuation=vec2(0.3,0.39);\nvec4 noise0=texture2D(distortionSampler,vDistortionCoords1);\nvec4 noise1=texture2D(distortionSampler,vDistortionCoords2);\nvec4 noise2=texture2D(distortionSampler,vDistortionCoords3);\nvec4 noiseSum=bx2(noise0)*distortionAmount0+bx2(noise1)*distortionAmount1+bx2(noise2)*distortionAmount2;\nvec4 perturbedBaseCoords=vec4(vDiffuseUV,0.0,1.0)+noiseSum*(vDiffuseUV.y*heightAttenuation.x+heightAttenuation.y);\nvec4 opacityColor=texture2D(opacitySampler,perturbedBaseCoords.xy);\n#ifdef ALPHATEST\nif (opacityColor.r<0.1)\ndiscard;\n#endif\n#include<depthPrePass>\nbaseColor=texture2D(diffuseSampler,perturbedBaseCoords.xy)*2.0;\nbaseColor*=opacityColor;\nbaseColor.rgb*=vDiffuseInfos.y;\n#endif\n#ifdef VERTEXCOLOR\nbaseColor.rgb*=vColor.rgb;\n#endif\n\nvec3 diffuseBase=vec3(1.0,1.0,1.0);\n#ifdef VERTEXALPHA\nalpha*=vColor.a;\n#endif\n\nvec4 color=vec4(baseColor.rgb,alpha);\n#include<fogFragment>\ngl_FragColor=color;\n#include<imageProcessingCompatibility>\n}";S.ShaderStore.ShadersStore.firePixelShader=Y;var K="precision highp float;\n\nattribute vec3 position;\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#ifdef UV2\nattribute vec2 uv2;\n#endif\n#ifdef VERTEXCOLOR\nattribute vec4 color;\n#endif\n#include<bonesDeclaration>\n#include<bakedVertexAnimationDeclaration>\n\n#include<instancesDeclaration>\nuniform mat4 view;\nuniform mat4 viewProjection;\n#ifdef DIFFUSE\nvarying vec2 vDiffuseUV;\n#endif\n#ifdef POINTSIZE\nuniform float pointSize;\n#endif\n\nvarying vec3 vPositionW;\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#include<clipPlaneVertexDeclaration>\n#include<fogVertexDeclaration>\n\nuniform float time;\nuniform float speed;\n#ifdef DIFFUSE\nvarying vec2 vDistortionCoords1;\nvarying vec2 vDistortionCoords2;\nvarying vec2 vDistortionCoords3;\n#endif\nvoid main(void) {\n#include<instancesVertex>\n#include<bonesVertex>\n#include<bakedVertexAnimation>\nvec4 worldPos=finalWorld*vec4(position,1.0);\ngl_Position=viewProjection*worldPos;\nvPositionW=vec3(worldPos);\n\n#ifdef DIFFUSE\nvDiffuseUV=uv;\nvDiffuseUV.y-=0.2;\n#endif\n\n#include<clipPlaneVertex>\n\n#include<fogVertex>\n\n#ifdef VERTEXCOLOR\nvColor=color;\n#endif\n\n#ifdef POINTSIZE\ngl_PointSize=pointSize;\n#endif\n#ifdef DIFFUSE\n\nvec3 layerSpeed=vec3(-0.2,-0.52,-0.1)*speed;\nvDistortionCoords1.x=uv.x;\nvDistortionCoords1.y=uv.y+layerSpeed.x*time/1000.0;\nvDistortionCoords2.x=uv.x;\nvDistortionCoords2.y=uv.y+layerSpeed.y*time/1000.0;\nvDistortionCoords3.x=uv.x;\nvDistortionCoords3.y=uv.y+layerSpeed.z*time/1000.0;\n#endif\n}\n";S.ShaderStore.ShadersStore.fireVertexShader=K;var Z=function(e){function t(){var t=e.call(this)||this;return t.DIFFUSE=!1,t.CLIPPLANE=!1,t.CLIPPLANE2=!1,t.CLIPPLANE3=!1,t.CLIPPLANE4=!1,t.CLIPPLANE5=!1,t.CLIPPLANE6=!1,t.ALPHATEST=!1,t.DEPTHPREPASS=!1,t.POINTSIZE=!1,t.FOG=!1,t.UV1=!1,t.VERTEXCOLOR=!1,t.VERTEXALPHA=!1,t.BonesPerMesh=0,t.NUM_BONE_INFLUENCERS=0,t.INSTANCES=!1,t.IMAGEPROCESSINGPOSTPROCESS=!1,t.SKIPFINALCOLORCLAMP=!1,t.rebuild(),t}return B(t,e),t}(S.MaterialDefines),q=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.diffuseColor=new S.Color3(1,1,1),r.speed=1,r._scaledDiffuse=new S.Color3,r._lastTime=0,r}return B(t,e),t.prototype.needAlphaBlending=function(){return!1},t.prototype.needAlphaTesting=function(){return!0},t.prototype.getAlphaTestTexture=function(){return null},t.prototype.isReadyForSubMesh=function(e,t,n){if(this.isFrozen&&t.effect&&t.effect._wasPreviouslyReady)return!0;t.materialDefines||(t.materialDefines=new Z);var r=t.materialDefines,i=this.getScene();if(this._isReadyForSubMesh(t))return!0;var o=i.getEngine();if(r._areTexturesDirty&&(r._needUVs=!1,this._diffuseTexture&&S.MaterialFlags.DiffuseTextureEnabled)){if(!this._diffuseTexture.isReady())return!1;r._needUVs=!0,r.DIFFUSE=!0}if(r.ALPHATEST=!!this._opacityTexture,r._areMiscDirty&&(r.POINTSIZE=this.pointsCloud||i.forcePointsCloud,r.FOG=i.fogEnabled&&e.applyFog&&i.fogMode!==S.Scene.FOGMODE_NONE&&this.fogEnabled),S.MaterialHelper.PrepareDefinesForFrameBoundValues(i,o,r,!!n),S.MaterialHelper.PrepareDefinesForAttributes(e,r,!1,!0),r.isDirty){r.markAsProcessed(),i.resetCachedMaterial();var a=new S.EffectFallbacks;r.FOG&&a.addFallback(1,"FOG"),r.NUM_BONE_INFLUENCERS>0&&a.addCPUSkinningFallback(0,e),r.IMAGEPROCESSINGPOSTPROCESS=i.imageProcessingConfiguration.applyByPostProcess;var s=[S.VertexBuffer.PositionKind];r.UV1&&s.push(S.VertexBuffer.UVKind),r.VERTEXCOLOR&&s.push(S.VertexBuffer.ColorKind),S.MaterialHelper.PrepareAttributesForBones(s,e,r,a),S.MaterialHelper.PrepareAttributesForInstances(s,r);var l=r.toString();t.setEffect(i.getEngine().createEffect("fire",{attributes:s,uniformsNames:["world","view","viewProjection","vEyePosition","vFogInfos","vFogColor","pointSize","vDiffuseInfos","mBones","vClipPlane","vClipPlane2","vClipPlane3","vClipPlane4","vClipPlane5","vClipPlane6","diffuseMatrix","time","speed"],uniformBuffersNames:[],samplers:["diffuseSampler","distortionSampler","opacitySampler"],defines:l,fallbacks:a,onCompiled:this.onCompiled,onError:this.onError,indexParameters:null,maxSimultaneousLights:4,transformFeedbackVaryings:null},o),r,this._materialContext)}return!(!t.effect||!t.effect.isReady())&&(r._renderId=i.getRenderId(),t.effect._wasPreviouslyReady=!0,!0)},t.prototype.bindForSubMesh=function(e,t,n){var r=this.getScene();if(n.materialDefines){var i=n.effect;i&&(this._activeEffect=i,this.bindOnlyWorldMatrix(e),this._activeEffect.setMatrix("viewProjection",r.getTransformMatrix()),S.MaterialHelper.BindBonesParameters(t,this._activeEffect),this._mustRebind(r,i)&&(this._diffuseTexture&&S.MaterialFlags.DiffuseTextureEnabled&&(this._activeEffect.setTexture("diffuseSampler",this._diffuseTexture),this._activeEffect.setFloat2("vDiffuseInfos",this._diffuseTexture.coordinatesIndex,this._diffuseTexture.level),this._activeEffect.setMatrix("diffuseMatrix",this._diffuseTexture.getTextureMatrix()),this._activeEffect.setTexture("distortionSampler",this._distortionTexture),this._activeEffect.setTexture("opacitySampler",this._opacityTexture)),S.MaterialHelper.BindClipPlane(this._activeEffect,r),this.pointsCloud&&this._activeEffect.setFloat("pointSize",this.pointSize),r.bindEyePosition(i)),this._activeEffect.setColor4("vDiffuseColor",this._scaledDiffuse,this.alpha*t.visibility),r.fogEnabled&&t.applyFog&&r.fogMode!==S.Scene.FOGMODE_NONE&&this._activeEffect.setMatrix("view",r.getViewMatrix()),S.MaterialHelper.BindFogParameters(r,t,this._activeEffect),this._lastTime+=r.getEngine().getDeltaTime(),this._activeEffect.setFloat("time",this._lastTime),this._activeEffect.setFloat("speed",this.speed),this._afterBind(t,this._activeEffect))}},t.prototype.getAnimatables=function(){var e=[];return this._diffuseTexture&&this._diffuseTexture.animations&&this._diffuseTexture.animations.length>0&&e.push(this._diffuseTexture),this._distortionTexture&&this._distortionTexture.animations&&this._distortionTexture.animations.length>0&&e.push(this._distortionTexture),this._opacityTexture&&this._opacityTexture.animations&&this._opacityTexture.animations.length>0&&e.push(this._opacityTexture),e},t.prototype.getActiveTextures=function(){var t=e.prototype.getActiveTextures.call(this);return this._diffuseTexture&&t.push(this._diffuseTexture),this._distortionTexture&&t.push(this._distortionTexture),this._opacityTexture&&t.push(this._opacityTexture),t},t.prototype.hasTexture=function(t){return!!e.prototype.hasTexture.call(this,t)||(this._diffuseTexture===t||(this._distortionTexture===t||this._opacityTexture===t))},t.prototype.getClassName=function(){return"FireMaterial"},t.prototype.dispose=function(t){this._diffuseTexture&&this._diffuseTexture.dispose(),this._distortionTexture&&this._distortionTexture.dispose(),e.prototype.dispose.call(this,t)},t.prototype.clone=function(e){var n=this;return S.SerializationHelper.Clone((function(){return new t(e,n.getScene())}),this)},t.prototype.serialize=function(){var t=e.prototype.serialize.call(this);return t.customType="BABYLON.FireMaterial",t.diffuseColor=this.diffuseColor.asArray(),t.speed=this.speed,this._diffuseTexture&&(t._diffuseTexture=this._diffuseTexture.serialize()),this._distortionTexture&&(t._distortionTexture=this._distortionTexture.serialize()),this._opacityTexture&&(t._opacityTexture=this._opacityTexture.serialize()),t},t.Parse=function(e,n,r){var i=new t(e.name,n);return i.diffuseColor=S.Color3.FromArray(e.diffuseColor),i.speed=e.speed,i.alpha=e.alpha,i.id=e.id,S.Tags.AddTagsTo(i,e.tags),i.backFaceCulling=e.backFaceCulling,i.wireframe=e.wireframe,e._diffuseTexture&&(i._diffuseTexture=S.Texture.Parse(e._diffuseTexture,n,r)),e._distortionTexture&&(i._distortionTexture=S.Texture.Parse(e._distortionTexture,n,r)),e._opacityTexture&&(i._opacityTexture=S.Texture.Parse(e._opacityTexture,n,r)),i},V([Object(S.serializeAsTexture)("diffuseTexture")],t.prototype,"_diffuseTexture",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"diffuseTexture",void 0),V([Object(S.serializeAsTexture)("distortionTexture")],t.prototype,"_distortionTexture",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"distortionTexture",void 0),V([Object(S.serializeAsTexture)("opacityTexture")],t.prototype,"_opacityTexture",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"opacityTexture",void 0),V([Object(S.serializeAsColor3)("diffuse")],t.prototype,"diffuseColor",void 0),V([Object(S.serialize)()],t.prototype,"speed",void 0),t}(S.PushMaterial);Object(S.RegisterClass)("BABYLON.FireMaterial",q);var Q="precision highp float;\n\nuniform vec4 vEyePosition;\nuniform vec4 vDiffuseColor;\n\nuniform vec4 furColor;\nuniform float furLength;\nvarying vec3 vPositionW;\nvarying float vfur_length;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n\n#include<helperFunctions>\n\n#include<__decl__lightFragment>[0..maxSimultaneousLights]\n\n#ifdef DIFFUSE\nvarying vec2 vDiffuseUV;\nuniform sampler2D diffuseSampler;\nuniform vec2 vDiffuseInfos;\n#endif\n\n#ifdef HIGHLEVEL\nuniform float furOffset;\nuniform float furOcclusion;\nuniform sampler2D furTexture;\nvarying vec2 vFurUV;\n#endif\n#include<lightsFragmentFunctions>\n#include<shadowsFragmentFunctions>\n#include<fogFragmentDeclaration>\n#include<clipPlaneFragmentDeclaration>\nfloat Rand(vec3 rv) {\nfloat x=dot(rv,vec3(12.9898,78.233,24.65487));\nreturn fract(sin(x)*43758.5453);\n}\nvoid main(void) {\n\n#include<clipPlaneFragment>\nvec3 viewDirectionW=normalize(vEyePosition.xyz-vPositionW);\n\nvec4 baseColor=furColor;\nvec3 diffuseColor=vDiffuseColor.rgb;\n\nfloat alpha=vDiffuseColor.a;\n#ifdef DIFFUSE\nbaseColor*=texture2D(diffuseSampler,vDiffuseUV);\n#ifdef ALPHATEST\nif (baseColor.a<0.4)\ndiscard;\n#endif\n#include<depthPrePass>\nbaseColor.rgb*=vDiffuseInfos.y;\n#endif\n#ifdef VERTEXCOLOR\nbaseColor.rgb*=vColor.rgb;\n#endif\n\n#ifdef NORMAL\nvec3 normalW=normalize(vNormalW);\n#else\nvec3 normalW=vec3(1.0,1.0,1.0);\n#endif\n#ifdef HIGHLEVEL\n\nvec4 furTextureColor=texture2D(furTexture,vec2(vFurUV.x,vFurUV.y));\nif (furTextureColor.a<=0.0 || furTextureColor.g<furOffset) {\ndiscard;\n}\nfloat occlusion=mix(0.0,furTextureColor.b*1.2,furOffset);\nbaseColor=vec4(baseColor.xyz*max(occlusion,furOcclusion),1.1-furOffset);\n#endif\n\nvec3 diffuseBase=vec3(0.,0.,0.);\nlightingInfo info;\nfloat shadow=1.;\nfloat glossiness=0.;\n#ifdef SPECULARTERM\nvec3 specularBase=vec3(0.,0.,0.);\n#endif\n#include<lightFragment>[0..maxSimultaneousLights]\n#ifdef VERTEXALPHA\nalpha*=vColor.a;\n#endif\nvec3 finalDiffuse=clamp(diffuseBase.rgb*baseColor.rgb,0.0,1.0);\n\n#ifdef HIGHLEVEL\nvec4 color=vec4(finalDiffuse,alpha);\n#else\nfloat r=vfur_length/furLength*0.5;\nvec4 color=vec4(finalDiffuse*(0.5+r),alpha);\n#endif\n#include<fogFragment>\ngl_FragColor=color;\n#include<imageProcessingCompatibility>\n}";S.ShaderStore.ShadersStore.furPixelShader=Q;var J="precision highp float;\n\nattribute vec3 position;\nattribute vec3 normal;\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#ifdef UV2\nattribute vec2 uv2;\n#endif\n#ifdef VERTEXCOLOR\nattribute vec4 color;\n#endif\n#include<bonesDeclaration>\n#include<bakedVertexAnimationDeclaration>\n\nuniform float furLength;\nuniform float furAngle;\n#ifdef HIGHLEVEL\nuniform float furOffset;\nuniform vec3 furGravity;\nuniform float furTime;\nuniform float furSpacing;\nuniform float furDensity;\n#endif\n#ifdef HEIGHTMAP\nuniform sampler2D heightTexture;\n#endif\n#ifdef HIGHLEVEL\nvarying vec2 vFurUV;\n#endif\n#include<instancesDeclaration>\nuniform mat4 view;\nuniform mat4 viewProjection;\n#ifdef DIFFUSE\nvarying vec2 vDiffuseUV;\nuniform mat4 diffuseMatrix;\nuniform vec2 vDiffuseInfos;\n#endif\n#ifdef POINTSIZE\nuniform float pointSize;\n#endif\n\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\nvarying float vfur_length;\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#include<clipPlaneVertexDeclaration>\n#include<fogVertexDeclaration>\n#include<__decl__lightFragment>[0..maxSimultaneousLights]\nfloat Rand(vec3 rv) {\nfloat x=dot(rv,vec3(12.9898,78.233,24.65487));\nreturn fract(sin(x)*43758.5453);\n}\nvoid main(void) {\n#include<instancesVertex>\n#include<bonesVertex>\n#include<bakedVertexAnimation>\n\nfloat r=Rand(position);\n#ifdef HEIGHTMAP\n#if __VERSION__>100\nvfur_length=furLength*texture(heightTexture,uv).x;\n#else\nvfur_length=furLength*texture2D(heightTexture,uv).r;\n#endif\n#else\nvfur_length=(furLength*r);\n#endif\nvec3 tangent1=vec3(normal.y,-normal.x,0);\nvec3 tangent2=vec3(-normal.z,0,normal.x);\nr=Rand(tangent1*r);\nfloat J=(2.0+4.0*r);\nr=Rand(tangent2*r);\nfloat K=(2.0+2.0*r);\ntangent1=tangent1*J+tangent2*K;\ntangent1=normalize(tangent1);\nvec3 newPosition=position+normal*vfur_length*cos(furAngle)+tangent1*vfur_length*sin(furAngle);\n#ifdef HIGHLEVEL\n\nvec3 forceDirection=vec3(0.0,0.0,0.0);\nforceDirection.x=sin(furTime+position.x*0.05)*0.2;\nforceDirection.y=cos(furTime*0.7+position.y*0.04)*0.2;\nforceDirection.z=sin(furTime*0.7+position.z*0.04)*0.2;\nvec3 displacement=vec3(0.0,0.0,0.0);\ndisplacement=furGravity+forceDirection;\nfloat displacementFactor=pow(furOffset,3.0);\nvec3 aNormal=normal;\naNormal.xyz+=displacement*displacementFactor;\nnewPosition=vec3(newPosition.x,newPosition.y,newPosition.z)+(normalize(aNormal)*furOffset*furSpacing);\n#endif\n#ifdef NORMAL\nvNormalW=normalize(vec3(finalWorld*vec4(normal,0.0)));\n#endif\n\ngl_Position=viewProjection*finalWorld*vec4(newPosition,1.0);\nvec4 worldPos=finalWorld*vec4(newPosition,1.0);\nvPositionW=vec3(worldPos);\n\n#ifndef UV1\nvec2 uv=vec2(0.,0.);\n#endif\n#ifndef UV2\nvec2 uv2=vec2(0.,0.);\n#endif\n#ifdef DIFFUSE\nif (vDiffuseInfos.x == 0.)\n{\nvDiffuseUV=vec2(diffuseMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvDiffuseUV=vec2(diffuseMatrix*vec4(uv2,1.0,0.0));\n}\n#ifdef HIGHLEVEL\nvFurUV=vDiffuseUV*furDensity;\n#endif\n#else\n#ifdef HIGHLEVEL\nvFurUV=uv*furDensity;\n#endif\n#endif\n\n#include<clipPlaneVertex>\n\n#include<fogVertex>\n\n#include<shadowsVertex>[0..maxSimultaneousLights]\n\n#ifdef VERTEXCOLOR\nvColor=color;\n#endif\n\n#ifdef POINTSIZE\ngl_PointSize=pointSize;\n#endif\n}\n";S.ShaderStore.ShadersStore.furVertexShader=J;var $=function(e){function t(){var t=e.call(this)||this;return t.DIFFUSE=!1,t.HEIGHTMAP=!1,t.CLIPPLANE=!1,t.CLIPPLANE2=!1,t.CLIPPLANE3=!1,t.CLIPPLANE4=!1,t.CLIPPLANE5=!1,t.CLIPPLANE6=!1,t.ALPHATEST=!1,t.DEPTHPREPASS=!1,t.POINTSIZE=!1,t.FOG=!1,t.NORMAL=!1,t.UV1=!1,t.UV2=!1,t.VERTEXCOLOR=!1,t.VERTEXALPHA=!1,t.NUM_BONE_INFLUENCERS=0,t.BonesPerMesh=0,t.INSTANCES=!1,t.HIGHLEVEL=!1,t.IMAGEPROCESSINGPOSTPROCESS=!1,t.SKIPFINALCOLORCLAMP=!1,t.rebuild(),t}return B(t,e),t}(S.MaterialDefines),ee=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.diffuseColor=new S.Color3(1,1,1),r.furLength=1,r.furAngle=0,r.furColor=new S.Color3(.44,.21,.02),r.furOffset=0,r.furSpacing=12,r.furGravity=new S.Vector3(0,0,0),r.furSpeed=100,r.furDensity=20,r.furOcclusion=0,r._disableLighting=!1,r._maxSimultaneousLights=4,r.highLevelFur=!0,r._furTime=0,r}return B(t,e),Object.defineProperty(t.prototype,"furTime",{get:function(){return this._furTime},set:function(e){this._furTime=e},enumerable:!1,configurable:!0}),t.prototype.needAlphaBlending=function(){return this.alpha<1},t.prototype.needAlphaTesting=function(){return!1},t.prototype.getAlphaTestTexture=function(){return null},t.prototype.updateFur=function(){for(var e=1;e<this._meshes.length;e++){var t=this._meshes[e].material;t.furLength=this.furLength,t.furAngle=this.furAngle,t.furGravity=this.furGravity,t.furSpacing=this.furSpacing,t.furSpeed=this.furSpeed,t.furColor=this.furColor,t.diffuseTexture=this.diffuseTexture,t.furTexture=this.furTexture,t.highLevelFur=this.highLevelFur,t.furTime=this.furTime,t.furDensity=this.furDensity}},t.prototype.isReadyForSubMesh=function(e,t,n){if(this.isFrozen&&t.effect&&t.effect._wasPreviouslyReady)return!0;t.materialDefines||(t.materialDefines=new $);var r=t.materialDefines,i=this.getScene();if(this._isReadyForSubMesh(t))return!0;var o=i.getEngine();if(r._areTexturesDirty&&i.texturesEnabled){if(this.diffuseTexture&&S.MaterialFlags.DiffuseTextureEnabled){if(!this.diffuseTexture.isReady())return!1;r._needUVs=!0,r.DIFFUSE=!0}if(this.heightTexture&&o.getCaps().maxVertexTextureImageUnits){if(!this.heightTexture.isReady())return!1;r._needUVs=!0,r.HEIGHTMAP=!0}}if(this.highLevelFur!==r.HIGHLEVEL&&(r.HIGHLEVEL=!0,r.markAsUnprocessed()),S.MaterialHelper.PrepareDefinesForMisc(e,i,!1,this.pointsCloud,this.fogEnabled,this._shouldTurnAlphaTestOn(e),r),r._needNormals=S.MaterialHelper.PrepareDefinesForLights(i,e,r,!1,this._maxSimultaneousLights,this._disableLighting),S.MaterialHelper.PrepareDefinesForFrameBoundValues(i,o,r,!!n),S.MaterialHelper.PrepareDefinesForAttributes(e,r,!0,!0),r.isDirty){r.markAsProcessed(),i.resetCachedMaterial();var a=new S.EffectFallbacks;r.FOG&&a.addFallback(1,"FOG"),S.MaterialHelper.HandleFallbacksForShadows(r,a,this.maxSimultaneousLights),r.NUM_BONE_INFLUENCERS>0&&a.addCPUSkinningFallback(0,e),r.IMAGEPROCESSINGPOSTPROCESS=i.imageProcessingConfiguration.applyByPostProcess;var s=[S.VertexBuffer.PositionKind];r.NORMAL&&s.push(S.VertexBuffer.NormalKind),r.UV1&&s.push(S.VertexBuffer.UVKind),r.UV2&&s.push(S.VertexBuffer.UV2Kind),r.VERTEXCOLOR&&s.push(S.VertexBuffer.ColorKind),S.MaterialHelper.PrepareAttributesForBones(s,e,r,a),S.MaterialHelper.PrepareAttributesForInstances(s,r);var l=r.toString(),u=["world","view","viewProjection","vEyePosition","vLightsType","vDiffuseColor","vFogInfos","vFogColor","pointSize","vDiffuseInfos","mBones","vClipPlane","vClipPlane2","vClipPlane3","vClipPlane4","vClipPlane5","vClipPlane6","diffuseMatrix","furLength","furAngle","furColor","furOffset","furGravity","furTime","furSpacing","furDensity","furOcclusion"],c=["diffuseSampler","heightTexture","furTexture"],f=new Array;S.MaterialHelper.PrepareUniformsAndSamplersList({uniformsNames:u,uniformBuffersNames:f,samplers:c,defines:r,maxSimultaneousLights:this.maxSimultaneousLights}),t.setEffect(i.getEngine().createEffect("fur",{attributes:s,uniformsNames:u,uniformBuffersNames:f,samplers:c,defines:l,fallbacks:a,onCompiled:this.onCompiled,onError:this.onError,indexParameters:{maxSimultaneousLights:this.maxSimultaneousLights}},o),r,this._materialContext)}return!(!t.effect||!t.effect.isReady())&&(r._renderId=i.getRenderId(),t.effect._wasPreviouslyReady=!0,!0)},t.prototype.bindForSubMesh=function(e,t,n){var r=this.getScene(),i=n.materialDefines;if(i){var o=n.effect;o&&(this._activeEffect=o,this.bindOnlyWorldMatrix(e),this._activeEffect.setMatrix("viewProjection",r.getTransformMatrix()),S.MaterialHelper.BindBonesParameters(t,this._activeEffect),r.getCachedMaterial()!==this&&(this._diffuseTexture&&S.MaterialFlags.DiffuseTextureEnabled&&(this._activeEffect.setTexture("diffuseSampler",this._diffuseTexture),this._activeEffect.setFloat2("vDiffuseInfos",this._diffuseTexture.coordinatesIndex,this._diffuseTexture.level),this._activeEffect.setMatrix("diffuseMatrix",this._diffuseTexture.getTextureMatrix())),this._heightTexture&&this._activeEffect.setTexture("heightTexture",this._heightTexture),S.MaterialHelper.BindClipPlane(this._activeEffect,r),this.pointsCloud&&this._activeEffect.setFloat("pointSize",this.pointSize),r.bindEyePosition(o)),this._activeEffect.setColor4("vDiffuseColor",this.diffuseColor,this.alpha*t.visibility),r.lightsEnabled&&!this.disableLighting&&S.MaterialHelper.BindLights(r,t,this._activeEffect,i,this.maxSimultaneousLights),r.fogEnabled&&t.applyFog&&r.fogMode!==S.Scene.FOGMODE_NONE&&this._activeEffect.setMatrix("view",r.getViewMatrix()),S.MaterialHelper.BindFogParameters(r,t,this._activeEffect),this._activeEffect.setFloat("furLength",this.furLength),this._activeEffect.setFloat("furAngle",this.furAngle),this._activeEffect.setColor4("furColor",this.furColor,1),this.highLevelFur&&(this._activeEffect.setVector3("furGravity",this.furGravity),this._activeEffect.setFloat("furOffset",this.furOffset),this._activeEffect.setFloat("furSpacing",this.furSpacing),this._activeEffect.setFloat("furDensity",this.furDensity),this._activeEffect.setFloat("furOcclusion",this.furOcclusion),this._furTime+=this.getScene().getEngine().getDeltaTime()/this.furSpeed,this._activeEffect.setFloat("furTime",this._furTime),this._activeEffect.setTexture("furTexture",this.furTexture)),this._afterBind(t,this._activeEffect))}},t.prototype.getAnimatables=function(){var e=[];return this.diffuseTexture&&this.diffuseTexture.animations&&this.diffuseTexture.animations.length>0&&e.push(this.diffuseTexture),this.heightTexture&&this.heightTexture.animations&&this.heightTexture.animations.length>0&&e.push(this.heightTexture),e},t.prototype.getActiveTextures=function(){var t=e.prototype.getActiveTextures.call(this);return this._diffuseTexture&&t.push(this._diffuseTexture),this._heightTexture&&t.push(this._heightTexture),t},t.prototype.hasTexture=function(t){return!!e.prototype.hasTexture.call(this,t)||(this.diffuseTexture===t||this._heightTexture===t)},t.prototype.dispose=function(t){if(this.diffuseTexture&&this.diffuseTexture.dispose(),this._meshes)for(var n=1;n<this._meshes.length;n++){var r=this._meshes[n].material;r&&r.dispose(t),this._meshes[n].dispose()}e.prototype.dispose.call(this,t)},t.prototype.clone=function(e){var n=this;return S.SerializationHelper.Clone((function(){return new t(e,n.getScene())}),this)},t.prototype.serialize=function(){var e=S.SerializationHelper.Serialize(this);return e.customType="BABYLON.FurMaterial",this._meshes&&(e.sourceMeshName=this._meshes[0].name,e.quality=this._meshes.length),e},t.prototype.getClassName=function(){return"FurMaterial"},t.Parse=function(e,n,r){var i=S.SerializationHelper.Parse((function(){return new t(e.name,n)}),e,n,r);return e.sourceMeshName&&i.highLevelFur&&n.executeWhenReady((function(){var r=n.getMeshByName(e.sourceMeshName);if(r){var o=t.GenerateTexture("Fur Texture",n);i.furTexture=o,t.FurifyMesh(r,e.quality)}})),i},t.GenerateTexture=function(e,t){for(var n=new S.DynamicTexture("FurTexture "+e,256,t,!0),r=n.getContext(),i=0;i<2e4;++i)r.fillStyle="rgba(255, "+Math.floor(255*Math.random())+", "+Math.floor(255*Math.random())+", 1)",r.fillRect(Math.random()*n.getSize().width,Math.random()*n.getSize().height,2,2);return n.update(!1),n.wrapU=S.Texture.WRAP_ADDRESSMODE,n.wrapV=S.Texture.WRAP_ADDRESSMODE,n},t.FurifyMesh=function(e,n){var r,i=[e],o=e.material;if(!(o instanceof t))throw"The material of the source mesh must be a Fur Material";for(r=1;r<n;r++){var a=new t(o.name+r,e.getScene());e.getScene().materials.pop(),S.Tags.EnableFor(a),S.Tags.AddTagsTo(a,"furShellMaterial"),a.furLength=o.furLength,a.furAngle=o.furAngle,a.furGravity=o.furGravity,a.furSpacing=o.furSpacing,a.furSpeed=o.furSpeed,a.furColor=o.furColor,a.diffuseTexture=o.diffuseTexture,a.furOffset=r/n,a.furTexture=o.furTexture,a.highLevelFur=o.highLevelFur,a.furTime=o.furTime,a.furDensity=o.furDensity;var s=e.clone(e.name+r);s.material=a,s.skeleton=e.skeleton,s.position=S.Vector3.Zero(),i.push(s)}for(r=1;r<i.length;r++)i[r].parent=e;return e.material._meshes=i,i},V([Object(S.serializeAsTexture)("diffuseTexture")],t.prototype,"_diffuseTexture",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"diffuseTexture",void 0),V([Object(S.serializeAsTexture)("heightTexture")],t.prototype,"_heightTexture",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"heightTexture",void 0),V([Object(S.serializeAsColor3)()],t.prototype,"diffuseColor",void 0),V([Object(S.serialize)()],t.prototype,"furLength",void 0),V([Object(S.serialize)()],t.prototype,"furAngle",void 0),V([Object(S.serializeAsColor3)()],t.prototype,"furColor",void 0),V([Object(S.serialize)()],t.prototype,"furOffset",void 0),V([Object(S.serialize)()],t.prototype,"furSpacing",void 0),V([Object(S.serializeAsVector3)()],t.prototype,"furGravity",void 0),V([Object(S.serialize)()],t.prototype,"furSpeed",void 0),V([Object(S.serialize)()],t.prototype,"furDensity",void 0),V([Object(S.serialize)()],t.prototype,"furOcclusion",void 0),V([Object(S.serialize)("disableLighting")],t.prototype,"_disableLighting",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsLightsDirty")],t.prototype,"disableLighting",void 0),V([Object(S.serialize)("maxSimultaneousLights")],t.prototype,"_maxSimultaneousLights",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsLightsDirty")],t.prototype,"maxSimultaneousLights",void 0),V([Object(S.serialize)()],t.prototype,"highLevelFur",void 0),V([Object(S.serialize)()],t.prototype,"furTime",null),t}(S.PushMaterial);Object(S.RegisterClass)("BABYLON.FurMaterial",ee);var te="precision highp float;\n\nuniform vec4 vEyePosition;\n\nuniform vec4 topColor;\nuniform vec4 bottomColor;\nuniform float offset;\nuniform float scale;\nuniform float smoothness;\n\nvarying vec3 vPositionW;\nvarying vec3 vPosition;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n\n#include<helperFunctions>\n\n#include<__decl__lightFragment>[0]\n#include<__decl__lightFragment>[1]\n#include<__decl__lightFragment>[2]\n#include<__decl__lightFragment>[3]\n#include<lightsFragmentFunctions>\n#include<shadowsFragmentFunctions>\n#include<clipPlaneFragmentDeclaration>\n\n#include<fogFragmentDeclaration>\nvoid main(void) {\n#include<clipPlaneFragment>\nvec3 viewDirectionW=normalize(vEyePosition.xyz-vPositionW);\nfloat h=vPosition.y*scale+offset;\nfloat mysmoothness=clamp(smoothness,0.01,max(smoothness,10.));\nvec4 baseColor=mix(bottomColor,topColor,max(pow(max(h,0.0),mysmoothness),0.0));\n\nvec3 diffuseColor=baseColor.rgb;\n\nfloat alpha=baseColor.a;\n#ifdef ALPHATEST\nif (baseColor.a<0.4)\ndiscard;\n#endif\n#include<depthPrePass>\n#ifdef VERTEXCOLOR\nbaseColor.rgb*=vColor.rgb;\n#endif\n\n#ifdef NORMAL\nvec3 normalW=normalize(vNormalW);\n#else\nvec3 normalW=vec3(1.0,1.0,1.0);\n#endif\n\n#ifdef EMISSIVE\nvec3 diffuseBase=baseColor.rgb;\n#else\nvec3 diffuseBase=vec3(0.,0.,0.);\n#endif\nlightingInfo info;\nfloat shadow=1.;\nfloat glossiness=0.;\n#include<lightFragment>[0..maxSimultaneousLights]\n#ifdef VERTEXALPHA\nalpha*=vColor.a;\n#endif\nvec3 finalDiffuse=clamp(diffuseBase*diffuseColor,0.0,1.0)*baseColor.rgb;\n\nvec4 color=vec4(finalDiffuse,alpha);\n#include<fogFragment>\ngl_FragColor=color;\n#include<imageProcessingCompatibility>\n}\n";S.ShaderStore.ShadersStore.gradientPixelShader=te;var ne="precision highp float;\n\nattribute vec3 position;\n#ifdef NORMAL\nattribute vec3 normal;\n#endif\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#ifdef UV2\nattribute vec2 uv2;\n#endif\n#ifdef VERTEXCOLOR\nattribute vec4 color;\n#endif\n#include<bonesDeclaration>\n#include<bakedVertexAnimationDeclaration>\n\n#include<instancesDeclaration>\nuniform mat4 view;\nuniform mat4 viewProjection;\n#ifdef POINTSIZE\nuniform float pointSize;\n#endif\n\nvarying vec3 vPositionW;\nvarying vec3 vPosition;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#include<clipPlaneVertexDeclaration>\n#include<fogVertexDeclaration>\n#include<__decl__lightFragment>[0..maxSimultaneousLights]\nvoid main(void) {\n#include<instancesVertex>\n#include<bonesVertex>\n#include<bakedVertexAnimation>\nvec4 worldPos=finalWorld*vec4(position,1.0);\ngl_Position=viewProjection*worldPos;\nvPositionW=vec3(worldPos);\nvPosition=position;\n#ifdef NORMAL\nvNormalW=normalize(vec3(finalWorld*vec4(normal,0.0)));\n#endif\n\n#ifndef UV1\nvec2 uv=vec2(0.,0.);\n#endif\n#ifndef UV2\nvec2 uv2=vec2(0.,0.);\n#endif\n\n#include<clipPlaneVertex>\n\n#include<fogVertex>\n#include<shadowsVertex>[0..maxSimultaneousLights]\n\n#ifdef VERTEXCOLOR\nvColor=color;\n#endif\n\n#ifdef POINTSIZE\ngl_PointSize=pointSize;\n#endif\n}\n";S.ShaderStore.ShadersStore.gradientVertexShader=ne;var re=function(e){function t(){var t=e.call(this)||this;return t.EMISSIVE=!1,t.CLIPPLANE=!1,t.CLIPPLANE2=!1,t.CLIPPLANE3=!1,t.CLIPPLANE4=!1,t.CLIPPLANE5=!1,t.CLIPPLANE6=!1,t.ALPHATEST=!1,t.DEPTHPREPASS=!1,t.POINTSIZE=!1,t.FOG=!1,t.NORMAL=!1,t.UV1=!1,t.UV2=!1,t.VERTEXCOLOR=!1,t.VERTEXALPHA=!1,t.NUM_BONE_INFLUENCERS=0,t.BonesPerMesh=0,t.INSTANCES=!1,t.IMAGEPROCESSINGPOSTPROCESS=!1,t.SKIPFINALCOLORCLAMP=!1,t.rebuild(),t}return B(t,e),t}(S.MaterialDefines),ie=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r._maxSimultaneousLights=4,r.topColor=new S.Color3(1,0,0),r.topColorAlpha=1,r.bottomColor=new S.Color3(0,0,1),r.bottomColorAlpha=1,r.offset=0,r.scale=1,r.smoothness=1,r._disableLighting=!1,r}return B(t,e),t.prototype.needAlphaBlending=function(){return this.alpha<1||this.topColorAlpha<1||this.bottomColorAlpha<1},t.prototype.needAlphaTesting=function(){return!0},t.prototype.getAlphaTestTexture=function(){return null},t.prototype.isReadyForSubMesh=function(e,t,n){if(this.isFrozen&&t.effect&&t.effect._wasPreviouslyReady)return!0;t.materialDefines||(t.materialDefines=new re);var r=t.materialDefines,i=this.getScene();if(this._isReadyForSubMesh(t))return!0;var o=i.getEngine();if(S.MaterialHelper.PrepareDefinesForFrameBoundValues(i,o,r,!!n),S.MaterialHelper.PrepareDefinesForMisc(e,i,!1,this.pointsCloud,this.fogEnabled,this._shouldTurnAlphaTestOn(e),r),r._needNormals=S.MaterialHelper.PrepareDefinesForLights(i,e,r,!1,this._maxSimultaneousLights,this._disableLighting),r.EMISSIVE=this._disableLighting,S.MaterialHelper.PrepareDefinesForAttributes(e,r,!1,!0),r.isDirty){r.markAsProcessed(),i.resetCachedMaterial();var a=new S.EffectFallbacks;r.FOG&&a.addFallback(1,"FOG"),S.MaterialHelper.HandleFallbacksForShadows(r,a),r.NUM_BONE_INFLUENCERS>0&&a.addCPUSkinningFallback(0,e),r.IMAGEPROCESSINGPOSTPROCESS=i.imageProcessingConfiguration.applyByPostProcess;var s=[S.VertexBuffer.PositionKind];r.NORMAL&&s.push(S.VertexBuffer.NormalKind),r.UV1&&s.push(S.VertexBuffer.UVKind),r.UV2&&s.push(S.VertexBuffer.UV2Kind),r.VERTEXCOLOR&&s.push(S.VertexBuffer.ColorKind),S.MaterialHelper.PrepareAttributesForBones(s,e,r,a),S.MaterialHelper.PrepareAttributesForInstances(s,r);var l=r.toString(),u=["world","view","viewProjection","vEyePosition","vLightsType","vFogInfos","vFogColor","pointSize","mBones","vClipPlane","vClipPlane2","vClipPlane3","vClipPlane4","vClipPlane5","vClipPlane6","topColor","bottomColor","offset","smoothness","scale"],c=[],f=new Array;S.MaterialHelper.PrepareUniformsAndSamplersList({uniformsNames:u,uniformBuffersNames:f,samplers:c,defines:r,maxSimultaneousLights:4}),t.setEffect(i.getEngine().createEffect("gradient",{attributes:s,uniformsNames:u,uniformBuffersNames:f,samplers:c,defines:l,fallbacks:a,onCompiled:this.onCompiled,onError:this.onError,indexParameters:{maxSimultaneousLights:4}},o),r,this._materialContext)}return!(!t.effect||!t.effect.isReady())&&(r._renderId=i.getRenderId(),t.effect._wasPreviouslyReady=!0,!0)},t.prototype.bindForSubMesh=function(e,t,n){var r=this.getScene(),i=n.materialDefines;if(i){var o=n.effect;o&&(this._activeEffect=o,this.bindOnlyWorldMatrix(e),this._activeEffect.setMatrix("viewProjection",r.getTransformMatrix()),S.MaterialHelper.BindBonesParameters(t,o),this._mustRebind(r,o)&&(S.MaterialHelper.BindClipPlane(o,r),this.pointsCloud&&this._activeEffect.setFloat("pointSize",this.pointSize),r.bindEyePosition(o)),r.lightsEnabled&&!this.disableLighting&&S.MaterialHelper.BindLights(r,t,this._activeEffect,i,this.maxSimultaneousLights),r.fogEnabled&&t.applyFog&&r.fogMode!==S.Scene.FOGMODE_NONE&&this._activeEffect.setMatrix("view",r.getViewMatrix()),S.MaterialHelper.BindFogParameters(r,t,this._activeEffect),this._activeEffect.setColor4("topColor",this.topColor,this.topColorAlpha),this._activeEffect.setColor4("bottomColor",this.bottomColor,this.bottomColorAlpha),this._activeEffect.setFloat("offset",this.offset),this._activeEffect.setFloat("scale",this.scale),this._activeEffect.setFloat("smoothness",this.smoothness),this._afterBind(t,this._activeEffect))}},t.prototype.getAnimatables=function(){return[]},t.prototype.dispose=function(t){e.prototype.dispose.call(this,t)},t.prototype.clone=function(e){var n=this;return S.SerializationHelper.Clone((function(){return new t(e,n.getScene())}),this)},t.prototype.serialize=function(){var e=S.SerializationHelper.Serialize(this);return e.customType="BABYLON.GradientMaterial",e},t.prototype.getClassName=function(){return"GradientMaterial"},t.Parse=function(e,n,r){return S.SerializationHelper.Parse((function(){return new t(e.name,n)}),e,n,r)},V([Object(S.serialize)("maxSimultaneousLights")],t.prototype,"_maxSimultaneousLights",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsLightsDirty")],t.prototype,"maxSimultaneousLights",void 0),V([Object(S.serializeAsColor3)()],t.prototype,"topColor",void 0),V([Object(S.serialize)()],t.prototype,"topColorAlpha",void 0),V([Object(S.serializeAsColor3)()],t.prototype,"bottomColor",void 0),V([Object(S.serialize)()],t.prototype,"bottomColorAlpha",void 0),V([Object(S.serialize)()],t.prototype,"offset",void 0),V([Object(S.serialize)()],t.prototype,"scale",void 0),V([Object(S.serialize)()],t.prototype,"smoothness",void 0),V([Object(S.serialize)("disableLighting")],t.prototype,"_disableLighting",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsLightsDirty")],t.prototype,"disableLighting",void 0),t}(S.PushMaterial);Object(S.RegisterClass)("BABYLON.GradientMaterial",ie);var oe="#extension GL_OES_standard_derivatives : enable\n#define SQRT2 1.41421356\n#define PI 3.14159\nprecision highp float;\nuniform float visibility;\nuniform vec3 mainColor;\nuniform vec3 lineColor;\nuniform vec4 gridControl;\nuniform vec3 gridOffset;\n\nvarying vec3 vPosition;\nvarying vec3 vNormal;\n#include<fogFragmentDeclaration>\n\n#ifdef OPACITY\nvarying vec2 vOpacityUV;\nuniform sampler2D opacitySampler;\nuniform vec2 vOpacityInfos;\n#endif\nfloat getDynamicVisibility(float position) {\n\nfloat majorGridFrequency=gridControl.y;\nif (floor(position+0.5) == floor(position/majorGridFrequency+0.5)*majorGridFrequency)\n{\nreturn 1.0;\n}\nreturn gridControl.z;\n}\nfloat getAnisotropicAttenuation(float differentialLength) {\nconst float maxNumberOfLines=10.0;\nreturn clamp(1.0/(differentialLength+1.0)-1.0/maxNumberOfLines,0.0,1.0);\n}\nfloat isPointOnLine(float position,float differentialLength) {\nfloat fractionPartOfPosition=position-floor(position+0.5);\nfractionPartOfPosition/=differentialLength;\nfractionPartOfPosition=clamp(fractionPartOfPosition,-1.,1.);\nfloat result=0.5+0.5*cos(fractionPartOfPosition*PI);\nreturn result;\n}\nfloat contributionOnAxis(float position) {\nfloat differentialLength=length(vec2(dFdx(position),dFdy(position)));\ndifferentialLength*=SQRT2;\n\nfloat result=isPointOnLine(position,differentialLength);\n\nfloat dynamicVisibility=getDynamicVisibility(position);\nresult*=dynamicVisibility;\n\nfloat anisotropicAttenuation=getAnisotropicAttenuation(differentialLength);\nresult*=anisotropicAttenuation;\nreturn result;\n}\nfloat normalImpactOnAxis(float x) {\nfloat normalImpact=clamp(1.0-3.0*abs(x*x*x),0.0,1.0);\nreturn normalImpact;\n}\nvoid main(void) {\n\nfloat gridRatio=gridControl.x;\nvec3 gridPos=(vPosition+gridOffset.xyz)/gridRatio;\n\nfloat x=contributionOnAxis(gridPos.x);\nfloat y=contributionOnAxis(gridPos.y);\nfloat z=contributionOnAxis(gridPos.z);\n\nvec3 normal=normalize(vNormal);\nx*=normalImpactOnAxis(normal.x);\ny*=normalImpactOnAxis(normal.y);\nz*=normalImpactOnAxis(normal.z);\n\nfloat grid=clamp(x+y+z,0.,1.);\n\nvec3 color=mix(mainColor,lineColor,grid);\n#ifdef FOG\n#include<fogFragment>\n#endif\nfloat opacity=1.0;\n#ifdef TRANSPARENT\nopacity=clamp(grid,0.08,gridControl.w*grid);\n#endif\n#ifdef OPACITY\nopacity*=texture2D(opacitySampler,vOpacityUV).a;\n#endif\n\ngl_FragColor=vec4(color.rgb,opacity*visibility);\n#ifdef TRANSPARENT\n#ifdef PREMULTIPLYALPHA\ngl_FragColor.rgb*=opacity;\n#endif\n#else\n#endif\n#include<imageProcessingCompatibility>\n}";S.ShaderStore.ShadersStore.gridPixelShader=oe;var ae="precision highp float;\n\nattribute vec3 position;\nattribute vec3 normal;\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#ifdef UV2\nattribute vec2 uv2;\n#endif\n#include<instancesDeclaration>\n\nuniform mat4 projection;\nuniform mat4 view;\n\nvarying vec3 vPosition;\nvarying vec3 vNormal;\n#include<fogVertexDeclaration>\n#ifdef OPACITY\nvarying vec2 vOpacityUV;\nuniform mat4 opacityMatrix;\nuniform vec2 vOpacityInfos;\n#endif\nvoid main(void) {\n#include<instancesVertex>\nvec4 worldPos=finalWorld*vec4(position,1.0);\n#include<fogVertex>\nvec4 cameraSpacePosition=view*worldPos;\ngl_Position=projection*cameraSpacePosition;\n#ifdef OPACITY\n#ifndef UV1\nvec2 uv=vec2(0.,0.);\n#endif\n#ifndef UV2\nvec2 uv2=vec2(0.,0.);\n#endif\nif (vOpacityInfos.x == 0.)\n{\nvOpacityUV=vec2(opacityMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvOpacityUV=vec2(opacityMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\nvPosition=position;\nvNormal=normal;\n}";S.ShaderStore.ShadersStore.gridVertexShader=ae;var se=function(e){function t(){var t=e.call(this)||this;return t.OPACITY=!1,t.TRANSPARENT=!1,t.FOG=!1,t.PREMULTIPLYALPHA=!1,t.UV1=!1,t.UV2=!1,t.INSTANCES=!1,t.THIN_INSTANCES=!1,t.IMAGEPROCESSINGPOSTPROCESS=!1,t.SKIPFINALCOLORCLAMP=!1,t.rebuild(),t}return B(t,e),t}(S.MaterialDefines),le=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.mainColor=S.Color3.Black(),r.lineColor=S.Color3.Teal(),r.gridRatio=1,r.gridOffset=S.Vector3.Zero(),r.majorUnitFrequency=10,r.minorUnitVisibility=.33,r.opacity=1,r.preMultiplyAlpha=!1,r._gridControl=new S.Vector4(r.gridRatio,r.majorUnitFrequency,r.minorUnitVisibility,r.opacity),r}return B(t,e),t.prototype.needAlphaBlending=function(){return this.opacity<1||this._opacityTexture&&this._opacityTexture.isReady()},t.prototype.needAlphaBlendingForMesh=function(e){return e.visibility<1||this.needAlphaBlending()},t.prototype.isReadyForSubMesh=function(e,t,n){if(this.isFrozen&&t.effect&&t.effect._wasPreviouslyReady)return!0;t.materialDefines||(t.materialDefines=new se);var r=t.materialDefines,i=this.getScene();if(this._isReadyForSubMesh(t))return!0;if(r.TRANSPARENT!==this.opacity<1&&(r.TRANSPARENT=!r.TRANSPARENT,r.markAsUnprocessed()),r.PREMULTIPLYALPHA!=this.preMultiplyAlpha&&(r.PREMULTIPLYALPHA=!r.PREMULTIPLYALPHA,r.markAsUnprocessed()),r._areTexturesDirty&&(r._needUVs=!1,i.texturesEnabled&&this._opacityTexture&&S.MaterialFlags.OpacityTextureEnabled)){if(!this._opacityTexture.isReady())return!1;r._needUVs=!0,r.OPACITY=!0}if(S.MaterialHelper.PrepareDefinesForMisc(e,i,!1,!1,this.fogEnabled,!1,r),S.MaterialHelper.PrepareDefinesForFrameBoundValues(i,i.getEngine(),r,!!n),r.isDirty){r.markAsProcessed(),i.resetCachedMaterial(),S.MaterialHelper.PrepareDefinesForAttributes(e,r,!1,!1);var o=[S.VertexBuffer.PositionKind,S.VertexBuffer.NormalKind];r.UV1&&o.push(S.VertexBuffer.UVKind),r.UV2&&o.push(S.VertexBuffer.UV2Kind),r.IMAGEPROCESSINGPOSTPROCESS=i.imageProcessingConfiguration.applyByPostProcess,S.MaterialHelper.PrepareAttributesForInstances(o,r);var a=r.toString();t.setEffect(i.getEngine().createEffect("grid",o,["projection","mainColor","lineColor","gridControl","gridOffset","vFogInfos","vFogColor","world","view","opacityMatrix","vOpacityInfos","visibility"],["opacitySampler"],a,void 0,this.onCompiled,this.onError),r,this._materialContext)}return!(!t.effect||!t.effect.isReady())&&(r._renderId=i.getRenderId(),t.effect._wasPreviouslyReady=!0,!0)},t.prototype.bindForSubMesh=function(e,t,n){var r=this.getScene(),i=n.materialDefines;if(i){var o=n.effect;o&&(this._activeEffect=o,this._activeEffect.setFloat("visibility",t.visibility),i.INSTANCES&&!i.THIN_INSTANCE||this.bindOnlyWorldMatrix(e),this._activeEffect.setMatrix("view",r.getViewMatrix()),this._activeEffect.setMatrix("projection",r.getProjectionMatrix()),this._mustRebind(r,o)&&(this._activeEffect.setColor3("mainColor",this.mainColor),this._activeEffect.setColor3("lineColor",this.lineColor),this._activeEffect.setVector3("gridOffset",this.gridOffset),this._gridControl.x=this.gridRatio,this._gridControl.y=Math.round(this.majorUnitFrequency),this._gridControl.z=this.minorUnitVisibility,this._gridControl.w=this.opacity,this._activeEffect.setVector4("gridControl",this._gridControl),this._opacityTexture&&S.MaterialFlags.OpacityTextureEnabled&&(this._activeEffect.setTexture("opacitySampler",this._opacityTexture),this._activeEffect.setFloat2("vOpacityInfos",this._opacityTexture.coordinatesIndex,this._opacityTexture.level),this._activeEffect.setMatrix("opacityMatrix",this._opacityTexture.getTextureMatrix()))),S.MaterialHelper.BindFogParameters(r,t,this._activeEffect),this._afterBind(t,this._activeEffect))}},t.prototype.dispose=function(t){e.prototype.dispose.call(this,t)},t.prototype.clone=function(e){var n=this;return S.SerializationHelper.Clone((function(){return new t(e,n.getScene())}),this)},t.prototype.serialize=function(){var e=S.SerializationHelper.Serialize(this);return e.customType="BABYLON.GridMaterial",e},t.prototype.getClassName=function(){return"GridMaterial"},t.Parse=function(e,n,r){return S.SerializationHelper.Parse((function(){return new t(e.name,n)}),e,n,r)},V([Object(S.serializeAsColor3)()],t.prototype,"mainColor",void 0),V([Object(S.serializeAsColor3)()],t.prototype,"lineColor",void 0),V([Object(S.serialize)()],t.prototype,"gridRatio",void 0),V([Object(S.serializeAsVector3)()],t.prototype,"gridOffset",void 0),V([Object(S.serialize)()],t.prototype,"majorUnitFrequency",void 0),V([Object(S.serialize)()],t.prototype,"minorUnitVisibility",void 0),V([Object(S.serialize)()],t.prototype,"opacity",void 0),V([Object(S.serialize)()],t.prototype,"preMultiplyAlpha",void 0),V([Object(S.serializeAsTexture)("opacityTexture")],t.prototype,"_opacityTexture",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"opacityTexture",void 0),t}(S.PushMaterial);Object(S.RegisterClass)("BABYLON.GridMaterial",le);var ue="precision highp float;\n\nuniform vec4 vEyePosition;\nuniform vec4 vDiffuseColor;\n\nvarying vec3 vPositionW;\n\nuniform float time;\nuniform float speed;\nuniform float movingSpeed;\nuniform vec3 fogColor;\nuniform sampler2D noiseTexture;\nuniform float fogDensity;\n\nvarying float noise;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n\n#include<helperFunctions>\n\n#include<__decl__lightFragment>[0]\n#include<__decl__lightFragment>[1]\n#include<__decl__lightFragment>[2]\n#include<__decl__lightFragment>[3]\n#include<lightsFragmentFunctions>\n#include<shadowsFragmentFunctions>\n\n#ifdef DIFFUSE\nvarying vec2 vDiffuseUV;\nuniform sampler2D diffuseSampler;\nuniform vec2 vDiffuseInfos;\n#endif\n#include<clipPlaneFragmentDeclaration>\n\n#include<fogFragmentDeclaration>\nfloat random( vec3 scale,float seed ){\nreturn fract( sin( dot( gl_FragCoord.xyz+seed,scale ) )*43758.5453+seed ) ;\n}\nvoid main(void) {\n#include<clipPlaneFragment>\nvec3 viewDirectionW=normalize(vEyePosition.xyz-vPositionW);\n\nvec4 baseColor=vec4(1.,1.,1.,1.);\nvec3 diffuseColor=vDiffuseColor.rgb;\n\nfloat alpha=vDiffuseColor.a;\n#ifdef DIFFUSE\n\nvec4 noiseTex=texture2D( noiseTexture,vDiffuseUV );\nvec2 T1=vDiffuseUV+vec2( 1.5,-1.5 )*time*0.02;\nvec2 T2=vDiffuseUV+vec2( -0.5,2.0 )*time*0.01*speed;\nT1.x+=noiseTex.x*2.0;\nT1.y+=noiseTex.y*2.0;\nT2.x-=noiseTex.y*0.2+time*0.001*movingSpeed;\nT2.y+=noiseTex.z*0.2+time*0.002*movingSpeed;\nfloat p=texture2D( noiseTexture,T1*3.0 ).a;\nvec4 lavaColor=texture2D( diffuseSampler,T2*4.0);\nvec4 temp=lavaColor*( vec4( p,p,p,p )*2. )+( lavaColor*lavaColor-0.1 );\nbaseColor=temp;\nfloat depth=gl_FragCoord.z*4.0;\nconst float LOG2=1.442695;\nfloat fogFactor=exp2(-fogDensity*fogDensity*depth*depth*LOG2 );\nfogFactor=1.0-clamp( fogFactor,0.0,1.0 );\nbaseColor=mix( baseColor,vec4( fogColor,baseColor.w ),fogFactor );\ndiffuseColor=baseColor.rgb;\n\n\n#ifdef ALPHATEST\nif (baseColor.a<0.4)\ndiscard;\n#endif\n#include<depthPrePass>\nbaseColor.rgb*=vDiffuseInfos.y;\n#endif\n#ifdef VERTEXCOLOR\nbaseColor.rgb*=vColor.rgb;\n#endif\n\n#ifdef NORMAL\nvec3 normalW=normalize(vNormalW);\n#else\nvec3 normalW=vec3(1.0,1.0,1.0);\n#endif\n#ifdef UNLIT\nvec3 diffuseBase=vec3(1.,1.,1.);\n#else\n\nvec3 diffuseBase=vec3(0.,0.,0.);\nlightingInfo info;\nfloat shadow=1.;\nfloat glossiness=0.;\n#include<lightFragment>[0]\n#include<lightFragment>[1]\n#include<lightFragment>[2]\n#include<lightFragment>[3]\n#endif\n#ifdef VERTEXALPHA\nalpha*=vColor.a;\n#endif\nvec3 finalDiffuse=clamp(diffuseBase*diffuseColor,0.0,1.0)*baseColor.rgb;\n\nvec4 color=vec4(finalDiffuse,alpha);\n#include<fogFragment>\ngl_FragColor=color;\n#include<imageProcessingCompatibility>\n}";S.ShaderStore.ShadersStore.lavaPixelShader=ue;var ce="precision highp float;\n\nuniform float time;\nuniform float lowFrequencySpeed;\n\nvarying float noise;\n\nattribute vec3 position;\n#ifdef NORMAL\nattribute vec3 normal;\n#endif\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#ifdef UV2\nattribute vec2 uv2;\n#endif\n#ifdef VERTEXCOLOR\nattribute vec4 color;\n#endif\n#include<bonesDeclaration>\n#include<bakedVertexAnimationDeclaration>\n\n#include<instancesDeclaration>\nuniform mat4 view;\nuniform mat4 viewProjection;\n#ifdef DIFFUSE\nvarying vec2 vDiffuseUV;\nuniform mat4 diffuseMatrix;\nuniform vec2 vDiffuseInfos;\n#endif\n#ifdef POINTSIZE\nuniform float pointSize;\n#endif\n\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#include<clipPlaneVertexDeclaration>\n#include<fogVertexDeclaration>\n#include<__decl__lightFragment>[0..maxSimultaneousLights]\n\n\n\nvec3 mod289(vec3 x)\n{\nreturn x-floor(x*(1.0/289.0))*289.0;\n}\nvec4 mod289(vec4 x)\n{\nreturn x-floor(x*(1.0/289.0))*289.0;\n}\nvec4 permute(vec4 x)\n{\nreturn mod289(((x*34.0)+1.0)*x);\n}\nvec4 taylorInvSqrt(vec4 r)\n{\nreturn 1.79284291400159-0.85373472095314*r;\n}\nvec3 fade(vec3 t) {\nreturn t*t*t*(t*(t*6.0-15.0)+10.0);\n}\n\nfloat pnoise(vec3 P,vec3 rep)\n{\nvec3 Pi0=mod(floor(P),rep);\nvec3 Pi1=mod(Pi0+vec3(1.0),rep);\nPi0=mod289(Pi0);\nPi1=mod289(Pi1);\nvec3 Pf0=fract(P);\nvec3 Pf1=Pf0-vec3(1.0);\nvec4 ix=vec4(Pi0.x,Pi1.x,Pi0.x,Pi1.x);\nvec4 iy=vec4(Pi0.yy,Pi1.yy);\nvec4 iz0=Pi0.zzzz;\nvec4 iz1=Pi1.zzzz;\nvec4 ixy=permute(permute(ix)+iy);\nvec4 ixy0=permute(ixy+iz0);\nvec4 ixy1=permute(ixy+iz1);\nvec4 gx0=ixy0*(1.0/7.0);\nvec4 gy0=fract(floor(gx0)*(1.0/7.0))-0.5;\ngx0=fract(gx0);\nvec4 gz0=vec4(0.5)-abs(gx0)-abs(gy0);\nvec4 sz0=step(gz0,vec4(0.0));\ngx0-=sz0*(step(0.0,gx0)-0.5);\ngy0-=sz0*(step(0.0,gy0)-0.5);\nvec4 gx1=ixy1*(1.0/7.0);\nvec4 gy1=fract(floor(gx1)*(1.0/7.0))-0.5;\ngx1=fract(gx1);\nvec4 gz1=vec4(0.5)-abs(gx1)-abs(gy1);\nvec4 sz1=step(gz1,vec4(0.0));\ngx1-=sz1*(step(0.0,gx1)-0.5);\ngy1-=sz1*(step(0.0,gy1)-0.5);\nvec3 g000=vec3(gx0.x,gy0.x,gz0.x);\nvec3 g100=vec3(gx0.y,gy0.y,gz0.y);\nvec3 g010=vec3(gx0.z,gy0.z,gz0.z);\nvec3 g110=vec3(gx0.w,gy0.w,gz0.w);\nvec3 g001=vec3(gx1.x,gy1.x,gz1.x);\nvec3 g101=vec3(gx1.y,gy1.y,gz1.y);\nvec3 g011=vec3(gx1.z,gy1.z,gz1.z);\nvec3 g111=vec3(gx1.w,gy1.w,gz1.w);\nvec4 norm0=taylorInvSqrt(vec4(dot(g000,g000),dot(g010,g010),dot(g100,g100),dot(g110,g110)));\ng000*=norm0.x;\ng010*=norm0.y;\ng100*=norm0.z;\ng110*=norm0.w;\nvec4 norm1=taylorInvSqrt(vec4(dot(g001,g001),dot(g011,g011),dot(g101,g101),dot(g111,g111)));\ng001*=norm1.x;\ng011*=norm1.y;\ng101*=norm1.z;\ng111*=norm1.w;\nfloat n000=dot(g000,Pf0);\nfloat n100=dot(g100,vec3(Pf1.x,Pf0.yz));\nfloat n010=dot(g010,vec3(Pf0.x,Pf1.y,Pf0.z));\nfloat n110=dot(g110,vec3(Pf1.xy,Pf0.z));\nfloat n001=dot(g001,vec3(Pf0.xy,Pf1.z));\nfloat n101=dot(g101,vec3(Pf1.x,Pf0.y,Pf1.z));\nfloat n011=dot(g011,vec3(Pf0.x,Pf1.yz));\nfloat n111=dot(g111,Pf1);\nvec3 fade_xyz=fade(Pf0);\nvec4 n_z=mix(vec4(n000,n100,n010,n110),vec4(n001,n101,n011,n111),fade_xyz.z);\nvec2 n_yz=mix(n_z.xy,n_z.zw,fade_xyz.y);\nfloat n_xyz=mix(n_yz.x,n_yz.y,fade_xyz.x);\nreturn 2.2*n_xyz;\n}\n\nfloat turbulence( vec3 p ) {\nfloat w=100.0;\nfloat t=-.5;\nfor (float f=1.0 ; f<=10.0 ; f++ ){\nfloat power=pow( 2.0,f );\nt+=abs( pnoise( vec3( power*p ),vec3( 10.0,10.0,10.0 ) )/power );\n}\nreturn t;\n}\nvoid main(void) {\n#include<instancesVertex>\n#include<bonesVertex>\n#include<bakedVertexAnimation>\n#ifdef NORMAL\n\nnoise=10.0*-.10*turbulence( .5*normal+time*1.15 );\n\nfloat b=lowFrequencySpeed*5.0*pnoise( 0.05*position +vec3(time*1.025),vec3( 100.0 ) );\n\nfloat displacement =-1.5*noise+b;\n\nvec3 newPosition=position+normal*displacement;\ngl_Position=viewProjection*finalWorld*vec4( newPosition,1.0 );\nvec4 worldPos=finalWorld*vec4(newPosition,1.0);\nvPositionW=vec3(worldPos);\nvNormalW=normalize(vec3(finalWorld*vec4(normal,0.0)));\n#endif\n\n#ifndef UV1\nvec2 uv=vec2(0.,0.);\n#endif\n#ifndef UV2\nvec2 uv2=vec2(0.,0.);\n#endif\n#ifdef DIFFUSE\nif (vDiffuseInfos.x == 0.)\n{\nvDiffuseUV=vec2(diffuseMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvDiffuseUV=vec2(diffuseMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n\n#include<clipPlaneVertex>\n\n#include<fogVertex>\n#include<shadowsVertex>[0..maxSimultaneousLights]\n\n#ifdef VERTEXCOLOR\nvColor=color;\n#endif\n\n#ifdef POINTSIZE\ngl_PointSize=pointSize;\n#endif\n}";S.ShaderStore.ShadersStore.lavaVertexShader=ce;var fe=function(e){function t(){var t=e.call(this)||this;return t.DIFFUSE=!1,t.CLIPPLANE=!1,t.CLIPPLANE2=!1,t.CLIPPLANE3=!1,t.CLIPPLANE4=!1,t.CLIPPLANE5=!1,t.CLIPPLANE6=!1,t.ALPHATEST=!1,t.DEPTHPREPASS=!1,t.POINTSIZE=!1,t.FOG=!1,t.LIGHT0=!1,t.LIGHT1=!1,t.LIGHT2=!1,t.LIGHT3=!1,t.SPOTLIGHT0=!1,t.SPOTLIGHT1=!1,t.SPOTLIGHT2=!1,t.SPOTLIGHT3=!1,t.HEMILIGHT0=!1,t.HEMILIGHT1=!1,t.HEMILIGHT2=!1,t.HEMILIGHT3=!1,t.DIRLIGHT0=!1,t.DIRLIGHT1=!1,t.DIRLIGHT2=!1,t.DIRLIGHT3=!1,t.POINTLIGHT0=!1,t.POINTLIGHT1=!1,t.POINTLIGHT2=!1,t.POINTLIGHT3=!1,t.SHADOW0=!1,t.SHADOW1=!1,t.SHADOW2=!1,t.SHADOW3=!1,t.SHADOWS=!1,t.SHADOWESM0=!1,t.SHADOWESM1=!1,t.SHADOWESM2=!1,t.SHADOWESM3=!1,t.SHADOWPOISSON0=!1,t.SHADOWPOISSON1=!1,t.SHADOWPOISSON2=!1,t.SHADOWPOISSON3=!1,t.SHADOWPCF0=!1,t.SHADOWPCF1=!1,t.SHADOWPCF2=!1,t.SHADOWPCF3=!1,t.SHADOWPCSS0=!1,t.SHADOWPCSS1=!1,t.SHADOWPCSS2=!1,t.SHADOWPCSS3=!1,t.NORMAL=!1,t.UV1=!1,t.UV2=!1,t.VERTEXCOLOR=!1,t.VERTEXALPHA=!1,t.NUM_BONE_INFLUENCERS=0,t.BonesPerMesh=0,t.INSTANCES=!1,t.UNLIT=!1,t.IMAGEPROCESSINGPOSTPROCESS=!1,t.SKIPFINALCOLORCLAMP=!1,t.rebuild(),t}return B(t,e),t}(S.MaterialDefines),de=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.speed=1,r.movingSpeed=1,r.lowFrequencySpeed=1,r.fogDensity=.15,r._lastTime=0,r.diffuseColor=new S.Color3(1,1,1),r._disableLighting=!1,r._unlit=!1,r._maxSimultaneousLights=4,r._scaledDiffuse=new S.Color3,r}return B(t,e),t.prototype.needAlphaBlending=function(){return this.alpha<1},t.prototype.needAlphaTesting=function(){return!1},t.prototype.getAlphaTestTexture=function(){return null},t.prototype.isReadyForSubMesh=function(e,t,n){if(this.isFrozen&&t.effect&&t.effect._wasPreviouslyReady)return!0;t.materialDefines||(t.materialDefines=new fe);var r=t.materialDefines,i=this.getScene();if(this._isReadyForSubMesh(t))return!0;var o=i.getEngine();if(r._areTexturesDirty&&(r._needUVs=!1,i.texturesEnabled&&this._diffuseTexture&&S.MaterialFlags.DiffuseTextureEnabled)){if(!this._diffuseTexture.isReady())return!1;r._needUVs=!0,r.DIFFUSE=!0}if(S.MaterialHelper.PrepareDefinesForMisc(e,i,!1,this.pointsCloud,this.fogEnabled,this._shouldTurnAlphaTestOn(e),r),r._needNormals=!0,S.MaterialHelper.PrepareDefinesForLights(i,e,r,!1,this._maxSimultaneousLights,this._disableLighting),S.MaterialHelper.PrepareDefinesForFrameBoundValues(i,o,r,!!n),S.MaterialHelper.PrepareDefinesForAttributes(e,r,!0,!0),r.isDirty){r.markAsProcessed(),i.resetCachedMaterial();var a=new S.EffectFallbacks;r.FOG&&a.addFallback(1,"FOG"),S.MaterialHelper.HandleFallbacksForShadows(r,a),r.NUM_BONE_INFLUENCERS>0&&a.addCPUSkinningFallback(0,e),r.IMAGEPROCESSINGPOSTPROCESS=i.imageProcessingConfiguration.applyByPostProcess;var s=[S.VertexBuffer.PositionKind];r.NORMAL&&s.push(S.VertexBuffer.NormalKind),r.UV1&&s.push(S.VertexBuffer.UVKind),r.UV2&&s.push(S.VertexBuffer.UV2Kind),r.VERTEXCOLOR&&s.push(S.VertexBuffer.ColorKind),S.MaterialHelper.PrepareAttributesForBones(s,e,r,a),S.MaterialHelper.PrepareAttributesForInstances(s,r);var l=r.toString(),u=["world","view","viewProjection","vEyePosition","vLightsType","vDiffuseColor","vFogInfos","vFogColor","pointSize","vDiffuseInfos","mBones","vClipPlane","vClipPlane2","vClipPlane3","vClipPlane4","vClipPlane5","vClipPlane6","diffuseMatrix","time","speed","movingSpeed","fogColor","fogDensity","lowFrequencySpeed"],c=["diffuseSampler","noiseTexture"],f=new Array;S.MaterialHelper.PrepareUniformsAndSamplersList({uniformsNames:u,uniformBuffersNames:f,samplers:c,defines:r,maxSimultaneousLights:this.maxSimultaneousLights}),t.setEffect(i.getEngine().createEffect("lava",{attributes:s,uniformsNames:u,uniformBuffersNames:f,samplers:c,defines:l,fallbacks:a,onCompiled:this.onCompiled,onError:this.onError,indexParameters:{maxSimultaneousLights:this.maxSimultaneousLights}},o),r,this._materialContext)}return!(!t.effect||!t.effect.isReady())&&(r._renderId=i.getRenderId(),t.effect._wasPreviouslyReady=!0,!0)},t.prototype.bindForSubMesh=function(e,t,n){var r=this.getScene(),i=n.materialDefines;if(i){var o=n.effect;o&&(this._activeEffect=o,i.UNLIT=this._unlit,this.bindOnlyWorldMatrix(e),this._activeEffect.setMatrix("viewProjection",r.getTransformMatrix()),S.MaterialHelper.BindBonesParameters(t,this._activeEffect),this._mustRebind(r,o)&&(this.diffuseTexture&&S.MaterialFlags.DiffuseTextureEnabled&&(this._activeEffect.setTexture("diffuseSampler",this.diffuseTexture),this._activeEffect.setFloat2("vDiffuseInfos",this.diffuseTexture.coordinatesIndex,this.diffuseTexture.level),this._activeEffect.setMatrix("diffuseMatrix",this.diffuseTexture.getTextureMatrix())),this.noiseTexture&&this._activeEffect.setTexture("noiseTexture",this.noiseTexture),S.MaterialHelper.BindClipPlane(this._activeEffect,r),this.pointsCloud&&this._activeEffect.setFloat("pointSize",this.pointSize),r.bindEyePosition(o)),this._activeEffect.setColor4("vDiffuseColor",this._scaledDiffuse,this.alpha*t.visibility),r.lightsEnabled&&!this.disableLighting&&S.MaterialHelper.BindLights(r,t,this._activeEffect,i),r.fogEnabled&&t.applyFog&&r.fogMode!==S.Scene.FOGMODE_NONE&&this._activeEffect.setMatrix("view",r.getViewMatrix()),S.MaterialHelper.BindFogParameters(r,t,this._activeEffect),this._lastTime+=r.getEngine().getDeltaTime(),this._activeEffect.setFloat("time",this._lastTime*this.speed/1e3),this.fogColor||(this.fogColor=S.Color3.Black()),this._activeEffect.setColor3("fogColor",this.fogColor),this._activeEffect.setFloat("fogDensity",this.fogDensity),this._activeEffect.setFloat("lowFrequencySpeed",this.lowFrequencySpeed),this._activeEffect.setFloat("movingSpeed",this.movingSpeed),this._afterBind(t,this._activeEffect))}},t.prototype.getAnimatables=function(){var e=[];return this.diffuseTexture&&this.diffuseTexture.animations&&this.diffuseTexture.animations.length>0&&e.push(this.diffuseTexture),this.noiseTexture&&this.noiseTexture.animations&&this.noiseTexture.animations.length>0&&e.push(this.noiseTexture),e},t.prototype.getActiveTextures=function(){var t=e.prototype.getActiveTextures.call(this);return this._diffuseTexture&&t.push(this._diffuseTexture),t},t.prototype.hasTexture=function(t){return!!e.prototype.hasTexture.call(this,t)||this.diffuseTexture===t},t.prototype.dispose=function(t){this.diffuseTexture&&this.diffuseTexture.dispose(),this.noiseTexture&&this.noiseTexture.dispose(),e.prototype.dispose.call(this,t)},t.prototype.clone=function(e){var n=this;return S.SerializationHelper.Clone((function(){return new t(e,n.getScene())}),this)},t.prototype.serialize=function(){var e=S.SerializationHelper.Serialize(this);return e.customType="BABYLON.LavaMaterial",e},t.prototype.getClassName=function(){return"LavaMaterial"},t.Parse=function(e,n,r){return S.SerializationHelper.Parse((function(){return new t(e.name,n)}),e,n,r)},V([Object(S.serializeAsTexture)("diffuseTexture")],t.prototype,"_diffuseTexture",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"diffuseTexture",void 0),V([Object(S.serializeAsTexture)()],t.prototype,"noiseTexture",void 0),V([Object(S.serializeAsColor3)()],t.prototype,"fogColor",void 0),V([Object(S.serialize)()],t.prototype,"speed",void 0),V([Object(S.serialize)()],t.prototype,"movingSpeed",void 0),V([Object(S.serialize)()],t.prototype,"lowFrequencySpeed",void 0),V([Object(S.serialize)()],t.prototype,"fogDensity",void 0),V([Object(S.serializeAsColor3)()],t.prototype,"diffuseColor",void 0),V([Object(S.serialize)("disableLighting")],t.prototype,"_disableLighting",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsLightsDirty")],t.prototype,"disableLighting",void 0),V([Object(S.serialize)("unlit")],t.prototype,"_unlit",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsLightsDirty")],t.prototype,"unlit",void 0),V([Object(S.serialize)("maxSimultaneousLights")],t.prototype,"_maxSimultaneousLights",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsLightsDirty")],t.prototype,"maxSimultaneousLights",void 0),t}(S.PushMaterial);Object(S.RegisterClass)("BABYLON.LavaMaterial",de);var pe="precision highp float;\n\nuniform vec4 vEyePosition;\nuniform vec4 vDiffuseColor;\n#ifdef SPECULARTERM\nuniform vec4 vSpecularColor;\n#endif\n\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n\n#include<helperFunctions>\n\n#include<__decl__lightFragment>[0..maxSimultaneousLights]\n\n#ifdef DIFFUSE\nvarying vec2 vTextureUV;\nuniform sampler2D mixMap1Sampler;\nuniform vec2 vTextureInfos;\n#ifdef MIXMAP2\nuniform sampler2D mixMap2Sampler;\n#endif\nuniform sampler2D diffuse1Sampler;\nuniform sampler2D diffuse2Sampler;\nuniform sampler2D diffuse3Sampler;\nuniform sampler2D diffuse4Sampler;\nuniform vec2 diffuse1Infos;\nuniform vec2 diffuse2Infos;\nuniform vec2 diffuse3Infos;\nuniform vec2 diffuse4Infos;\n#ifdef MIXMAP2\nuniform sampler2D diffuse5Sampler;\nuniform sampler2D diffuse6Sampler;\nuniform sampler2D diffuse7Sampler;\nuniform sampler2D diffuse8Sampler;\nuniform vec2 diffuse5Infos;\nuniform vec2 diffuse6Infos;\nuniform vec2 diffuse7Infos;\nuniform vec2 diffuse8Infos;\n#endif\n#endif\n\n#include<lightsFragmentFunctions>\n#include<shadowsFragmentFunctions>\n#include<clipPlaneFragmentDeclaration>\n\n#include<fogFragmentDeclaration>\nvoid main(void) {\n\n#include<clipPlaneFragment>\nvec3 viewDirectionW=normalize(vEyePosition.xyz-vPositionW);\n\nvec4 finalMixColor=vec4(1.,1.,1.,1.);\nvec3 diffuseColor=vDiffuseColor.rgb;\n#ifdef MIXMAP2\nvec4 mixColor2=vec4(1.,1.,1.,1.);\n#endif\n#ifdef SPECULARTERM\nfloat glossiness=vSpecularColor.a;\nvec3 specularColor=vSpecularColor.rgb;\n#else\nfloat glossiness=0.;\n#endif\n\nfloat alpha=vDiffuseColor.a;\n\n#ifdef NORMAL\nvec3 normalW=normalize(vNormalW);\n#else\nvec3 normalW=vec3(1.0,1.0,1.0);\n#endif\n#ifdef DIFFUSE\nvec4 mixColor=texture2D(mixMap1Sampler,vTextureUV);\n#include<depthPrePass>\nmixColor.rgb*=vTextureInfos.y;\nvec4 diffuse1Color=texture2D(diffuse1Sampler,vTextureUV*diffuse1Infos);\nvec4 diffuse2Color=texture2D(diffuse2Sampler,vTextureUV*diffuse2Infos);\nvec4 diffuse3Color=texture2D(diffuse3Sampler,vTextureUV*diffuse3Infos);\nvec4 diffuse4Color=texture2D(diffuse4Sampler,vTextureUV*diffuse4Infos);\ndiffuse1Color.rgb*=mixColor.r;\ndiffuse2Color.rgb=mix(diffuse1Color.rgb,diffuse2Color.rgb,mixColor.g);\ndiffuse3Color.rgb=mix(diffuse2Color.rgb,diffuse3Color.rgb,mixColor.b);\nfinalMixColor.rgb=mix(diffuse3Color.rgb,diffuse4Color.rgb,1.0-mixColor.a);\n#ifdef MIXMAP2\nmixColor=texture2D(mixMap2Sampler,vTextureUV);\nmixColor.rgb*=vTextureInfos.y;\nvec4 diffuse5Color=texture2D(diffuse5Sampler,vTextureUV*diffuse5Infos);\nvec4 diffuse6Color=texture2D(diffuse6Sampler,vTextureUV*diffuse6Infos);\nvec4 diffuse7Color=texture2D(diffuse7Sampler,vTextureUV*diffuse7Infos);\nvec4 diffuse8Color=texture2D(diffuse8Sampler,vTextureUV*diffuse8Infos);\ndiffuse5Color.rgb=mix(finalMixColor.rgb,diffuse5Color.rgb,mixColor.r);\ndiffuse6Color.rgb=mix(diffuse5Color.rgb,diffuse6Color.rgb,mixColor.g);\ndiffuse7Color.rgb=mix(diffuse6Color.rgb,diffuse7Color.rgb,mixColor.b);\nfinalMixColor.rgb=mix(diffuse7Color.rgb,diffuse8Color.rgb,1.0-mixColor.a);\n#endif\n#endif\n#ifdef VERTEXCOLOR\nfinalMixColor.rgb*=vColor.rgb;\n#endif\n\nvec3 diffuseBase=vec3(0.,0.,0.);\nlightingInfo info;\nfloat shadow=1.;\n#ifdef SPECULARTERM\nvec3 specularBase=vec3(0.,0.,0.);\n#endif\n#include<lightFragment>[0..maxSimultaneousLights]\n#ifdef VERTEXALPHA\nalpha*=vColor.a;\n#endif\n#ifdef SPECULARTERM\nvec3 finalSpecular=specularBase*specularColor;\n#else\nvec3 finalSpecular=vec3(0.0);\n#endif\nvec3 finalDiffuse=clamp(diffuseBase*diffuseColor*finalMixColor.rgb,0.0,1.0);\n\nvec4 color=vec4(finalDiffuse+finalSpecular,alpha);\n#include<fogFragment>\ngl_FragColor=color;\n#include<imageProcessingCompatibility>\n}\n";S.ShaderStore.ShadersStore.mixPixelShader=pe;var he="precision highp float;\n\nattribute vec3 position;\n#ifdef NORMAL\nattribute vec3 normal;\n#endif\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#ifdef UV2\nattribute vec2 uv2;\n#endif\n#ifdef VERTEXCOLOR\nattribute vec4 color;\n#endif\n#include<bonesDeclaration>\n#include<bakedVertexAnimationDeclaration>\n\n#include<instancesDeclaration>\nuniform mat4 view;\nuniform mat4 viewProjection;\n#ifdef DIFFUSE\nvarying vec2 vTextureUV;\nuniform mat4 textureMatrix;\nuniform vec2 vTextureInfos;\n#endif\n#ifdef POINTSIZE\nuniform float pointSize;\n#endif\n\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#include<clipPlaneVertexDeclaration>\n#include<fogVertexDeclaration>\n#include<__decl__lightFragment>[0..maxSimultaneousLights]\nvoid main(void) {\n#include<instancesVertex>\n#include<bonesVertex>\n#include<bakedVertexAnimation>\nvec4 worldPos=finalWorld*vec4(position,1.0);\ngl_Position=viewProjection*worldPos;\nvPositionW=vec3(worldPos);\n#ifdef NORMAL\nvNormalW=normalize(vec3(finalWorld*vec4(normal,0.0)));\n#endif\n\n#ifndef UV1\nvec2 uv=vec2(0.,0.);\n#endif\n#ifndef UV2\nvec2 uv2=vec2(0.,0.);\n#endif\n#ifdef DIFFUSE\nif (vTextureInfos.x == 0.)\n{\nvTextureUV=vec2(textureMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvTextureUV=vec2(textureMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n\n#include<clipPlaneVertex>\n\n#include<fogVertex>\n\n#include<shadowsVertex>[0..maxSimultaneousLights]\n\n#ifdef VERTEXCOLOR\nvColor=color;\n#endif\n\n#ifdef POINTSIZE\ngl_PointSize=pointSize;\n#endif\n}\n";S.ShaderStore.ShadersStore.mixVertexShader=he;var me=function(e){function t(){var t=e.call(this)||this;return t.DIFFUSE=!1,t.CLIPPLANE=!1,t.CLIPPLANE2=!1,t.CLIPPLANE3=!1,t.CLIPPLANE4=!1,t.CLIPPLANE5=!1,t.CLIPPLANE6=!1,t.ALPHATEST=!1,t.DEPTHPREPASS=!1,t.POINTSIZE=!1,t.FOG=!1,t.SPECULARTERM=!1,t.NORMAL=!1,t.UV1=!1,t.UV2=!1,t.VERTEXCOLOR=!1,t.VERTEXALPHA=!1,t.NUM_BONE_INFLUENCERS=0,t.BonesPerMesh=0,t.INSTANCES=!1,t.MIXMAP2=!1,t.IMAGEPROCESSINGPOSTPROCESS=!1,t.SKIPFINALCOLORCLAMP=!1,t.rebuild(),t}return B(t,e),t}(S.MaterialDefines),ve=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.diffuseColor=new S.Color3(1,1,1),r.specularColor=new S.Color3(0,0,0),r.specularPower=64,r._disableLighting=!1,r._maxSimultaneousLights=4,r}return B(t,e),t.prototype.needAlphaBlending=function(){return this.alpha<1},t.prototype.needAlphaTesting=function(){return!1},t.prototype.getAlphaTestTexture=function(){return null},t.prototype.isReadyForSubMesh=function(e,t,n){if(this.isFrozen&&t.effect&&t.effect._wasPreviouslyReady)return!0;t.materialDefines||(t.materialDefines=new me);var r=t.materialDefines,i=this.getScene();if(this._isReadyForSubMesh(t))return!0;var o=i.getEngine();if(i.texturesEnabled){if(!this._mixTexture1||!this._mixTexture1.isReady())return!1;if(r._needUVs=!0,S.MaterialFlags.DiffuseTextureEnabled){if(!this._diffuseTexture1||!this._diffuseTexture1.isReady())return!1;if(r.DIFFUSE=!0,!this._diffuseTexture2||!this._diffuseTexture2.isReady())return!1;if(!this._diffuseTexture3||!this._diffuseTexture3.isReady())return!1;if(!this._diffuseTexture4||!this._diffuseTexture4.isReady())return!1;if(this._mixTexture2){if(!this._mixTexture2.isReady())return!1;if(r.MIXMAP2=!0,!this._diffuseTexture5||!this._diffuseTexture5.isReady())return!1;if(!this._diffuseTexture6||!this._diffuseTexture6.isReady())return!1;if(!this._diffuseTexture7||!this._diffuseTexture7.isReady())return!1;if(!this._diffuseTexture8||!this._diffuseTexture8.isReady())return!1}}}if(S.MaterialHelper.PrepareDefinesForMisc(e,i,!1,this.pointsCloud,this.fogEnabled,this._shouldTurnAlphaTestOn(e),r),r._needNormals=S.MaterialHelper.PrepareDefinesForLights(i,e,r,!1,this._maxSimultaneousLights,this._disableLighting),S.MaterialHelper.PrepareDefinesForFrameBoundValues(i,o,r,!!n),S.MaterialHelper.PrepareDefinesForAttributes(e,r,!0,!0),r.isDirty){r.markAsProcessed(),i.resetCachedMaterial();var a=new S.EffectFallbacks;r.FOG&&a.addFallback(1,"FOG"),S.MaterialHelper.HandleFallbacksForShadows(r,a,this.maxSimultaneousLights),r.NUM_BONE_INFLUENCERS>0&&a.addCPUSkinningFallback(0,e),r.IMAGEPROCESSINGPOSTPROCESS=i.imageProcessingConfiguration.applyByPostProcess;var s=[S.VertexBuffer.PositionKind];r.NORMAL&&s.push(S.VertexBuffer.NormalKind),r.UV1&&s.push(S.VertexBuffer.UVKind),r.UV2&&s.push(S.VertexBuffer.UV2Kind),r.VERTEXCOLOR&&s.push(S.VertexBuffer.ColorKind),S.MaterialHelper.PrepareAttributesForBones(s,e,r,a),S.MaterialHelper.PrepareAttributesForInstances(s,r);var l=r.toString(),u=["world","view","viewProjection","vEyePosition","vLightsType","vDiffuseColor","vSpecularColor","vFogInfos","vFogColor","pointSize","vTextureInfos","mBones","vClipPlane","vClipPlane2","vClipPlane3","vClipPlane4","vClipPlane5","vClipPlane6","textureMatrix","diffuse1Infos","diffuse2Infos","diffuse3Infos","diffuse4Infos","diffuse5Infos","diffuse6Infos","diffuse7Infos","diffuse8Infos"],c=["mixMap1Sampler","mixMap2Sampler","diffuse1Sampler","diffuse2Sampler","diffuse3Sampler","diffuse4Sampler","diffuse5Sampler","diffuse6Sampler","diffuse7Sampler","diffuse8Sampler"],f=new Array;S.MaterialHelper.PrepareUniformsAndSamplersList({uniformsNames:u,uniformBuffersNames:f,samplers:c,defines:r,maxSimultaneousLights:this.maxSimultaneousLights}),t.setEffect(i.getEngine().createEffect("mix",{attributes:s,uniformsNames:u,uniformBuffersNames:f,samplers:c,defines:l,fallbacks:a,onCompiled:this.onCompiled,onError:this.onError,indexParameters:{maxSimultaneousLights:this.maxSimultaneousLights}},o),r,this._materialContext)}return!(!t.effect||!t.effect.isReady())&&(r._renderId=i.getRenderId(),t.effect._wasPreviouslyReady=!0,!0)},t.prototype.bindForSubMesh=function(e,t,n){var r=this.getScene(),i=n.materialDefines;if(i){var o=n.effect;o&&(this._activeEffect=o,this.bindOnlyWorldMatrix(e),this._activeEffect.setMatrix("viewProjection",r.getTransformMatrix()),S.MaterialHelper.BindBonesParameters(t,this._activeEffect),this._mustRebind(r,o)&&(this._mixTexture1&&(this._activeEffect.setTexture("mixMap1Sampler",this._mixTexture1),this._activeEffect.setFloat2("vTextureInfos",this._mixTexture1.coordinatesIndex,this._mixTexture1.level),this._activeEffect.setMatrix("textureMatrix",this._mixTexture1.getTextureMatrix()),S.MaterialFlags.DiffuseTextureEnabled&&(this._diffuseTexture1&&(this._activeEffect.setTexture("diffuse1Sampler",this._diffuseTexture1),this._activeEffect.setFloat2("diffuse1Infos",this._diffuseTexture1.uScale,this._diffuseTexture1.vScale)),this._diffuseTexture2&&(this._activeEffect.setTexture("diffuse2Sampler",this._diffuseTexture2),this._activeEffect.setFloat2("diffuse2Infos",this._diffuseTexture2.uScale,this._diffuseTexture2.vScale)),this._diffuseTexture3&&(this._activeEffect.setTexture("diffuse3Sampler",this._diffuseTexture3),this._activeEffect.setFloat2("diffuse3Infos",this._diffuseTexture3.uScale,this._diffuseTexture3.vScale)),this._diffuseTexture4&&(this._activeEffect.setTexture("diffuse4Sampler",this._diffuseTexture4),this._activeEffect.setFloat2("diffuse4Infos",this._diffuseTexture4.uScale,this._diffuseTexture4.vScale)))),this._mixTexture2&&(this._activeEffect.setTexture("mixMap2Sampler",this._mixTexture2),S.MaterialFlags.DiffuseTextureEnabled&&(this._diffuseTexture5&&(this._activeEffect.setTexture("diffuse5Sampler",this._diffuseTexture5),this._activeEffect.setFloat2("diffuse5Infos",this._diffuseTexture5.uScale,this._diffuseTexture5.vScale)),this._diffuseTexture6&&(this._activeEffect.setTexture("diffuse6Sampler",this._diffuseTexture6),this._activeEffect.setFloat2("diffuse6Infos",this._diffuseTexture6.uScale,this._diffuseTexture6.vScale)),this._diffuseTexture7&&(this._activeEffect.setTexture("diffuse7Sampler",this._diffuseTexture7),this._activeEffect.setFloat2("diffuse7Infos",this._diffuseTexture7.uScale,this._diffuseTexture7.vScale)),this._diffuseTexture8&&(this._activeEffect.setTexture("diffuse8Sampler",this._diffuseTexture8),this._activeEffect.setFloat2("diffuse8Infos",this._diffuseTexture8.uScale,this._diffuseTexture8.vScale)))),S.MaterialHelper.BindClipPlane(this._activeEffect,r),this.pointsCloud&&this._activeEffect.setFloat("pointSize",this.pointSize),r.bindEyePosition(o)),this._activeEffect.setColor4("vDiffuseColor",this.diffuseColor,this.alpha*t.visibility),i.SPECULARTERM&&this._activeEffect.setColor4("vSpecularColor",this.specularColor,this.specularPower),r.lightsEnabled&&!this.disableLighting&&S.MaterialHelper.BindLights(r,t,this._activeEffect,i,this.maxSimultaneousLights),r.fogEnabled&&t.applyFog&&r.fogMode!==S.Scene.FOGMODE_NONE&&this._activeEffect.setMatrix("view",r.getViewMatrix()),S.MaterialHelper.BindFogParameters(r,t,this._activeEffect),this._afterBind(t,this._activeEffect))}},t.prototype.getAnimatables=function(){var e=[];return this._mixTexture1&&this._mixTexture1.animations&&this._mixTexture1.animations.length>0&&e.push(this._mixTexture1),this._mixTexture2&&this._mixTexture2.animations&&this._mixTexture2.animations.length>0&&e.push(this._mixTexture2),e},t.prototype.getActiveTextures=function(){var t=e.prototype.getActiveTextures.call(this);return this._mixTexture1&&t.push(this._mixTexture1),this._diffuseTexture1&&t.push(this._diffuseTexture1),this._diffuseTexture2&&t.push(this._diffuseTexture2),this._diffuseTexture3&&t.push(this._diffuseTexture3),this._diffuseTexture4&&t.push(this._diffuseTexture4),this._mixTexture2&&t.push(this._mixTexture2),this._diffuseTexture5&&t.push(this._diffuseTexture5),this._diffuseTexture6&&t.push(this._diffuseTexture6),this._diffuseTexture7&&t.push(this._diffuseTexture7),this._diffuseTexture8&&t.push(this._diffuseTexture8),t},t.prototype.hasTexture=function(t){return!!e.prototype.hasTexture.call(this,t)||(this._mixTexture1===t||(this._diffuseTexture1===t||(this._diffuseTexture2===t||(this._diffuseTexture3===t||(this._diffuseTexture4===t||(this._mixTexture2===t||(this._diffuseTexture5===t||(this._diffuseTexture6===t||(this._diffuseTexture7===t||this._diffuseTexture8===t)))))))))},t.prototype.dispose=function(t){this._mixTexture1&&this._mixTexture1.dispose(),e.prototype.dispose.call(this,t)},t.prototype.clone=function(e){var n=this;return S.SerializationHelper.Clone((function(){return new t(e,n.getScene())}),this)},t.prototype.serialize=function(){var e=S.SerializationHelper.Serialize(this);return e.customType="BABYLON.MixMaterial",e},t.prototype.getClassName=function(){return"MixMaterial"},t.Parse=function(e,n,r){return S.SerializationHelper.Parse((function(){return new t(e.name,n)}),e,n,r)},V([Object(S.serializeAsTexture)("mixTexture1")],t.prototype,"_mixTexture1",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"mixTexture1",void 0),V([Object(S.serializeAsTexture)("mixTexture2")],t.prototype,"_mixTexture2",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"mixTexture2",void 0),V([Object(S.serializeAsTexture)("diffuseTexture1")],t.prototype,"_diffuseTexture1",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"diffuseTexture1",void 0),V([Object(S.serializeAsTexture)("diffuseTexture2")],t.prototype,"_diffuseTexture2",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"diffuseTexture2",void 0),V([Object(S.serializeAsTexture)("diffuseTexture3")],t.prototype,"_diffuseTexture3",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"diffuseTexture3",void 0),V([Object(S.serializeAsTexture)("diffuseTexture4")],t.prototype,"_diffuseTexture4",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"diffuseTexture4",void 0),V([Object(S.serializeAsTexture)("diffuseTexture1")],t.prototype,"_diffuseTexture5",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"diffuseTexture5",void 0),V([Object(S.serializeAsTexture)("diffuseTexture2")],t.prototype,"_diffuseTexture6",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"diffuseTexture6",void 0),V([Object(S.serializeAsTexture)("diffuseTexture3")],t.prototype,"_diffuseTexture7",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"diffuseTexture7",void 0),V([Object(S.serializeAsTexture)("diffuseTexture4")],t.prototype,"_diffuseTexture8",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"diffuseTexture8",void 0),V([Object(S.serializeAsColor3)()],t.prototype,"diffuseColor",void 0),V([Object(S.serializeAsColor3)()],t.prototype,"specularColor",void 0),V([Object(S.serialize)()],t.prototype,"specularPower",void 0),V([Object(S.serialize)("disableLighting")],t.prototype,"_disableLighting",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsLightsDirty")],t.prototype,"disableLighting",void 0),V([Object(S.serialize)("maxSimultaneousLights")],t.prototype,"_maxSimultaneousLights",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsLightsDirty")],t.prototype,"maxSimultaneousLights",void 0),t}(S.PushMaterial);Object(S.RegisterClass)("BABYLON.MixMaterial",ve);var ge="precision highp float;\n\nuniform vec4 vEyePosition;\nuniform vec4 vDiffuseColor;\n\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#ifdef LIGHTING\n\n#include<helperFunctions>\n\n#include<__decl__lightFragment>[0]\n#include<__decl__lightFragment>[1]\n#include<__decl__lightFragment>[2]\n#include<__decl__lightFragment>[3]\n#include<lightsFragmentFunctions>\n#include<shadowsFragmentFunctions>\n#endif\n\n#ifdef DIFFUSE\nvarying vec2 vDiffuseUV;\nuniform sampler2D diffuseSampler;\nuniform vec2 vDiffuseInfos;\n#endif\n#include<clipPlaneFragmentDeclaration>\n\n#include<fogFragmentDeclaration>\nvoid main(void) {\n#include<clipPlaneFragment>\nvec3 viewDirectionW=normalize(vEyePosition.xyz-vPositionW);\n\nvec4 baseColor=vec4(1.,1.,1.,1.);\nvec3 diffuseColor=vDiffuseColor.rgb;\n\nfloat alpha=vDiffuseColor.a;\n#ifdef DIFFUSE\nbaseColor=texture2D(diffuseSampler,vDiffuseUV);\n#ifdef ALPHATEST\nif (baseColor.a<0.4)\ndiscard;\n#endif\n#include<depthPrePass>\nbaseColor.rgb*=vDiffuseInfos.y;\n#endif\n#ifdef NORMAL\nbaseColor=mix(baseColor,vec4(vNormalW,1.0),0.5);\n#endif\n\n#ifdef NORMAL\nvec3 normalW=normalize(vNormalW);\n#else\nvec3 normalW=vec3(1.0,1.0,1.0);\n#endif\n\n#ifdef LIGHTING\nvec3 diffuseBase=vec3(0.,0.,0.);\nlightingInfo info;\nfloat shadow=1.;\nfloat glossiness=0.;\n#include<lightFragment>[0]\n#include<lightFragment>[1]\n#include<lightFragment>[2]\n#include<lightFragment>[3]\nvec3 finalDiffuse=clamp(diffuseBase*diffuseColor,0.0,1.0)*baseColor.rgb;\n#else\nvec3 finalDiffuse=baseColor.rgb;\n#endif\n\nvec4 color=vec4(finalDiffuse,alpha);\n#include<fogFragment>\ngl_FragColor=color;\n#include<imageProcessingCompatibility>\n}";S.ShaderStore.ShadersStore.normalPixelShader=ge;var ye="precision highp float;\n\nattribute vec3 position;\n#ifdef NORMAL\nattribute vec3 normal;\n#endif\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#ifdef UV2\nattribute vec2 uv2;\n#endif\n#ifdef VERTEXCOLOR\nattribute vec4 color;\n#endif\n#include<bonesDeclaration>\n#include<bakedVertexAnimationDeclaration>\n\n#include<instancesDeclaration>\nuniform mat4 view;\nuniform mat4 viewProjection;\n#ifdef DIFFUSE\nvarying vec2 vDiffuseUV;\nuniform mat4 diffuseMatrix;\nuniform vec2 vDiffuseInfos;\n#endif\n#ifdef POINTSIZE\nuniform float pointSize;\n#endif\n\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#include<clipPlaneVertexDeclaration>\n#include<fogVertexDeclaration>\n#include<__decl__lightFragment>[0..maxSimultaneousLights]\nvoid main(void) {\n#include<instancesVertex>\n#include<bonesVertex>\n#include<bakedVertexAnimation>\nvec4 worldPos=finalWorld*vec4(position,1.0);\ngl_Position=viewProjection*worldPos;\nvPositionW=vec3(worldPos);\n#ifdef NORMAL\nvNormalW=normalize(vec3(finalWorld*vec4(normal,0.0)));\n#endif\n\n#ifndef UV1\nvec2 uv=vec2(0.,0.);\n#endif\n#ifndef UV2\nvec2 uv2=vec2(0.,0.);\n#endif\n#ifdef DIFFUSE\nif (vDiffuseInfos.x == 0.)\n{\nvDiffuseUV=vec2(diffuseMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvDiffuseUV=vec2(diffuseMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n\n#include<clipPlaneVertex>\n\n#include<fogVertex>\n#include<shadowsVertex>[0..maxSimultaneousLights]\n\n#ifdef POINTSIZE\ngl_PointSize=pointSize;\n#endif\n}\n";S.ShaderStore.ShadersStore.normalVertexShader=ye;var be=function(e){function t(){var t=e.call(this)||this;return t.DIFFUSE=!1,t.CLIPPLANE=!1,t.CLIPPLANE2=!1,t.CLIPPLANE3=!1,t.CLIPPLANE4=!1,t.CLIPPLANE5=!1,t.CLIPPLANE6=!1,t.ALPHATEST=!1,t.DEPTHPREPASS=!1,t.POINTSIZE=!1,t.FOG=!1,t.LIGHT0=!1,t.LIGHT1=!1,t.LIGHT2=!1,t.LIGHT3=!1,t.SPOTLIGHT0=!1,t.SPOTLIGHT1=!1,t.SPOTLIGHT2=!1,t.SPOTLIGHT3=!1,t.HEMILIGHT0=!1,t.HEMILIGHT1=!1,t.HEMILIGHT2=!1,t.HEMILIGHT3=!1,t.DIRLIGHT0=!1,t.DIRLIGHT1=!1,t.DIRLIGHT2=!1,t.DIRLIGHT3=!1,t.POINTLIGHT0=!1,t.POINTLIGHT1=!1,t.POINTLIGHT2=!1,t.POINTLIGHT3=!1,t.SHADOW0=!1,t.SHADOW1=!1,t.SHADOW2=!1,t.SHADOW3=!1,t.SHADOWS=!1,t.SHADOWESM0=!1,t.SHADOWESM1=!1,t.SHADOWESM2=!1,t.SHADOWESM3=!1,t.SHADOWPOISSON0=!1,t.SHADOWPOISSON1=!1,t.SHADOWPOISSON2=!1,t.SHADOWPOISSON3=!1,t.SHADOWPCF0=!1,t.SHADOWPCF1=!1,t.SHADOWPCF2=!1,t.SHADOWPCF3=!1,t.SHADOWPCSS0=!1,t.SHADOWPCSS1=!1,t.SHADOWPCSS2=!1,t.SHADOWPCSS3=!1,t.NORMAL=!1,t.UV1=!1,t.UV2=!1,t.NUM_BONE_INFLUENCERS=0,t.BonesPerMesh=0,t.INSTANCES=!1,t.LIGHTING=!1,t.IMAGEPROCESSINGPOSTPROCESS=!1,t.SKIPFINALCOLORCLAMP=!1,t.rebuild(),t}return B(t,e),t}(S.MaterialDefines),Se=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.diffuseColor=new S.Color3(1,1,1),r._disableLighting=!1,r._maxSimultaneousLights=4,r}return B(t,e),t.prototype.needAlphaBlending=function(){return this.alpha<1},t.prototype.needAlphaBlendingForMesh=function(e){return this.needAlphaBlending()||e.visibility<1},t.prototype.needAlphaTesting=function(){return!1},t.prototype.getAlphaTestTexture=function(){return null},t.prototype.isReadyForSubMesh=function(e,t,n){if(this.isFrozen&&t.effect&&t.effect._wasPreviouslyReady)return!0;t.materialDefines||(t.materialDefines=new be);var r=t.materialDefines,i=this.getScene();if(this._isReadyForSubMesh(t))return!0;var o=i.getEngine();if(r._areTexturesDirty&&(r._needUVs=!1,i.texturesEnabled&&this._diffuseTexture&&S.MaterialFlags.DiffuseTextureEnabled)){if(!this._diffuseTexture.isReady())return!1;r._needUVs=!0,r.DIFFUSE=!0}if(S.MaterialHelper.PrepareDefinesForMisc(e,i,!1,this.pointsCloud,this.fogEnabled,this._shouldTurnAlphaTestOn(e),r),r._needNormals=!0,S.MaterialHelper.PrepareDefinesForLights(i,e,r,!1,this._maxSimultaneousLights,this._disableLighting),S.MaterialHelper.PrepareDefinesForFrameBoundValues(i,o,r,!!n),r.LIGHTING=!this._disableLighting,S.MaterialHelper.PrepareDefinesForAttributes(e,r,!0,!0),r.isDirty){r.markAsProcessed(),i.resetCachedMaterial();var a=new S.EffectFallbacks;r.FOG&&a.addFallback(1,"FOG"),S.MaterialHelper.HandleFallbacksForShadows(r,a),r.NUM_BONE_INFLUENCERS>0&&a.addCPUSkinningFallback(0,e),r.IMAGEPROCESSINGPOSTPROCESS=i.imageProcessingConfiguration.applyByPostProcess;var s=[S.VertexBuffer.PositionKind];r.NORMAL&&s.push(S.VertexBuffer.NormalKind),r.UV1&&s.push(S.VertexBuffer.UVKind),r.UV2&&s.push(S.VertexBuffer.UV2Kind),S.MaterialHelper.PrepareAttributesForBones(s,e,r,a),S.MaterialHelper.PrepareAttributesForInstances(s,r);var l=r.toString(),u=["world","view","viewProjection","vEyePosition","vLightsType","vDiffuseColor","vFogInfos","vFogColor","pointSize","vDiffuseInfos","mBones","vClipPlane","vClipPlane2","vClipPlane3","vClipPlane4","vClipPlane5","vClipPlane6","diffuseMatrix"],c=["diffuseSampler"],f=new Array;S.MaterialHelper.PrepareUniformsAndSamplersList({uniformsNames:u,uniformBuffersNames:f,samplers:c,defines:r,maxSimultaneousLights:4}),t.setEffect(i.getEngine().createEffect("normal",{attributes:s,uniformsNames:u,uniformBuffersNames:f,samplers:c,defines:l,fallbacks:a,onCompiled:this.onCompiled,onError:this.onError,indexParameters:{maxSimultaneousLights:4}},o),r,this._materialContext)}return!(!t.effect||!t.effect.isReady())&&(r._renderId=i.getRenderId(),t.effect._wasPreviouslyReady=!0,!0)},t.prototype.bindForSubMesh=function(e,t,n){var r=this.getScene(),i=n.materialDefines;if(i){var o=n.effect;o&&(this._activeEffect=o,this.bindOnlyWorldMatrix(e),this._activeEffect.setMatrix("viewProjection",r.getTransformMatrix()),S.MaterialHelper.BindBonesParameters(t,this._activeEffect),this._mustRebind(r,o)&&(this.diffuseTexture&&S.MaterialFlags.DiffuseTextureEnabled&&(this._activeEffect.setTexture("diffuseSampler",this.diffuseTexture),this._activeEffect.setFloat2("vDiffuseInfos",this.diffuseTexture.coordinatesIndex,this.diffuseTexture.level),this._activeEffect.setMatrix("diffuseMatrix",this.diffuseTexture.getTextureMatrix())),S.MaterialHelper.BindClipPlane(this._activeEffect,r),this.pointsCloud&&this._activeEffect.setFloat("pointSize",this.pointSize),r.bindEyePosition(o)),this._activeEffect.setColor4("vDiffuseColor",this.diffuseColor,this.alpha*t.visibility),r.lightsEnabled&&!this.disableLighting&&S.MaterialHelper.BindLights(r,t,this._activeEffect,i),r.fogEnabled&&t.applyFog&&r.fogMode!==S.Scene.FOGMODE_NONE&&this._activeEffect.setMatrix("view",r.getViewMatrix()),S.MaterialHelper.BindFogParameters(r,t,this._activeEffect),this._afterBind(t,this._activeEffect))}},t.prototype.getAnimatables=function(){var e=[];return this.diffuseTexture&&this.diffuseTexture.animations&&this.diffuseTexture.animations.length>0&&e.push(this.diffuseTexture),e},t.prototype.getActiveTextures=function(){var t=e.prototype.getActiveTextures.call(this);return this._diffuseTexture&&t.push(this._diffuseTexture),t},t.prototype.hasTexture=function(t){return!!e.prototype.hasTexture.call(this,t)||this.diffuseTexture===t},t.prototype.dispose=function(t){this.diffuseTexture&&this.diffuseTexture.dispose(),e.prototype.dispose.call(this,t)},t.prototype.clone=function(e){var n=this;return S.SerializationHelper.Clone((function(){return new t(e,n.getScene())}),this)},t.prototype.serialize=function(){var e=S.SerializationHelper.Serialize(this);return e.customType="BABYLON.NormalMaterial",e},t.prototype.getClassName=function(){return"NormalMaterial"},t.Parse=function(e,n,r){return S.SerializationHelper.Parse((function(){return new t(e.name,n)}),e,n,r)},V([Object(S.serializeAsTexture)("diffuseTexture")],t.prototype,"_diffuseTexture",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"diffuseTexture",void 0),V([Object(S.serializeAsColor3)()],t.prototype,"diffuseColor",void 0),V([Object(S.serialize)("disableLighting")],t.prototype,"_disableLighting",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsLightsDirty")],t.prototype,"disableLighting",void 0),V([Object(S.serialize)("maxSimultaneousLights")],t.prototype,"_maxSimultaneousLights",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsLightsDirty")],t.prototype,"maxSimultaneousLights",void 0),t}(S.PushMaterial);Object(S.RegisterClass)("BABYLON.NormalMaterial",Se);var xe="precision highp float;\n\nuniform vec4 vEyePosition;\nuniform float alpha;\nuniform vec3 shadowColor;\n\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n\n#include<helperFunctions>\n\n#include<__decl__lightFragment>[0..maxSimultaneousLights]\n#include<lightsFragmentFunctions>\n#include<shadowsFragmentFunctions>\n#include<clipPlaneFragmentDeclaration>\n\n#include<fogFragmentDeclaration>\nvoid main(void) {\n#include<clipPlaneFragment>\nvec3 viewDirectionW=normalize(vEyePosition.xyz-vPositionW);\n\n#ifdef NORMAL\nvec3 normalW=normalize(vNormalW);\n#else\nvec3 normalW=vec3(1.0,1.0,1.0);\n#endif\n\nvec3 diffuseBase=vec3(0.,0.,0.);\nlightingInfo info;\nfloat shadow=1.;\nfloat glossiness=0.;\n#include<lightFragment>[0..1]\n\nvec4 color=vec4(shadowColor,(1.0-clamp(shadow,0.,1.))*alpha);\n#include<fogFragment>\ngl_FragColor=color;\n#include<imageProcessingCompatibility>\n}";S.ShaderStore.ShadersStore.shadowOnlyPixelShader=xe;var _e="precision highp float;\n\nattribute vec3 position;\n#ifdef NORMAL\nattribute vec3 normal;\n#endif\n#include<bonesDeclaration>\n#include<bakedVertexAnimationDeclaration>\n\n#include<instancesDeclaration>\nuniform mat4 view;\nuniform mat4 viewProjection;\n#ifdef POINTSIZE\nuniform float pointSize;\n#endif\n\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#include<clipPlaneVertexDeclaration>\n#include<fogVertexDeclaration>\n#include<__decl__lightFragment>[0..maxSimultaneousLights]\nvoid main(void) {\n#include<instancesVertex>\n#include<bonesVertex>\n#include<bakedVertexAnimation>\nvec4 worldPos=finalWorld*vec4(position,1.0);\ngl_Position=viewProjection*worldPos;\nvPositionW=vec3(worldPos);\n#ifdef NORMAL\nvNormalW=normalize(vec3(finalWorld*vec4(normal,0.0)));\n#endif\n\n#include<clipPlaneVertex>\n\n#include<fogVertex>\n#include<shadowsVertex>[0..maxSimultaneousLights]\n\n#ifdef POINTSIZE\ngl_PointSize=pointSize;\n#endif\n}\n";S.ShaderStore.ShadersStore.shadowOnlyVertexShader=_e;var Ee=function(e){function t(){var t=e.call(this)||this;return t.CLIPPLANE=!1,t.CLIPPLANE2=!1,t.CLIPPLANE3=!1,t.CLIPPLANE4=!1,t.CLIPPLANE5=!1,t.CLIPPLANE6=!1,t.POINTSIZE=!1,t.FOG=!1,t.NORMAL=!1,t.NUM_BONE_INFLUENCERS=0,t.BonesPerMesh=0,t.INSTANCES=!1,t.IMAGEPROCESSINGPOSTPROCESS=!1,t.SKIPFINALCOLORCLAMP=!1,t.rebuild(),t}return B(t,e),t}(S.MaterialDefines),Ce=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r._needAlphaBlending=!0,r.shadowColor=S.Color3.Black(),r}return B(t,e),t.prototype.needAlphaBlending=function(){return this._needAlphaBlending},t.prototype.needAlphaTesting=function(){return!1},t.prototype.getAlphaTestTexture=function(){return null},Object.defineProperty(t.prototype,"activeLight",{get:function(){return this._activeLight},set:function(e){this._activeLight=e},enumerable:!1,configurable:!0}),t.prototype._getFirstShadowLightForMesh=function(e){for(var t=0,n=e.lightSources;t<n.length;t++){var r=n[t];if(r.shadowEnabled)return r}return null},t.prototype.isReadyForSubMesh=function(e,t,n){var r;if(this.isFrozen&&t.effect&&t.effect._wasPreviouslyReady)return!0;t.materialDefines||(t.materialDefines=new Ee);var i=t.materialDefines,o=this.getScene();if(this._isReadyForSubMesh(t))return!0;var a=o.getEngine();if(this._activeLight)for(var s=0,l=e.lightSources;s<l.length;s++){var u=l[s];if(u.shadowEnabled){if(this._activeLight===u)break;var c=e.lightSources.indexOf(this._activeLight);-1!==c&&(e.lightSources.splice(c,1),e.lightSources.splice(0,0,this._activeLight));break}}S.MaterialHelper.PrepareDefinesForFrameBoundValues(o,a,i,!!n),S.MaterialHelper.PrepareDefinesForMisc(e,o,!1,this.pointsCloud,this.fogEnabled,this._shouldTurnAlphaTestOn(e),i),i._needNormals=S.MaterialHelper.PrepareDefinesForLights(o,e,i,!1,1);var f=null===(r=this._getFirstShadowLightForMesh(e))||void 0===r?void 0:r.getShadowGenerator();if(this._needAlphaBlending=!0,f&&f.getClassName&&"CascadedShadowGenerator"===f.getClassName()){var d=f;this._needAlphaBlending=!d.autoCalcDepthBounds}if(S.MaterialHelper.PrepareDefinesForAttributes(e,i,!1,!0),i.isDirty){i.markAsProcessed(),o.resetCachedMaterial();var p=new S.EffectFallbacks;i.FOG&&p.addFallback(1,"FOG"),S.MaterialHelper.HandleFallbacksForShadows(i,p,1),i.NUM_BONE_INFLUENCERS>0&&p.addCPUSkinningFallback(0,e),i.IMAGEPROCESSINGPOSTPROCESS=o.imageProcessingConfiguration.applyByPostProcess;var h=[S.VertexBuffer.PositionKind];i.NORMAL&&h.push(S.VertexBuffer.NormalKind),S.MaterialHelper.PrepareAttributesForBones(h,e,i,p),S.MaterialHelper.PrepareAttributesForInstances(h,i);var m=i.toString(),v=["world","view","viewProjection","vEyePosition","vLightsType","vFogInfos","vFogColor","pointSize","alpha","shadowColor","mBones","vClipPlane","vClipPlane2","vClipPlane3","vClipPlane4","vClipPlane5","vClipPlane6"],g=new Array,y=new Array;S.MaterialHelper.PrepareUniformsAndSamplersList({uniformsNames:v,uniformBuffersNames:y,samplers:g,defines:i,maxSimultaneousLights:1}),t.setEffect(o.getEngine().createEffect("shadowOnly",{attributes:h,uniformsNames:v,uniformBuffersNames:y,samplers:g,defines:m,fallbacks:p,onCompiled:this.onCompiled,onError:this.onError,indexParameters:{maxSimultaneousLights:1}},a),i,this._materialContext)}return!(!t.effect||!t.effect.isReady())&&(i._renderId=o.getRenderId(),t.effect._wasPreviouslyReady=!0,!0)},t.prototype.bindForSubMesh=function(e,t,n){var r=this.getScene(),i=n.materialDefines;if(i){var o=n.effect;if(o){if(this._activeEffect=o,this.bindOnlyWorldMatrix(e),this._activeEffect.setMatrix("viewProjection",r.getTransformMatrix()),S.MaterialHelper.BindBonesParameters(t,this._activeEffect),this._mustRebind(r,o)&&(S.MaterialHelper.BindClipPlane(this._activeEffect,r),this.pointsCloud&&this._activeEffect.setFloat("pointSize",this.pointSize),this._activeEffect.setFloat("alpha",this.alpha),this._activeEffect.setColor3("shadowColor",this.shadowColor),r.bindEyePosition(o)),r.lightsEnabled){S.MaterialHelper.BindLights(r,t,this._activeEffect,i,1);var a=this._getFirstShadowLightForMesh(t);a&&(a._renderId=-1)}(r.fogEnabled&&t.applyFog&&r.fogMode!==S.Scene.FOGMODE_NONE||i.SHADOWCSM0)&&this._activeEffect.setMatrix("view",r.getViewMatrix()),S.MaterialHelper.BindFogParameters(r,t,this._activeEffect),this._afterBind(t,this._activeEffect)}}},t.prototype.clone=function(e){var n=this;return S.SerializationHelper.Clone((function(){return new t(e,n.getScene())}),this)},t.prototype.serialize=function(){var e=S.SerializationHelper.Serialize(this);return e.customType="BABYLON.ShadowOnlyMaterial",e},t.prototype.getClassName=function(){return"ShadowOnlyMaterial"},t.Parse=function(e,n,r){return S.SerializationHelper.Parse((function(){return new t(e.name,n)}),e,n,r)},t}(S.PushMaterial);Object(S.RegisterClass)("BABYLON.ShadowOnlyMaterial",Ce);var Te="precision highp float;\n\nuniform vec4 vEyePosition;\nuniform vec4 vDiffuseColor;\n\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n\n#include<helperFunctions>\n\n#include<__decl__lightFragment>[0..maxSimultaneousLights]\n#include<lightsFragmentFunctions>\n#include<shadowsFragmentFunctions>\n\n#ifdef DIFFUSE\nvarying vec2 vDiffuseUV;\nuniform sampler2D diffuseSampler;\nuniform vec2 vDiffuseInfos;\n#endif\n#include<clipPlaneFragmentDeclaration>\n\n#include<fogFragmentDeclaration>\nvoid main(void) {\n#include<clipPlaneFragment>\nvec3 viewDirectionW=normalize(vEyePosition.xyz-vPositionW);\n\nvec4 baseColor=vec4(1.,1.,1.,1.);\nvec3 diffuseColor=vDiffuseColor.rgb;\n\nfloat alpha=vDiffuseColor.a;\n#ifdef DIFFUSE\nbaseColor=texture2D(diffuseSampler,vDiffuseUV);\n#ifdef ALPHATEST\nif (baseColor.a<0.4)\ndiscard;\n#endif\n#include<depthPrePass>\nbaseColor.rgb*=vDiffuseInfos.y;\n#endif\n#ifdef VERTEXCOLOR\nbaseColor.rgb*=vColor.rgb;\n#endif\n\n#ifdef NORMAL\nvec3 normalW=normalize(vNormalW);\n#else\nvec3 normalW=vec3(1.0,1.0,1.0);\n#endif\n\nvec3 diffuseBase=vec3(0.,0.,0.);\nlightingInfo info;\nfloat shadow=1.;\nfloat glossiness=0.;\n#ifdef SPECULARTERM\nvec3 specularBase=vec3(0.,0.,0.);\n#endif\n#include<lightFragment>[0..maxSimultaneousLights]\n#ifdef VERTEXALPHA\nalpha*=vColor.a;\n#endif\nvec3 finalDiffuse=clamp(diffuseBase*diffuseColor,0.0,1.0)*baseColor.rgb;\n\nvec4 color=vec4(finalDiffuse,alpha);\n#include<fogFragment>\ngl_FragColor=color;\n#include<imageProcessingCompatibility>\n}";S.ShaderStore.ShadersStore.simplePixelShader=Te;var Pe="precision highp float;\n\nattribute vec3 position;\n#ifdef NORMAL\nattribute vec3 normal;\n#endif\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#ifdef UV2\nattribute vec2 uv2;\n#endif\n#ifdef VERTEXCOLOR\nattribute vec4 color;\n#endif\n#include<bonesDeclaration>\n#include<bakedVertexAnimationDeclaration>\n\n#include<instancesDeclaration>\nuniform mat4 view;\nuniform mat4 viewProjection;\n#ifdef DIFFUSE\nvarying vec2 vDiffuseUV;\nuniform mat4 diffuseMatrix;\nuniform vec2 vDiffuseInfos;\n#endif\n#ifdef POINTSIZE\nuniform float pointSize;\n#endif\n\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#include<clipPlaneVertexDeclaration>\n#include<fogVertexDeclaration>\n#include<__decl__lightFragment>[0..maxSimultaneousLights]\nvoid main(void) {\n#include<instancesVertex>\n#include<bonesVertex>\n#include<bakedVertexAnimation>\nvec4 worldPos=finalWorld*vec4(position,1.0);\ngl_Position=viewProjection*worldPos;\nvPositionW=vec3(worldPos);\n#ifdef NORMAL\nvNormalW=normalize(vec3(finalWorld*vec4(normal,0.0)));\n#endif\n\n#ifndef UV1\nvec2 uv=vec2(0.,0.);\n#endif\n#ifndef UV2\nvec2 uv2=vec2(0.,0.);\n#endif\n#ifdef DIFFUSE\nif (vDiffuseInfos.x == 0.)\n{\nvDiffuseUV=vec2(diffuseMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvDiffuseUV=vec2(diffuseMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n\n#include<clipPlaneVertex>\n\n#include<fogVertex>\n#include<shadowsVertex>[0..maxSimultaneousLights]\n\n#ifdef VERTEXCOLOR\nvColor=color;\n#endif\n\n#ifdef POINTSIZE\ngl_PointSize=pointSize;\n#endif\n}\n";S.ShaderStore.ShadersStore.simpleVertexShader=Pe;var Ae=function(e){function t(){var t=e.call(this)||this;return t.DIFFUSE=!1,t.CLIPPLANE=!1,t.CLIPPLANE2=!1,t.CLIPPLANE3=!1,t.CLIPPLANE4=!1,t.CLIPPLANE5=!1,t.CLIPPLANE6=!1,t.ALPHATEST=!1,t.DEPTHPREPASS=!1,t.POINTSIZE=!1,t.FOG=!1,t.NORMAL=!1,t.UV1=!1,t.UV2=!1,t.VERTEXCOLOR=!1,t.VERTEXALPHA=!1,t.NUM_BONE_INFLUENCERS=0,t.BonesPerMesh=0,t.INSTANCES=!1,t.IMAGEPROCESSINGPOSTPROCESS=!1,t.SKIPFINALCOLORCLAMP=!1,t.rebuild(),t}return B(t,e),t}(S.MaterialDefines),Re=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.diffuseColor=new S.Color3(1,1,1),r._disableLighting=!1,r._maxSimultaneousLights=4,r}return B(t,e),t.prototype.needAlphaBlending=function(){return this.alpha<1},t.prototype.needAlphaTesting=function(){return!1},t.prototype.getAlphaTestTexture=function(){return null},t.prototype.isReadyForSubMesh=function(e,t,n){if(this.isFrozen&&t.effect&&t.effect._wasPreviouslyReady)return!0;t.materialDefines||(t.materialDefines=new Ae);var r=t.materialDefines,i=this.getScene();if(this._isReadyForSubMesh(t))return!0;var o=i.getEngine();if(r._areTexturesDirty&&(r._needUVs=!1,i.texturesEnabled&&this._diffuseTexture&&S.MaterialFlags.DiffuseTextureEnabled)){if(!this._diffuseTexture.isReady())return!1;r._needUVs=!0,r.DIFFUSE=!0}if(S.MaterialHelper.PrepareDefinesForMisc(e,i,!1,this.pointsCloud,this.fogEnabled,this._shouldTurnAlphaTestOn(e),r),r._needNormals=S.MaterialHelper.PrepareDefinesForLights(i,e,r,!1,this._maxSimultaneousLights,this._disableLighting),S.MaterialHelper.PrepareDefinesForFrameBoundValues(i,o,r,!!n),S.MaterialHelper.PrepareDefinesForAttributes(e,r,!0,!0),r.isDirty){r.markAsProcessed(),i.resetCachedMaterial();var a=new S.EffectFallbacks;r.FOG&&a.addFallback(1,"FOG"),S.MaterialHelper.HandleFallbacksForShadows(r,a,this.maxSimultaneousLights),r.NUM_BONE_INFLUENCERS>0&&a.addCPUSkinningFallback(0,e),r.IMAGEPROCESSINGPOSTPROCESS=i.imageProcessingConfiguration.applyByPostProcess;var s=[S.VertexBuffer.PositionKind];r.NORMAL&&s.push(S.VertexBuffer.NormalKind),r.UV1&&s.push(S.VertexBuffer.UVKind),r.UV2&&s.push(S.VertexBuffer.UV2Kind),r.VERTEXCOLOR&&s.push(S.VertexBuffer.ColorKind),S.MaterialHelper.PrepareAttributesForBones(s,e,r,a),S.MaterialHelper.PrepareAttributesForInstances(s,r);var l=r.toString(),u=["world","view","viewProjection","vEyePosition","vLightsType","vDiffuseColor","vFogInfos","vFogColor","pointSize","vDiffuseInfos","mBones","vClipPlane","vClipPlane2","vClipPlane3","vClipPlane4","vClipPlane5","vClipPlane6","diffuseMatrix"],c=["diffuseSampler"],f=new Array;S.MaterialHelper.PrepareUniformsAndSamplersList({uniformsNames:u,uniformBuffersNames:f,samplers:c,defines:r,maxSimultaneousLights:this.maxSimultaneousLights}),t.setEffect(i.getEngine().createEffect("simple",{attributes:s,uniformsNames:u,uniformBuffersNames:f,samplers:c,defines:l,fallbacks:a,onCompiled:this.onCompiled,onError:this.onError,indexParameters:{maxSimultaneousLights:this._maxSimultaneousLights-1}},o),r,this._materialContext)}return!(!t.effect||!t.effect.isReady())&&(r._renderId=i.getRenderId(),t.effect._wasPreviouslyReady=!0,!0)},t.prototype.bindForSubMesh=function(e,t,n){var r=this.getScene(),i=n.materialDefines;if(i){var o=n.effect;o&&(this._activeEffect=o,this.bindOnlyWorldMatrix(e),this._activeEffect.setMatrix("viewProjection",r.getTransformMatrix()),S.MaterialHelper.BindBonesParameters(t,this._activeEffect),this._mustRebind(r,o)&&(this._diffuseTexture&&S.MaterialFlags.DiffuseTextureEnabled&&(this._activeEffect.setTexture("diffuseSampler",this._diffuseTexture),this._activeEffect.setFloat2("vDiffuseInfos",this._diffuseTexture.coordinatesIndex,this._diffuseTexture.level),this._activeEffect.setMatrix("diffuseMatrix",this._diffuseTexture.getTextureMatrix())),S.MaterialHelper.BindClipPlane(this._activeEffect,r),this.pointsCloud&&this._activeEffect.setFloat("pointSize",this.pointSize),r.bindEyePosition(o)),this._activeEffect.setColor4("vDiffuseColor",this.diffuseColor,this.alpha*t.visibility),r.lightsEnabled&&!this.disableLighting&&S.MaterialHelper.BindLights(r,t,this._activeEffect,i,this.maxSimultaneousLights),r.fogEnabled&&t.applyFog&&r.fogMode!==S.Scene.FOGMODE_NONE&&this._activeEffect.setMatrix("view",r.getViewMatrix()),S.MaterialHelper.BindFogParameters(r,t,this._activeEffect),this._afterBind(t,this._activeEffect))}},t.prototype.getAnimatables=function(){var e=[];return this._diffuseTexture&&this._diffuseTexture.animations&&this._diffuseTexture.animations.length>0&&e.push(this._diffuseTexture),e},t.prototype.getActiveTextures=function(){var t=e.prototype.getActiveTextures.call(this);return this._diffuseTexture&&t.push(this._diffuseTexture),t},t.prototype.hasTexture=function(t){return!!e.prototype.hasTexture.call(this,t)||this.diffuseTexture===t},t.prototype.dispose=function(t){this._diffuseTexture&&this._diffuseTexture.dispose(),e.prototype.dispose.call(this,t)},t.prototype.clone=function(e){var n=this;return S.SerializationHelper.Clone((function(){return new t(e,n.getScene())}),this)},t.prototype.serialize=function(){var e=S.SerializationHelper.Serialize(this);return e.customType="BABYLON.SimpleMaterial",e},t.prototype.getClassName=function(){return"SimpleMaterial"},t.Parse=function(e,n,r){return S.SerializationHelper.Parse((function(){return new t(e.name,n)}),e,n,r)},V([Object(S.serializeAsTexture)("diffuseTexture")],t.prototype,"_diffuseTexture",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"diffuseTexture",void 0),V([Object(S.serializeAsColor3)("diffuse")],t.prototype,"diffuseColor",void 0),V([Object(S.serialize)("disableLighting")],t.prototype,"_disableLighting",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsLightsDirty")],t.prototype,"disableLighting",void 0),V([Object(S.serialize)("maxSimultaneousLights")],t.prototype,"_maxSimultaneousLights",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsLightsDirty")],t.prototype,"maxSimultaneousLights",void 0),t}(S.PushMaterial);Object(S.RegisterClass)("BABYLON.SimpleMaterial",Re);var Oe="precision highp float;\n\nvarying vec3 vPositionW;\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#include<clipPlaneFragmentDeclaration>\n\nuniform vec3 cameraPosition;\nuniform vec3 cameraOffset;\nuniform vec3 up;\nuniform float luminance;\nuniform float turbidity;\nuniform float rayleigh;\nuniform float mieCoefficient;\nuniform float mieDirectionalG;\nuniform vec3 sunPosition;\n\n#include<fogFragmentDeclaration>\n\nconst float e=2.71828182845904523536028747135266249775724709369995957;\nconst float pi=3.141592653589793238462643383279502884197169;\nconst float n=1.0003;\nconst float N=2.545E25;\nconst float pn=0.035;\nconst vec3 lambda=vec3(680E-9,550E-9,450E-9);\nconst vec3 K=vec3(0.686,0.678,0.666);\nconst float v=4.0;\nconst float rayleighZenithLength=8.4E3;\nconst float mieZenithLength=1.25E3;\nconst float EE=1000.0;\nconst float sunAngularDiameterCos=0.999956676946448443553574619906976478926848692873900859324;\nconst float cutoffAngle=pi/1.95;\nconst float steepness=1.5;\nvec3 totalRayleigh(vec3 lambda)\n{\nreturn (8.0*pow(pi,3.0)*pow(pow(n,2.0)-1.0,2.0)*(6.0+3.0*pn))/(3.0*N*pow(lambda,vec3(4.0))*(6.0-7.0*pn));\n}\nvec3 simplifiedRayleigh()\n{\nreturn 0.0005/vec3(94,40,18);\n}\nfloat rayleighPhase(float cosTheta)\n{\nreturn (3.0/(16.0*pi))*(1.0+pow(cosTheta,2.0));\n}\nvec3 totalMie(vec3 lambda,vec3 K,float T)\n{\nfloat c=(0.2*T )*10E-18;\nreturn 0.434*c*pi*pow((2.0*pi)/lambda,vec3(v-2.0))*K;\n}\nfloat hgPhase(float cosTheta,float g)\n{\nreturn (1.0/(4.0*pi))*((1.0-pow(g,2.0))/pow(1.0-2.0*g*cosTheta+pow(g,2.0),1.5));\n}\nfloat sunIntensity(float zenithAngleCos)\n{\nreturn EE*max(0.0,1.0-exp((-(cutoffAngle-acos(zenithAngleCos))/steepness)));\n}\nfloat A=0.15;\nfloat B=0.50;\nfloat C=0.10;\nfloat D=0.20;\nfloat EEE=0.02;\nfloat F=0.30;\nfloat W=1000.0;\nvec3 Uncharted2Tonemap(vec3 x)\n{\nreturn ((x*(A*x+C*B)+D*EEE)/(x*(A*x+B)+D*F))-EEE/F;\n}\nvoid main(void) {\n\n#include<clipPlaneFragment>\n\nfloat sunfade=1.0-clamp(1.0-exp((sunPosition.y/450000.0)),0.0,1.0);\nfloat rayleighCoefficient=rayleigh-(1.0*(1.0-sunfade));\nvec3 sunDirection=normalize(sunPosition);\nfloat sunE=sunIntensity(dot(sunDirection,up));\nvec3 betaR=simplifiedRayleigh()*rayleighCoefficient;\nvec3 betaM=totalMie(lambda,K,turbidity)*mieCoefficient;\nfloat zenithAngle=acos(max(0.0,dot(up,normalize(vPositionW-cameraPosition+cameraOffset))));\nfloat sR=rayleighZenithLength/(cos(zenithAngle)+0.15*pow(93.885-((zenithAngle*180.0)/pi),-1.253));\nfloat sM=mieZenithLength/(cos(zenithAngle)+0.15*pow(93.885-((zenithAngle*180.0)/pi),-1.253));\nvec3 Fex=exp(-(betaR*sR+betaM*sM));\nfloat cosTheta=dot(normalize(vPositionW-cameraPosition),sunDirection);\nfloat rPhase=rayleighPhase(cosTheta*0.5+0.5);\nvec3 betaRTheta=betaR*rPhase;\nfloat mPhase=hgPhase(cosTheta,mieDirectionalG);\nvec3 betaMTheta=betaM*mPhase;\nvec3 Lin=pow(sunE*((betaRTheta+betaMTheta)/(betaR+betaM))*(1.0-Fex),vec3(1.5));\nLin*=mix(vec3(1.0),pow(sunE*((betaRTheta+betaMTheta)/(betaR+betaM))*Fex,vec3(1.0/2.0)),clamp(pow(1.0-dot(up,sunDirection),5.0),0.0,1.0));\nvec3 direction=normalize(vPositionW-cameraPosition);\nfloat theta=acos(direction.y);\nfloat phi=atan(direction.z,direction.x);\nvec2 uv=vec2(phi,theta)/vec2(2.0*pi,pi)+vec2(0.5,0.0);\nvec3 L0=vec3(0.1)*Fex;\nfloat sundisk=smoothstep(sunAngularDiameterCos,sunAngularDiameterCos+0.00002,cosTheta);\nL0+=(sunE*19000.0*Fex)*sundisk;\nvec3 whiteScale=1.0/Uncharted2Tonemap(vec3(W));\nvec3 texColor=(Lin+L0);\ntexColor*=0.04 ;\ntexColor+=vec3(0.0,0.001,0.0025)*0.3;\nfloat g_fMaxLuminance=1.0;\nfloat fLumScaled=0.1/luminance;\nfloat fLumCompressed=(fLumScaled*(1.0+(fLumScaled/(g_fMaxLuminance*g_fMaxLuminance))))/(1.0+fLumScaled);\nfloat ExposureBias=fLumCompressed;\nvec3 curr=Uncharted2Tonemap((log2(2.0/pow(luminance,4.0)))*texColor);\n\n\n\nvec3 retColor=curr*whiteScale;\n\n\nfloat alpha=1.0;\n#ifdef VERTEXCOLOR\nretColor.rgb*=vColor.rgb;\n#endif\n#ifdef VERTEXALPHA\nalpha*=vColor.a;\n#endif\n\nvec4 color=clamp(vec4(retColor.rgb,alpha),0.0,1.0);\n\n#include<fogFragment>\ngl_FragColor=color;\n#include<imageProcessingCompatibility>\n}\n";S.ShaderStore.ShadersStore.skyPixelShader=Oe;var we="precision highp float;\n\nattribute vec3 position;\n#ifdef VERTEXCOLOR\nattribute vec4 color;\n#endif\n\nuniform mat4 world;\nuniform mat4 view;\nuniform mat4 viewProjection;\n#ifdef POINTSIZE\nuniform float pointSize;\n#endif\n\nvarying vec3 vPositionW;\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#include<clipPlaneVertexDeclaration>\n#include<fogVertexDeclaration>\nvoid main(void) {\ngl_Position=viewProjection*world*vec4(position,1.0);\nvec4 worldPos=world*vec4(position,1.0);\nvPositionW=vec3(worldPos);\n\n#include<clipPlaneVertex>\n\n#include<fogVertex>\n\n#ifdef VERTEXCOLOR\nvColor=color;\n#endif\n\n#ifdef POINTSIZE\ngl_PointSize=pointSize;\n#endif\n}\n";S.ShaderStore.ShadersStore.skyVertexShader=we;var Me=function(e){function t(){var t=e.call(this)||this;return t.CLIPPLANE=!1,t.CLIPPLANE2=!1,t.CLIPPLANE3=!1,t.CLIPPLANE4=!1,t.CLIPPLANE5=!1,t.CLIPPLANE6=!1,t.POINTSIZE=!1,t.FOG=!1,t.VERTEXCOLOR=!1,t.VERTEXALPHA=!1,t.IMAGEPROCESSINGPOSTPROCESS=!1,t.SKIPFINALCOLORCLAMP=!1,t.rebuild(),t}return B(t,e),t}(S.MaterialDefines),Le=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.luminance=1,r.turbidity=10,r.rayleigh=2,r.mieCoefficient=.005,r.mieDirectionalG=.8,r.distance=500,r.inclination=.49,r.azimuth=.25,r.sunPosition=new S.Vector3(0,100,0),r.useSunPosition=!1,r.cameraOffset=S.Vector3.Zero(),r.up=S.Vector3.Up(),r._cameraPosition=S.Vector3.Zero(),r._skyOrientation=new S.Quaternion,r}return B(t,e),t.prototype.needAlphaBlending=function(){return this.alpha<1},t.prototype.needAlphaTesting=function(){return!1},t.prototype.getAlphaTestTexture=function(){return null},t.prototype.isReadyForSubMesh=function(e,t,n){if(this.isFrozen&&t.effect&&t.effect._wasPreviouslyReady)return!0;t.materialDefines||(t.materialDefines=new Me);var r=t.materialDefines,i=this.getScene();if(this._isReadyForSubMesh(t))return!0;if(S.MaterialHelper.PrepareDefinesForMisc(e,i,!1,this.pointsCloud,this.fogEnabled,!1,r),S.MaterialHelper.PrepareDefinesForAttributes(e,r,!0,!1),r.IMAGEPROCESSINGPOSTPROCESS!==i.imageProcessingConfiguration.applyByPostProcess&&r.markAsMiscDirty(),r.isDirty){r.markAsProcessed(),i.resetCachedMaterial();var o=new S.EffectFallbacks;r.FOG&&o.addFallback(1,"FOG"),r.IMAGEPROCESSINGPOSTPROCESS=i.imageProcessingConfiguration.applyByPostProcess;var a=[S.VertexBuffer.PositionKind];r.VERTEXCOLOR&&a.push(S.VertexBuffer.ColorKind);var s=r.toString();t.setEffect(i.getEngine().createEffect("sky",a,["world","viewProjection","view","vFogInfos","vFogColor","pointSize","vClipPlane","vClipPlane2","vClipPlane3","vClipPlane4","vClipPlane5","vClipPlane6","luminance","turbidity","rayleigh","mieCoefficient","mieDirectionalG","sunPosition","cameraPosition","cameraOffset","up"],[],s,o,this.onCompiled,this.onError),r,this._materialContext)}return!(!t.effect||!t.effect.isReady())&&(r._renderId=i.getRenderId(),t.effect._wasPreviouslyReady=!0,!0)},t.prototype.bindForSubMesh=function(e,t,n){var r=this.getScene();if(n.materialDefines){var i=n.effect;if(i){this._activeEffect=i,this.bindOnlyWorldMatrix(e),this._activeEffect.setMatrix("viewProjection",r.getTransformMatrix()),this._mustRebind(r,i)&&(S.MaterialHelper.BindClipPlane(this._activeEffect,r),this.pointsCloud&&this._activeEffect.setFloat("pointSize",this.pointSize)),r.fogEnabled&&t.applyFog&&r.fogMode!==S.Scene.FOGMODE_NONE&&this._activeEffect.setMatrix("view",r.getViewMatrix()),S.MaterialHelper.BindFogParameters(r,t,this._activeEffect);var o=r.activeCamera;if(o){var a=o.getWorldMatrix();this._cameraPosition.x=a.m[12],this._cameraPosition.y=a.m[13],this._cameraPosition.z=a.m[14],this._activeEffect.setVector3("cameraPosition",this._cameraPosition)}if(this._activeEffect.setVector3("cameraOffset",this.cameraOffset),this._activeEffect.setVector3("up",this.up),this.luminance>0&&this._activeEffect.setFloat("luminance",this.luminance),this._activeEffect.setFloat("turbidity",this.turbidity),this._activeEffect.setFloat("rayleigh",this.rayleigh),this._activeEffect.setFloat("mieCoefficient",this.mieCoefficient),this._activeEffect.setFloat("mieDirectionalG",this.mieDirectionalG),!this.useSunPosition){var s=Math.PI*(this.inclination-.5),l=2*Math.PI*(this.azimuth-.5);this.sunPosition.x=this.distance*Math.cos(l)*Math.cos(s),this.sunPosition.y=this.distance*Math.sin(-s),this.sunPosition.z=this.distance*Math.sin(l)*Math.cos(s),S.Quaternion.FromUnitVectorsToRef(S.Vector3.UpReadOnly,this.up,this._skyOrientation),this.sunPosition.rotateByQuaternionToRef(this._skyOrientation,this.sunPosition)}this._activeEffect.setVector3("sunPosition",this.sunPosition),this._afterBind(t,this._activeEffect)}}},t.prototype.getAnimatables=function(){return[]},t.prototype.dispose=function(t){e.prototype.dispose.call(this,t)},t.prototype.clone=function(e){var n=this;return S.SerializationHelper.Clone((function(){return new t(e,n.getScene())}),this)},t.prototype.serialize=function(){var e=S.SerializationHelper.Serialize(this);return e.customType="BABYLON.SkyMaterial",e},t.prototype.getClassName=function(){return"SkyMaterial"},t.Parse=function(e,n,r){return S.SerializationHelper.Parse((function(){return new t(e.name,n)}),e,n,r)},V([Object(S.serialize)()],t.prototype,"luminance",void 0),V([Object(S.serialize)()],t.prototype,"turbidity",void 0),V([Object(S.serialize)()],t.prototype,"rayleigh",void 0),V([Object(S.serialize)()],t.prototype,"mieCoefficient",void 0),V([Object(S.serialize)()],t.prototype,"mieDirectionalG",void 0),V([Object(S.serialize)()],t.prototype,"distance",void 0),V([Object(S.serialize)()],t.prototype,"inclination",void 0),V([Object(S.serialize)()],t.prototype,"azimuth",void 0),V([Object(S.serializeAsVector3)()],t.prototype,"sunPosition",void 0),V([Object(S.serialize)()],t.prototype,"useSunPosition",void 0),V([Object(S.serializeAsVector3)()],t.prototype,"cameraOffset",void 0),V([Object(S.serializeAsVector3)()],t.prototype,"up",void 0),t}(S.PushMaterial);Object(S.RegisterClass)("BABYLON.SkyMaterial",Le);var Ie="precision highp float;\n\nuniform vec4 vEyePosition;\nuniform vec4 vDiffuseColor;\n#ifdef SPECULARTERM\nuniform vec4 vSpecularColor;\n#endif\n\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n\n#include<helperFunctions>\n\n#include<__decl__lightFragment>[0..maxSimultaneousLights]\n\n#ifdef DIFFUSE\nvarying vec2 vTextureUV;\nuniform sampler2D textureSampler;\nuniform vec2 vTextureInfos;\nuniform sampler2D diffuse1Sampler;\nuniform sampler2D diffuse2Sampler;\nuniform sampler2D diffuse3Sampler;\nuniform vec2 diffuse1Infos;\nuniform vec2 diffuse2Infos;\nuniform vec2 diffuse3Infos;\n#endif\n#ifdef BUMP\nuniform sampler2D bump1Sampler;\nuniform sampler2D bump2Sampler;\nuniform sampler2D bump3Sampler;\n#endif\n\n#include<lightsFragmentFunctions>\n#include<shadowsFragmentFunctions>\n#include<clipPlaneFragmentDeclaration>\n\n#include<fogFragmentDeclaration>\n\n#ifdef BUMP\n#extension GL_OES_standard_derivatives : enable\n\nmat3 cotangent_frame(vec3 normal,vec3 p,vec2 uv)\n{\n\nvec3 dp1=dFdx(p);\nvec3 dp2=dFdy(p);\nvec2 duv1=dFdx(uv);\nvec2 duv2=dFdy(uv);\n\nvec3 dp2perp=cross(dp2,normal);\nvec3 dp1perp=cross(normal,dp1);\nvec3 tangent=dp2perp*duv1.x+dp1perp*duv2.x;\nvec3 binormal=dp2perp*duv1.y+dp1perp*duv2.y;\n\nfloat invmax=inversesqrt(max(dot(tangent,tangent),dot(binormal,binormal)));\nreturn mat3(tangent*invmax,binormal*invmax,normal);\n}\nvec3 perturbNormal(vec3 viewDir,vec3 mixColor)\n{\nvec3 bump1Color=texture2D(bump1Sampler,vTextureUV*diffuse1Infos).xyz;\nvec3 bump2Color=texture2D(bump2Sampler,vTextureUV*diffuse2Infos).xyz;\nvec3 bump3Color=texture2D(bump3Sampler,vTextureUV*diffuse3Infos).xyz;\nbump1Color.rgb*=mixColor.r;\nbump2Color.rgb=mix(bump1Color.rgb,bump2Color.rgb,mixColor.g);\nvec3 map=mix(bump2Color.rgb,bump3Color.rgb,mixColor.b);\nmap=map*255./127.-128./127.;\nmat3 TBN=cotangent_frame(vNormalW*vTextureInfos.y,-viewDir,vTextureUV);\nreturn normalize(TBN*map);\n}\n#endif\nvoid main(void) {\n\n#include<clipPlaneFragment>\nvec3 viewDirectionW=normalize(vEyePosition.xyz-vPositionW);\n\nvec4 baseColor=vec4(1.,1.,1.,1.);\nvec3 diffuseColor=vDiffuseColor.rgb;\n#ifdef SPECULARTERM\nfloat glossiness=vSpecularColor.a;\nvec3 specularColor=vSpecularColor.rgb;\n#else\nfloat glossiness=0.;\n#endif\n\nfloat alpha=vDiffuseColor.a;\n\n#ifdef NORMAL\nvec3 normalW=normalize(vNormalW);\n#else\nvec3 normalW=vec3(1.0,1.0,1.0);\n#endif\n#ifdef DIFFUSE\nbaseColor=texture2D(textureSampler,vTextureUV);\n#if defined(BUMP) && defined(DIFFUSE)\nnormalW=perturbNormal(viewDirectionW,baseColor.rgb);\n#endif\n#ifdef ALPHATEST\nif (baseColor.a<0.4)\ndiscard;\n#endif\n#include<depthPrePass>\nbaseColor.rgb*=vTextureInfos.y;\nvec4 diffuse1Color=texture2D(diffuse1Sampler,vTextureUV*diffuse1Infos);\nvec4 diffuse2Color=texture2D(diffuse2Sampler,vTextureUV*diffuse2Infos);\nvec4 diffuse3Color=texture2D(diffuse3Sampler,vTextureUV*diffuse3Infos);\ndiffuse1Color.rgb*=baseColor.r;\ndiffuse2Color.rgb=mix(diffuse1Color.rgb,diffuse2Color.rgb,baseColor.g);\nbaseColor.rgb=mix(diffuse2Color.rgb,diffuse3Color.rgb,baseColor.b);\n#endif\n#ifdef VERTEXCOLOR\nbaseColor.rgb*=vColor.rgb;\n#endif\n\nvec3 diffuseBase=vec3(0.,0.,0.);\nlightingInfo info;\nfloat shadow=1.;\n#ifdef SPECULARTERM\nvec3 specularBase=vec3(0.,0.,0.);\n#endif\n#include<lightFragment>[0..maxSimultaneousLights]\n#ifdef VERTEXALPHA\nalpha*=vColor.a;\n#endif\n#ifdef SPECULARTERM\nvec3 finalSpecular=specularBase*specularColor;\n#else\nvec3 finalSpecular=vec3(0.0);\n#endif\nvec3 finalDiffuse=clamp(diffuseBase*diffuseColor*baseColor.rgb,0.0,1.0);\n\nvec4 color=vec4(finalDiffuse+finalSpecular,alpha);\n#include<fogFragment>\ngl_FragColor=color;\n#include<imageProcessingCompatibility>\n}\n";S.ShaderStore.ShadersStore.terrainPixelShader=Ie;var De="precision highp float;\n\nattribute vec3 position;\n#ifdef NORMAL\nattribute vec3 normal;\n#endif\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#ifdef UV2\nattribute vec2 uv2;\n#endif\n#ifdef VERTEXCOLOR\nattribute vec4 color;\n#endif\n#include<bonesDeclaration>\n#include<bakedVertexAnimationDeclaration>\n\n#include<instancesDeclaration>\nuniform mat4 view;\nuniform mat4 viewProjection;\n#ifdef DIFFUSE\nvarying vec2 vTextureUV;\nuniform mat4 textureMatrix;\nuniform vec2 vTextureInfos;\n#endif\n#ifdef POINTSIZE\nuniform float pointSize;\n#endif\n\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#include<clipPlaneVertexDeclaration>\n#include<fogVertexDeclaration>\n#include<__decl__lightFragment>[0..maxSimultaneousLights]\nvoid main(void) {\n#include<instancesVertex>\n#include<bonesVertex>\n#include<bakedVertexAnimation>\nvec4 worldPos=finalWorld*vec4(position,1.0);\ngl_Position=viewProjection*worldPos;\nvPositionW=vec3(worldPos);\n#ifdef NORMAL\nvNormalW=normalize(vec3(finalWorld*vec4(normal,0.0)));\n#endif\n\n#ifndef UV1\nvec2 uv=vec2(0.,0.);\n#endif\n#ifndef UV2\nvec2 uv2=vec2(0.,0.);\n#endif\n#ifdef DIFFUSE\nif (vTextureInfos.x == 0.)\n{\nvTextureUV=vec2(textureMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvTextureUV=vec2(textureMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n\n#include<clipPlaneVertex>\n\n#include<fogVertex>\n\n#include<shadowsVertex>[0..maxSimultaneousLights]\n\n#ifdef VERTEXCOLOR\nvColor=color;\n#endif\n\n#ifdef POINTSIZE\ngl_PointSize=pointSize;\n#endif\n}\n";S.ShaderStore.ShadersStore.terrainVertexShader=De;var Fe=function(e){function t(){var t=e.call(this)||this;return t.DIFFUSE=!1,t.BUMP=!1,t.CLIPPLANE=!1,t.CLIPPLANE2=!1,t.CLIPPLANE3=!1,t.CLIPPLANE4=!1,t.CLIPPLANE5=!1,t.CLIPPLANE6=!1,t.ALPHATEST=!1,t.DEPTHPREPASS=!1,t.POINTSIZE=!1,t.FOG=!1,t.SPECULARTERM=!1,t.NORMAL=!1,t.UV1=!1,t.UV2=!1,t.VERTEXCOLOR=!1,t.VERTEXALPHA=!1,t.NUM_BONE_INFLUENCERS=0,t.BonesPerMesh=0,t.INSTANCES=!1,t.IMAGEPROCESSINGPOSTPROCESS=!1,t.SKIPFINALCOLORCLAMP=!1,t.rebuild(),t}return B(t,e),t}(S.MaterialDefines),Ne=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.diffuseColor=new S.Color3(1,1,1),r.specularColor=new S.Color3(0,0,0),r.specularPower=64,r._disableLighting=!1,r._maxSimultaneousLights=4,r}return B(t,e),t.prototype.needAlphaBlending=function(){return this.alpha<1},t.prototype.needAlphaTesting=function(){return!1},t.prototype.getAlphaTestTexture=function(){return null},t.prototype.isReadyForSubMesh=function(e,t,n){if(this.isFrozen&&t.effect&&t.effect._wasPreviouslyReady)return!0;t.materialDefines||(t.materialDefines=new Fe);var r=t.materialDefines,i=this.getScene();if(this._isReadyForSubMesh(t))return!0;var o=i.getEngine();if(i.texturesEnabled){if(!this.mixTexture||!this.mixTexture.isReady())return!1;if(r._needUVs=!0,S.MaterialFlags.DiffuseTextureEnabled){if(!this.diffuseTexture1||!this.diffuseTexture1.isReady())return!1;if(!this.diffuseTexture2||!this.diffuseTexture2.isReady())return!1;if(!this.diffuseTexture3||!this.diffuseTexture3.isReady())return!1;r.DIFFUSE=!0}if(this.bumpTexture1&&this.bumpTexture2&&this.bumpTexture3&&S.MaterialFlags.BumpTextureEnabled){if(!this.bumpTexture1.isReady())return!1;if(!this.bumpTexture2.isReady())return!1;if(!this.bumpTexture3.isReady())return!1;r._needNormals=!0,r.BUMP=!0}}if(S.MaterialHelper.PrepareDefinesForMisc(e,i,!1,this.pointsCloud,this.fogEnabled,this._shouldTurnAlphaTestOn(e),r),r._needNormals=S.MaterialHelper.PrepareDefinesForLights(i,e,r,!1,this._maxSimultaneousLights,this._disableLighting),S.MaterialHelper.PrepareDefinesForFrameBoundValues(i,o,r,!!n),S.MaterialHelper.PrepareDefinesForAttributes(e,r,!0,!0),r.isDirty){r.markAsProcessed(),i.resetCachedMaterial();var a=new S.EffectFallbacks;r.FOG&&a.addFallback(1,"FOG"),S.MaterialHelper.HandleFallbacksForShadows(r,a,this.maxSimultaneousLights),r.NUM_BONE_INFLUENCERS>0&&a.addCPUSkinningFallback(0,e),r.IMAGEPROCESSINGPOSTPROCESS=i.imageProcessingConfiguration.applyByPostProcess;var s=[S.VertexBuffer.PositionKind];r.NORMAL&&s.push(S.VertexBuffer.NormalKind),r.UV1&&s.push(S.VertexBuffer.UVKind),r.UV2&&s.push(S.VertexBuffer.UV2Kind),r.VERTEXCOLOR&&s.push(S.VertexBuffer.ColorKind),S.MaterialHelper.PrepareAttributesForBones(s,e,r,a),S.MaterialHelper.PrepareAttributesForInstances(s,r);var l=r.toString(),u=["world","view","viewProjection","vEyePosition","vLightsType","vDiffuseColor","vSpecularColor","vFogInfos","vFogColor","pointSize","vTextureInfos","mBones","vClipPlane","vClipPlane2","vClipPlane3","vClipPlane4","vClipPlane5","vClipPlane6","textureMatrix","diffuse1Infos","diffuse2Infos","diffuse3Infos"],c=["textureSampler","diffuse1Sampler","diffuse2Sampler","diffuse3Sampler","bump1Sampler","bump2Sampler","bump3Sampler"],f=new Array;S.MaterialHelper.PrepareUniformsAndSamplersList({uniformsNames:u,uniformBuffersNames:f,samplers:c,defines:r,maxSimultaneousLights:this.maxSimultaneousLights}),t.setEffect(i.getEngine().createEffect("terrain",{attributes:s,uniformsNames:u,uniformBuffersNames:f,samplers:c,defines:l,fallbacks:a,onCompiled:this.onCompiled,onError:this.onError,indexParameters:{maxSimultaneousLights:this.maxSimultaneousLights}},o),r,this._materialContext)}return!(!t.effect||!t.effect.isReady())&&(r._renderId=i.getRenderId(),t.effect._wasPreviouslyReady=!0,!0)},t.prototype.bindForSubMesh=function(e,t,n){var r=this.getScene(),i=n.materialDefines;if(i){var o=n.effect;o&&(this._activeEffect=o,this.bindOnlyWorldMatrix(e),this._activeEffect.setMatrix("viewProjection",r.getTransformMatrix()),S.MaterialHelper.BindBonesParameters(t,this._activeEffect),this._mustRebind(r,o)&&(this.mixTexture&&(this._activeEffect.setTexture("textureSampler",this._mixTexture),this._activeEffect.setFloat2("vTextureInfos",this._mixTexture.coordinatesIndex,this._mixTexture.level),this._activeEffect.setMatrix("textureMatrix",this._mixTexture.getTextureMatrix()),S.MaterialFlags.DiffuseTextureEnabled&&(this._diffuseTexture1&&(this._activeEffect.setTexture("diffuse1Sampler",this._diffuseTexture1),this._activeEffect.setFloat2("diffuse1Infos",this._diffuseTexture1.uScale,this._diffuseTexture1.vScale)),this._diffuseTexture2&&(this._activeEffect.setTexture("diffuse2Sampler",this._diffuseTexture2),this._activeEffect.setFloat2("diffuse2Infos",this._diffuseTexture2.uScale,this._diffuseTexture2.vScale)),this._diffuseTexture3&&(this._activeEffect.setTexture("diffuse3Sampler",this._diffuseTexture3),this._activeEffect.setFloat2("diffuse3Infos",this._diffuseTexture3.uScale,this._diffuseTexture3.vScale))),S.MaterialFlags.BumpTextureEnabled&&r.getEngine().getCaps().standardDerivatives&&(this._bumpTexture1&&this._activeEffect.setTexture("bump1Sampler",this._bumpTexture1),this._bumpTexture2&&this._activeEffect.setTexture("bump2Sampler",this._bumpTexture2),this._bumpTexture3&&this._activeEffect.setTexture("bump3Sampler",this._bumpTexture3))),S.MaterialHelper.BindClipPlane(this._activeEffect,r),this.pointsCloud&&this._activeEffect.setFloat("pointSize",this.pointSize),r.bindEyePosition(o)),this._activeEffect.setColor4("vDiffuseColor",this.diffuseColor,this.alpha*t.visibility),i.SPECULARTERM&&this._activeEffect.setColor4("vSpecularColor",this.specularColor,this.specularPower),r.lightsEnabled&&!this.disableLighting&&S.MaterialHelper.BindLights(r,t,this._activeEffect,i,this.maxSimultaneousLights),r.fogEnabled&&t.applyFog&&r.fogMode!==S.Scene.FOGMODE_NONE&&this._activeEffect.setMatrix("view",r.getViewMatrix()),S.MaterialHelper.BindFogParameters(r,t,this._activeEffect),this._afterBind(t,this._activeEffect))}},t.prototype.getAnimatables=function(){var e=[];return this.mixTexture&&this.mixTexture.animations&&this.mixTexture.animations.length>0&&e.push(this.mixTexture),e},t.prototype.getActiveTextures=function(){var t=e.prototype.getActiveTextures.call(this);return this._mixTexture&&t.push(this._mixTexture),this._diffuseTexture1&&t.push(this._diffuseTexture1),this._diffuseTexture2&&t.push(this._diffuseTexture2),this._diffuseTexture3&&t.push(this._diffuseTexture3),this._bumpTexture1&&t.push(this._bumpTexture1),this._bumpTexture2&&t.push(this._bumpTexture2),this._bumpTexture3&&t.push(this._bumpTexture3),t},t.prototype.hasTexture=function(t){return!!e.prototype.hasTexture.call(this,t)||(this._mixTexture===t||(this._diffuseTexture1===t||(this._diffuseTexture2===t||(this._diffuseTexture3===t||(this._bumpTexture1===t||(this._bumpTexture2===t||this._bumpTexture3===t))))))},t.prototype.dispose=function(t){this.mixTexture&&this.mixTexture.dispose(),e.prototype.dispose.call(this,t)},t.prototype.clone=function(e){var n=this;return S.SerializationHelper.Clone((function(){return new t(e,n.getScene())}),this)},t.prototype.serialize=function(){var e=S.SerializationHelper.Serialize(this);return e.customType="BABYLON.TerrainMaterial",e},t.prototype.getClassName=function(){return"TerrainMaterial"},t.Parse=function(e,n,r){return S.SerializationHelper.Parse((function(){return new t(e.name,n)}),e,n,r)},V([Object(S.serializeAsTexture)("mixTexture")],t.prototype,"_mixTexture",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"mixTexture",void 0),V([Object(S.serializeAsTexture)("diffuseTexture1")],t.prototype,"_diffuseTexture1",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"diffuseTexture1",void 0),V([Object(S.serializeAsTexture)("diffuseTexture2")],t.prototype,"_diffuseTexture2",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"diffuseTexture2",void 0),V([Object(S.serializeAsTexture)("diffuseTexture3")],t.prototype,"_diffuseTexture3",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"diffuseTexture3",void 0),V([Object(S.serializeAsTexture)("bumpTexture1")],t.prototype,"_bumpTexture1",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"bumpTexture1",void 0),V([Object(S.serializeAsTexture)("bumpTexture2")],t.prototype,"_bumpTexture2",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"bumpTexture2",void 0),V([Object(S.serializeAsTexture)("bumpTexture3")],t.prototype,"_bumpTexture3",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"bumpTexture3",void 0),V([Object(S.serializeAsColor3)()],t.prototype,"diffuseColor",void 0),V([Object(S.serializeAsColor3)()],t.prototype,"specularColor",void 0),V([Object(S.serialize)()],t.prototype,"specularPower",void 0),V([Object(S.serialize)("disableLighting")],t.prototype,"_disableLighting",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsLightsDirty")],t.prototype,"disableLighting",void 0),V([Object(S.serialize)("maxSimultaneousLights")],t.prototype,"_maxSimultaneousLights",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsLightsDirty")],t.prototype,"maxSimultaneousLights",void 0),t}(S.PushMaterial);Object(S.RegisterClass)("BABYLON.TerrainMaterial",Ne);var Be="precision highp float;\n\nuniform vec4 vEyePosition;\nuniform vec4 vDiffuseColor;\n#ifdef SPECULARTERM\nuniform vec4 vSpecularColor;\n#endif\n\nvarying vec3 vPositionW;\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n\n#include<helperFunctions>\n\n#include<__decl__lightFragment>[0..maxSimultaneousLights]\n\n#ifdef DIFFUSEX\nvarying vec2 vTextureUVX;\nuniform sampler2D diffuseSamplerX;\n#ifdef BUMPX\nuniform sampler2D normalSamplerX;\n#endif\n#endif\n#ifdef DIFFUSEY\nvarying vec2 vTextureUVY;\nuniform sampler2D diffuseSamplerY;\n#ifdef BUMPY\nuniform sampler2D normalSamplerY;\n#endif\n#endif\n#ifdef DIFFUSEZ\nvarying vec2 vTextureUVZ;\nuniform sampler2D diffuseSamplerZ;\n#ifdef BUMPZ\nuniform sampler2D normalSamplerZ;\n#endif\n#endif\n#ifdef NORMAL\nvarying mat3 tangentSpace;\n#endif\n#include<lightsFragmentFunctions>\n#include<shadowsFragmentFunctions>\n#include<clipPlaneFragmentDeclaration>\n#include<fogFragmentDeclaration>\nvoid main(void) {\n\n#include<clipPlaneFragment>\nvec3 viewDirectionW=normalize(vEyePosition.xyz-vPositionW);\n\nvec4 baseColor=vec4(0.,0.,0.,1.);\nvec3 diffuseColor=vDiffuseColor.rgb;\n\nfloat alpha=vDiffuseColor.a;\n\n#ifdef NORMAL\nvec3 normalW=tangentSpace[2];\n#else\nvec3 normalW=vec3(1.0,1.0,1.0);\n#endif\nvec4 baseNormal=vec4(0.0,0.0,0.0,1.0);\nnormalW*=normalW;\n#ifdef DIFFUSEX\nbaseColor+=texture2D(diffuseSamplerX,vTextureUVX)*normalW.x;\n#ifdef BUMPX\nbaseNormal+=texture2D(normalSamplerX,vTextureUVX)*normalW.x;\n#endif\n#endif\n#ifdef DIFFUSEY\nbaseColor+=texture2D(diffuseSamplerY,vTextureUVY)*normalW.y;\n#ifdef BUMPY\nbaseNormal+=texture2D(normalSamplerY,vTextureUVY)*normalW.y;\n#endif\n#endif\n#ifdef DIFFUSEZ\nbaseColor+=texture2D(diffuseSamplerZ,vTextureUVZ)*normalW.z;\n#ifdef BUMPZ\nbaseNormal+=texture2D(normalSamplerZ,vTextureUVZ)*normalW.z;\n#endif\n#endif\n#ifdef NORMAL\nnormalW=normalize((2.0*baseNormal.xyz-1.0)*tangentSpace);\n#endif\n#ifdef ALPHATEST\nif (baseColor.a<0.4)\ndiscard;\n#endif\n#include<depthPrePass>\n#ifdef VERTEXCOLOR\nbaseColor.rgb*=vColor.rgb;\n#endif\n\nvec3 diffuseBase=vec3(0.,0.,0.);\nlightingInfo info;\nfloat shadow=1.;\n#ifdef SPECULARTERM\nfloat glossiness=vSpecularColor.a;\nvec3 specularBase=vec3(0.,0.,0.);\nvec3 specularColor=vSpecularColor.rgb;\n#else\nfloat glossiness=0.;\n#endif\n#include<lightFragment>[0..maxSimultaneousLights]\n#ifdef VERTEXALPHA\nalpha*=vColor.a;\n#endif\n#ifdef SPECULARTERM\nvec3 finalSpecular=specularBase*specularColor;\n#else\nvec3 finalSpecular=vec3(0.0);\n#endif\nvec3 finalDiffuse=clamp(diffuseBase*diffuseColor,0.0,1.0)*baseColor.rgb;\n\nvec4 color=vec4(finalDiffuse+finalSpecular,alpha);\n#include<fogFragment>\ngl_FragColor=color;\n#include<imageProcessingCompatibility>\n}\n";S.ShaderStore.ShadersStore.triplanarPixelShader=Be;var Ve="precision highp float;\n\nattribute vec3 position;\n#ifdef NORMAL\nattribute vec3 normal;\n#endif\n#ifdef VERTEXCOLOR\nattribute vec4 color;\n#endif\n#include<bonesDeclaration>\n#include<bakedVertexAnimationDeclaration>\n\n#include<instancesDeclaration>\nuniform mat4 view;\nuniform mat4 viewProjection;\n#ifdef DIFFUSEX\nvarying vec2 vTextureUVX;\n#endif\n#ifdef DIFFUSEY\nvarying vec2 vTextureUVY;\n#endif\n#ifdef DIFFUSEZ\nvarying vec2 vTextureUVZ;\n#endif\nuniform float tileSize;\n#ifdef POINTSIZE\nuniform float pointSize;\n#endif\n\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying mat3 tangentSpace;\n#endif\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#include<clipPlaneVertexDeclaration>\n#include<fogVertexDeclaration>\n#include<__decl__lightFragment>[0..maxSimultaneousLights]\nvoid main(void)\n{\n#include<instancesVertex>\n#include<bonesVertex>\n#include<bakedVertexAnimation>\nvec4 worldPos=finalWorld*vec4(position,1.0);\ngl_Position=viewProjection*worldPos;\nvPositionW=vec3(worldPos);\n#ifdef DIFFUSEX\nvTextureUVX=worldPos.zy/tileSize;\n#endif\n#ifdef DIFFUSEY\nvTextureUVY=worldPos.xz/tileSize;\n#endif\n#ifdef DIFFUSEZ\nvTextureUVZ=worldPos.xy/tileSize;\n#endif\n#ifdef NORMAL\n\nvec3 xtan=vec3(0,0,1);\nvec3 xbin=vec3(0,1,0);\nvec3 ytan=vec3(1,0,0);\nvec3 ybin=vec3(0,0,1);\nvec3 ztan=vec3(1,0,0);\nvec3 zbin=vec3(0,1,0);\nvec3 normalizedNormal=normalize(normal);\nnormalizedNormal*=normalizedNormal;\nvec3 worldBinormal=normalize(xbin*normalizedNormal.x+ybin*normalizedNormal.y+zbin*normalizedNormal.z);\nvec3 worldTangent=normalize(xtan*normalizedNormal.x+ytan*normalizedNormal.y+ztan*normalizedNormal.z);\nworldTangent=(world*vec4(worldTangent,0.0)).xyz;\nworldBinormal=(world*vec4(worldBinormal,0.0)).xyz;\nvec3 worldNormal=(world*vec4(normalize(normal),0.0)).xyz;\ntangentSpace[0]=worldTangent;\ntangentSpace[1]=worldBinormal;\ntangentSpace[2]=worldNormal;\n#endif\n\n#include<clipPlaneVertex>\n\n#include<fogVertex>\n\n#include<shadowsVertex>[0..maxSimultaneousLights]\n\n#ifdef VERTEXCOLOR\nvColor=color;\n#endif\n\n#ifdef POINTSIZE\ngl_PointSize=pointSize;\n#endif\n}\n";S.ShaderStore.ShadersStore.triplanarVertexShader=Ve;var ke=function(e){function t(){var t=e.call(this)||this;return t.DIFFUSEX=!1,t.DIFFUSEY=!1,t.DIFFUSEZ=!1,t.BUMPX=!1,t.BUMPY=!1,t.BUMPZ=!1,t.CLIPPLANE=!1,t.CLIPPLANE2=!1,t.CLIPPLANE3=!1,t.CLIPPLANE4=!1,t.CLIPPLANE5=!1,t.CLIPPLANE6=!1,t.ALPHATEST=!1,t.DEPTHPREPASS=!1,t.POINTSIZE=!1,t.FOG=!1,t.SPECULARTERM=!1,t.NORMAL=!1,t.VERTEXCOLOR=!1,t.VERTEXALPHA=!1,t.NUM_BONE_INFLUENCERS=0,t.BonesPerMesh=0,t.INSTANCES=!1,t.IMAGEPROCESSINGPOSTPROCESS=!1,t.SKIPFINALCOLORCLAMP=!1,t.rebuild(),t}return B(t,e),t}(S.MaterialDefines),Ue=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.tileSize=1,r.diffuseColor=new S.Color3(1,1,1),r.specularColor=new S.Color3(.2,.2,.2),r.specularPower=64,r._disableLighting=!1,r._maxSimultaneousLights=4,r}return B(t,e),t.prototype.needAlphaBlending=function(){return this.alpha<1},t.prototype.needAlphaTesting=function(){return!1},t.prototype.getAlphaTestTexture=function(){return null},t.prototype.isReadyForSubMesh=function(e,t,n){if(this.isFrozen&&t.effect&&t.effect._wasPreviouslyReady)return!0;t.materialDefines||(t.materialDefines=new ke);var r=t.materialDefines,i=this.getScene();if(this._isReadyForSubMesh(t))return!0;var o=i.getEngine();if(r._areTexturesDirty&&i.texturesEnabled){if(S.MaterialFlags.DiffuseTextureEnabled)for(var a=[this.diffuseTextureX,this.diffuseTextureY,this.diffuseTextureZ],s=["DIFFUSEX","DIFFUSEY","DIFFUSEZ"],l=0;l<a.length;l++)if(a[l]){if(!a[l].isReady())return!1;r[s[l]]=!0}if(S.MaterialFlags.BumpTextureEnabled)for(a=[this.normalTextureX,this.normalTextureY,this.normalTextureZ],s=["BUMPX","BUMPY","BUMPZ"],l=0;l<a.length;l++)if(a[l]){if(!a[l].isReady())return!1;r[s[l]]=!0}}if(S.MaterialHelper.PrepareDefinesForMisc(e,i,!1,this.pointsCloud,this.fogEnabled,this._shouldTurnAlphaTestOn(e),r),r._needNormals=S.MaterialHelper.PrepareDefinesForLights(i,e,r,!1,this._maxSimultaneousLights,this._disableLighting),S.MaterialHelper.PrepareDefinesForFrameBoundValues(i,o,r,!!n),S.MaterialHelper.PrepareDefinesForAttributes(e,r,!0,!0),r.isDirty){r.markAsProcessed(),i.resetCachedMaterial();var u=new S.EffectFallbacks;r.FOG&&u.addFallback(1,"FOG"),S.MaterialHelper.HandleFallbacksForShadows(r,u,this.maxSimultaneousLights),r.NUM_BONE_INFLUENCERS>0&&u.addCPUSkinningFallback(0,e),r.IMAGEPROCESSINGPOSTPROCESS=i.imageProcessingConfiguration.applyByPostProcess;var c=[S.VertexBuffer.PositionKind];r.NORMAL&&c.push(S.VertexBuffer.NormalKind),r.VERTEXCOLOR&&c.push(S.VertexBuffer.ColorKind),S.MaterialHelper.PrepareAttributesForBones(c,e,r,u),S.MaterialHelper.PrepareAttributesForInstances(c,r);var f=r.toString(),d=["world","view","viewProjection","vEyePosition","vLightsType","vDiffuseColor","vSpecularColor","vFogInfos","vFogColor","pointSize","mBones","vClipPlane","vClipPlane2","vClipPlane3","vClipPlane4","vClipPlane5","vClipPlane6","tileSize"],p=["diffuseSamplerX","diffuseSamplerY","diffuseSamplerZ","normalSamplerX","normalSamplerY","normalSamplerZ"],h=new Array;S.MaterialHelper.PrepareUniformsAndSamplersList({uniformsNames:d,uniformBuffersNames:h,samplers:p,defines:r,maxSimultaneousLights:this.maxSimultaneousLights}),t.setEffect(i.getEngine().createEffect("triplanar",{attributes:c,uniformsNames:d,uniformBuffersNames:h,samplers:p,defines:f,fallbacks:u,onCompiled:this.onCompiled,onError:this.onError,indexParameters:{maxSimultaneousLights:this.maxSimultaneousLights}},o),r,this._materialContext)}return!(!t.effect||!t.effect.isReady())&&(r._renderId=i.getRenderId(),t.effect._wasPreviouslyReady=!0,!0)},t.prototype.bindForSubMesh=function(e,t,n){var r=this.getScene(),i=n.materialDefines;if(i){var o=n.effect;o&&(this._activeEffect=o,this.bindOnlyWorldMatrix(e),this._activeEffect.setMatrix("viewProjection",r.getTransformMatrix()),S.MaterialHelper.BindBonesParameters(t,this._activeEffect),this._activeEffect.setFloat("tileSize",this.tileSize),r.getCachedMaterial()!==this&&(this.diffuseTextureX&&this._activeEffect.setTexture("diffuseSamplerX",this.diffuseTextureX),this.diffuseTextureY&&this._activeEffect.setTexture("diffuseSamplerY",this.diffuseTextureY),this.diffuseTextureZ&&this._activeEffect.setTexture("diffuseSamplerZ",this.diffuseTextureZ),this.normalTextureX&&this._activeEffect.setTexture("normalSamplerX",this.normalTextureX),this.normalTextureY&&this._activeEffect.setTexture("normalSamplerY",this.normalTextureY),this.normalTextureZ&&this._activeEffect.setTexture("normalSamplerZ",this.normalTextureZ),S.MaterialHelper.BindClipPlane(this._activeEffect,r),this.pointsCloud&&this._activeEffect.setFloat("pointSize",this.pointSize),r.bindEyePosition(o)),this._activeEffect.setColor4("vDiffuseColor",this.diffuseColor,this.alpha*t.visibility),i.SPECULARTERM&&this._activeEffect.setColor4("vSpecularColor",this.specularColor,this.specularPower),r.lightsEnabled&&!this.disableLighting&&S.MaterialHelper.BindLights(r,t,this._activeEffect,i,this.maxSimultaneousLights),r.fogEnabled&&t.applyFog&&r.fogMode!==S.Scene.FOGMODE_NONE&&this._activeEffect.setMatrix("view",r.getViewMatrix()),S.MaterialHelper.BindFogParameters(r,t,this._activeEffect),this._afterBind(t,this._activeEffect))}},t.prototype.getAnimatables=function(){var e=[];return this.mixTexture&&this.mixTexture.animations&&this.mixTexture.animations.length>0&&e.push(this.mixTexture),e},t.prototype.getActiveTextures=function(){var t=e.prototype.getActiveTextures.call(this);return this._diffuseTextureX&&t.push(this._diffuseTextureX),this._diffuseTextureY&&t.push(this._diffuseTextureY),this._diffuseTextureZ&&t.push(this._diffuseTextureZ),this._normalTextureX&&t.push(this._normalTextureX),this._normalTextureY&&t.push(this._normalTextureY),this._normalTextureZ&&t.push(this._normalTextureZ),t},t.prototype.hasTexture=function(t){return!!e.prototype.hasTexture.call(this,t)||(this._diffuseTextureX===t||(this._diffuseTextureY===t||(this._diffuseTextureZ===t||(this._normalTextureX===t||(this._normalTextureY===t||this._normalTextureZ===t)))))},t.prototype.dispose=function(t){this.mixTexture&&this.mixTexture.dispose(),e.prototype.dispose.call(this,t)},t.prototype.clone=function(e){var n=this;return S.SerializationHelper.Clone((function(){return new t(e,n.getScene())}),this)},t.prototype.serialize=function(){var e=S.SerializationHelper.Serialize(this);return e.customType="BABYLON.TriPlanarMaterial",e},t.prototype.getClassName=function(){return"TriPlanarMaterial"},t.Parse=function(e,n,r){return S.SerializationHelper.Parse((function(){return new t(e.name,n)}),e,n,r)},V([Object(S.serializeAsTexture)()],t.prototype,"mixTexture",void 0),V([Object(S.serializeAsTexture)("diffuseTextureX")],t.prototype,"_diffuseTextureX",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"diffuseTextureX",void 0),V([Object(S.serializeAsTexture)("diffuseTexturY")],t.prototype,"_diffuseTextureY",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"diffuseTextureY",void 0),V([Object(S.serializeAsTexture)("diffuseTextureZ")],t.prototype,"_diffuseTextureZ",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"diffuseTextureZ",void 0),V([Object(S.serializeAsTexture)("normalTextureX")],t.prototype,"_normalTextureX",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"normalTextureX",void 0),V([Object(S.serializeAsTexture)("normalTextureY")],t.prototype,"_normalTextureY",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"normalTextureY",void 0),V([Object(S.serializeAsTexture)("normalTextureZ")],t.prototype,"_normalTextureZ",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"normalTextureZ",void 0),V([Object(S.serialize)()],t.prototype,"tileSize",void 0),V([Object(S.serializeAsColor3)()],t.prototype,"diffuseColor",void 0),V([Object(S.serializeAsColor3)()],t.prototype,"specularColor",void 0),V([Object(S.serialize)()],t.prototype,"specularPower",void 0),V([Object(S.serialize)("disableLighting")],t.prototype,"_disableLighting",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsLightsDirty")],t.prototype,"disableLighting",void 0),V([Object(S.serialize)("maxSimultaneousLights")],t.prototype,"_maxSimultaneousLights",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsLightsDirty")],t.prototype,"maxSimultaneousLights",void 0),t}(S.PushMaterial);Object(S.RegisterClass)("BABYLON.TriPlanarMaterial",Ue);var ze="#ifdef LOGARITHMICDEPTH\n#extension GL_EXT_frag_depth : enable\n#endif\nprecision highp float;\n\nuniform vec4 vEyePosition;\nuniform vec4 vDiffuseColor;\n#ifdef SPECULARTERM\nuniform vec4 vSpecularColor;\n#endif\n\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n\n#include<helperFunctions>\n#include<imageProcessingDeclaration>\n#include<imageProcessingFunctions>\n\n#include<__decl__lightFragment>[0..maxSimultaneousLights]\n#include<lightsFragmentFunctions>\n#include<shadowsFragmentFunctions>\n\n#ifdef BUMP\nvarying vec2 vNormalUV;\n#ifdef BUMPSUPERIMPOSE\nvarying vec2 vNormalUV2;\n#endif\nuniform sampler2D normalSampler;\nuniform vec2 vNormalInfos;\n#endif\nuniform sampler2D refractionSampler;\nuniform sampler2D reflectionSampler;\n\nconst float LOG2=1.442695;\nuniform vec3 cameraPosition;\nuniform vec4 waterColor;\nuniform float colorBlendFactor;\nuniform vec4 waterColor2;\nuniform float colorBlendFactor2;\nuniform float bumpHeight;\nuniform float time;\n\nvarying vec3 vRefractionMapTexCoord;\nvarying vec3 vReflectionMapTexCoord;\nvarying vec3 vPosition;\n#include<clipPlaneFragmentDeclaration>\n#include<logDepthDeclaration>\n\n#include<fogFragmentDeclaration>\nvoid main(void) {\n\n#include<clipPlaneFragment>\nvec3 viewDirectionW=normalize(vEyePosition.xyz-vPositionW);\n\nvec4 baseColor=vec4(1.,1.,1.,1.);\nvec3 diffuseColor=vDiffuseColor.rgb;\n\nfloat alpha=vDiffuseColor.a;\n#ifdef BUMP\n#ifdef BUMPSUPERIMPOSE\nbaseColor=0.6*texture2D(normalSampler,vNormalUV)+0.4*texture2D(normalSampler,vec2(vNormalUV2.x,vNormalUV2.y));\n#else\nbaseColor=texture2D(normalSampler,vNormalUV);\n#endif\nvec3 bumpColor=baseColor.rgb;\n#ifdef ALPHATEST\nif (baseColor.a<0.4)\ndiscard;\n#endif\nbaseColor.rgb*=vNormalInfos.y;\n#else\nvec3 bumpColor=vec3(1.0);\n#endif\n#ifdef VERTEXCOLOR\nbaseColor.rgb*=vColor.rgb;\n#endif\n\n#ifdef NORMAL\nvec2 perturbation=bumpHeight*(baseColor.rg-0.5);\n#ifdef BUMPAFFECTSREFLECTION\nvec3 normalW=normalize(vNormalW+vec3(perturbation.x*8.0,0.0,perturbation.y*8.0));\nif (normalW.y<0.0) {\nnormalW.y=-normalW.y;\n}\n#else\nvec3 normalW=normalize(vNormalW);\n#endif\n#else\nvec3 normalW=vec3(1.0,1.0,1.0);\nvec2 perturbation=bumpHeight*(vec2(1.0,1.0)-0.5);\n#endif\n#ifdef FRESNELSEPARATE\n#ifdef REFLECTION\n\nvec2 projectedRefractionTexCoords=clamp(vRefractionMapTexCoord.xy/vRefractionMapTexCoord.z+perturbation*0.5,0.0,1.0);\nvec4 refractiveColor=texture2D(refractionSampler,projectedRefractionTexCoords);\n#ifdef IS_REFRACTION_LINEAR\nrefractiveColor.rgb=toGammaSpace(refractiveColor.rgb);\n#endif\nvec2 projectedReflectionTexCoords=clamp(vec2(\nvReflectionMapTexCoord.x/vReflectionMapTexCoord.z+perturbation.x*0.3,\nvReflectionMapTexCoord.y/vReflectionMapTexCoord.z+perturbation.y\n),0.0,1.0);\nvec4 reflectiveColor=texture2D(reflectionSampler,projectedReflectionTexCoords);\n#ifdef IS_REFLECTION_LINEAR\nreflectiveColor.rgb=toGammaSpace(reflectiveColor.rgb);\n#endif\nvec3 upVector=vec3(0.0,1.0,0.0);\nfloat fresnelTerm=clamp(abs(pow(dot(viewDirectionW,upVector),3.0)),0.05,0.65);\nfloat IfresnelTerm=1.0-fresnelTerm;\nrefractiveColor=colorBlendFactor*waterColor+(1.0-colorBlendFactor)*refractiveColor;\nreflectiveColor=IfresnelTerm*colorBlendFactor2*waterColor+(1.0-colorBlendFactor2*IfresnelTerm)*reflectiveColor;\nvec4 combinedColor=refractiveColor*fresnelTerm+reflectiveColor*IfresnelTerm;\nbaseColor=combinedColor;\n#endif\n\nvec3 diffuseBase=vec3(0.,0.,0.);\nlightingInfo info;\nfloat shadow=1.;\n#ifdef SPECULARTERM\nfloat glossiness=vSpecularColor.a;\nvec3 specularBase=vec3(0.,0.,0.);\nvec3 specularColor=vSpecularColor.rgb;\n#else\nfloat glossiness=0.;\n#endif\n#include<lightFragment>[0..maxSimultaneousLights]\nvec3 finalDiffuse=clamp(baseColor.rgb,0.0,1.0);\n#ifdef VERTEXALPHA\nalpha*=vColor.a;\n#endif\n#ifdef SPECULARTERM\nvec3 finalSpecular=specularBase*specularColor;\n#else\nvec3 finalSpecular=vec3(0.0);\n#endif\n#else\n#ifdef REFLECTION\n\nvec2 projectedRefractionTexCoords=clamp(vRefractionMapTexCoord.xy/vRefractionMapTexCoord.z+perturbation,0.0,1.0);\nvec4 refractiveColor=texture2D(refractionSampler,projectedRefractionTexCoords);\n#ifdef IS_REFRACTION_LINEAR\nrefractiveColor.rgb=toGammaSpace(refractiveColor.rgb);\n#endif\nvec2 projectedReflectionTexCoords=clamp(vReflectionMapTexCoord.xy/vReflectionMapTexCoord.z+perturbation,0.0,1.0);\nvec4 reflectiveColor=texture2D(reflectionSampler,projectedReflectionTexCoords);\n#ifdef IS_REFLECTION_LINEAR\nreflectiveColor.rgb=toGammaSpace(reflectiveColor.rgb);\n#endif\nvec3 upVector=vec3(0.0,1.0,0.0);\nfloat fresnelTerm=max(dot(viewDirectionW,upVector),0.0);\nvec4 combinedColor=refractiveColor*fresnelTerm+reflectiveColor*(1.0-fresnelTerm);\nbaseColor=colorBlendFactor*waterColor+(1.0-colorBlendFactor)*combinedColor;\n#endif\n\nvec3 diffuseBase=vec3(0.,0.,0.);\nlightingInfo info;\nfloat shadow=1.;\n#ifdef SPECULARTERM\nfloat glossiness=vSpecularColor.a;\nvec3 specularBase=vec3(0.,0.,0.);\nvec3 specularColor=vSpecularColor.rgb;\n#else\nfloat glossiness=0.;\n#endif\n#include<lightFragment>[0..maxSimultaneousLights]\nvec3 finalDiffuse=clamp(baseColor.rgb,0.0,1.0);\n#ifdef VERTEXALPHA\nalpha*=vColor.a;\n#endif\n#ifdef SPECULARTERM\nvec3 finalSpecular=specularBase*specularColor;\n#else\nvec3 finalSpecular=vec3(0.0);\n#endif\n#endif\n\nvec4 color=vec4(finalDiffuse+finalSpecular,alpha);\n#include<logDepthFragment>\n#include<fogFragment>\n\n\n#ifdef IMAGEPROCESSINGPOSTPROCESS\ncolor.rgb=toLinearSpace(color.rgb);\n#elif defined(IMAGEPROCESSING)\ncolor.rgb=toLinearSpace(color.rgb);\ncolor=applyImageProcessing(color);\n#endif\ngl_FragColor=color;\n}\n";S.ShaderStore.ShadersStore.waterPixelShader=ze;var je="precision highp float;\n\nattribute vec3 position;\n#ifdef NORMAL\nattribute vec3 normal;\n#endif\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#ifdef UV2\nattribute vec2 uv2;\n#endif\n#ifdef VERTEXCOLOR\nattribute vec4 color;\n#endif\n#include<bonesDeclaration>\n#include<bakedVertexAnimationDeclaration>\n\n#include<instancesDeclaration>\nuniform mat4 view;\nuniform mat4 viewProjection;\n#ifdef BUMP\nvarying vec2 vNormalUV;\n#ifdef BUMPSUPERIMPOSE\nvarying vec2 vNormalUV2;\n#endif\nuniform mat4 normalMatrix;\nuniform vec2 vNormalInfos;\n#endif\n#ifdef POINTSIZE\nuniform float pointSize;\n#endif\n\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#include<clipPlaneVertexDeclaration>\n#include<fogVertexDeclaration>\n#include<__decl__lightFragment>[0..maxSimultaneousLights]\n#include<logDepthDeclaration>\n\nuniform mat4 worldReflectionViewProjection;\nuniform vec2 windDirection;\nuniform float waveLength;\nuniform float time;\nuniform float windForce;\nuniform float waveHeight;\nuniform float waveSpeed;\nuniform float waveCount;\n\nvarying vec3 vPosition;\nvarying vec3 vRefractionMapTexCoord;\nvarying vec3 vReflectionMapTexCoord;\nvoid main(void) {\n#include<instancesVertex>\n#include<bonesVertex>\n#include<bakedVertexAnimation>\nvec4 worldPos=finalWorld*vec4(position,1.0);\nvPositionW=vec3(worldPos);\n#ifdef NORMAL\nvNormalW=normalize(vec3(finalWorld*vec4(normal,0.0)));\n#endif\n\n#ifndef UV1\nvec2 uv=vec2(0.,0.);\n#endif\n#ifndef UV2\nvec2 uv2=vec2(0.,0.);\n#endif\n#ifdef BUMP\nif (vNormalInfos.x == 0.)\n{\nvNormalUV=vec2(normalMatrix*vec4((uv*1.0)/waveLength+time*windForce*windDirection,1.0,0.0));\n#ifdef BUMPSUPERIMPOSE\nvNormalUV2=vec2(normalMatrix*vec4((uv*0.721)/waveLength+time*1.2*windForce*windDirection,1.0,0.0));\n#endif\n}\nelse\n{\nvNormalUV=vec2(normalMatrix*vec4((uv2*1.0)/waveLength+time*windForce*windDirection ,1.0,0.0));\n#ifdef BUMPSUPERIMPOSE\nvNormalUV2=vec2(normalMatrix*vec4((uv2*0.721)/waveLength+time*1.2*windForce*windDirection ,1.0,0.0));\n#endif\n}\n#endif\n\n#include<clipPlaneVertex>\n\n#include<fogVertex>\n\n#include<shadowsVertex>[0..maxSimultaneousLights]\n\n#ifdef VERTEXCOLOR\nvColor=color;\n#endif\n\n#ifdef POINTSIZE\ngl_PointSize=pointSize;\n#endif\nfloat finalWaveCount=1.0/(waveCount*0.5);\nvec3 p=position;\nfloat newY=(sin(((p.x/finalWaveCount)+time*waveSpeed))*waveHeight*windDirection.x*5.0)\n+(cos(((p.z/finalWaveCount)+time*waveSpeed))*waveHeight*windDirection.y*5.0);\np.y+=abs(newY);\ngl_Position=viewProjection*finalWorld*vec4(p,1.0);\n#ifdef REFLECTION\nworldPos=viewProjection*finalWorld*vec4(p,1.0);\n\nvPosition=position;\nvRefractionMapTexCoord.x=0.5*(worldPos.w+worldPos.x);\nvRefractionMapTexCoord.y=0.5*(worldPos.w+worldPos.y);\nvRefractionMapTexCoord.z=worldPos.w;\nworldPos=worldReflectionViewProjection*vec4(position,1.0);\nvReflectionMapTexCoord.x=0.5*(worldPos.w+worldPos.x);\nvReflectionMapTexCoord.y=0.5*(worldPos.w+worldPos.y);\nvReflectionMapTexCoord.z=worldPos.w;\n#endif\n#include<logDepthVertex>\n}\n";S.ShaderStore.ShadersStore.waterVertexShader=je;var He=function(e){function t(){var t=e.call(this)||this;return t.BUMP=!1,t.REFLECTION=!1,t.CLIPPLANE=!1,t.CLIPPLANE2=!1,t.CLIPPLANE3=!1,t.CLIPPLANE4=!1,t.CLIPPLANE5=!1,t.CLIPPLANE6=!1,t.ALPHATEST=!1,t.DEPTHPREPASS=!1,t.POINTSIZE=!1,t.FOG=!1,t.NORMAL=!1,t.UV1=!1,t.UV2=!1,t.VERTEXCOLOR=!1,t.VERTEXALPHA=!1,t.NUM_BONE_INFLUENCERS=0,t.BonesPerMesh=0,t.INSTANCES=!1,t.SPECULARTERM=!1,t.LOGARITHMICDEPTH=!1,t.USE_REVERSE_DEPTHBUFFER=!1,t.FRESNELSEPARATE=!1,t.BUMPSUPERIMPOSE=!1,t.BUMPAFFECTSREFLECTION=!1,t.IMAGEPROCESSING=!1,t.VIGNETTE=!1,t.VIGNETTEBLENDMODEMULTIPLY=!1,t.VIGNETTEBLENDMODEOPAQUE=!1,t.TONEMAPPING=!1,t.TONEMAPPING_ACES=!1,t.CONTRAST=!1,t.EXPOSURE=!1,t.COLORCURVES=!1,t.COLORGRADING=!1,t.COLORGRADING3D=!1,t.SAMPLER3DGREENDEPTH=!1,t.SAMPLER3DBGRMAP=!1,t.IMAGEPROCESSINGPOSTPROCESS=!1,t.SKIPFINALCOLORCLAMP=!1,t.rebuild(),t}return B(t,e),t}(S.MaterialDefines),We=function(e){function t(t,n,r){void 0===r&&(r=new S.Vector2(512,512));var i=e.call(this,t,n)||this;return i.renderTargetSize=r,i.diffuseColor=new S.Color3(1,1,1),i.specularColor=new S.Color3(0,0,0),i.specularPower=64,i._disableLighting=!1,i._maxSimultaneousLights=4,i.windForce=6,i.windDirection=new S.Vector2(0,1),i.waveHeight=.4,i.bumpHeight=.4,i._bumpSuperimpose=!1,i._fresnelSeparate=!1,i._bumpAffectsReflection=!1,i.waterColor=new S.Color3(.1,.1,.6),i.colorBlendFactor=.2,i.waterColor2=new S.Color3(.1,.1,.6),i.colorBlendFactor2=.2,i.waveLength=.1,i.waveSpeed=1,i.waveCount=20,i.disableClipPlane=!1,i._renderTargets=new S.SmartArray(16),i._mesh=null,i._reflectionTransform=S.Matrix.Zero(),i._lastTime=0,i._lastDeltaTime=0,i._createRenderTargets(n,r),i.getRenderTargetTextures=function(){return i._renderTargets.reset(),i._renderTargets.push(i._reflectionRTT),i._renderTargets.push(i._refractionRTT),i._renderTargets},i._imageProcessingConfiguration=i.getScene().imageProcessingConfiguration,i._imageProcessingConfiguration&&(i._imageProcessingObserver=i._imageProcessingConfiguration.onUpdateParameters.add((function(){i._markAllSubMeshesAsImageProcessingDirty()}))),i}return B(t,e),Object.defineProperty(t.prototype,"hasRenderTargetTextures",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"useLogarithmicDepth",{get:function(){return this._useLogarithmicDepth},set:function(e){this._useLogarithmicDepth=e&&this.getScene().getEngine().getCaps().fragmentDepthSupported,this._markAllSubMeshesAsMiscDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"refractionTexture",{get:function(){return this._refractionRTT},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"reflectionTexture",{get:function(){return this._reflectionRTT},enumerable:!1,configurable:!0}),t.prototype.addToRenderList=function(e){this._refractionRTT&&this._refractionRTT.renderList&&this._refractionRTT.renderList.push(e),this._reflectionRTT&&this._reflectionRTT.renderList&&this._reflectionRTT.renderList.push(e)},t.prototype.enableRenderTargets=function(e){var t=e?1:0;this._refractionRTT&&(this._refractionRTT.refreshRate=t),this._reflectionRTT&&(this._reflectionRTT.refreshRate=t)},t.prototype.getRenderList=function(){return this._refractionRTT?this._refractionRTT.renderList:[]},Object.defineProperty(t.prototype,"renderTargetsEnabled",{get:function(){return!(this._refractionRTT&&0===this._refractionRTT.refreshRate)},enumerable:!1,configurable:!0}),t.prototype.needAlphaBlending=function(){return this.alpha<1},t.prototype.needAlphaTesting=function(){return!1},t.prototype.getAlphaTestTexture=function(){return null},t.prototype.isReadyForSubMesh=function(e,t,n){if(this.isFrozen&&t.effect&&t.effect._wasPreviouslyReady)return!0;t.materialDefines||(t.materialDefines=new He);var r=t.materialDefines,i=this.getScene();if(this._isReadyForSubMesh(t))return!0;var o=i.getEngine();if(r._areTexturesDirty&&(r._needUVs=!1,i.texturesEnabled)){if(this.bumpTexture&&S.MaterialFlags.BumpTextureEnabled){if(!this.bumpTexture.isReady())return!1;r._needUVs=!0,r.BUMP=!0}S.MaterialFlags.ReflectionTextureEnabled&&(r.REFLECTION=!0)}if(S.MaterialHelper.PrepareDefinesForFrameBoundValues(i,o,r,!!n),S.MaterialHelper.PrepareDefinesForMisc(e,i,this._useLogarithmicDepth,this.pointsCloud,this.fogEnabled,this._shouldTurnAlphaTestOn(e),r),r._areMiscDirty&&(this._fresnelSeparate&&(r.FRESNELSEPARATE=!0),this._bumpSuperimpose&&(r.BUMPSUPERIMPOSE=!0),this._bumpAffectsReflection&&(r.BUMPAFFECTSREFLECTION=!0)),r._needNormals=S.MaterialHelper.PrepareDefinesForLights(i,e,r,!0,this._maxSimultaneousLights,this._disableLighting),r._areImageProcessingDirty&&this._imageProcessingConfiguration){if(!this._imageProcessingConfiguration.isReady())return!1;this._imageProcessingConfiguration.prepareDefines(r),r.IS_REFLECTION_LINEAR=null!=this.reflectionTexture&&!this.reflectionTexture.gammaSpace,r.IS_REFRACTION_LINEAR=null!=this.refractionTexture&&!this.refractionTexture.gammaSpace}if(S.MaterialHelper.PrepareDefinesForAttributes(e,r,!0,!0),this._mesh=e,this._waitingRenderList){for(var a=0;a<this._waitingRenderList.length;a++)this.addToRenderList(i.getNodeById(this._waitingRenderList[a]));this._waitingRenderList=null}if(r.isDirty){r.markAsProcessed(),i.resetCachedMaterial();var s=new S.EffectFallbacks;r.FOG&&s.addFallback(1,"FOG"),r.LOGARITHMICDEPTH&&s.addFallback(0,"LOGARITHMICDEPTH"),S.MaterialHelper.HandleFallbacksForShadows(r,s,this.maxSimultaneousLights),r.NUM_BONE_INFLUENCERS>0&&s.addCPUSkinningFallback(0,e);var l=[S.VertexBuffer.PositionKind];r.NORMAL&&l.push(S.VertexBuffer.NormalKind),r.UV1&&l.push(S.VertexBuffer.UVKind),r.UV2&&l.push(S.VertexBuffer.UV2Kind),r.VERTEXCOLOR&&l.push(S.VertexBuffer.ColorKind),S.MaterialHelper.PrepareAttributesForBones(l,e,r,s),S.MaterialHelper.PrepareAttributesForInstances(l,r);var u=r.toString(),c=["world","view","viewProjection","vEyePosition","vLightsType","vDiffuseColor","vSpecularColor","vFogInfos","vFogColor","pointSize","vNormalInfos","mBones","vClipPlane","vClipPlane2","vClipPlane3","vClipPlane4","vClipPlane5","vClipPlane6","normalMatrix","logarithmicDepthConstant","worldReflectionViewProjection","windDirection","waveLength","time","windForce","cameraPosition","bumpHeight","waveHeight","waterColor","waterColor2","colorBlendFactor","colorBlendFactor2","waveSpeed","waveCount"],f=["normalSampler","refractionSampler","reflectionSampler"],d=new Array;S.ImageProcessingConfiguration&&(S.ImageProcessingConfiguration.PrepareUniforms(c,r),S.ImageProcessingConfiguration.PrepareSamplers(f,r)),S.MaterialHelper.PrepareUniformsAndSamplersList({uniformsNames:c,uniformBuffersNames:d,samplers:f,defines:r,maxSimultaneousLights:this.maxSimultaneousLights}),t.setEffect(i.getEngine().createEffect("water",{attributes:l,uniformsNames:c,uniformBuffersNames:d,samplers:f,defines:u,fallbacks:s,onCompiled:this.onCompiled,onError:this.onError,indexParameters:{maxSimultaneousLights:this._maxSimultaneousLights}},o),r,this._materialContext)}return!(!t.effect||!t.effect.isReady())&&(r._renderId=i.getRenderId(),t.effect._wasPreviouslyReady=!0,!0)},t.prototype.bindForSubMesh=function(e,t,n){var r=this.getScene(),i=n.materialDefines;if(i){var o=n.effect;if(o&&this._mesh){this._activeEffect=o,this.bindOnlyWorldMatrix(e),this._activeEffect.setMatrix("viewProjection",r.getTransformMatrix()),S.MaterialHelper.BindBonesParameters(t,this._activeEffect),this._mustRebind(r,o)&&(this.bumpTexture&&S.MaterialFlags.BumpTextureEnabled&&(this._activeEffect.setTexture("normalSampler",this.bumpTexture),this._activeEffect.setFloat2("vNormalInfos",this.bumpTexture.coordinatesIndex,this.bumpTexture.level),this._activeEffect.setMatrix("normalMatrix",this.bumpTexture.getTextureMatrix())),S.MaterialHelper.BindClipPlane(this._activeEffect,r),this.pointsCloud&&this._activeEffect.setFloat("pointSize",this.pointSize),r.bindEyePosition(o)),this._activeEffect.setColor4("vDiffuseColor",this.diffuseColor,this.alpha*t.visibility),i.SPECULARTERM&&this._activeEffect.setColor4("vSpecularColor",this.specularColor,this.specularPower),r.lightsEnabled&&!this.disableLighting&&S.MaterialHelper.BindLights(r,t,this._activeEffect,i,this.maxSimultaneousLights),r.fogEnabled&&t.applyFog&&r.fogMode!==S.Scene.FOGMODE_NONE&&this._activeEffect.setMatrix("view",r.getViewMatrix()),S.MaterialHelper.BindFogParameters(r,t,this._activeEffect),S.MaterialHelper.BindLogDepth(i,this._activeEffect,r),S.MaterialFlags.ReflectionTextureEnabled&&(this._activeEffect.setTexture("refractionSampler",this._refractionRTT),this._activeEffect.setTexture("reflectionSampler",this._reflectionRTT));var a=this._mesh.getWorldMatrix().multiply(this._reflectionTransform).multiply(r.getProjectionMatrix()),s=r.getEngine().getDeltaTime();s!==this._lastDeltaTime&&(this._lastDeltaTime=s,this._lastTime+=this._lastDeltaTime),this._activeEffect.setMatrix("worldReflectionViewProjection",a),this._activeEffect.setVector2("windDirection",this.windDirection),this._activeEffect.setFloat("waveLength",this.waveLength),this._activeEffect.setFloat("time",this._lastTime/1e5),this._activeEffect.setFloat("windForce",this.windForce),this._activeEffect.setFloat("waveHeight",this.waveHeight),this._activeEffect.setFloat("bumpHeight",this.bumpHeight),this._activeEffect.setColor4("waterColor",this.waterColor,1),this._activeEffect.setFloat("colorBlendFactor",this.colorBlendFactor),this._activeEffect.setColor4("waterColor2",this.waterColor2,1),this._activeEffect.setFloat("colorBlendFactor2",this.colorBlendFactor2),this._activeEffect.setFloat("waveSpeed",this.waveSpeed),this._activeEffect.setFloat("waveCount",this.waveCount),this._imageProcessingConfiguration&&!this._imageProcessingConfiguration.applyByPostProcess&&this._imageProcessingConfiguration.bind(this._activeEffect),this._afterBind(t,this._activeEffect)}}},t.prototype._createRenderTargets=function(e,t){var n,r=this;this._refractionRTT=new S.RenderTargetTexture(name+"_refraction",{width:t.x,height:t.y},e,!1,!0),this._refractionRTT.wrapU=S.Constants.TEXTURE_MIRROR_ADDRESSMODE,this._refractionRTT.wrapV=S.Constants.TEXTURE_MIRROR_ADDRESSMODE,this._refractionRTT.ignoreCameraViewport=!0,this._reflectionRTT=new S.RenderTargetTexture(name+"_reflection",{width:t.x,height:t.y},e,!1,!0),this._reflectionRTT.wrapU=S.Constants.TEXTURE_MIRROR_ADDRESSMODE,this._reflectionRTT.wrapV=S.Constants.TEXTURE_MIRROR_ADDRESSMODE,this._reflectionRTT.ignoreCameraViewport=!0;var i,o=null,a=S.Matrix.Zero();this._refractionRTT.onBeforeRender=function(){if(r._mesh&&(n=r._mesh.isVisible,r._mesh.isVisible=!1),!r.disableClipPlane){o=e.clipPlane;var t=r._mesh?r._mesh.position.y:0;e.clipPlane=S.Plane.FromPositionAndNormal(new S.Vector3(0,t+.05,0),new S.Vector3(0,1,0))}},this._refractionRTT.onAfterRender=function(){r._mesh&&(r._mesh.isVisible=n),r.disableClipPlane||(e.clipPlane=o)},this._reflectionRTT.onBeforeRender=function(){if(r._mesh&&(n=r._mesh.isVisible,r._mesh.isVisible=!1),!r.disableClipPlane){o=e.clipPlane;var t=r._mesh?r._mesh.position.y:0;e.clipPlane=S.Plane.FromPositionAndNormal(new S.Vector3(0,t-.05,0),new S.Vector3(0,-1,0)),S.Matrix.ReflectionToRef(e.clipPlane,a)}i=e.getViewMatrix(),a.multiplyToRef(i,r._reflectionTransform),e.setTransformMatrix(r._reflectionTransform,e.getProjectionMatrix()),e.getEngine().cullBackFaces=!1,e._mirroredCameraPosition=S.Vector3.TransformCoordinates(e.activeCamera.position,a)},this._reflectionRTT.onAfterRender=function(){r._mesh&&(r._mesh.isVisible=n),e.clipPlane=o,e.setTransformMatrix(i,e.getProjectionMatrix()),e.getEngine().cullBackFaces=null,e._mirroredCameraPosition=null}},t.prototype.getAnimatables=function(){var e=[];return this.bumpTexture&&this.bumpTexture.animations&&this.bumpTexture.animations.length>0&&e.push(this.bumpTexture),this._reflectionRTT&&this._reflectionRTT.animations&&this._reflectionRTT.animations.length>0&&e.push(this._reflectionRTT),this._refractionRTT&&this._refractionRTT.animations&&this._refractionRTT.animations.length>0&&e.push(this._refractionRTT),e},t.prototype.getActiveTextures=function(){var t=e.prototype.getActiveTextures.call(this);return this._bumpTexture&&t.push(this._bumpTexture),t},t.prototype.hasTexture=function(t){return!!e.prototype.hasTexture.call(this,t)||this._bumpTexture===t},t.prototype.dispose=function(t){this.bumpTexture&&this.bumpTexture.dispose();var n=this.getScene().customRenderTargets.indexOf(this._refractionRTT);-1!=n&&this.getScene().customRenderTargets.splice(n,1),n=-1,-1!=(n=this.getScene().customRenderTargets.indexOf(this._reflectionRTT))&&this.getScene().customRenderTargets.splice(n,1),this._reflectionRTT&&this._reflectionRTT.dispose(),this._refractionRTT&&this._refractionRTT.dispose(),this._imageProcessingConfiguration&&this._imageProcessingObserver&&this._imageProcessingConfiguration.onUpdateParameters.remove(this._imageProcessingObserver),e.prototype.dispose.call(this,t)},t.prototype.clone=function(e){var n=this;return S.SerializationHelper.Clone((function(){return new t(e,n.getScene())}),this)},t.prototype.serialize=function(){var e=S.SerializationHelper.Serialize(this);if(e.customType="BABYLON.WaterMaterial",e.renderList=[],this._refractionRTT&&this._refractionRTT.renderList)for(var t=0;t<this._refractionRTT.renderList.length;t++)e.renderList.push(this._refractionRTT.renderList[t].id);return e},t.prototype.getClassName=function(){return"WaterMaterial"},t.Parse=function(e,n,r){var i=S.SerializationHelper.Parse((function(){return new t(e.name,n)}),e,n,r);return i._waitingRenderList=e.renderList,i},t.CreateDefaultMesh=function(e,t){return Object(S.CreateGround)(e,{width:512,height:512,subdivisions:32,updatable:!1},t)},V([Object(S.serializeAsTexture)("bumpTexture")],t.prototype,"_bumpTexture",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"bumpTexture",void 0),V([Object(S.serializeAsColor3)()],t.prototype,"diffuseColor",void 0),V([Object(S.serializeAsColor3)()],t.prototype,"specularColor",void 0),V([Object(S.serialize)()],t.prototype,"specularPower",void 0),V([Object(S.serialize)("disableLighting")],t.prototype,"_disableLighting",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsLightsDirty")],t.prototype,"disableLighting",void 0),V([Object(S.serialize)("maxSimultaneousLights")],t.prototype,"_maxSimultaneousLights",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsLightsDirty")],t.prototype,"maxSimultaneousLights",void 0),V([Object(S.serialize)()],t.prototype,"windForce",void 0),V([Object(S.serializeAsVector2)()],t.prototype,"windDirection",void 0),V([Object(S.serialize)()],t.prototype,"waveHeight",void 0),V([Object(S.serialize)()],t.prototype,"bumpHeight",void 0),V([Object(S.serialize)("bumpSuperimpose")],t.prototype,"_bumpSuperimpose",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsMiscDirty")],t.prototype,"bumpSuperimpose",void 0),V([Object(S.serialize)("fresnelSeparate")],t.prototype,"_fresnelSeparate",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsMiscDirty")],t.prototype,"fresnelSeparate",void 0),V([Object(S.serialize)("bumpAffectsReflection")],t.prototype,"_bumpAffectsReflection",void 0),V([Object(S.expandToProperty)("_markAllSubMeshesAsMiscDirty")],t.prototype,"bumpAffectsReflection",void 0),V([Object(S.serializeAsColor3)()],t.prototype,"waterColor",void 0),V([Object(S.serialize)()],t.prototype,"colorBlendFactor",void 0),V([Object(S.serializeAsColor3)()],t.prototype,"waterColor2",void 0),V([Object(S.serialize)()],t.prototype,"colorBlendFactor2",void 0),V([Object(S.serialize)()],t.prototype,"waveLength",void 0),V([Object(S.serialize)()],t.prototype,"waveSpeed",void 0),V([Object(S.serialize)()],t.prototype,"waveCount",void 0),V([Object(S.serialize)()],t.prototype,"disableClipPlane",void 0),V([Object(S.serialize)()],t.prototype,"useLogarithmicDepth",null),t}(S.PushMaterial);Object(S.RegisterClass)("BABYLON.WaterMaterial",We);class Ge{constructor(e,t){this.scene=e,this.enableShadows=t,this.shadowComponents=new Map,this.initBaseShadowPlaneMesh()}initBaseShadowPlaneMesh(){if(this.enableShadows){const e=S.MeshBuilder.CreateGround("shadowPlaneMesh",{width:50,height:50},this.scene);e.setEnabled(!1),e.material=new Ce("shadowOnlyMaterial",this.scene),e.receiveShadows=!0,e.isPickable=!1,e.alphaIndex=0,this.shadowPlaneBaseMesh=e}}createShadowPlane(e){const t=this.shadowComponents.get(e);let n=null==t?void 0:t.plane;return!n&&this.shadowPlaneBaseMesh&&(n=this.shadowPlaneBaseMesh.clone("shadowPlaneInstance_"+e),n.setEnabled(!0)),n}onMeshDispose(e){const t=this.shadowComponents.get(e);t&&(this.setRefresh(!0,e),t.plane.dispose(),t.light.dispose(),t.generator.dispose(),this.shadowComponents.delete(e))}generateShadow(e,t,n,r){var i;if(!this.enableShadows||0===t.length)return;const o=this.createShadowPlane(e);if(!o)return;const a=new S.DirectionalLight("directionalLight",new S.Vector3(0,-100,0),this.scene);a.includedOnlyMeshes.push(...t),a.includedOnlyMeshes.push(o);const s=new S.ShadowGenerator(128,a);s.setDarkness(.6),s.useExponentialShadowMap=!1,s.useBlurExponentialShadowMap=!0,s.blurScale=2,s.blurBoxOffset=5,s.transparencyShadow=!0,s.enableSoftTransparentShadow=!0,s.onAfterShadowMapRenderObservable.add(()=>this.setRefresh(!1,e));const l=s.getShadowMap();null===(i=null==l?void 0:l.renderList)||void 0===i||i.push(...t),this.shadowComponents.set(e,{plane:o,generator:s,light:a}),this.update(e,n,r);const u=new S.Plane(0,-1,0,0);s.customAllowRendering=()=>(u.d=o.absolutePosition.y,this.scene.clipPlane=u,!0),s.onBeforeShadowMapRenderObservable.add(e=>{u.d=o.absolutePosition.y,this.scene.clipPlane=u,Object(S.bindClipPlane)(e,this.scene,this.scene)}),s.onAfterShadowMapRenderObservable.add(()=>{this.scene.clipPlane=null}),t.forEach(t=>{const n=t.onAfterWorldMatrixUpdateObservable.add(()=>this.setRefresh(!0,e)),r=t.onDisposeObservable.addOnce(()=>this.onMeshDispose(e));null==l||l.onDisposeObservable.addOnce(()=>{t.onAfterWorldMatrixUpdateObservable.remove(n),t.onDisposeObservable.remove(r)})})}update(e,t,n){const r=this.shadowComponents.get(e);r&&(r.plane.position=t.clone(),r.plane.position.y+=Ge.SHADOW_PLANE_OFFSET,r.plane.rotationQuaternion=n)}setRefresh(e,t){const n=e?S.RenderTargetTexture.REFRESHRATE_RENDER_ONEVERYFRAME:S.RenderTargetTexture.REFRESHRATE_RENDER_ONCE,r=this.shadowComponents.get(t);if(!r)return;const i=r.generator.getShadowMap();i&&i.refreshRate!==n&&(i.refreshRate=n,r.light.autoUpdateExtends=n===S.RenderTargetTexture.REFRESHRATE_RENDER_ONEVERYFRAME)}disposeForNode(e){this.onMeshDispose(e)}dispose(){var e;this.shadowComponents.forEach((e,t)=>this.onMeshDispose(t)),this.shadowComponents.clear(),null===(e=this.shadowPlaneBaseMesh)||void 0===e||e.dispose(!1,!0)}}Ge.SHADOW_PLANE_OFFSET=1e-4;var Xe={adjustable:"slider",button:"button",header:"heading",image:"img",imagebutton:null,keyboardkey:null,label:null,link:"link",none:"presentation",search:"search",summary:"region",text:null},Ye=function(e){var t=e.accessibilityRole;if(t){var n=Xe[t];if(null!==n)return n||t}},Ke={article:"article",banner:"header",blockquote:"blockquote",code:"code",complementary:"aside",contentinfo:"footer",deletion:"del",emphasis:"em",figure:"figure",insertion:"ins",form:"form",list:"ul",listitem:"li",main:"main",navigation:"nav",region:"section",strong:"strong"},Ze={},qe={isDisabled:function(e){return e.disabled||Array.isArray(e.accessibilityStates)&&e.accessibilityStates.indexOf("disabled")>-1},propsToAccessibilityComponent:function(e){if(void 0===e&&(e=Ze),"label"===e.accessibilityRole)return"label";var t=Ye(e);if(t){if("heading"===t){var n=e.accessibilityLevel||e["aria-level"];return null!=n?"h"+n:"h1"}return Ke[t]}},propsToAriaRole:Ye},Qe=n(3),Je=n.n(Qe);var $e={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexOrder:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,fontWeight:!0,gridRow:!0,gridRowEnd:!0,gridRowGap:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnGap:!0,gridColumnStart:!0,lineClamp:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0,scale:!0,scaleX:!0,scaleY:!0,scaleZ:!0,shadowOpacity:!0},et=["ms","Moz","O","Webkit"];Object.keys($e).forEach((function(e){et.forEach((function(t){$e[function(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}(t,e)]=$e[e]}))}));var tt=$e,nt=function(e){return"currentcolor"===e||"currentColor"===e||"inherit"===e||0===e.indexOf("var(")},rt=n(29),it=n.n(rt),ot=function(e){if(null==e)return e;var t=it()(e);return null!=t?t=(t<<24|t>>>8)>>>0:void 0},at=function(e,t){if(void 0===t&&(t=1),null!=e){if("string"==typeof e&&nt(e))return e;var n=ot(e);if(null!=n)return"rgba("+(n>>16&255)+","+(n>>8&255)+","+(255&n)+","+((n>>24&255)/255*t).toFixed(2)+")"}},st={backgroundColor:!0,borderColor:!0,borderTopColor:!0,borderRightColor:!0,borderBottomColor:!0,borderLeftColor:!0,color:!0,shadowColor:!0,textDecorationColor:!0,textShadowColor:!0};function lt(e,t){var n=e;return null!=t&&tt[t]||"number"!=typeof e?null!=t&&st[t]&&(n=at(e)):n=e+"px",n}var ut={height:0,width:0},ct=function(e){var t=e.shadowColor,n=e.shadowOffset,r=e.shadowOpacity,i=e.shadowRadius,o=n||ut,a=o.height,s=lt(o.width),l=lt(a),u=lt(i||0),c=at(t||"black",r);if(null!=c&&null!=s&&null!=l&&null!=u)return s+" "+l+" "+u+" "+c};var ft={height:0,width:0};var dt=function(e){var t,n,r,i,o=e.shadowColor,a=e.shadowOffset,s=e.shadowOpacity,l=e.shadowRadius,u=e.textShadowColor,c=e.textShadowOffset,f=e.textShadowRadius,d=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["shadowColor","shadowOffset","shadowOpacity","shadowRadius","textShadowColor","textShadowOffset","textShadowRadius"]);return null==o&&null==a&&null==s&&null==l||(t=d,r=(n=e).boxShadow,null!=(i=ct(n))&&(t.boxShadow=r?r+", "+i:i)),null==u&&null==c&&null==f||function(e,t){var n=t.textShadowColor,r=t.textShadowOffset,i=t.textShadowRadius,o=r||ft,a=o.height,s=o.width,l=i||0,u=lt(s),c=lt(a),f=lt(l),d=lt(n,"textShadowColor");!d||0===a&&0===s&&0===l||null==u||null==c||null==f||(e.textShadow=u+" "+c+" "+f+" "+d)}(d,e),d},pt=Array.prototype.slice;function ht(e){var t,n={},r={};null!=e&&pt.call(e.cssRules).forEach((function(e,i){var o=e.cssText;if(o.indexOf("stylesheet-group")>-1)t=function(e){return Number(e.selectorText.split(/["']/)[1])}(e),n[t]={start:i,rules:[o]};else{var a=gt(o);null!=a&&(r[a]=!0,n[t].rules.push(o))}}));function i(e,t,r){var i=mt(n),o=i.indexOf(t)+1,a=i[o],s=null!=a&&null!=n[a].start?n[a].start:e.cssRules.length,l=function(e,t,n){try{return e.insertRule(t,n),!0}catch(e){return!1}}(e,r,s);if(l){null==n[t].start&&(n[t].start=s);for(var u=o;u<i.length;u+=1){var c=i[u],f=n[c].start||0;n[c].start=f+1}}return l}return{getTextContent:function(){return mt(n).map((function(e){return n[e].rules.join("\n")})).join("\n")},insert:function(t,o){var a=Number(o);if(null==n[a]){var s=function(e){return'[stylesheet-group="'+e+'"]{}'}(a);n[a]={start:null,rules:[s]},null!=e&&i(e,a,s)}var l=gt(t);null!=l&&null==r[l]&&(r[l]=!0,n[a].rules.push(t),null!=e&&(i(e,a,t)||n[a].rules.pop()))}}}function mt(e){return Object.keys(e).map(Number).sort((function(e,t){return e>t?1:-1}))}var vt=/\s*([,])\s*/g;function gt(e){var t=e.split("{")[0].trim();return""!==t?t.replace(vt,"$1"):null}var yt=function(e){return function e(t,n){for(var r=0;r<t.length;r++){var i=t[r];Array.isArray(i)?e(i,n):null!=i&&!1!==i&&n.push(i)}return n}(e,[])},bt={},St={},xt=1,_t=function(e){return"r-"+e},Et=function(){function e(){}return e.register=function(e){var t=xt++;var n=_t(t);return St[n]=e,t},e.getByID=function(e){if(!e)return bt;var t=_t(e),n=St[t];return n||(console.warn("Invalid style with id `"+e+"`. Skipping ..."),bt)},e}(),Ct=n(2),Tt=n.n(Ct);var Pt=function e(t){if(t){if(!Array.isArray(t))return function(e){return"number"==typeof e?Et.getByID(e):e}(t);for(var n={},r=0,i=t.length;r<i;++r){var o=e(t[r]);if(o)for(var a in o){var s=o[a];n[a]=s}}return n}},At=!0,Rt=!1,Ot=!0,wt=!1,Mt=function(){return!!wt||Ot&&Rt},Lt=function(){Je.a.canUseDOM&&document.documentElement&&document.documentElement.setAttribute&&document.documentElement.setAttribute("dir",Mt()?"rtl":"ltr")},It={allowRTL:function(e){Ot=e,Lt()},forceRTL:function(e){wt=e,Lt()},getConstants:function(){return{doLeftAndRightSwapInRTL:At,isRTL:Mt()}},setPreferredLanguageRTL:function(e){Rt=e,Lt()},swapLeftAndRightInRTL:function(e){At=e}},Dt=/^[+-]?\d*(?:\.\d+)?(?:[Ee][+-]?\d+)?(%|\w*)/,Ft=function(e,t){var n;return"string"==typeof e?""+parseFloat(e)*t+e.match(Dt)[1]:(n=e,!isNaN(parseFloat(n))&&isFinite(n)?e*t:void 0)},Nt={},Bt={borderTopLeftRadius:"borderTopRightRadius",borderTopRightRadius:"borderTopLeftRadius",borderBottomLeftRadius:"borderBottomRightRadius",borderBottomRightRadius:"borderBottomLeftRadius",borderLeftColor:"borderRightColor",borderLeftStyle:"borderRightStyle",borderLeftWidth:"borderRightWidth",borderRightColor:"borderLeftColor",borderRightStyle:"borderLeftStyle",borderRightWidth:"borderLeftWidth",left:"right",marginLeft:"marginRight",marginRight:"marginLeft",paddingLeft:"paddingRight",paddingRight:"paddingLeft",right:"left"},Vt={borderTopStartRadius:"borderTopLeftRadius",borderTopEndRadius:"borderTopRightRadius",borderBottomStartRadius:"borderBottomLeftRadius",borderBottomEndRadius:"borderBottomRightRadius",borderStartColor:"borderLeftColor",borderStartStyle:"borderLeftStyle",borderStartWidth:"borderLeftWidth",borderEndColor:"borderRightColor",borderEndStyle:"borderRightStyle",borderEndWidth:"borderRightWidth",end:"right",marginStart:"marginLeft",marginEnd:"marginRight",paddingStart:"paddingLeft",paddingEnd:"paddingRight",start:"left"},kt={clear:!0,float:!0,textAlign:!0},Ut=function(e){return Ft(e,-1)},zt=function(e){var t=It.getConstants(),n=t.doLeftAndRightSwapInRTL,r=t.isRTL,i=e||Nt,o={},a={};for(var s in i)if(Object.prototype.hasOwnProperty.call(i,s)){var l=i[s],u=s,c=l;if(Vt.hasOwnProperty(s)){var f=Vt[s];u=r?Bt[f]:f}else r&&n&&Bt[s]&&(u=Bt[s]);if(kt.hasOwnProperty(s)&&("start"===l?c=r?"right":"left":"end"===l?c=r?"left":"right":r&&n&&("left"===l?c="right":"right"===l&&(c="left"))),"transitionProperty"===u)if(Vt.hasOwnProperty(c)){var d=Vt[l];c=r?Bt[d]:d}else if(r&&n){var p=Bt[l];null!=p&&(c=p)}if(r&&"textShadowOffset"===u){var h=Ut(c.width);c.width=h,a[u]=c}else o[u]||(a[u]=c);Vt[s]&&(o[u]=!0)}return a},jt={reset:0,modality:.1,classicReset:.5,classic:1,atomic:2.2,custom:{borderColor:2,borderRadius:2,borderStyle:2,borderWidth:2,display:2,flex:2,margin:2,overflow:2,overscrollBehavior:2,padding:2,marginHorizontal:2.1,marginVertical:2.1,paddingHorizontal:2.1,paddingVertical:2.1}},Ht={borderColor:["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],borderRadius:["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],borderStyle:["borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle"],borderWidth:["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"],margin:["marginTop","marginRight","marginBottom","marginLeft"],marginHorizontal:["marginRight","marginLeft"],marginVertical:["marginTop","marginBottom"],overflow:["overflowX","overflowY"],overscrollBehavior:["overscrollBehaviorX","overscrollBehaviorY"],padding:["paddingTop","paddingRight","paddingBottom","paddingLeft"],paddingHorizontal:["paddingRight","paddingLeft"],paddingVertical:["paddingTop","paddingBottom"]},Wt='-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif',Gt={},Xt=!Qe.canUseDOM||null!=window.CSS&&null!=window.CSS.supports&&(window.CSS.supports("text-decoration-line","none")||window.CSS.supports("-webkit-text-decoration-line","none")),Yt=function(e){var t=Object.keys(e)[0],n=e[t];return"matrix"===t||"matrix3d"===t?t+"("+n.join(",")+")":t+"("+lt(n,t)+")"},Kt=function(e){if(!e)return Gt;var t={};return Object.keys(e).sort().forEach((function(n){var r=lt(e[n],n);if(null!=r)switch(n){case"elevation":case"overlayColor":case"resizeMode":case"tintColor":break;case"aspectRatio":t[n]=r.toString();break;case"backgroundClip":"text"===r&&(t.backgroundClip=r,t.WebkitBackgroundClip=r);break;case"flex":-1===r?(t.flexGrow=0,t.flexShrink=1,t.flexBasis="auto"):t.flex=r;break;case"font":t[n]=r.replace("System",Wt);break;case"fontFamily":if(r.indexOf("System")>-1){var i=r.split(/,\s*/);i[i.indexOf("System")]=Wt,t[n]=i.join(",")}else t[n]="monospace"===r?"monospace,monospace":r;break;case"fontVariant":Array.isArray(r)&&r.length>0&&(t.fontVariant=r.join(" "));break;case"textAlignVertical":t.verticalAlign="center"===r?"middle":r;break;case"textDecorationLine":Xt?t.textDecorationLine=r:t.textDecoration=r;break;case"transform":case"transformMatrix":!function(e,t){var n=t.transform;Array.isArray(t.transform)&&(n=t.transform.map(Yt).join(" ")),e.transform=n}(t,e);break;case"writingDirection":t.direction=r;break;default:var o=Ht[n];o?o.forEach((function(n,i){void 0===e[n]&&(t[n]=r)})):t[n]=Array.isArray(r)?r.join(","):r}})),t};var Zt=function(e){return function(e,t){for(var n,r=e.length,i=t^r,o=0;r>=4;)n=1540483477*(65535&(n=255&e.charCodeAt(o)|(255&e.charCodeAt(++o))<<8|(255&e.charCodeAt(++o))<<16|(255&e.charCodeAt(++o))<<24))+((1540483477*(n>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),r-=4,++o;switch(r){case 3:i^=(255&e.charCodeAt(o+2))<<16;case 2:i^=(255&e.charCodeAt(o+1))<<8;case 1:i=1540483477*(65535&(i^=255&e.charCodeAt(o)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0}(e,1).toString(36)},qt=n(7),Qt=n(14),Jt=n.n(Qt),$t=n(15),en=n.n($t),tn=n(16),nn=n.n(tn),rn=n(17),on=n.n(rn),an=n(18),sn=n.n(an),ln=n(19),un=n.n(ln),cn=n(20),fn=n.n(cn),dn=n(21),pn=n.n(dn),hn=n(22),mn=n.n(hn),vn=n(23),gn=n.n(vn),yn=n(24),bn=n.n(yn),Sn=n(25),xn=n.n(Sn),_n=n(26),En=n.n(_n),Cn=n(27),Tn=n.n(Cn),Pn=n(28),An=n.n(Pn),Rn=["Webkit"],On=["Moz"],wn=["ms"],Mn=["Webkit","Moz"],Ln=["Webkit","ms"],In=["Webkit","Moz","ms"],Dn={plugins:[en.a,nn.a,on.a,sn.a,un.a,fn.a,pn.a,mn.a,gn.a,bn.a,xn.a,En.a,Tn.a,An.a],prefixMap:{animation:Rn,animationDelay:Rn,animationDirection:Rn,animationFillMode:Rn,animationDuration:Rn,animationIterationCount:Rn,animationName:Rn,animationPlayState:Rn,animationTimingFunction:Rn,appearance:Mn,userSelect:In,textEmphasisPosition:Rn,textEmphasis:Rn,textEmphasisStyle:Rn,textEmphasisColor:Rn,boxDecorationBreak:Rn,clipPath:Rn,maskImage:Rn,maskMode:Rn,maskRepeat:Rn,maskPosition:Rn,maskClip:Rn,maskOrigin:Rn,maskSize:Rn,maskComposite:Rn,mask:Rn,maskBorderSource:Rn,maskBorderMode:Rn,maskBorderSlice:Rn,maskBorderWidth:Rn,maskBorderOutset:Rn,maskBorderRepeat:Rn,maskBorder:Rn,maskType:Rn,textDecorationStyle:Rn,textDecorationSkip:Rn,textDecorationLine:Rn,textDecorationColor:Rn,filter:Rn,fontFeatureSettings:Rn,breakAfter:In,breakBefore:In,breakInside:In,columnCount:Mn,columnFill:Mn,columnGap:Mn,columnRule:Mn,columnRuleColor:Mn,columnRuleStyle:Mn,columnRuleWidth:Mn,columns:Mn,columnSpan:Mn,columnWidth:Mn,writingMode:Ln,flex:Ln,flexBasis:Rn,flexDirection:Ln,flexGrow:Rn,flexFlow:Ln,flexShrink:Rn,flexWrap:Ln,alignContent:Rn,alignItems:Rn,alignSelf:Rn,justifyContent:Rn,order:Rn,transform:Rn,transformOrigin:Rn,transformOriginX:Rn,transformOriginY:Rn,backfaceVisibility:Rn,perspective:Rn,perspectiveOrigin:Rn,transformStyle:Rn,transformOriginZ:Rn,backdropFilter:Rn,fontKerning:Rn,scrollSnapType:Ln,scrollSnapPointsX:Ln,scrollSnapPointsY:Ln,scrollSnapDestination:Ln,scrollSnapCoordinate:Ln,shapeImageThreshold:Rn,shapeImageMargin:Rn,shapeImageOutside:Rn,hyphens:In,flowInto:Ln,flowFrom:Ln,regionFragment:Ln,textOrientation:Rn,textAlignLast:On,tabSize:On,wrapFlow:wn,wrapThrough:wn,wrapMargin:wn,touchAction:wn,textSizeAdjust:["ms","Webkit"],borderImage:Rn,borderImageOutset:Rn,borderImageRepeat:Rn,borderImageSlice:Rn,borderImageSource:Rn,borderImageWidth:Rn,transitionDelay:Rn,transitionDuration:Rn,transitionProperty:Rn,transitionTimingFunction:Rn}},Fn=Jt()(Dn),Nn=Fn;function Bn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bn(Object(n),!0).forEach((function(t){kn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Un={get:function(e,t){if(null!=Un[e]&&Un[e].hasOwnProperty(t)&&null!=Un[e][t])return Un[e][t]},set:function(e,t,n){return null==Un[e]&&(Un[e]={}),Un[e][t]=n}};function zn(e){return Object.keys(e).sort().reduce((function(t,n){var r=e[n];if(null!=r){var i=Wn(r,n),o=Un.get(n,i);if(null!=o){t[o.identifier]=o}else{var a=Xn("r",n,r),s=function(e,t,n){var r=[],i="."+e;switch(t){case"animationKeyframes":var o=Yn(n),a=o.animationNames,s=o.rules,l=Gn({animationName:a.join(",")});r.push.apply(r,[""+i+l].concat(s));break;case"placeholderTextColor":var u=Gn({color:n,opacity:1});r.push(i+"::-webkit-input-placeholder"+u,i+"::-moz-placeholder"+u,i+":-ms-input-placeholder"+u,i+"::placeholder"+u);break;case"pointerEvents":var c=n;if("auto"===n||"box-only"===n){if(c="auto!important","box-only"===n){var f=Gn({pointerEvents:"none"});r.push(i+">*"+f)}}else if(("none"===n||"box-none"===n)&&(c="none!important","box-none"===n)){var d=Gn({pointerEvents:"auto"});r.push(i+">*"+d)}var p=Gn({pointerEvents:c});r.push(""+i+p);break;case"scrollbarWidth":"none"===n&&r.push(i+"::-webkit-scrollbar{display:none}");var h=Gn({scrollbarWidth:n});r.push(""+i+h);break;default:var m,v=Gn(((m={})[t]=n,m));r.push(""+i+v)}return r}(a,n,r),l=Un.set(n,i,{property:n,value:Wn(r,n),identifier:a,rules:s});t[a]=l}}return t}),{})}function jn(e,t){var n,r,i=Xn("css",t,e),o=e.animationKeyframes,a=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["animationKeyframes"]),s=[],l="."+i;if(null!=o){var u=Yn(o),c=u.animationNames,f=u.rules;r=c.join(","),s.push.apply(s,f)}var d=Gn(Vn(Vn({},a),{},{animationName:r}));return s.push(""+l+d),(n={})[i]={identifier:i,rules:s},n}function Hn(e){return function(e){var t=Fn(e);return Object.keys(t).forEach((function(e){var n=t[e];Array.isArray(n)&&(t[e]=n[n.length-1])})),t}(Kt(e))}function Wn(e,t){var n=lt(e,t);return"string"!=typeof n?JSON.stringify(n||""):n}function Gn(e){var t=Nn(Kt(e));return"{"+Object.keys(t).map((function(e){var n=t[e],r=Object(qt.default)(e);return Array.isArray(n)?n.map((function(e){return r+":"+e})).join(";"):r+":"+n})).sort().join(";")+";}"}function Xn(e,t,n){return e+"-"+Zt(t+Wn(n,t))}function Yn(e){if("number"==typeof e)throw new Error("Invalid CSS keyframes type: "+typeof e);var t=[],n=[];return(Array.isArray(e)?e:[e]).forEach((function(e){if("string"==typeof e)t.push(e);else{var r=function(e){var t=Xn("r","animation",e),n="{"+Object.keys(e).map((function(t){return""+t+Gn(e[t])})).join("")+"}",r=["-webkit-",""].map((function(e){return"@"+e+"keyframes "+t+n}));return{identifier:t,rules:r}}(e),i=r.identifier,o=r.rules;t.push(i),n.push.apply(n,o)}})),{animationNames:t,rules:n}}var Kn=["html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:rgba(0,0,0,0);}","body{margin:0;}","button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0;}","input::-webkit-search-cancel-button,input::-webkit-search-decoration,input::-webkit-search-results-button,input::-webkit-search-results-decoration{display:none;}"],Zn=function(e){if(e(":focus:not([data-focusvisible-polyfill]){outline: none;}"),Qe.canUseDOM){var t=!0,n=!1,r=null,i={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};document.addEventListener("keydown",(function(e){"Tab"!==e.key&&(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)||(o(document.activeElement)&&a(document.activeElement),t=!0)}),!0),document.addEventListener("mousedown",l,!0),document.addEventListener("pointerdown",l,!0),document.addEventListener("touchstart",l,!0),document.addEventListener("focus",(function(e){var n,r,s,l;o(e.target)&&(t||(n=e.target,r=n.type,s=n.tagName,l=n.readOnly,"INPUT"===s&&i[r]&&!l||"TEXTAREA"===s&&!l||n.isContentEditable))&&a(e.target)}),!0),document.addEventListener("blur",(function(e){o(e.target)&&e.target.hasAttribute("data-focusvisible-polyfill")&&(n=!0,window.clearTimeout(r),r=window.setTimeout((function(){n=!1,window.clearTimeout(r)}),100),s(e.target))}),!0),document.addEventListener("visibilitychange",(function(e){"hidden"===document.visibilityState&&(n&&(t=!0),u())}),!0),u()}function o(e){return!!(e&&e!==document&&"HTML"!==e.nodeName&&"BODY"!==e.nodeName&&"classList"in e&&"contains"in e.classList)}function a(e){e.hasAttribute("data-focusvisible-polyfill")||e.setAttribute("data-focusvisible-polyfill",!0)}function s(e){e.removeAttribute("data-focusvisible-polyfill")}function l(e){!0===t&&function(){for(var e=document.querySelectorAll("[data-focusvisible-polyfill]"),t=0;t<e.length;t+=1)s(e[t])}(),t=!1}function u(){document.addEventListener("mousemove",c),document.addEventListener("mousedown",c),document.addEventListener("mouseup",c),document.addEventListener("pointermove",c),document.addEventListener("pointerdown",c),document.addEventListener("pointerup",c),document.addEventListener("touchmove",c),document.addEventListener("touchstart",c),document.addEventListener("touchend",c)}function c(e){"HTML"!==e.target.nodeName&&(t=!1,document.removeEventListener("mousemove",c),document.removeEventListener("mousedown",c),document.removeEventListener("mouseup",c),document.removeEventListener("pointermove",c),document.removeEventListener("pointerdown",c),document.removeEventListener("pointerup",c),document.removeEventListener("touchmove",c),document.removeEventListener("touchstart",c),document.removeEventListener("touchend",c))}};var qn=function(e){return"rn-"+e},Qn=function(e){return e.join(" ").trim()},Jn=function(){var e,t,n,r={css:{},ltr:{},rtl:{},rtlNoSwap:{}},i=function(){e={css:{},ltr:{},rtl:{},rtlNoSwap:{}},t=ht(function(e){if(Qe.canUseDOM){var t=document.getElementById(e);if(null!=t)return t.sheet;var n=document.createElement("style");n.setAttribute("id",e);var r=document.head;return r&&r.insertBefore(n,r.firstChild),n.sheet}return null}("react-native-stylesheet")),n={},Zn((function(e){return t.insert(e,jt.modality)})),Kn.forEach((function(e){t.insert(e,jt.reset)}))};function o(r){var i=It.getConstants(),o=i.doLeftAndRightSwapInRTL,a=i.isRTL?o?"rtl":"rtlNoSwap":"ltr";if(!e[a][r]){var s=zn(dt(zt(Pt(r))));Object.keys(s).forEach((function(e){var r=s[e],i=r.identifier,o=r.property,a=r.rules,l=r.value;!function(e,t,r){n[t]||(n[t]={}),n[t][r]=e}(i,o,l),a.forEach((function(e){var n=jt.custom[o]||jt.atomic;t.insert(e,n)}))})),e[a][r]=!0}}function a(e,i){var o=It.getConstants(),a=o.doLeftAndRightSwapInRTL,s=o.isRTL?a?"rtl":"rtlNoSwap":"ltr";if(null!=i&&null!=r[s][i])return r[s][i];var l=Pt(e),u=dt(zt(l)),c=Object.keys(u).sort().reduce((function(e,r){var i=u[r];if(null!=i){var o=function(e,t){var r=Wn(t,e);return n[e]&&n[e].hasOwnProperty(r)&&n[e][r]}(r,i);if(o)e.classList.push(o);else if("animationKeyframes"===r||"placeholderTextColor"===r||"pointerEvents"===r||"scrollbarWidth"===r){var a,s=zn(((a={})[r]=i,a));Object.keys(s).forEach((function(n){var r=s[n],i=r.identifier,o=r.rules;e.classList.push(i),o.forEach((function(e){t.insert(e,jt.atomic)}))}))}else e.style||(e.style={}),e.style[r]=i}return e}),{classList:[]});return c.style&&(c.style=Hn(c.style)),null!=i&&(r[s][i]=c),c}return i(),{getStyleSheet:function(){var e=t.getTextContent();return Qe.canUseDOM||i(),{id:"react-native-stylesheet",textContent:e}},createCSS:function(e,t){var n={};return Object.keys(e).forEach((function(i){var o=jn(e[i],i);Object.keys(o).forEach((function(e){var a=o[e],s=a.identifier,l=a.rules;r.css[s]={group:t||jt.classic,rules:l},n[i]=s}))})),n},resolve:function(n,i){var s=[],l={};if(!n&&!i)return l;if(Array.isArray(i)&&yt(i).forEach((function(n){if(n){if(null==e.css[n]&&null!=r.css[n]){var i=r.css[n];i.rules.forEach((function(e){t.insert(e,i.group)})),e.css[n]=!0}s.push(n)}})),"number"==typeof n)o(n),l=a(n,qn(n));else if(Array.isArray(n)){for(var u=yt(n),c=!0,f="",d=0;d<u.length;d++){var p=u[d];"number"!=typeof p?c=!1:(c&&(f+=p+"-"),o(p))}l=a(u,c?qn(f):null)}else l=a(n);s.push.apply(s,l.classList);var h={className:Qn(s),classList:s};return l.style&&(h.style=l.style),h},get sheet(){return t}}}(),$n={create:function(e,t){return Jn.createCSS(e,t)}},er={position:"absolute",left:0,right:0,top:0,bottom:0},tr={absoluteFill:Et.register(er),absoluteFillObject:er,compose:function(e,t){return e&&t?[e,t]:e||t},create:function(e){var t={};return Object.keys(e).forEach((function(n){var r=e[n]&&Et.register(e[n]);t[n]=r})),t},flatten:Pt,hairlineWidth:1};Qe.canUseDOM&&window.__REACT_DEVTOOLS_GLOBAL_HOOK__&&(window.__REACT_DEVTOOLS_GLOBAL_HOOK__.resolveRNStyle=tr.flatten);var nr=tr;var rr={},ir=Object.prototype.hasOwnProperty,or=Array.isArray,ar=/[A-Z]/g;function sr(e){return"-"+e.toLowerCase()}function lr(e){return or(e)?e.join(" "):e}var ur=$n.create({reset:{backgroundColor:"transparent",color:"inherit",font:"inherit",listStyle:"none",margin:0,textAlign:"inherit",textDecoration:"none"},cursor:{cursor:"pointer"}},jt.classicReset),cr=nr.create({auto:{pointerEvents:"auto"},"box-none":{pointerEvents:"box-none"},"box-only":{pointerEvents:"box-only"},none:{pointerEvents:"none"}}),fr=function(e,t){t||(t=rr);var n=t,r=n.accessibilityActiveDescendant,i=n.accessibilityAtomic,o=n.accessibilityAutoComplete,a=n.accessibilityBusy,s=n.accessibilityChecked,l=n.accessibilityColumnCount,u=n.accessibilityColumnIndex,c=n.accessibilityColumnSpan,f=n.accessibilityControls,d=n.accessibilityCurrent,p=n.accessibilityDescribedBy,h=n.accessibilityDetails,m=n.accessibilityDisabled,v=n.accessibilityErrorMessage,g=n.accessibilityExpanded,y=n.accessibilityFlowTo,b=n.accessibilityHasPopup,S=n.accessibilityHidden,x=n.accessibilityInvalid,_=n.accessibilityKeyShortcuts,E=n.accessibilityLabel,C=n.accessibilityLabelledBy,T=n.accessibilityLevel,P=n.accessibilityLiveRegion,A=n.accessibilityModal,R=n.accessibilityMultiline,O=n.accessibilityMultiSelectable,w=n.accessibilityOrientation,M=n.accessibilityOwns,L=n.accessibilityPlaceholder,I=n.accessibilityPosInSet,D=n.accessibilityPressed,F=n.accessibilityReadOnly,N=n.accessibilityRequired,B=(n.accessibilityRole,n.accessibilityRoleDescription),V=n.accessibilityRowCount,k=n.accessibilityRowIndex,U=n.accessibilityRowSpan,z=n.accessibilitySelected,j=n.accessibilitySetSize,H=n.accessibilitySort,W=n.accessibilityValueMax,G=n.accessibilityValueMin,X=n.accessibilityValueNow,Y=n.accessibilityValueText,K=n.classList,Z=n.dataSet,q=n.focusable,Q=n.nativeID,J=n.pointerEvents,$=n.style,ee=n.testID,te=n.accessible,ne=n.accessibilityState,re=n.accessibilityValue,ie=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(n,["accessibilityActiveDescendant","accessibilityAtomic","accessibilityAutoComplete","accessibilityBusy","accessibilityChecked","accessibilityColumnCount","accessibilityColumnIndex","accessibilityColumnSpan","accessibilityControls","accessibilityCurrent","accessibilityDescribedBy","accessibilityDetails","accessibilityDisabled","accessibilityErrorMessage","accessibilityExpanded","accessibilityFlowTo","accessibilityHasPopup","accessibilityHidden","accessibilityInvalid","accessibilityKeyShortcuts","accessibilityLabel","accessibilityLabelledBy","accessibilityLevel","accessibilityLiveRegion","accessibilityModal","accessibilityMultiline","accessibilityMultiSelectable","accessibilityOrientation","accessibilityOwns","accessibilityPlaceholder","accessibilityPosInSet","accessibilityPressed","accessibilityReadOnly","accessibilityRequired","accessibilityRole","accessibilityRoleDescription","accessibilityRowCount","accessibilityRowIndex","accessibilityRowSpan","accessibilitySelected","accessibilitySetSize","accessibilitySort","accessibilityValueMax","accessibilityValueMin","accessibilityValueNow","accessibilityValueText","classList","dataSet","focusable","nativeID","pointerEvents","style","testID","accessible","accessibilityState","accessibilityValue"]),oe=null!=ne&&!0===ne.disabled||m,ae=qe.propsToAriaRole(t);if(null!=ne)for(var se in ne){var le=ne[se];null!=le&&("disabled"===se||"hidden"===se?!0===le&&(ie["aria-"+se]=le,ie[se]=le):ie["aria-"+se]=le)}if(null!=re)for(var ue in re){var ce=re[ue];null!=ce&&(ie["aria-value"+ue]=ce)}if(null!=r&&(ie["aria-activedescendant"]=r),null!=i&&(ie["aria-atomic"]=i),null!=o&&(ie["aria-autocomplete"]=o),null!=a&&(ie["aria-busy"]=a),null!=s&&(ie["aria-checked"]=s),null!=l&&(ie["aria-colcount"]=l),null!=u&&(ie["aria-colindex"]=u),null!=c&&(ie["aria-colspan"]=c),null!=f&&(ie["aria-controls"]=lr(f)),null!=d&&(ie["aria-current"]=d),null!=p&&(ie["aria-describedby"]=lr(p)),null!=h&&(ie["aria-details"]=h),!0===oe&&(ie["aria-disabled"]=!0,"button"!==e&&"form"!==e&&"input"!==e&&"select"!==e&&"textarea"!==e||(ie.disabled=!0)),null!=v&&(ie["aria-errormessage"]=v),null!=g&&(ie["aria-expanded"]=g),null!=y&&(ie["aria-flowto"]=lr(y)),null!=b&&(ie["aria-haspopup"]=b),!0===S&&(ie["aria-hidden"]=S),null!=x&&(ie["aria-invalid"]=x),null!=_&&Array.isArray(_)&&(ie["aria-keyshortcuts"]=_.join(" ")),null!=E&&(ie["aria-label"]=E),null!=C&&(ie["aria-labelledby"]=lr(C)),null!=T&&(ie["aria-level"]=T),null!=P&&(ie["aria-live"]="none"===P?"off":P),null!=A&&(ie["aria-modal"]=A),null!=R&&(ie["aria-multiline"]=R),null!=O&&(ie["aria-multiselectable"]=O),null!=w&&(ie["aria-orientation"]=w),null!=M&&(ie["aria-owns"]=lr(M)),null!=L&&(ie["aria-placeholder"]=L),null!=I&&(ie["aria-posinset"]=I),null!=D&&(ie["aria-pressed"]=D),null!=F&&(ie["aria-readonly"]=F,"input"!==e&&"select"!==e&&"textarea"!==e||(ie.readOnly=!0)),null!=N&&(ie["aria-required"]=N,"input"!==e&&"select"!==e&&"textarea"!==e||(ie.required=!0)),null!=ae&&(ie.role="none"===ae?"presentation":ae),null!=B&&(ie["aria-roledescription"]=B),null!=V&&(ie["aria-rowcount"]=V),null!=k&&(ie["aria-rowindex"]=k),null!=U&&(ie["aria-rowspan"]=U),null!=z&&(ie["aria-selected"]=z),null!=j&&(ie["aria-setsize"]=j),null!=H&&(ie["aria-sort"]=H),null!=W&&(ie["aria-valuemax"]=W),null!=G&&(ie["aria-valuemin"]=G),null!=X&&(ie["aria-valuenow"]=X),null!=Y&&(ie["aria-valuetext"]=Y),null!=Z)for(var fe in Z)if(ir.call(Z,fe)){var de=fe.replace(ar,sr),pe=Z[fe];null!=pe&&(ie["data-"+de]=pe)}var he=null!=q?q:te;!1===he&&(ie.tabIndex="-1"),"a"===e||"button"===e||"input"===e||"select"===e||"textarea"===e?!1!==he&&!0!==m||(ie.tabIndex="-1"):"button"===ae||"checkbox"===ae||"link"===ae||"radio"===ae||"textbox"===ae||"switch"===ae?!1!==he&&(ie.tabIndex="0"):!0===he&&(ie.tabIndex="0");var me=nr.compose(J&&cr[J],$),ve=("button"===ae||"link"===ae)&&!oe,ge=[("a"===e||"button"===e||"li"===e||"ul"===e||"heading"===ae)&&ur.reset,ve&&ur.cursor,K],ye=Jn.resolve(me,ge),be=ye.className,Se=ye.style;return null!=be&&""!==be&&(ie.className=be),Se&&(ie.style=Se),null!=Q&&(ie.id=Q),null!=ee&&(ie["data-testid"]=ee),ie},dr=function(e,t){var n;e&&e.constructor===String&&(n=qe.propsToAccessibilityComponent(t));for(var r=n||e,i=fr(r,t),a=arguments.length,s=new Array(a>2?a-2:0),l=2;l<a;l++)s[l-2]=arguments[l];return o.a.createElement.apply(o.a,[r,i].concat(s))},pr={children:!0,dataSet:!0,nativeID:!0,ref:!0,suppressHydrationWarning:!0,testID:!0},hr={accessibilityActiveDescendant:!0,accessibilityAtomic:!0,accessibilityAutoComplete:!0,accessibilityBusy:!0,accessibilityChecked:!0,accessibilityColumnCount:!0,accessibilityColumnIndex:!0,accessibilityColumnSpan:!0,accessibilityControls:!0,accessibilityCurrent:!0,accessibilityDescribedBy:!0,accessibilityDetails:!0,accessibilityDisabled:!0,accessibilityErrorMessage:!0,accessibilityExpanded:!0,accessibilityFlowTo:!0,accessibilityHasPopup:!0,accessibilityHidden:!0,accessibilityInvalid:!0,accessibilityKeyShortcuts:!0,accessibilityLabel:!0,accessibilityLabelledBy:!0,accessibilityLevel:!0,accessibilityLiveRegion:!0,accessibilityModal:!0,accessibilityMultiline:!0,accessibilityMultiSelectable:!0,accessibilityOrientation:!0,accessibilityOwns:!0,accessibilityPlaceholder:!0,accessibilityPosInSet:!0,accessibilityPressed:!0,accessibilityReadOnly:!0,accessibilityRequired:!0,accessibilityRole:!0,accessibilityRoleDescription:!0,accessibilityRowCount:!0,accessibilityRowIndex:!0,accessibilityRowSpan:!0,accessibilitySelected:!0,accessibilitySetSize:!0,accessibilitySort:!0,accessibilityValueMax:!0,accessibilityValueMin:!0,accessibilityValueNow:!0,accessibilityValueText:!0,dir:!0,focusable:!0,accessible:!0,accessibilityState:!0,accessibilityValue:!0},mr={onClick:!0,onClickCapture:!0,onContextMenu:!0},vr={onBlur:!0,onFocus:!0},gr={onKeyDown:!0,onKeyDownCapture:!0,onKeyUp:!0,onKeyUpCapture:!0},yr={onMouseDown:!0,onMouseEnter:!0,onMouseLeave:!0,onMouseMove:!0,onMouseOver:!0,onMouseOut:!0,onMouseUp:!0},br={onTouchCancel:!0,onTouchCancelCapture:!0,onTouchEnd:!0,onTouchEndCapture:!0,onTouchMove:!0,onTouchMoveCapture:!0,onTouchStart:!0,onTouchStartCapture:!0},Sr={classList:!0,style:!0};function xr(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(!0!==t[r]&&0!==r.indexOf("aria-")||(n[r]=e[r]));return n}var _r=Qe.canUseDOM?i.useLayoutEffect:i.useEffect,Er=function(e){if(null!=e&&(1===e.nodeType&&"function"==typeof e.getBoundingClientRect))return e.getBoundingClientRect()};var Cr=function(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||tt.hasOwnProperty(e)&&tt[e]?(""+t).trim():t+"px"};var Tr=function(e,t){var n=e.style;for(var r in t)if(t.hasOwnProperty(r)){var i=0===r.indexOf("--"),o=Cr(r,t[r],i);"float"===r&&(r="cssFloat"),i?n.setProperty(r,o):n[r]=o}},Pr=function(e){var t=Er(e),n=t.x,r=t.y,i=t.top,o=t.left;return{x:n,y:r,width:e.offsetWidth,height:e.offsetHeight,top:i,left:o}},Ar=function(e,t,n){var r=t||e&&e.parentNode;e&&r&&setTimeout((function(){var t=Er(r),i=Pr(e),o=i.height,a=i.left,s=i.top,l=i.width,u=a-t.left,c=s-t.top;n(u,c,l,o,a,s)}),0)},Rr={A:!0,INPUT:!0,SELECT:!0,TEXTAREA:!0},Or={blur:function(e){try{e.blur()}catch(e){}},focus:function(e){try{var t=e.nodeName;null==e.getAttribute("tabIndex")&&null==Rr[t]&&e.setAttribute("tabIndex","-1"),e.focus()}catch(e){}},measure:function(e,t){Ar(e,null,t)},measureInWindow:function(e,t){e&&setTimeout((function(){var n=Pr(e),r=n.height,i=n.left,o=n.top,a=n.width;t(i,o,a,r)}),0)},measureLayout:function(e,t,n,r){Ar(e,t,r)},updateView:function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=t[n];switch(n){case"style":Tr(e,r);break;case"class":case"className":e.setAttribute("class",r);break;case"text":case"value":e.value=r;break;default:e.setAttribute(n,r)}}},configureNextLayoutAnimation:function(e,t){t()},setLayoutAnimationEnabledExperimental:function(){}},wr=(Qe.canUseDOM,null);function Mr(e,t){var n=(Qe.canUseDOM&&void 0!==window.ResizeObserver&&null==wr&&(wr=new window.ResizeObserver((function(e){e.forEach((function(e){var t=e.target,n=t.__reactLayoutHandler;"function"==typeof n&&Or.measure(t,(function(t,r,i,o,a,s){var l={nativeEvent:{layout:{x:t,y:r,width:i,height:o,left:a,top:s}},timeStamp:Date.now()};Object.defineProperty(l.nativeEvent,"target",{enumerable:!0,get:function(){return e.target}}),n(l)}))}))}))),wr);_r((function(){var n=e.current;null!=n&&(n.__reactLayoutHandler=t)}),[e,t]),_r((function(){var t=e.current;return null!=t&&null!=n&&("function"==typeof t.__reactLayoutHandler?n.observe(t):n.unobserve(t)),function(){null!=t&&null!=n&&n.unobserve(t)}}),[e,n])}function Lr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){t.forEach((function(t){null!=t&&("function"!=typeof t?"object"!=typeof t?console.error("mergeRefs cannot handle Refs of type boolean, number or string, received ref "+String(t)):t.current=e:t(e))}))}}function Ir(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.useMemo((function(){return Lr.apply(void 0,t)}),[].concat(t))}var Dr="function"==typeof Symbol&&"symbol"==typeof Symbol()?Symbol():Object.freeze({});function Fr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fr(Object(n),!0).forEach((function(t){Br(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Br(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Vr={};function kr(e){var t=e.classList,n=e.pointerEvents,r=e.style,o=Object(i.useRef)(null),a=Object(i.useRef)(null);return a.current={classList:t,pointerEvents:n,style:r},function(e){var t=i.useRef(Dr);return t.current===Dr&&(t.current=e()),t.current}((function(){return function(e){null!=e&&(e.measure=function(t){return Or.measure(e,t)},e.measureLayout=function(t,n,r){return Or.measureLayout(e,t,r,n)},e.measureInWindow=function(t){return Or.measureInWindow(e,t)},e.setNativeProps=function(t){var n=a.current||Vr,r=n.classList,i=n.style,s=n.pointerEvents;!function(e,t,n,r,i,o){if(null!=e&&t){var a=fr(null,Nr(Nr({pointerEvents:r},t),{},{classList:[n,t.className],style:[i,t.style]})),s=a.style;if(null!=o.current)for(var l in null==a.style&&(a.style={}),o.current)null==a.style[l]&&(a.style[l]="");o.current=s,Or.updateView(e,a)}}(e,t,r,s,i,o)})}}))}function Ur(e){return"touchstart"===e||"mousedown"===e}function zr(e){return"touchmove"===e||"mousemove"===e}function jr(e){return"touchend"===e||"mouseup"===e||Hr(e)}function Hr(e){return"touchcancel"===e||"dragstart"===e}var Wr=[],Gr={touchBank:Wr,numberActiveTouches:0,indexOfSingleActiveTouch:-1,mostRecentTimeStamp:0};function Xr(e){return e.timeStamp||e.timestamp}function Yr(e){var t=e.identifier;return null==t&&console.error("Touch object is missing identifier."),t}function Kr(e){var t=Yr(e),n=Wr[t];n?function(e,t){e.touchActive=!0,e.startPageX=t.pageX,e.startPageY=t.pageY,e.startTimeStamp=Xr(t),e.currentPageX=t.pageX,e.currentPageY=t.pageY,e.currentTimeStamp=Xr(t),e.previousPageX=t.pageX,e.previousPageY=t.pageY,e.previousTimeStamp=Xr(t)}(n,e):Wr[t]=function(e){return{touchActive:!0,startPageX:e.pageX,startPageY:e.pageY,startTimeStamp:Xr(e),currentPageX:e.pageX,currentPageY:e.pageY,currentTimeStamp:Xr(e),previousPageX:e.pageX,previousPageY:e.pageY,previousTimeStamp:Xr(e)}}(e),Gr.mostRecentTimeStamp=Xr(e)}function Zr(e){var t=Wr[Yr(e)];t?(t.touchActive=!0,t.previousPageX=t.currentPageX,t.previousPageY=t.currentPageY,t.previousTimeStamp=t.currentTimeStamp,t.currentPageX=e.pageX,t.currentPageY=e.pageY,t.currentTimeStamp=Xr(e),Gr.mostRecentTimeStamp=Xr(e)):console.warn("Cannot record touch move without a touch start.\n","Touch Move: "+Qr(e)+"\n","Touch Bank: "+Jr())}function qr(e){var t=Wr[Yr(e)];t?(t.touchActive=!1,t.previousPageX=t.currentPageX,t.previousPageY=t.currentPageY,t.previousTimeStamp=t.currentTimeStamp,t.currentPageX=e.pageX,t.currentPageY=e.pageY,t.currentTimeStamp=Xr(e),Gr.mostRecentTimeStamp=Xr(e)):console.warn("Cannot record touch end without a touch start.\n","Touch End: "+Qr(e)+"\n","Touch Bank: "+Jr())}function Qr(e){return JSON.stringify({identifier:e.identifier,pageX:e.pageX,pageY:e.pageY,timestamp:Xr(e)})}function Jr(){var e=JSON.stringify(Wr.slice(0,20));return Wr.length>20&&(e+=" (original size: "+Wr.length+")"),e}var $r={recordTouchTrack:function(e,t){if(zr(e))t.changedTouches.forEach(Zr);else if(Ur(e))t.changedTouches.forEach(Kr),Gr.numberActiveTouches=t.touches.length,1===Gr.numberActiveTouches&&(Gr.indexOfSingleActiveTouch=t.touches[0].identifier);else if(jr(e)){if(t.changedTouches.forEach(qr),Gr.numberActiveTouches=t.touches.length,1===Gr.numberActiveTouches)for(var n=0;n<Wr.length;n++){var r=Wr[n];if(null!=r&&r.touchActive){Gr.indexOfSingleActiveTouch=n;break}}}},touchHistory:Gr},ei=function(){},ti={},ni=[];function ri(e){return e>20?e%20:e}function ii(e){var t,n,r,i=!1,o=e.changedTouches,a=e.type,s=!0===e.metaKey,l=!0===e.shiftKey,u=o&&o[0].force||0,c=ri(o&&o[0].identifier||0),f=o&&o[0].clientX||e.clientX,d=o&&o[0].clientY||e.clientY,p=o&&o[0].pageX||e.pageX,h=o&&o[0].pageY||e.pageY,m="function"==typeof e.preventDefault?e.preventDefault.bind(e):ei,v=e.timeStamp;function g(e){return Array.prototype.slice.call(e).map((function(e){return{force:e.force,identifier:ri(e.identifier),get locationX(){return S(e.clientX)},get locationY(){return x(e.clientY)},pageX:e.pageX,pageY:e.pageY,target:e.target,timestamp:v}}))}if(null!=o)n=g(o),r=g(e.touches);else{var y=[{force:u,identifier:c,get locationX(){return S(f)},get locationY(){return x(d)},pageX:p,pageY:h,target:e.target,timestamp:v}];n=y,r="mouseup"===a||"dragstart"===a?ni:y}var b={bubbles:!0,cancelable:!0,currentTarget:null,defaultPrevented:e.defaultPrevented,dispatchConfig:ti,eventPhase:e.eventPhase,isDefaultPrevented:function(){return e.defaultPrevented},isPropagationStopped:function(){return i},isTrusted:e.isTrusted,nativeEvent:{altKey:!1,ctrlKey:!1,metaKey:s,shiftKey:l,changedTouches:n,force:u,identifier:c,get locationX(){return S(f)},get locationY(){return x(d)},pageX:p,pageY:h,target:e.target,timestamp:v,touches:r,type:a},persist:ei,preventDefault:m,stopPropagation:function(){i=!0},target:e.target,timeStamp:v,touchHistory:$r.touchHistory};function S(e){if(t=t||Er(b.currentTarget))return e-t.left}function x(e){if(t=t||Er(b.currentTarget))return e-t.top}return b}function oi(e){for(var t=[];null!=e&&e!==document.body;)t.push(e),e=e.parentNode;return t}function ai(e){return null!=e?e.__reactResponderId:null}function si(e){for(var t=[],n=[],r=function(e){return"selectionchange"===e.type?oi(window.getSelection().anchorNode):null!=e.composedPath?e.composedPath():oi(e.target)}(e),i=0;i<r.length;i++){var o=r[i],a=ai(o);null!=a&&(t.push(a),n.push(o))}return{idPath:t,nodePath:n}}function li(e){return"selectionchange"===e.type?(t=window.getSelection(),n=t.toString(),r=t.anchorNode,i=t.focusNode,o=r&&r.nodeType===window.Node.TEXT_NODE||i&&i.nodeType===window.Node.TEXT_NODE,n.length>=1&&"\n"!==n&&o):"select"===e.type;var t,n,r,i,o}var ui={},ci=["onStartShouldSetResponderCapture","onStartShouldSetResponder",{bubbles:!0}],fi=["onMoveShouldSetResponderCapture","onMoveShouldSetResponder",{bubbles:!0}],di={touchstart:ci,mousedown:ci,touchmove:fi,mousemove:fi,scroll:["onScrollShouldSetResponderCapture","onScrollShouldSetResponder",{bubbles:!1}]},pi={id:null,idPath:null,node:null},hi=new Map,mi=!1,vi=0,gi={id:null,node:null,idPath:null};function yi(e){gi=e}function bi(e){var t=hi.get(e);return null!=t?t:ui}function Si(e){var t=e.type,n=e.target;if("touchstart"===t&&(mi=!0),("touchmove"===t||vi>1)&&(mi=!1),!("mousedown"===t&&mi||"mousemove"===t&&mi||"mousemove"===t&&vi<1))if(mi&&"mouseup"===t)0===vi&&(mi=!1);else{var r=Ur(t)&&function(e){var t=e.altKey,n=e.button,r=e.buttons,i=e.ctrlKey,o=e.type,a=!1===t&&!1===i;return!!("touchstart"===o||"touchmove"===o||"mousedown"===o&&(0===n||1===r)&&a||"mousemove"===o&&1===r&&a)}(e),i=zr(t),o=jr(t),a=function(e){return"scroll"===e}(t),s=function(e){return"select"===e||"selectionchange"===e}(t),l=ii(e);(r||i||o)&&(e.touches?vi=e.touches.length:r?vi=1:o&&(vi=0),$r.recordTouchTrack(t,l.nativeEvent));var u,c=si(e),f=!1;if(r||i||a&&vi>0){var d=gi.idPath,p=c.idPath;if(null!=d&&null!=p){var h=function(e,t){var n=e.length,r=t.length;if(0===n||0===r||e[n-1]!==t[r-1])return null;var i=e[0],o=0,a=t[0],s=0;n-r>0&&(i=e[o=n-r],n=r),r-n>0&&(a=t[s=r-n],r=n);for(var l=n;l--;){if(i===a)return i;i=e[o++],a=t[s++]}return null}(d,p);if(null!=h){var m=p.indexOf(h)+(h===gi.id?1:0);c={idPath:p.slice(m),nodePath:c.nodePath.slice(m)}}else c=null}null!=c&&null!=(u=function(e,t,n){var r=di[t.type];if(null!=r){for(var i=e.idPath,o=e.nodePath,a=r[0],s=r[1],l=r[2].bubbles,u=function(e,t,r){var o=bi(e)[r];if(null!=o&&(n.currentTarget=t,!0===o(n)))return{id:e,node:t,idPath:i.slice(i.indexOf(e))}},c=i.length-1;c>=0;c--){var f=i[c],d=o[c],p=u(f,d,a);if(null!=p)return p;if(!0===n.isPropagationStopped())return}if(l)for(var h=0;h<i.length;h++){var m=i[h],v=o[h],g=u(m,v,s);if(null!=g)return g;if(!0===n.isPropagationStopped())return}else{var y=i[0],b=o[0];if(t.target===b)return u(y,b,s)}}}(c,e,l))&&(!function(e,t){var n=gi,r=n.id,i=n.node,o=t.id,a=t.node,s=bi(o),l=s.onResponderGrant,u=s.onResponderReject;if(e.bubbles=!1,e.cancelable=!1,e.currentTarget=a,null==r)null!=l&&(e.currentTarget=a,e.dispatchConfig.registrationName="onResponderGrant",l(e)),yi(t);else{var c=bi(r),f=c.onResponderTerminate,d=c.onResponderTerminationRequest,p=!0;null!=d&&(e.currentTarget=i,e.dispatchConfig.registrationName="onResponderTerminationRequest",!1===d(e)&&(p=!1)),p?(null!=f&&(e.currentTarget=i,e.dispatchConfig.registrationName="onResponderTerminate",f(e)),null!=l&&(e.currentTarget=a,e.dispatchConfig.registrationName="onResponderGrant",l(e)),yi(t)):null!=u&&(e.currentTarget=a,e.dispatchConfig.registrationName="onResponderReject",u(e))}}(l,u),f=!0)}if(null!=gi.id&&null!=gi.node){var v=gi,g=v.id,y=v.node,b=bi(g),S=b.onResponderStart,x=b.onResponderMove,_=b.onResponderEnd,E=b.onResponderRelease,C=b.onResponderTerminate,T=b.onResponderTerminationRequest;if(l.bubbles=!1,l.cancelable=!1,l.currentTarget=y,r)null!=S&&(l.dispatchConfig.registrationName="onResponderStart",S(l));else if(i)null!=x&&(l.dispatchConfig.registrationName="onResponderMove",x(l));else{var P=Hr(t)||"contextmenu"===t||"blur"===t&&n===window||"blur"===t&&n.contains(y)&&e.relatedTarget!==y||a&&0===vi||a&&n.contains(y)&&n!==y||s&&li(e),A=o&&!P&&!function(e,t){if(!t||0===t.length)return!1;for(var n=0;n<t.length;n++){var r=t[n].target;if(null!=r&&e.contains(r))return!0}return!1}(y,e.touches);if(o&&null!=_&&(l.dispatchConfig.registrationName="onResponderEnd",_(l)),A&&(null!=E&&(l.dispatchConfig.registrationName="onResponderRelease",E(l)),yi(pi)),P){var R=!0;"contextmenu"!==t&&"scroll"!==t&&"selectionchange"!==t||(f?R=!1:null!=T&&(l.dispatchConfig.registrationName="onResponderTerminationRequest",!1===T(l)&&(R=!1))),R&&(null!=C&&(l.dispatchConfig.registrationName="onResponderTerminate",C(l)),yi(pi),mi=!1,vi=0)}}}}}var xi=["blur","scroll"],_i=["mousedown","mousemove","mouseup","dragstart","touchstart","touchmove","touchend","touchcancel","contextmenu","select","selectionchange"];function Ei(e){gi.id===e&&function(){var e=gi,t=e.id,n=e.node;if(null!=t&&null!=n){var r=bi(t).onResponderTerminate;if(null!=r){var i=ii({});i.currentTarget=n,r(i)}yi(pi)}mi=!1,vi=0}(),hi.has(e)&&hi.delete(e)}var Ci={},Ti=0;function Pi(e,t){void 0===t&&(t=Ci);var n,r,o=(n=function(){return Ti++},null==(r=i.useRef(null)).current&&(r.current=n()),r.current),a=i.useRef(!1);i.useEffect((function(){return Qe.canUseDOM&&null==window.__reactResponderSystemActive&&(window.addEventListener("blur",Si),_i.forEach((function(e){document.addEventListener(e,Si)})),xi.forEach((function(e){document.addEventListener(e,Si,!0)})),window.__reactResponderSystemActive=!0),function(){Ei(o)}}),[o]),i.useEffect((function(){var n=t,r=n.onMoveShouldSetResponder,i=n.onMoveShouldSetResponderCapture,s=n.onScrollShouldSetResponder,l=n.onScrollShouldSetResponderCapture,u=n.onSelectionChangeShouldSetResponder,c=n.onSelectionChangeShouldSetResponderCapture,f=n.onStartShouldSetResponder,d=n.onStartShouldSetResponderCapture,p=null!=r||null!=i||null!=s||null!=l||null!=u||null!=c||null!=f||null!=d,h=e.current;p?(!function(e,t,n){!function(e,t){null!=e&&(e.__reactResponderId=t)}(t,e),hi.set(e,n)}(o,h,t),a.current=!0):a.current&&(Ei(o),a.current=!1)}),[t,e,o]),i.useDebugValue({isResponder:e.current===gi.node}),i.useDebugValue(t)}var Ai=Object(i.createContext)(!1);function Ri(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ri(Object(n),!0).forEach((function(t){wi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ri(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Mi=Oi(Oi(Oi(Oi(Oi(Oi(Oi(Oi(Oi({},pr),hr),mr),vr),gr),yr),br),Sr),{},{href:!0,lang:!0,onScroll:!0,onWheel:!0,pointerEvents:!0}),Li=i.forwardRef((function(e,t){var n=e.hrefAttrs,r=e.onLayout,o=e.onMoveShouldSetResponder,a=e.onMoveShouldSetResponderCapture,s=e.onResponderEnd,l=e.onResponderGrant,u=e.onResponderMove,c=e.onResponderReject,f=e.onResponderRelease,d=e.onResponderStart,p=e.onResponderTerminate,h=e.onResponderTerminationRequest,m=e.onScrollShouldSetResponder,v=e.onScrollShouldSetResponderCapture,g=e.onSelectionChangeShouldSetResponder,y=e.onSelectionChangeShouldSetResponderCapture,b=e.onStartShouldSetResponder,S=e.onStartShouldSetResponderCapture;var x=i.useContext(Ai),_=i.useRef(null);Mr(_,r),Pi(_,{onMoveShouldSetResponder:o,onMoveShouldSetResponderCapture:a,onResponderEnd:s,onResponderGrant:l,onResponderMove:u,onResponderReject:c,onResponderRelease:f,onResponderStart:d,onResponderTerminate:p,onResponderTerminationRequest:h,onScrollShouldSetResponder:m,onScrollShouldSetResponderCapture:v,onSelectionChangeShouldSetResponder:g,onSelectionChangeShouldSetResponderCapture:y,onStartShouldSetResponder:b,onStartShouldSetResponderCapture:S});var E="div",C=nr.compose(x&&Di.inline,e.style),T=function(e){return xr(e,Mi)}(e);if(T.classList=Ii,T.style=C,null!=e.href&&(E="a",null!=n)){var P=n.download,A=n.rel,R=n.target;null!=P&&(T.download=P),null!=A&&(T.rel=A),"string"==typeof R&&(T.target="_"!==R.charAt(0)?"_"+R:R)}var O=Ir(_,kr(T),t);return T.ref=O,dr(E,T)}));Li.displayName="View";var Ii=[$n.create({view:{alignItems:"stretch",border:"0 solid black",boxSizing:"border-box",display:"flex",flexBasis:"auto",flexDirection:"column",flexShrink:0,margin:0,minHeight:0,minWidth:0,padding:0,position:"relative",zIndex:0}}).view],Di=nr.create({inline:{display:"inline-flex"}}),Fi=Li,Ni="ERROR",Bi=Object.freeze({NOT_RESPONDER:{DELAY:Ni,RESPONDER_GRANT:"RESPONDER_INACTIVE_PRESS_START",RESPONDER_RELEASE:Ni,RESPONDER_TERMINATED:Ni,LONG_PRESS_DETECTED:Ni},RESPONDER_INACTIVE_PRESS_START:{DELAY:"RESPONDER_ACTIVE_PRESS_START",RESPONDER_GRANT:Ni,RESPONDER_RELEASE:"NOT_RESPONDER",RESPONDER_TERMINATED:"NOT_RESPONDER",LONG_PRESS_DETECTED:Ni},RESPONDER_ACTIVE_PRESS_START:{DELAY:Ni,RESPONDER_GRANT:Ni,RESPONDER_RELEASE:"NOT_RESPONDER",RESPONDER_TERMINATED:"NOT_RESPONDER",LONG_PRESS_DETECTED:"RESPONDER_ACTIVE_LONG_PRESS_START"},RESPONDER_ACTIVE_LONG_PRESS_START:{DELAY:Ni,RESPONDER_GRANT:Ni,RESPONDER_RELEASE:"NOT_RESPONDER",RESPONDER_TERMINATED:"NOT_RESPONDER",LONG_PRESS_DETECTED:"RESPONDER_ACTIVE_LONG_PRESS_START"},ERROR:{DELAY:"NOT_RESPONDER",RESPONDER_GRANT:"RESPONDER_INACTIVE_PRESS_START",RESPONDER_RELEASE:"NOT_RESPONDER",RESPONDER_TERMINATED:"NOT_RESPONDER",LONG_PRESS_DETECTED:"NOT_RESPONDER"}}),Vi=function(e){return"RESPONDER_ACTIVE_PRESS_START"===e||"RESPONDER_ACTIVE_LONG_PRESS_START"===e},ki=function(e){return"button"===e.getAttribute("role")},Ui=function(e){return"RESPONDER_INACTIVE_PRESS_START"===e||"RESPONDER_ACTIVE_PRESS_START"===e||"RESPONDER_ACTIVE_LONG_PRESS_START"===e},zi=function(e){var t=e.key,n=e.target.getAttribute("role");return"Enter"===t||(" "===t||"Spacebar"===t)&&"button"===n},ji=function(){function e(e){this._eventHandlers=null,this._isPointerTouch=!1,this._longPressDelayTimeout=null,this._longPressDispatched=!1,this._pressDelayTimeout=null,this._pressOutDelayTimeout=null,this._touchState="NOT_RESPONDER",this.configure(e)}var t=e.prototype;return t.configure=function(e){this._config=e},t.reset=function(){this._cancelLongPressDelayTimeout(),this._cancelPressDelayTimeout(),this._cancelPressOutDelayTimeout()},t.getEventHandlers=function(){return null==this._eventHandlers&&(this._eventHandlers=this._createEventHandlers()),this._eventHandlers},t._createEventHandlers=function(){var e=this,t=function(t,n){t.persist(),e._cancelPressOutDelayTimeout(),e._longPressDispatched=!1,e._selectionTerminated=!1,e._touchState="NOT_RESPONDER",e._isPointerTouch="touchstart"===t.nativeEvent.type,e._receiveSignal("RESPONDER_GRANT",t);var r=Hi(e._config.delayPressStart,0,50);!1!==n&&r>0?e._pressDelayTimeout=setTimeout((function(){e._receiveSignal("DELAY",t)}),r):e._receiveSignal("DELAY",t);var i=Hi(e._config.delayLongPress,10,450);e._longPressDelayTimeout=setTimeout((function(){e._handleLongPress(t)}),i+r)},n=function(t){e._receiveSignal("RESPONDER_RELEASE",t)},r=function t(r){var i=e._config.onPress,o=r.target;if("NOT_RESPONDER"!==e._touchState&&zi(r)){n(r),document.removeEventListener("keyup",t);var a=o.getAttribute("role"),s=o.tagName.toLowerCase();null==i||("link"===a||"a"===s||"button"===s||"input"===s||"select"===s||"textarea"===s)||i(r)}};return{onStartShouldSetResponder:function(t){var n=e._config.disabled;return n&&ki(t.currentTarget)&&t.stopPropagation(),null==n||!n},onKeyDown:function(n){var i=e._config.disabled,o=n.key,a=n.target;if(!i&&zi(n)){"NOT_RESPONDER"===e._touchState&&(t(n,!1),document.addEventListener("keyup",r));var s=a.getAttribute("role");(" "===o||"Spacebar"===o)&&("button"===s||"menuitem"===s)&&n.preventDefault(),n.stopPropagation()}},onResponderGrant:function(e){return t(e)},onResponderMove:function(t){null!=e._config.onPressMove&&e._config.onPressMove(t);var n=Wi(t);if(null!=e._touchActivatePosition){var r=e._touchActivatePosition.pageX-n.pageX,i=e._touchActivatePosition.pageY-n.pageY;Math.hypot(r,i)>10&&e._cancelLongPressDelayTimeout()}},onResponderRelease:function(e){return n(e)},onResponderTerminate:function(t){"selectionchange"===t.nativeEvent.type&&(e._selectionTerminated=!0),e._receiveSignal("RESPONDER_TERMINATED",t)},onResponderTerminationRequest:function(t){var n=e._config,r=n.cancelable,i=n.disabled,o=n.onLongPress;return!(!i&&null!=o&&e._isPointerTouch&&"contextmenu"===t.nativeEvent.type)&&(null==r||r)},onClick:function(t){var n=e._config,r=n.disabled,i=n.onPress;r?ki(t.currentTarget)&&t.stopPropagation():(t.stopPropagation(),e._longPressDispatched||e._selectionTerminated?t.preventDefault():null!=i&&!1===t.altKey&&i(t))},onContextMenu:function(t){var n=e._config,r=n.disabled,i=n.onLongPress;r?ki(t.currentTarget)&&t.stopPropagation():null!=i&&e._isPointerTouch&&!t.defaultPrevented&&(t.preventDefault(),t.stopPropagation())}}},t._receiveSignal=function(e,t){var n=this._touchState,r=null;null!=Bi[n]&&(r=Bi[n][e]),"NOT_RESPONDER"===this._touchState&&"RESPONDER_RELEASE"===e||(null==r||r===Ni?console.error("PressResponder: Invalid signal "+e+" for state "+n+" on responder"):n!==r&&(this._performTransitionSideEffects(n,r,e,t),this._touchState=r))},t._performTransitionSideEffects=function(e,t,n,r){if(function(e){return"RESPONDER_TERMINATED"===e||"RESPONDER_RELEASE"===e}(n)&&(this._isPointerTouch=!1,this._touchActivatePosition=null,this._cancelLongPressDelayTimeout()),Ui(e)&&"LONG_PRESS_DETECTED"===n){var i=this._config.onLongPress;null!=i&&null==r.nativeEvent.key&&(i(r),this._longPressDispatched=!0)}var o=Vi(e),a=Vi(t);if(!o&&a?this._activate(r):o&&!a&&this._deactivate(r),Ui(e)&&"RESPONDER_RELEASE"===n){var s=this._config,l=s.onLongPress;if(null!=s.onPress)null!=l&&"RESPONDER_ACTIVE_LONG_PRESS_START"===e||a||o||(this._activate(r),this._deactivate(r))}this._cancelPressDelayTimeout()},t._activate=function(e){var t=this._config,n=t.onPressChange,r=t.onPressStart,i=Wi(e);this._touchActivatePosition={pageX:i.pageX,pageY:i.pageY},null!=r&&r(e),null!=n&&n(!0)},t._deactivate=function(e){var t=this._config,n=t.onPressChange,r=t.onPressEnd;function i(){null!=r&&r(e),null!=n&&n(!1)}var o=Hi(this._config.delayPressEnd);o>0?this._pressOutDelayTimeout=setTimeout((function(){i()}),o):i()},t._handleLongPress=function(e){"RESPONDER_ACTIVE_PRESS_START"!==this._touchState&&"RESPONDER_ACTIVE_LONG_PRESS_START"!==this._touchState||this._receiveSignal("LONG_PRESS_DETECTED",e)},t._cancelLongPressDelayTimeout=function(){null!=this._longPressDelayTimeout&&(clearTimeout(this._longPressDelayTimeout),this._longPressDelayTimeout=null)},t._cancelPressDelayTimeout=function(){null!=this._pressDelayTimeout&&(clearTimeout(this._pressDelayTimeout),this._pressDelayTimeout=null)},t._cancelPressOutDelayTimeout=function(){null!=this._pressOutDelayTimeout&&(clearTimeout(this._pressOutDelayTimeout),this._pressOutDelayTimeout=null)},e}();function Hi(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=0),Math.max(t,null!=e?e:n)}function Wi(e){var t=e.nativeEvent,n=t.changedTouches,r=t.touches;return null!=r&&r.length>0?r[0]:null!=n&&n.length>0?n[0]:e.nativeEvent}function Gi(){return(Gi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Xi(e,t){var n=e.activeOpacity,r=e.delayPressIn,o=e.delayPressOut,a=e.delayLongPress,s=e.disabled,l=e.focusable,u=e.onLongPress,c=e.onPress,f=e.onPressIn,d=e.onPressOut,p=e.rejectResponderTermination,h=e.style,m=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["activeOpacity","delayPressIn","delayPressOut","delayLongPress","disabled","focusable","onLongPress","onPress","onPressIn","onPressOut","rejectResponderTermination","style"]),v=Object(i.useRef)(null),g=Ir(t,v),y=Object(i.useState)("0s"),b=y[0],S=y[1],x=Object(i.useState)(null),_=x[0],E=x[1],C=Object(i.useCallback)((function(e,t){E(e),S(t?t/1e3+"s":"0s")}),[E,S]),T=Object(i.useCallback)((function(e){C(null!=n?n:.2,e)}),[n,C]),P=Object(i.useCallback)((function(e){C(null,e)}),[C]),A=function(e,t){var n=Object(i.useRef)(null);null==n.current&&(n.current=new ji(t));var r=n.current;return Object(i.useEffect)((function(){r.configure(t)}),[t,r]),Object(i.useEffect)((function(){return function(){r.reset()}}),[r]),Object(i.useDebugValue)(t),r.getEventHandlers()}(0,Object(i.useMemo)((function(){return{cancelable:!p,disabled:s,delayLongPress:a,delayPressStart:r,delayPressEnd:o,onLongPress:u,onPress:c,onPressStart:function(e){var t=null!=e.dispatchConfig?"onResponderGrant"===e.dispatchConfig.registrationName:"keydown"===e.type;T(t?0:150),null!=f&&f(e)},onPressEnd:function(e){P(250),null!=d&&d(e)}}}),[a,r,o,s,u,c,f,d,p,T,P]));return i.createElement(Fi,Gi({},m,A,{accessibilityDisabled:s,focusable:!s&&!1!==l,ref:g,style:[Yi.root,!s&&Yi.actionable,h,null!=_&&{opacity:_},{transitionDuration:b}]}))}var Yi=nr.create({root:{transitionProperty:"opacity",transitionDuration:"0.15s",userSelect:"none"},actionable:{cursor:"pointer",touchAction:"manipulation"}}),Ki=i.memo(i.forwardRef(Xi));Ki.displayName="TouchableOpacity";var Zi=Ki;function qi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qi(Object(n),!0).forEach((function(t){Ji(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ji(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $i=Qi(Qi(Qi(Qi(Qi(Qi(Qi(Qi(Qi({},pr),hr),mr),vr),gr),yr),br),Sr),{},{href:!0,lang:!0,pointerEvents:!0}),eo=i.forwardRef((function(e,t){var n=e.dir,r=e.hrefAttrs,o=e.numberOfLines,a=e.onClick,s=e.onLayout,l=e.onPress,u=e.onMoveShouldSetResponder,c=e.onMoveShouldSetResponderCapture,f=e.onResponderEnd,d=e.onResponderGrant,p=e.onResponderMove,h=e.onResponderReject,m=e.onResponderRelease,v=e.onResponderStart,g=e.onResponderTerminate,y=e.onResponderTerminationRequest,b=e.onScrollShouldSetResponder,S=e.onScrollShouldSetResponderCapture,x=e.onSelectionChangeShouldSetResponder,_=e.onSelectionChangeShouldSetResponderCapture,E=e.onStartShouldSetResponder,C=e.onStartShouldSetResponderCapture,T=e.selectable,P=i.useContext(Ai),A=i.useRef(null),R=[to.text,!0===P&&to.textHasAncestor,1===o&&to.textOneLine,null!=o&&o>1&&to.textMultiLine],O=[e.style,null!=o&&o>1&&{WebkitLineClamp:o},!0===T&&no.selectable,!1===T&&no.notSelectable,l&&no.pressable];Mr(A,s),Pi(A,{onMoveShouldSetResponder:u,onMoveShouldSetResponderCapture:c,onResponderEnd:f,onResponderGrant:d,onResponderMove:p,onResponderReject:h,onResponderRelease:m,onResponderStart:v,onResponderTerminate:g,onResponderTerminationRequest:y,onScrollShouldSetResponder:b,onScrollShouldSetResponderCapture:S,onSelectionChangeShouldSetResponder:x,onSelectionChangeShouldSetResponderCapture:_,onStartShouldSetResponder:E,onStartShouldSetResponderCapture:C});var w=i.useCallback((function(e){null!=a?a(e):null!=l&&(e.stopPropagation(),l(e))}),[a,l]),M=P?"span":"div",L=function(e){return xr(e,$i)}(e);if(L.classList=R,L.dir=n,P||(L.dir=null!=n?n:"auto"),(a||l)&&(L.onClick=w),L.style=O,null!=e.href&&(M="a",null!=r)){var I=r.download,D=r.rel,F=r.target;null!=I&&(L.download=I),null!=D&&(L.rel=D),"string"==typeof F&&(L.target="_"!==F.charAt(0)?"_"+F:F)}var N=Ir(A,kr(L),t);L.ref=N;var B=dr(M,L);return P?B:i.createElement(Ai.Provider,{value:!0},B)}));eo.displayName="Text";var to=$n.create({text:{border:"0 solid black",boxSizing:"border-box",color:"black",display:"inline",font:"14px System",margin:0,padding:0,whiteSpace:"pre-wrap",wordWrap:"break-word"},textHasAncestor:{color:"inherit",font:"inherit",whiteSpace:"inherit"},textOneLine:{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",wordWrap:"normal"},textMultiLine:{display:"-webkit-box",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",WebkitBoxOrient:"vertical"}}),no=nr.create({notSelectable:{userSelect:"none"},selectable:{userSelect:"text"},pressable:{cursor:"pointer"}}),ro=eo,io=i.forwardRef((function(e,t){var n=e.accessibilityLabel,r=e.color,o=e.disabled,a=e.onPress,s=e.testID,l=e.title;return i.createElement(Zi,{accessibilityLabel:n,accessibilityRole:"button",disabled:o,focusable:!o,onPress:a,ref:t,style:[oo.button,r&&{backgroundColor:r},o&&oo.buttonDisabled],testID:s},i.createElement(ro,{style:[oo.text,o&&oo.textDisabled]},l))}));io.displayName="Button";var oo=nr.create({button:{backgroundColor:"#2196F3",borderRadius:2},text:{color:"#fff",fontWeight:"500",padding:8,textAlign:"center",textTransform:"uppercase"},buttonDisabled:{backgroundColor:"#dfdfdf"},textDisabled:{color:"#a1a1a1"}}),ao=n(8),so=n.n(ao);var lo,uo,co,fo;!function(e){e.PLACEMENT_CONTROL_NAME="ArButton",e.MEASUREMENT_CONTROL_NAME="MeasureButton",e.FITMENT_CONTROL_NAME="FitmentButton",e.PLACE_ANNOTATION_CONTROL_NAME="AnnotateButton",e.AR_VIEWER_CONTROL_NAME="ArViewer",e.AR_ACCESSIBILITY_CONTROL_NAME="ArAccessibility",e.AR_ENVIRONMENT_LOADER="ArEnvironmentLoader",e.BARCODE_CONTROL_NAME="BarcodeReader",e.CAMERA_CONTROL_NAME="CameraNative"}(lo||(lo={})),function(e){e.SUCCESS="PowerAppsClient.PcfComponent.Success",e.FAILURE="PowerAppsClient.PcfComponent.Failure",e.WARN="PowerAppsClient.PcfComponent.Warn",e.EVENT="PowerAppsClient.PcfComponent.Event"}(uo||(uo={})),function(e){e.eventName="event_Name",e.operationName="operation_Name",e.controlName="controlName",e.controlId="ControlId",e.componentName="componentName",e.action="action",e.message="message"}(co||(co={})),function(e){e[e.ComponentRenderFailed=0]="ComponentRenderFailed",e[e.GenericFailure=1]="GenericFailure",e[e.EnterXRFailed=2]="EnterXRFailed",e[e.DeviceOrientationSuccess=3]="DeviceOrientationSuccess",e[e.ScreenReaderToggleSuccess=4]="ScreenReaderToggleSuccess",e[e.ARPlacementLoadStart=5]="ARPlacementLoadStart",e[e.ARPlacementLoadEnd=6]="ARPlacementLoadEnd",e[e.ARPlacementLoadError=7]="ARPlacementLoadError",e[e.ARPlacementCleared=8]="ARPlacementCleared",e[e.ARPlacementImage=9]="ARPlacementImage",e[e.ARPlacementModel=10]="ARPlacementModel",e[e.ARPlacementModelOrImage=11]="ARPlacementModelOrImage",e[e.ARPlacementObject=12]="ARPlacementObject",e[e.ARPlacementShapeCreated=13]="ARPlacementShapeCreated",e[e.ARPlacementSessionStart=14]="ARPlacementSessionStart",e[e.ARPlacementSessionEnd=15]="ARPlacementSessionEnd",e[e.ARPlacementVolume=16]="ARPlacementVolume",e[e.ARPlacementInitialized=17]="ARPlacementInitialized",e[e.ARPlacementOptimizationStart=18]="ARPlacementOptimizationStart",e[e.ARPlacementOptimizationEnd=19]="ARPlacementOptimizationEnd",e[e.ARPlacementModelDownloadWarning=20]="ARPlacementModelDownloadWarning",e[e.ARPlacementSecondaryLoadStart=21]="ARPlacementSecondaryLoadStart",e[e.ARPlacementSecondaryLoadEnd=22]="ARPlacementSecondaryLoadEnd",e[e.ARViewArrowClicked=23]="ARViewArrowClicked",e[e.ARViewCameraClicked=24]="ARViewCameraClicked",e[e.ARViewClearButtonClicked=25]="ARViewClearButtonClicked",e[e.ARViewDeleteAnnotationClicked=26]="ARViewDeleteAnnotationClicked",e[e.ARViewExitButtonClicked=27]="ARViewExitButtonClicked",e[e.ARViewInkingClicked=28]="ARViewInkingClicked",e[e.ARViewPlaceButtonClicked=29]="ARViewPlaceButtonClicked",e[e.ARViewSubmitButtonClicked=30]="ARViewSubmitButtonClicked",e[e.ARViewUndoButtonClicked=31]="ARViewUndoButtonClicked",e[e.ARViewOverviewButtonClicked=32]="ARViewOverviewButtonClicked",e[e.ARViewCameraPermissionsNotGranted=33]="ARViewCameraPermissionsNotGranted",e[e.ARViewLiftClicked=34]="ARViewLiftClicked",e[e.ARViewModelSelectorClicked=35]="ARViewModelSelectorClicked",e[e.ARViewModelCardClicked=36]="ARViewModelCardClicked",e[e.ARViewModelCardThumbnailLoadError=37]="ARViewModelCardThumbnailLoadError",e[e.ARViewArrowButtonClicked=38]="ARViewArrowButtonClicked",e[e.ARViewInkingButtonClicked=39]="ARViewInkingButtonClicked",e[e.ARViewUndoAnnotationButtonClicked=40]="ARViewUndoAnnotationButtonClicked",e[e.ARViewDeleteAllAnnotationButtonClicked=41]="ARViewDeleteAllAnnotationButtonClicked",e[e.ARSwitchAnnotationColorButtonClicked=42]="ARSwitchAnnotationColorButtonClicked",e[e.ARAnnotationColorChanged=43]="ARAnnotationColorChanged",e[e.ARAnnotationsSessionStart=44]="ARAnnotationsSessionStart",e[e.ARAnnotationsSessionEnd=45]="ARAnnotationsSessionEnd",e[e.ARArrowPlaced=46]="ARArrowPlaced",e[e.ARArrowPanStart=47]="ARArrowPanStart",e[e.ARArrowPanEnd=48]="ARArrowPanEnd",e[e.ARInkingSessionStarted=49]="ARInkingSessionStarted",e[e.ARInkingSessionEnded=50]="ARInkingSessionEnded",e[e.MeasurementCompleted=51]="MeasurementCompleted",e[e.MeasurementSegmentPlaced=52]="MeasurementSegmentPlaced",e[e.MeasurementSessionEnd=53]="MeasurementSessionEnd",e[e.MeasurementSessionStart=54]="MeasurementSessionStart",e[e.MeasurementUndo=55]="MeasurementUndo",e[e.MeasurementDeleted=56]="MeasurementDeleted",e[e.MeasurementFontLoadFailed=57]="MeasurementFontLoadFailed",e[e.PlaneDeleted=58]="PlaneDeleted",e[e.PlaneRendered=59]="PlaneRendered",e[e.TrackingLost=60]="TrackingLost",e[e.TransformNodeRotated=61]="TransformNodeRotated",e[e.TransformNodeTranslated=62]="TransformNodeTranslated",e[e.TransformNodeScaled=63]="TransformNodeScaled",e[e.TransformNodeDoubleTapped=64]="TransformNodeDoubleTapped",e[e.TransformNodeLifted=65]="TransformNodeLifted",e[e.AREnvironmentLoaded=66]="AREnvironmentLoaded",e[e.MediaCacheLoaded=67]="MediaCacheLoaded",e[e.MediaCacheEntryAdded=68]="MediaCacheEntryAdded",e[e.MediaCacheEntryDeleted=69]="MediaCacheEntryDeleted",e[e.MediaCacheEntryFetched=70]="MediaCacheEntryFetched",e[e.MediaCacheInvalidWarning=71]="MediaCacheInvalidWarning",e[e.ErrorDialogShown=72]="ErrorDialogShown",e[e.ErrorDialogMoreInfoClicked=73]="ErrorDialogMoreInfoClicked",e[e.ErrorDialogDismissed=74]="ErrorDialogDismissed",e[e.ImageTrackingInitializationFailed=75]="ImageTrackingInitializationFailed",e[e.ImageTrackingEnabled=76]="ImageTrackingEnabled",e[e.ImageTrackingDisabled=77]="ImageTrackingDisabled",e[e.BarcodeReaderStart=78]="BarcodeReaderStart",e[e.BarcodeReaderEnd=79]="BarcodeReaderEnd",e[e.BarcodeReaderReadPixels=80]="BarcodeReaderReadPixels",e[e.BarcodeReaderDetectBarcodes=81]="BarcodeReaderDetectBarcodes",e[e.BarcodeReaderCameraPermissionsNotGranted=82]="BarcodeReaderCameraPermissionsNotGranted",e[e.BarcodeReaderCameraPermissionsError=83]="BarcodeReaderCameraPermissionsError",e[e.BarcodeReaderTorchButtonPress=84]="BarcodeReaderTorchButtonPress",e[e.BarcodeReaderZoomButtonPress=85]="BarcodeReaderZoomButtonPress",e[e.BarcodeReaderDeletedBarcode=86]="BarcodeReaderDeletedBarcode",e[e.BarcodeReaderBarcodeScanned=87]="BarcodeReaderBarcodeScanned",e[e.BarcodeReaderBeepError=88]="BarcodeReaderBeepError",e[e.BarcodeReaderConfirmFailed=89]="BarcodeReaderConfirmFailed",e[e.BarcodeReaderCameraStateChanged=90]="BarcodeReaderCameraStateChanged",e[e.BarcodeReaderVideoInitialized=91]="BarcodeReaderVideoInitialized",e[e.BarcodeReaderVideoInitializionFailed=92]="BarcodeReaderVideoInitializionFailed",e[e.BarcodeReaderFontLoadFailed=93]="BarcodeReaderFontLoadFailed",e[e.CameraControlPermissionsNotGranted=94]="CameraControlPermissionsNotGranted",e[e.CameraControlCameraPermissionsError=95]="CameraControlCameraPermissionsError",e[e.CameraControlVideoInitialized=96]="CameraControlVideoInitialized",e[e.CameraControlAvailableDeviceError=97]="CameraControlAvailableDeviceError",e[e.CameraControlDeviceIndexOutOfRange=98]="CameraControlDeviceIndexOutOfRange",e[e.CameraControlVideoInitializedFailed=99]="CameraControlVideoInitializedFailed",e[e.CameraControlGetAvailableDevices=100]="CameraControlGetAvailableDevices",e[e.CameraControlStreamStarted=101]="CameraControlStreamStarted",e[e.CameraControlStreamStopped=102]="CameraControlStreamStopped",e[e.CameraControlCaptureSnapshot=103]="CameraControlCaptureSnapshot",e[e.CameraControlCaptureImage=104]="CameraControlCaptureImage",e[e.CameraControlCaptureError=105]="CameraControlCaptureError",e[e.CameraControlEngineViewInitialized=106]="CameraControlEngineViewInitialized",e[e.CameraControlCaptureImageCallbackCalled=107]="CameraControlCaptureImageCallbackCalled",e[e.CameraControlCaptureStreamCallbackCalled=108]="CameraControlCaptureStreamCallbackCalled",e[e.CameraControlInitializedCallbackCalled=109]="CameraControlInitializedCallbackCalled"}(fo||(fo={}));
//!
//! Copyright (C) Microsoft Corporation.  All rights reserved.
//!
class po{}function ho(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}
//!
//! Copyright (C) Microsoft Corporation.  All rights reserved.
//!
(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}new class{logSuccess(e,t,n){this.log(e,t,uo.SUCCESS,n)}logError(e,t,n,r,i){i||(i={}),i.error=so()(r),this.log(e,t,uo.FAILURE,i,n)}logWarning(e,t,n,r){this.log(e,t,uo.WARN,r,n)}logEvent(e,t,n,r){this.log(e,t,uo.EVENT,n,r)}log(e,t,n,r,i){if(!po.TelemetryEventHandler)return void console.error("Telemetry event handler not added.");const o="PMR.UX.{0}".replace("{0}",e),a="PMR.{0}".replace("{0}",t in fo?fo[t]:fo[fo.GenericFailure]),s={[co.eventName]:"PowerAppsClient.Activity",[co.componentName]:"ARViewActivityPackage",[co.controlName]:e,[co.controlId]:o,[co.action]:a,[co.operationName]:n,[co.message]:i};po.TelemetryEventHandler(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach((function(t){ho(e,t,n[t])}))}return e}({},s,r))}};
//!
//! Copyright (C) Microsoft Corporation.  All rights reserved.
//!
var mo;!function(e){e[e.mediaTrackChanged=0]="mediaTrackChanged",e[e.constraintsApplied=1]="constraintsApplied",e[e.toggleTorch=2]="toggleTorch",e[e.cycleZoom=3]="cycleZoom"}(mo||(mo={}));
//!
//! Copyright (C) Microsoft Corporation.  All rights reserved.
//!
S.ShaderMaterial;S.Effect.ShadersStore.barcodeScannerVertexShader="precision highp float;\n\nattribute vec3 position;\nattribute vec2 uv;\n\nuniform mat4 worldViewProjection;\nuniform vec2 videoCrop;\n\nout vec2 videoUV;\nout vec2 annotationUV;\n\nvoid main() {\n    // uvs are in [0, 1] range, so normalize to [-0.5, 0.5] before applying the crop multiplier, then normalize back to [0, 1]\n    videoUV = (uv - vec2(0.5, 0.5)) * videoCrop + vec2(0.5, 0.5);\n    annotationUV = uv;\n    vec4 p = vec4(position, 1.);\n    gl_Position = worldViewProjection * p;\n}",S.Effect.ShadersStore.barcodeScannerFragmentShader="precision highp float;\n\nuniform sampler2D videoTex;\nuniform sampler2D annotationTex;\nuniform float annotationAlpha;\n\nin vec2 videoUV;\nin vec2 annotationUV;\n\nvoid main(void) {\n    vec4 videoColor = texture2D(videoTex, videoUV);\n    vec4 annotationColor = texture2D(annotationTex, annotationUV);\n    // In the browser, sampling a texture that is not set results in sampling the texture in the previous slot (in this case, the video texture).\n    // When this happens, just set the alpha to 0 so this invalid color value is ignored.\n    annotationColor = vec4(annotationColor.xyz, annotationColor.a * annotationAlpha);\n    // Since the video texture is fully opaque, the texture color samples can be blended with a simple mix (linear interpolation), where the annotation alpha is the interpolation factor.\n    gl_FragColor = mix(videoColor, annotationColor, annotationColor.a);\n}";var vo=function(e){var t;try{t=Object(a.findDOMNode)(e)}catch(e){}return t};Qe.canUseDOM&&"function"==typeof window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)");var go=[];function yo(e){return go[e-1]}var bo=/^data:/,So=function(){function e(){}return e.has=function(t){var n=e._entries;return bo.test(t)||Boolean(n[t])},e.add=function(t){var n=e._entries,r=Date.now();n[t]?(n[t].lastUsedTimestamp=r,n[t].refCount+=1):n[t]={lastUsedTimestamp:r,refCount:1}},e.remove=function(t){var n=e._entries;n[t]&&(n[t].refCount-=1),e._cleanUpIfNeeded()},e._cleanUpIfNeeded=function(){var t,n,r=e._entries,i=Object.keys(r);i.length+1>e._maximumEntries&&(i.forEach((function(e){var i=r[e];(!n||i.lastUsedTimestamp<n.lastUsedTimestamp)&&0===i.refCount&&(t=e,n=i)})),t&&delete r[t])},e}();So._maximumEntries=256,So._entries={};var xo=0,_o={},Eo={abort:function(e){var t=_o[""+e];t&&(t.onerror=null,t.onload=null,t=null,delete _o[""+e])},getSize:function(e,t,n){var r=!1,i=setInterval(a,16),o=Eo.load(e,a,(function(){"function"==typeof n&&n();Eo.abort(o),clearInterval(i)}));function a(){var e=_o[""+o];if(e){var n=e.naturalHeight,a=e.naturalWidth;n&&a&&(t(a,n),r=!0)}r&&(Eo.abort(o),clearInterval(i))}},has:function(e){return So.has(e)},load:function(e,t,n){xo+=1;var r=new window.Image;return r.onerror=n,r.onload=function(e){var n=function(){return t({nativeEvent:e})};"function"==typeof r.decode?r.decode().then(n,n):setTimeout(n,0)},r.src=e,_o[""+xo]=r,xo},prefetch:function(e){return new Promise((function(t,n){Eo.load(e,(function(){So.add(e),So.remove(e),t()}),n)}))},queryCache:function(e){var t={};return e.forEach((function(e){So.has(e)&&(t[e]="disk/memory")})),Promise.resolve(t)}},Co=Eo,To={window:{fontScale:1,height:0,scale:1,width:0},screen:{fontScale:1,height:0,scale:1,width:0}},Po={},Ao=function(){function e(){}return e.get=function(e){return Tt()(To[e],"No dimension set for key "+e),To[e]},e.set=function(e){e&&(Qe.canUseDOM?Tt()(!1,"Dimensions cannot be set in the browser"):(null!=e.screen&&(To.screen=e.screen),null!=e.window&&(To.window=e.window)))},e._update=function(){if(Qe.canUseDOM){var e=window,t=e.document.documentElement;To.window={fontScale:1,height:t.clientHeight,scale:e.devicePixelRatio||1,width:t.clientWidth},To.screen={fontScale:1,height:e.screen.height,scale:e.devicePixelRatio||1,width:e.screen.width},Array.isArray(Po.change)&&Po.change.forEach((function(e){return e(To)}))}},e.addEventListener=function(e,t){var n=this;return Po[e]=Po[e]||[],Po[e].push(t),{remove:function(){n.removeEventListener(e,t)}}},e.removeEventListener=function(e,t){Array.isArray(Po[e])&&(Po[e]=Po[e].filter((function(e){return e!==t})))},e}();Qe.canUseDOM&&(Ao._update(),window.addEventListener("resize",Ao._update,!1));var Ro=function(){function e(){}return e.get=function(){return Ao.get("window").scale},e.getFontScale=function(){return Ao.get("window").fontScale||e.get()},e.getPixelSizeForLayoutSize=function(t){return Math.round(t*e.get())},e.roundToNearestPixel=function(t){var n=e.get();return Math.round(t*n)/n},e}();function Oo(){return(Oo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function wo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wo(Object(n),!0).forEach((function(t){Lo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Lo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Io=0,Do=/^(data:image\/svg\+xml;utf8,)(.*)/;function Fo(e){var t=null;if("number"==typeof e){var n=yo(e),r=n.scales[0];if(n.scales.length>1){var i=Ro.get();r=n.scales.reduce((function(e,t){return Math.abs(t-i)<Math.abs(e-i)?t:e}))}var o=1!==r?"@"+r+"x":"";t=n?n.httpServerLocation+"/"+n.name+o+"."+n.type:""}else"string"==typeof e?t=e:e&&"string"==typeof e.uri&&(t=e.uri);if(t){var a=t.match(Do);if(a){var s=a[1],l=a[2];return""+s+encodeURIComponent(l)}}return t}var No=i.forwardRef((function(e,t){var n=e.accessibilityLabel,r=e.blurRadius,o=e.defaultSource,a=e.draggable,s=e.onError,l=e.onLayout,u=e.onLoad,c=e.onLoadEnd,f=e.onLoadStart,d=e.pointerEvents,p=e.source,h=e.style,m=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["accessibilityLabel","blurRadius","defaultSource","draggable","onError","onLayout","onLoad","onLoadEnd","onLoadStart","pointerEvents","source","style"]);var v=i.useState((function(){var e=Fo(p);if(null!=e&&Co.has(e))return"LOADED";return"IDLE"})),g=v[0],y=v[1],b=i.useState({}),S=b[0],x=b[1],_=i.useContext(Ai),E=i.useRef(null),C=i.useRef(Io++),T=i.useRef(null),P="LOADED"===g||"LOADING"===g&&null==o,A=function(e,t,n){var r=Mo({},nr.flatten(e)),i=r.filter,o=r.resizeMode,a=r.shadowOffset,s=r.tintColor,l=[],u=null;if(i&&l.push(i),t&&l.push("blur("+t+"px)"),a){var c=ct(r);c&&l.push("drop-shadow("+c+")")}return s&&null!=n&&l.push("url(#tint-"+n+")"),l.length>0&&(u=l.join(" ")),delete r.blurRadius,delete r.shadowColor,delete r.shadowOpacity,delete r.shadowOffset,delete r.shadowRadius,delete r.tintColor,delete r.overlayColor,delete r.resizeMode,[r,o,u,s]}(h,r,C.current),R=A[0],O=A[1],w=A[2],M=A[3],L=e.resizeMode||O||"cover",I=P?p:o,D=Fo(I),F=function(e){if("number"==typeof e){var t=yo(e);return{height:t.height,width:t.width}}if(null!=e&&!Array.isArray(e)&&"object"==typeof e)return{height:e.height,width:e.width}}(I),N=D?'url("'+D+'")':null,B=function(){if(null!=E.current&&("center"===L||"repeat"===L)){var e=E.current,t=e.naturalHeight,n=e.naturalWidth,r=S.height,i=S.width;if(t&&n&&r&&i){var o=Math.min(1,i/n,r/t),a=Math.ceil(o*n),s=Math.ceil(o*t);return a+"px "+s+"px"}}}(),V=D?dr("img",{alt:n||"",classList:[Vo.accessibilityImage],draggable:a||!1,ref:E,src:D}):null;var k=Fo(p);return i.useEffect((function(){function e(){null!=T.current&&(Co.abort(T.current),T.current=null)}return e(),null!=k&&(y("LOADING"),f&&f(),T.current=Co.load(k,(function(e){y("LOADED"),u&&u(e),c&&c()}),(function(){y("ERRORED"),s&&s({nativeEvent:{error:"Failed to load resource "+k+" (404)"}}),c&&c()}))),e}),[k,T,y,s,u,c,f]),i.createElement(Fi,Oo({},m,{accessibilityLabel:n,onLayout:function(e){if("center"===L||"repeat"===L||l){var t=e.nativeEvent.layout;l&&l(e),x(t)}},pointerEvents:d,ref:t,style:[ko.root,_&&ko.inline,F,R]}),i.createElement(Fi,{style:[ko.image,Uo[L],{backgroundImage:N,filter:w},null!=B&&{backgroundSize:B}],suppressHydrationWarning:!0}),V,function(e,t){return e&&null!=t?i.createElement("svg",{style:{position:"absolute",height:0,visibility:"hidden",width:0}},i.createElement("defs",null,i.createElement("filter",{id:"tint-"+t,suppressHydrationWarning:!0},i.createElement("feFlood",{floodColor:""+e,key:e}),i.createElement("feComposite",{in2:"SourceAlpha",operator:"atop"})))):null}(M,C.current))}));No.displayName="Image";var Bo=No;Bo.getSize=function(e,t,n){Co.getSize(e,t,n)},Bo.prefetch=function(e){return Co.prefetch(e)},Bo.queryCache=function(e){return Co.queryCache(e)};var Vo=$n.create({accessibilityImage:Mo(Mo({},nr.absoluteFillObject),{},{height:"100%",opacity:0,width:"100%",zIndex:-1})}),ko=nr.create({root:{flexBasis:"auto",overflow:"hidden",zIndex:0},inline:{display:"inline-flex"},image:Mo(Mo({},nr.absoluteFillObject),{},{backgroundColor:"transparent",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover",height:"100%",width:"100%",zIndex:-1})}),Uo=nr.create({center:{backgroundSize:"auto"},contain:{backgroundSize:"contain"},cover:{backgroundSize:"cover"},none:{backgroundPosition:"0 0",backgroundSize:"auto"},repeat:{backgroundPosition:"0 0",backgroundRepeat:"repeat",backgroundSize:"auto"},stretch:{backgroundSize:"100% 100%"}});
//!
//! Copyright (C) Microsoft Corporation.  All rights reserved.
//!
nr.create({icon:{fontFamily:R,fontSize:18}}),nr.create({small:{fontFamily:P,fontSize:12},normal:{fontFamily:P,fontSize:18},semiBold:{fontFamily:A,fontSize:18},bold:{fontFamily:P,fontSize:18,fontWeight:"bold"}});function zo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach((function(t){jo(e,t,n[t])}))}return e}function jo(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}
//!
//! Copyright (C) Microsoft Corporation.  All rights reserved.
//!
(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ho=nr.create({buttonBase:{borderWidth:1,justifyContent:"center",alignItems:"center"},buttonShadows:{shadowColor:"#000",shadowOpacity:.3,shadowRadius:12.875,shadowOffset:{width:0,height:1.83929}}});nr.create({button:zo({},Ho.buttonBase,Ho.buttonShadows,{backgroundColor:T,borderColor:x}),disabledButton:zo({},Ho.buttonBase,Ho.buttonShadows,{backgroundColor:_,borderColor:C}),toggledOnButton:zo({},Ho.buttonBase,Ho.buttonShadows,{backgroundColor:x,borderColor:x}),disabledText:{color:E}});var Wo=function e(t,n,r){if(void 0===r&&(r=-1),0===r)return!0;if(t===n)return!1;if("function"==typeof t&&"function"==typeof n)return!1;if("object"!=typeof t||null===t)return t!==n;if("object"!=typeof n||null===n)return!0;if(t.constructor!==n.constructor)return!0;if(Array.isArray(t)){var i=t.length;if(n.length!==i)return!0;for(var o=0;o<i;o++)if(e(t[o],n[o],r-1))return!0}else{for(var a in t)if(e(t[a],n[a],r-1))return!0;for(var s in n)if(void 0===t[s]&&void 0!==n[s])return!0}return!1},Go=Qe.canUseDOM&&void 0!==window.requestIdleCallback,Xo=Go?window.requestIdleCallback:function(e,t){return setTimeout((function(){var t=Date.now();e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})}),1)},Yo=Go?window.cancelIdleCallback:function(e){clearTimeout(e)},Ko=Xo,Zo={Events:{interactionStart:"interactionStart",interactionComplete:"interactionComplete"},runAfterInteractions:function(e){var t,n=new Promise((function(n){t=Ko((function(){e?n(e()):n()}))}));return{then:n.then.bind(n),done:n.then.bind(n),cancel:function(){Yo(t)}}},createInteractionHandle:function(){return 1},clearInteractionHandle:function(e){Tt()(!!e,"Must provide a handle to clear.")},addListener:function(){}},qo=function(){function e(e,t){this._delay=t,this._callback=e}var t=e.prototype;return t.dispose=function(e){void 0===e&&(e={abort:!1}),this._taskHandle&&(this._taskHandle.cancel(),e.abort||this._callback(),this._taskHandle=null)},t.schedule=function(){var e=this;if(!this._taskHandle){var t=setTimeout((function(){e._taskHandle=Zo.runAfterInteractions((function(){e._taskHandle=null,e._callback()}))}),this._delay);this._taskHandle={cancel:function(){return clearTimeout(t)}}}},e}(),Qo=n(31);n(37);var Jo=function(e){e.colors,e.enabled,e.onRefresh,e.progressBackgroundColor,e.progressViewOffset,e.refreshing,e.size,e.tintColor,e.title,e.titleColor;var t=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["colors","enabled","onRefresh","progressBackgroundColor","progressViewOffset","refreshing","size","tintColor","title","titleColor"]);return o.a.createElement(Fi,t)},$o=n(30),ea=n.n($o),ta={_currentlyFocusedNode:null,currentlyFocusedField:function(){return document.activeElement!==this._currentlyFocusedNode&&(this._currentlyFocusedNode=null),this._currentlyFocusedNode},focusTextInput:function(e){null!==e&&(this._currentlyFocusedNode=e,document.activeElement!==e&&Or.focus(e))},blurTextInput:function(e){null!==e&&(this._currentlyFocusedNode=null,document.activeElement===e&&Or.blur(e))}},na=function(){ta.blurTextInput(ta.currentlyFocusedField())},ra={OS:"web",select:function(e){return"web"in e?e.web:e.default},get isTesting(){return!1}},ia=n(10),oa=n.n(ia),aa={},sa={Mixin:{scrollResponderMixinGetInitialState:function(){return{isTouching:!1,lastMomentumScrollBeginTime:0,lastMomentumScrollEndTime:0,observedScrollSinceBecomingResponder:!1,becameResponderWhileAnimating:!1}},scrollResponderHandleScrollShouldSetResponder:function(){return this.state.isTouching},scrollResponderHandleStartShouldSetResponder:function(){return!1},scrollResponderHandleStartShouldSetResponderCapture:function(e){return this.scrollResponderIsAnimating()},scrollResponderHandleResponderReject:function(){oa()(!1,"ScrollView doesn't take rejection well - scrolls anyway")},scrollResponderHandleTerminationRequest:function(){return!this.state.observedScrollSinceBecomingResponder},scrollResponderHandleTouchEnd:function(e){var t=e.nativeEvent;this.state.isTouching=0!==t.touches.length,this.props.onTouchEnd&&this.props.onTouchEnd(e)},scrollResponderHandleResponderRelease:function(e){this.props.onResponderRelease&&this.props.onResponderRelease(e);var t=ta.currentlyFocusedField();this.props.keyboardShouldPersistTaps||null==t||e.target===t||this.state.observedScrollSinceBecomingResponder||this.state.becameResponderWhileAnimating||(this.props.onScrollResponderKeyboardDismissed&&this.props.onScrollResponderKeyboardDismissed(e),ta.blurTextInput(t))},scrollResponderHandleScroll:function(e){this.state.observedScrollSinceBecomingResponder=!0,this.props.onScroll&&this.props.onScroll(e)},scrollResponderHandleResponderGrant:function(e){this.state.observedScrollSinceBecomingResponder=!1,this.props.onResponderGrant&&this.props.onResponderGrant(e),this.state.becameResponderWhileAnimating=this.scrollResponderIsAnimating()},scrollResponderHandleScrollBeginDrag:function(e){this.props.onScrollBeginDrag&&this.props.onScrollBeginDrag(e)},scrollResponderHandleScrollEndDrag:function(e){this.props.onScrollEndDrag&&this.props.onScrollEndDrag(e)},scrollResponderHandleMomentumScrollBegin:function(e){this.state.lastMomentumScrollBeginTime=Date.now(),this.props.onMomentumScrollBegin&&this.props.onMomentumScrollBegin(e)},scrollResponderHandleMomentumScrollEnd:function(e){this.state.lastMomentumScrollEndTime=Date.now(),this.props.onMomentumScrollEnd&&this.props.onMomentumScrollEnd(e)},scrollResponderHandleTouchStart:function(e){this.state.isTouching=!0,this.props.onTouchStart&&this.props.onTouchStart(e)},scrollResponderHandleTouchMove:function(e){this.props.onTouchMove&&this.props.onTouchMove(e)},scrollResponderIsAnimating:function(){return Date.now()-this.state.lastMomentumScrollEndTime<16||this.state.lastMomentumScrollEndTime<this.state.lastMomentumScrollBeginTime},scrollResponderGetScrollableNode:function(){return this.getScrollableNode?this.getScrollableNode():vo(this)},scrollResponderScrollTo:function(e,t,n){if("number"==typeof e)console.warn("`scrollResponderScrollTo(x, y, animated)` is deprecated. Use `scrollResponderScrollTo({x: 5, y: 5, animated: true})` instead.");else{var r=e||aa;e=r.x,t=r.y,n=r.animated}var i=this.scrollResponderGetScrollableNode(),o=e||0,a=t||0;"function"==typeof i.scroll?i.scroll({top:a,left:o,behavior:n?"smooth":"auto"}):(i.scrollLeft=o,i.scrollTop=a)},scrollResponderZoomTo:function(e,t){"ios"!==ra.OS&&Tt()("zoomToRect is not implemented")},scrollResponderFlashScrollIndicators:function(){},scrollResponderScrollNativeHandleToKeyboard:function(e,t,n){this.additionalScrollOffset=t||0,this.preventNegativeScrollOffset=!!n,Or.measureLayout(e,vo(this.getInnerViewNode()),this.scrollResponderTextInputFocusError,this.scrollResponderInputMeasureAndScrollToKeyboard)},scrollResponderInputMeasureAndScrollToKeyboard:function(e,t,n,r){var i=Ao.get("window").height;this.keyboardWillOpenTo&&(i=this.keyboardWillOpenTo.endCoordinates.screenY);var o=t-i+r+this.additionalScrollOffset;this.preventNegativeScrollOffset&&(o=Math.max(0,o)),this.scrollResponderScrollTo({x:0,y:o,animated:!0}),this.additionalOffset=0,this.preventNegativeScrollOffset=!1},scrollResponderTextInputFocusError:function(e){console.error("Error measuring text field: ",e)},UNSAFE_componentWillMount:function(){this.keyboardWillOpenTo=null,this.additionalScrollOffset=0},scrollResponderKeyboardWillShow:function(e){this.keyboardWillOpenTo=e,this.props.onKeyboardWillShow&&this.props.onKeyboardWillShow(e)},scrollResponderKeyboardWillHide:function(e){this.keyboardWillOpenTo=null,this.props.onKeyboardWillHide&&this.props.onKeyboardWillHide(e)},scrollResponderKeyboardDidShow:function(e){e&&(this.keyboardWillOpenTo=e),this.props.onKeyboardDidShow&&this.props.onKeyboardDidShow(e)},scrollResponderKeyboardDidHide:function(e){this.keyboardWillOpenTo=null,this.props.onKeyboardDidHide&&this.props.onKeyboardDidHide(e)}}};function la(){return(la=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ua(e){return{nativeEvent:{contentOffset:{get x(){return e.target.scrollLeft},get y(){return e.target.scrollTop}},contentSize:{get height(){return e.target.scrollHeight},get width(){return e.target.scrollWidth}},layoutMeasurement:{get height(){return e.target.offsetHeight},get width(){return e.target.offsetWidth}}},timeStamp:Date.now()}}var ca=i.forwardRef((function(e,t){var n=e.onScroll,r=e.onTouchMove,o=e.onWheel,a=e.scrollEnabled,s=void 0===a||a,l=e.scrollEventThrottle,u=void 0===l?0:l,c=e.showsHorizontalScrollIndicator,f=e.showsVerticalScrollIndicator,d=e.style,p=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["onScroll","onTouchMove","onWheel","scrollEnabled","scrollEventThrottle","showsHorizontalScrollIndicator","showsVerticalScrollIndicator","style"]),h=i.useRef({isScrolling:!1,scrollLastTick:0}),m=i.useRef(null),v=i.useRef(null);function g(e){return function(t){s&&e&&e(t)}}function y(e){h.current.scrollLastTick=Date.now(),n&&n(ua(e))}var b=!1===c||!1===f;return i.createElement(Fi,la({},p,{onScroll:function(e){var t,r,i;e.stopPropagation(),e.target===v.current&&(e.persist(),null!=m.current&&clearTimeout(m.current),m.current=setTimeout((function(){!function(e){h.current.isScrolling=!1,n&&n(ua(e))}(e)}),100),h.current.isScrolling?(t=h.current.scrollLastTick,r=u,i=Date.now()-t,r>0&&i>=r&&y(e)):function(e){h.current.isScrolling=!0,y(e)}(e))},onTouchMove:g(r),onWheel:g(o),ref:Ir(v,t),style:[d,!s&&fa.scrollDisabled,b&&fa.hideScrollbar]}))})),fa=nr.create({scrollDisabled:{overflowX:"hidden",overflowY:"hidden",touchAction:"none"},hideScrollbar:{scrollbarWidth:"none"}}),da=ca;function pa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ha(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pa(Object(n),!0).forEach((function(t){ma(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ma(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function va(){return(va=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var ga={},ya=ea()({displayName:"ScrollView",mixins:[sa.Mixin],getInitialState:function(){return this.scrollResponderMixinGetInitialState()},flashScrollIndicators:function(){this.scrollResponderFlashScrollIndicators()},getScrollResponder:function(){return this},getScrollableNode:function(){return this._scrollNodeRef},getInnerViewRef:function(){return this._innerViewRef},getInnerViewNode:function(){return this._innerViewRef},getNativeScrollRef:function(){return this._scrollNodeRef},scrollTo:function(e,t,n){if("number"==typeof e)console.warn("`scrollTo(y, x, animated)` is deprecated. Use `scrollTo({x: 5, y: 5, animated: true})` instead.");else{var r=e||ga;t=r.x,e=r.y,n=r.animated}this.getScrollResponder().scrollResponderScrollTo({x:t||0,y:e||0,animated:!1!==n})},scrollToEnd:function(e){var t=!1!==(e&&e.animated),n=this.props.horizontal,r=this.getScrollResponder(),i=r.scrollResponderGetScrollableNode(),o=n?i.scrollWidth:0,a=n?0:i.scrollHeight;r.scrollResponderScrollTo({x:o,y:a,animated:t})},render:function(){var e=this.props,t=e.contentContainerStyle,n=e.horizontal,r=e.onContentSizeChange,i=e.refreshControl,a=e.stickyHeaderIndices,s=e.pagingEnabled,l=(e.forwardedRef,e.keyboardDismissMode,e.onScroll,function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["contentContainerStyle","horizontal","onContentSizeChange","refreshControl","stickyHeaderIndices","pagingEnabled","forwardedRef","keyboardDismissMode","onScroll"])),u={};r&&(u={onLayout:this._handleContentOnLayout});var c=!n&&Array.isArray(a),f=c||s?o.a.Children.map(this.props.children,(function(e,t){var n=c&&a.indexOf(t)>-1;return null!=e&&(n||s)?o.a.createElement(Fi,{style:nr.compose(n&&Sa.stickyHeader,s&&Sa.pagingEnabledChild)},e):e})):this.props.children,d=o.a.createElement(Fi,va({},u,{children:f,collapsable:!1,ref:this._setInnerViewRef,style:nr.compose(n&&Sa.contentContainerHorizontal,t)})),p=n?Sa.baseHorizontal:Sa.baseVertical,h=n?Sa.pagingEnabledHorizontal:Sa.pagingEnabledVertical,m=ha(ha({},l),{},{style:[p,s&&h,this.props.style],onTouchStart:this.scrollResponderHandleTouchStart,onTouchMove:this.scrollResponderHandleTouchMove,onTouchEnd:this.scrollResponderHandleTouchEnd,onScrollBeginDrag:this.scrollResponderHandleScrollBeginDrag,onScrollEndDrag:this.scrollResponderHandleScrollEndDrag,onMomentumScrollBegin:this.scrollResponderHandleMomentumScrollBegin,onMomentumScrollEnd:this.scrollResponderHandleMomentumScrollEnd,onStartShouldSetResponder:this.scrollResponderHandleStartShouldSetResponder,onStartShouldSetResponderCapture:this.scrollResponderHandleStartShouldSetResponderCapture,onScrollShouldSetResponder:this.scrollResponderHandleScrollShouldSetResponder,onScroll:this._handleScroll,onResponderGrant:this.scrollResponderHandleResponderGrant,onResponderTerminationRequest:this.scrollResponderHandleTerminationRequest,onResponderTerminate:this.scrollResponderHandleTerminate,onResponderRelease:this.scrollResponderHandleResponderRelease,onResponderReject:this.scrollResponderHandleResponderReject}),v=da;Tt()(void 0!==v,"ScrollViewClass must not be undefined");var g=o.a.createElement(v,va({},m,{ref:this._setScrollNodeRef}),d);return i?o.a.cloneElement(i,{style:m.style},g):g},_handleContentOnLayout:function(e){var t=e.nativeEvent.layout,n=t.width,r=t.height;this.props.onContentSizeChange(n,r)},_handleScroll:function(e){"on-drag"===this.props.keyboardDismissMode&&na(),this.scrollResponderHandleScroll(e)},_setInnerViewRef:function(e){this._innerViewRef=e},_setScrollNodeRef:function(e){this._scrollNodeRef=e,null!=e&&(e.getScrollResponder=this.getScrollResponder,e.getInnerViewNode=this.getInnerViewNode,e.getInnerViewRef=this.getInnerViewRef,e.getNativeScrollRef=this.getNativeScrollRef,e.getScrollableNode=this.getScrollableNode,e.scrollTo=this.scrollTo,e.scrollToEnd=this.scrollToEnd,e.flashScrollIndicators=this.flashScrollIndicators,e.scrollResponderZoomTo=this.scrollResponderZoomTo,e.scrollResponderScrollNativeHandleToKeyboard=this.scrollResponderScrollNativeHandleToKeyboard),Lr(this.props.forwardedRef)(e)}}),ba={flexGrow:1,flexShrink:1,transform:[{translateZ:0}],WebkitOverflowScrolling:"touch"},Sa=nr.create({baseVertical:ha(ha({},ba),{},{flexDirection:"column",overflowX:"hidden",overflowY:"auto"}),baseHorizontal:ha(ha({},ba),{},{flexDirection:"row",overflowX:"auto",overflowY:"hidden"}),contentContainerHorizontal:{flexDirection:"row"},stickyHeader:{position:"sticky",top:0,zIndex:10},pagingEnabledHorizontal:{scrollSnapType:"x mandatory"},pagingEnabledVertical:{scrollSnapType:"y mandatory"},pagingEnabledChild:{scrollSnapAlign:"start"}}),xa=o.a.forwardRef((function(e,t){return o.a.createElement(ya,va({},e,{forwardedRef:t}))}));xa.displayName="ScrollView";var _a=xa;function Ea(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ca(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ea(Object(n),!0).forEach((function(t){Ta(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ea(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ta(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pa(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Aa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Aa(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function Aa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ra(e,t,n,r,i,o){if(function(e,t,n){return e>=0&&t<=n&&t>e}(n,r,i))return!0;var a=function(e,t,n){var r=Math.min(t,n)-Math.max(e,0);return Math.max(0,r)}(n,r,i);return 100*(e?a/i:a/o)>=t}var Oa=function(){function e(e){void 0===e&&(e={viewAreaCoveragePercentThreshold:0}),this._hasInteracted=!1,this._timers=new Set,this._viewableIndices=[],this._viewableItems=new Map,this._config=e}var t=e.prototype;return t.dispose=function(){this._timers.forEach(clearTimeout)},t.computeViewableItems=function(e,t,n,r,i){var o=this._config,a=o.itemVisiblePercentThreshold,s=o.viewAreaCoveragePercentThreshold,l=null!=s,u=l?s:a;Tt()(null!=u&&null!=a!=(null!=s),"Must set exactly one of itemVisiblePercentThreshold or viewAreaCoveragePercentThreshold");var c=[];if(0===e)return c;var f=-1,d=i||{first:0,last:e-1},p=d.first,h=d.last;if(h>=e)return console.warn("Invalid render range computing viewability "+JSON.stringify({renderRange:i,itemCount:e})),[];for(var m=p;m<=h;m++){var v=r(m);if(v){var g=v.offset-t,y=g+v.length;if(g<n&&y>0)f=m,Ra(l,u,g,y,n,v.length)&&c.push(m);else if(f>=0)break}}return c},t.onUpdate=function(e,t,n,r,i,o,a){var s=this;if((!this._config.waitForInteraction||this._hasInteracted)&&0!==e&&r(0)){var l=[];if(e&&(l=this.computeViewableItems(e,t,n,r,a)),this._viewableIndices.length!==l.length||!this._viewableIndices.every((function(e,t){return e===l[t]})))if(this._viewableIndices=l,this._config.minimumViewTime){var u=setTimeout((function(){s._timers.delete(u),s._onUpdateSync(l,o,i)}),this._config.minimumViewTime);this._timers.add(u)}else this._onUpdateSync(l,o,i)}},t.resetViewableIndices=function(){this._viewableIndices=[]},t.recordInteraction=function(){this._hasInteracted=!0},t._onUpdateSync=function(e,t,n){var r=this;e=e.filter((function(e){return r._viewableIndices.includes(e)}));for(var i,o=this._viewableItems,a=new Map(e.map((function(e){var t=n(e,!0);return[t.key,t]}))),s=[],l=Pa(a);!(i=l()).done;){var u=i.value,c=u[0],f=u[1];o.has(c)||s.push(f)}for(var d,p=Pa(o);!(d=p()).done;){var h=d.value,m=h[0],v=h[1];a.has(m)||s.push(Ca(Ca({},v),{},{isViewable:!1}))}s.length>0&&(this._viewableItems=a,t({viewableItems:Array.from(a.values()),changed:s,viewabilityConfig:this._config}))},e}();var wa=function(){var e;return(e=console).log.apply(e,arguments)};function Ma(e,t,n){for(var r=[],i=0,o=0;o<t;o++)for(var a=n(o),s=a.offset+a.length,l=0;l<e.length;l++)if(null==r[l]&&s>=e[l]&&(r[l]=o,i++,l===e.length-1))return Tt()(i===e.length,"bad offsets input, should be in increasing order: %s",JSON.stringify(e)),r;return r}function La(e,t){return t.last-t.first+1-Math.max(0,1+Math.min(t.last,e.last)-Math.max(t.first,e.first))}function Ia(e,t,n,r){var i=e.data,o=e.getItemCount,a=e.maxToRenderPerBatch,s=e.windowSize,l=o(i);if(0===l)return t;var u=r.offset,c=r.velocity,f=r.visibleLength,d=Math.max(0,u),p=d+f,h=(s-1)*f,m=c>1?"after":c<-1?"before":"none",v=Math.max(0,d-.5*h),g=Math.max(0,p+.5*h);if(n(l-1).offset<v)return{first:Math.max(0,l-1-a),last:l-1};var y=Ma([v,d,p,g],e.getItemCount(e.data),n),b=y[0],S=y[1],x=y[2],_=y[3];b=null==b?0:b,_=null==_?l-1:_;for(var E={first:S=null==S?Math.max(0,b):S,last:x=null==x?Math.min(_,S+a-1):x},C=La(t,E);!(S<=b&&x>=_);){var T=C>=a,P=S<=t.first||S>t.last,A=S>b&&(!T||!P),R=x>=t.last||x<t.first,O=x<_&&(!T||!R);if(T&&!A&&!O)break;!A||"after"===m&&O&&R||(P&&C++,S--),!O||"before"===m&&A&&P||(R&&C++,x++)}if(!(x>=S&&S>=0&&x<l&&S>=b&&x<=_&&S<=E.first&&x>=E.last))throw new Error("Bad window calculation "+JSON.stringify({first:S,last:x,itemCount:l,overscanFirst:b,overscanLast:_,visible:E}));return{first:S,last:x}}function Da(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Da(Object(n),!0).forEach((function(t){Na(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Da(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Na(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ba=i.createContext(null);function Va(e){var t=e.children,n=e.value,r=Object(i.useMemo)((function(){return{cellKey:null,getScrollMetrics:n.getScrollMetrics,horizontal:n.horizontal,getOutermostParentListRef:n.getOutermostParentListRef,getNestedChildState:n.getNestedChildState,registerAsNestedChild:n.registerAsNestedChild,unregisterAsNestedChild:n.unregisterAsNestedChild,debugInfo:{cellKey:n.debugInfo.cellKey,horizontal:n.debugInfo.horizontal,listKey:n.debugInfo.listKey,parent:n.debugInfo.parent}}}),[n.getScrollMetrics,n.horizontal,n.getOutermostParentListRef,n.getNestedChildState,n.registerAsNestedChild,n.unregisterAsNestedChild,n.debugInfo.cellKey,n.debugInfo.horizontal,n.debugInfo.listKey,n.debugInfo.parent]);return i.createElement(Ba.Provider,{value:r},t)}function ka(e){var t=e.cellKey,n=e.children,r=Object(i.useContext)(Ba);return i.createElement(Ba.Provider,{value:null==r?null:Fa(Fa({},r),{},{cellKey:t})},n)}function Ua(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return za(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return za(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function za(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ja(){return(ja=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ha(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ha(Object(n),!0).forEach((function(t){Ga(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ha(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ga(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xa(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Ya(e,t)}function Ya(e,t){return(Ya=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}nr.flatten;var Ka=!1,Za="",qa=function(e){Xa(n,e);var t=n.prototype;function n(t){var n;if((n=e.call(this,t)||this)._getScrollMetrics=function(){return n._scrollMetrics},n._getOutermostParentListRef=function(){return n._isNestedWithSameOrientation()?n.context.getOutermostParentListRef():function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n)},n._getNestedChildState=function(e){var t=n._nestedChildLists.get(e);return t&&t.state},n._registerAsNestedChild=function(e){var t=n._cellKeysToChildListKeys.get(e.cellKey)||new Set;t.add(e.key),n._cellKeysToChildListKeys.set(e.cellKey,t);var r=n._nestedChildLists.get(e.key);r&&null!==r.ref&&console.error("A VirtualizedList contains a cell which itself contains more than one VirtualizedList of the same orientation as the parent list. You must pass a unique listKey prop to each sibling list.\n\n"+function(e){var t="VirtualizedList trace:\n  Child ("+(e.horizontal?"horizontal":"vertical")+"):\n    listKey: "+e.key+"\n    cellKey: "+e.cellKey,n=e.parentDebugInfo;for(;n;)t+="\n  Parent ("+(n.horizontal?"horizontal":"vertical")+"):\n    listKey: "+n.listKey+"\n    cellKey: "+n.cellKey,n=n.parent;return t}(Wa(Wa({},e),{},{horizontal:!!e.ref.props.horizontal}))),n._nestedChildLists.set(e.key,{ref:e.ref,state:null}),n._hasInteracted&&e.ref.recordInteraction()},n._unregisterAsNestedChild=function(e){n._nestedChildLists.set(e.key,{ref:null,state:e.state})},n._onUpdateSeparators=function(e,t){e.forEach((function(e){var r=null!=e&&n._cellRefs[e];r&&r.updateSeparatorProps(t)}))},n._averageCellLength=0,n._cellKeysToChildListKeys=new Map,n._cellRefs={},n._frames={},n._footerLength=0,n._hasDoneInitialScroll=!1,n._hasInteracted=!1,n._hasMore=!1,n._hasWarned={},n._headerLength=0,n._hiPriInProgress=!1,n._highestMeasuredFrameIndex=0,n._indicesToKeys=new Map,n._nestedChildLists=new Map,n._offsetFromParentVirtualizedList=0,n._prevParentOffset=0,n._scrollMetrics={contentLength:0,dOffset:0,dt:10,offset:0,timestamp:0,velocity:0,visibleLength:0},n._scrollRef=null,n._sentEndForContentLength=0,n._totalCellLength=0,n._totalCellsMeasured=0,n._viewabilityTuples=[],n._captureScrollRef=function(e){n._scrollRef=e},n._defaultRenderScrollComponent=function(e){var t=e.onRefresh;return n._isNestedWithSameOrientation()?i.createElement(Fi,e):t?(Tt()("boolean"==typeof e.refreshing,"`refreshing` prop must be set as a boolean in order to use `onRefresh`, but got `"+JSON.stringify(e.refreshing)+"`"),i.createElement(_a,ja({},e,{refreshControl:null==e.refreshControl?i.createElement(Jo,{refreshing:e.refreshing,onRefresh:t,progressViewOffset:e.progressViewOffset}):e.refreshControl}))):i.createElement(_a,e)},n._onCellUnmount=function(e){var t=n._frames[e];t&&(n._frames[e]=Wa(Wa({},t),{},{inLayout:!1}))},n._onLayout=function(e){n._isNestedWithSameOrientation()?n.measureLayoutRelativeToContainingList():n._scrollMetrics.visibleLength=n._selectLength(e.nativeEvent.layout),n.props.onLayout&&n.props.onLayout(e),n._scheduleCellsToRenderUpdate(),n._maybeCallOnEndReached()},n._onLayoutEmpty=function(e){n.props.onLayout&&n.props.onLayout(e)},n._onLayoutFooter=function(e){n._triggerRemeasureForChildListsInCell(n._getFooterCellKey()),n._footerLength=n._selectLength(e.nativeEvent.layout)},n._onLayoutHeader=function(e){n._headerLength=n._selectLength(e.nativeEvent.layout)},n._onContentSizeChange=function(e,t){e>0&&t>0&&null!=n.props.initialScrollIndex&&n.props.initialScrollIndex>0&&!n._hasDoneInitialScroll&&(n._hasDoneInitialScroll=!0),n.props.onContentSizeChange&&n.props.onContentSizeChange(e,t),n._scrollMetrics.contentLength=n._selectLength({height:t,width:e}),n._scheduleCellsToRenderUpdate(),n._maybeCallOnEndReached()},n._convertParentScrollMetrics=function(e){var t=e.offset-n._offsetFromParentVirtualizedList,r=e.visibleLength,i=t-n._scrollMetrics.offset;return{visibleLength:r,contentLength:n._scrollMetrics.contentLength,offset:t,dOffset:i}},n._onScroll=function(e){n._nestedChildLists.forEach((function(t){t.ref&&t.ref._onScroll(e)})),n.props.onScroll&&n.props.onScroll(e);var t=e.timeStamp,r=n._selectLength(e.nativeEvent.layoutMeasurement),i=n._selectLength(e.nativeEvent.contentSize),o=n._selectOffset(e.nativeEvent.contentOffset),a=o-n._scrollMetrics.offset;if(n._isNestedWithSameOrientation()){if(0===n._scrollMetrics.contentLength)return;var s=n._convertParentScrollMetrics({visibleLength:r,offset:o});r=s.visibleLength,i=s.contentLength,o=s.offset,a=s.dOffset}var l=n._scrollMetrics.timestamp?Math.max(1,t-n._scrollMetrics.timestamp):1,u=a/l;l>500&&n._scrollMetrics.dt>500&&i>5*r&&!n._hasWarned.perf&&(wa("VirtualizedList: You have a large list that is slow to update - make sure your renderItem function renders components that follow React performance best practices like PureComponent, shouldComponentUpdate, etc.",{dt:l,prevDt:n._scrollMetrics.dt,contentLength:i}),n._hasWarned.perf=!0),n._scrollMetrics={contentLength:i,dt:l,dOffset:a,offset:o,timestamp:t,velocity:u,visibleLength:r},n._updateViewableItems(n.props.data),n.props&&(n._maybeCallOnEndReached(),0!==u&&n._fillRateHelper.activate(),n._computeBlankness(),n._scheduleCellsToRenderUpdate())},n._onScrollBeginDrag=function(e){n._nestedChildLists.forEach((function(t){t.ref&&t.ref._onScrollBeginDrag(e)})),n._viewabilityTuples.forEach((function(e){e.viewabilityHelper.recordInteraction()})),n._hasInteracted=!0,n.props.onScrollBeginDrag&&n.props.onScrollBeginDrag(e)},n._onScrollEndDrag=function(e){n._nestedChildLists.forEach((function(t){t.ref&&t.ref._onScrollEndDrag(e)}));var t=e.nativeEvent.velocity;t&&(n._scrollMetrics.velocity=n._selectOffset(t)),n._computeBlankness(),n.props.onScrollEndDrag&&n.props.onScrollEndDrag(e)},n._onMomentumScrollBegin=function(e){n._nestedChildLists.forEach((function(t){t.ref&&t.ref._onMomentumScrollBegin(e)})),n.props.onMomentumScrollBegin&&n.props.onMomentumScrollBegin(e)},n._onMomentumScrollEnd=function(e){n._nestedChildLists.forEach((function(t){t.ref&&t.ref._onMomentumScrollEnd(e)})),n._scrollMetrics.velocity=0,n._computeBlankness(),n.props.onMomentumScrollEnd&&n.props.onMomentumScrollEnd(e)},n._updateCellsToRender=function(){var e=n.props,t=e.data,r=e.getItemCount,i=e.onEndReachedThreshold,o=n._isVirtualizationDisabled();n._updateViewableItems(t),t&&n.setState((function(e){var a,s=n._scrollMetrics,l=s.contentLength,u=s.offset,c=s.visibleLength;if(o){var f=l-c-u<i*c?n.props.maxToRenderPerBatch:0;a={first:0,last:Math.min(e.last+f,r(t)-1)}}else c>0&&l>0&&(n.props.initialScrollIndex&&!n._scrollMetrics.offset||(a=Ia(n.props,e,n._getFrameMetricsApprox,n._scrollMetrics)));if(a&&n._nestedChildLists.size>0)for(var d=a.first,p=a.last,h=d;h<=p;h++){var m=n._indicesToKeys.get(h),v=m&&n._cellKeysToChildListKeys.get(m);if(v){for(var g,y=!1,b=Ua(v);!(g=b()).done;){var S=g.value,x=n._nestedChildLists.get(S);if(x&&x.ref&&x.ref.hasMore()){y=!0;break}}if(y&&a){a.last=h;break}}}return null!=a&&a.first===e.first&&a.last===e.last&&(a=null),a}))},n._createViewToken=function(e,t){var r=n.props,i=r.data,o=r.getItem,a=r.keyExtractor,s=o(i,e);return{index:e,item:s,key:a(s,e),isViewable:t}},n._getFrameMetricsApprox=function(e){var t=n._getFrameMetrics(e);if(t&&t.index===e)return t;var r=n.props.getItemLayout;return Tt()(!r,"Should not have to estimate frames when a measurement metrics function is provided"),{length:n._averageCellLength,offset:n._averageCellLength*e}},n._getFrameMetrics=function(e){var t=n.props,r=t.data,i=t.getItem,o=t.getItemCount,a=t.getItemLayout,s=t.keyExtractor;Tt()(o(r)>e,"Tried to get frame for out of range index "+e);var l=i(r,e),u=l&&n._frames[s(l,e)];return u&&u.index===e||a&&(u=a(r,e)),u},Tt()(!t.onScroll||!t.onScroll.__isNative,"Components based on VirtualizedList must be wrapped with Animated.createAnimatedComponent to support native onScroll events with useNativeDriver"),Tt()(t.windowSize>0,"VirtualizedList: The windowSize prop must be present and set to a value greater than 0."),n._fillRateHelper=new Qo.a(n._getFrameMetrics),n._updateCellsToRenderBatcher=new qo(n._updateCellsToRender,n.props.updateCellsBatchingPeriod),n.props.viewabilityConfigCallbackPairs)n._viewabilityTuples=n.props.viewabilityConfigCallbackPairs.map((function(e){return{viewabilityHelper:new Oa(e.viewabilityConfig),onViewableItemsChanged:e.onViewableItemsChanged}}));else if(n.props.onViewableItemsChanged){var r=n.props.onViewableItemsChanged;n._viewabilityTuples.push({viewabilityHelper:new Oa(n.props.viewabilityConfig),onViewableItemsChanged:r})}var o={first:n.props.initialScrollIndex||0,last:Math.min(n.props.getItemCount(n.props.data),(n.props.initialScrollIndex||0)+n.props.initialNumToRender)-1};if(n._isNestedWithSameOrientation()){var a=n.context.getNestedChildState(n._getListKey());a&&(o=a,n.state=a,n._frames=a.frames)}return n.invertedWheelEventHandler=function(e){if(n.props.inverted&&n._scrollRef&&n._scrollRef.getScrollableNode){var t=n._scrollRef.getScrollableNode();n.props.horizontal?t.scrollLeft-=e.deltaX||e.wheelDeltaX:t.scrollTop-=e.deltaY||e.wheelDeltaY,e.preventDefault()}},n.state=o,n}return t.scrollToEnd=function(e){var t=!e||e.animated,n=this.props.getItemCount(this.props.data)-1,r=this._getFrameMetricsApprox(n),i=Math.max(0,r.offset+r.length+this._footerLength-this._scrollMetrics.visibleLength);null!=this._scrollRef&&(null!=this._scrollRef.scrollTo?this._scrollRef.scrollTo(this.props.horizontal?{x:i,animated:t}:{y:i,animated:t}):console.warn("No scrollTo method provided. This may be because you have two nested VirtualizedLists with the same orientation, or because you are using a custom component that does not implement scrollTo."))},t.scrollToIndex=function(e){var t=this.props,n=t.data,r=t.horizontal,i=t.getItemCount,o=t.getItemLayout,a=t.onScrollToIndexFailed,s=e.animated,l=e.index,u=e.viewOffset,c=e.viewPosition;if(Tt()(l>=0,"scrollToIndex out of range: requested index "+l+" but minimum is 0"),Tt()(i(n)>=1,"scrollToIndex out of range: item length "+i(n)+" but minimum is 1"),Tt()(l<i(n),"scrollToIndex out of range: requested index "+l+" is out of 0 to "+(i(n)-1)),!o&&l>this._highestMeasuredFrameIndex)return Tt()(!!a,"scrollToIndex should be used in conjunction with getItemLayout or onScrollToIndexFailed, otherwise there is no way to know the location of offscreen indices or handle failures."),void a({averageItemLength:this._averageCellLength,highestMeasuredFrameIndex:this._highestMeasuredFrameIndex,index:l});var f=this._getFrameMetricsApprox(l),d=Math.max(0,f.offset-(c||0)*(this._scrollMetrics.visibleLength-f.length))-(u||0);null!=this._scrollRef&&(null!=this._scrollRef.scrollTo?this._scrollRef.scrollTo(r?{x:d,animated:s}:{y:d,animated:s}):console.warn("No scrollTo method provided. This may be because you have two nested VirtualizedLists with the same orientation, or because you are using a custom component that does not implement scrollTo."))},t.scrollToItem=function(e){for(var t=e.item,n=this.props,r=n.data,i=n.getItem,o=(0,n.getItemCount)(r),a=0;a<o;a++)if(i(r,a)===t){this.scrollToIndex(Wa(Wa({},e),{},{index:a}));break}},t.scrollToOffset=function(e){var t=e.animated,n=e.offset;null!=this._scrollRef&&(null!=this._scrollRef.scrollTo?this._scrollRef.scrollTo(this.props.horizontal?{x:n,animated:t}:{y:n,animated:t}):console.warn("No scrollTo method provided. This may be because you have two nested VirtualizedLists with the same orientation, or because you are using a custom component that does not implement scrollTo."))},t.recordInteraction=function(){this._nestedChildLists.forEach((function(e){e.ref&&e.ref.recordInteraction()})),this._viewabilityTuples.forEach((function(e){e.viewabilityHelper.recordInteraction()})),this._updateViewableItems(this.props.data)},t.flashScrollIndicators=function(){null!=this._scrollRef&&this._scrollRef.flashScrollIndicators()},t.getScrollResponder=function(){if(this._scrollRef&&this._scrollRef.getScrollResponder)return this._scrollRef.getScrollResponder()},t.getScrollableNode=function(){return this._scrollRef&&this._scrollRef.getScrollableNode?this._scrollRef.getScrollableNode():vo(this._scrollRef)},t.getScrollRef=function(){return this._scrollRef&&this._scrollRef.getScrollRef?this._scrollRef.getScrollRef():this._scrollRef},t.setNativeProps=function(e){this._scrollRef&&this._scrollRef.setNativeProps(e)},t._getCellKey=function(){var e;return(null==(e=this.context)?void 0:e.cellKey)||"rootList"},t._getListKey=function(){return this.props.listKey||this._getCellKey()},t._getDebugInfo=function(){var e;return{listKey:this._getListKey(),cellKey:this._getCellKey(),horizontal:!!this.props.horizontal,parent:null==(e=this.context)?void 0:e.debugInfo}},t.hasMore=function(){return this._hasMore},t.componentDidMount=function(){this._isNestedWithSameOrientation()&&this.context.registerAsNestedChild({cellKey:this._getCellKey(),key:this._getListKey(),ref:this,parentDebugInfo:this.context.debugInfo}),this.setupWebWheelHandler()},t.componentWillUnmount=function(){this._isNestedWithSameOrientation()&&this.context.unregisterAsNestedChild({key:this._getListKey(),state:{first:this.state.first,last:this.state.last,frames:this._frames}}),this._updateViewableItems(null),this._updateCellsToRenderBatcher.dispose({abort:!0}),this._viewabilityTuples.forEach((function(e){e.viewabilityHelper.dispose()})),this._fillRateHelper.deactivateAndFlush(),this.teardownWebWheelHandler()},t.setupWebWheelHandler=function(){var e=this;this._scrollRef&&this._scrollRef.getScrollableNode?this._scrollRef.getScrollableNode().addEventListener("wheel",this.invertedWheelEventHandler):setTimeout((function(){return e.setupWebWheelHandler()}),50)},t.teardownWebWheelHandler=function(){this._scrollRef&&this._scrollRef.getScrollableNode&&this._scrollRef.getScrollableNode().removeEventListener("wheel",this.invertedWheelEventHandler)},n.getDerivedStateFromProps=function(e,t){var n=e.data,r=e.getItemCount,i=e.maxToRenderPerBatch;return{first:Math.max(0,Math.min(t.first,r(n)-1-i)),last:Math.max(0,Math.min(t.last,r(n)-1))}},t._pushCells=function(e,t,n,r,o,a){var s,l=this,u=this.props,c=u.CellRendererComponent,f=u.ItemSeparatorComponent,d=u.data,p=u.getItem,h=u.getItemCount,m=u.horizontal,v=u.keyExtractor,g=this.props.ListHeaderComponent?1:0,y=h(d)-1;o=Math.min(y,o);for(var b=function(r){var o=p(d,r),u=v(o,r);l._indicesToKeys.set(r,u),n.has(r+g)&&t.push(e.length),e.push(i.createElement(Qa,{CellRendererComponent:c,ItemSeparatorComponent:r<y?f:void 0,cellKey:u,fillRateHelper:l._fillRateHelper,horizontal:m,index:r,inversionStyle:a,item:o,key:u,prevCellKey:s,onUpdateSeparators:l._onUpdateSeparators,onLayout:function(e){return l._onCellLayout(e,u,r)},onUnmount:l._onCellUnmount,parentProps:l.props,ref:function(e){l._cellRefs[u]=e}})),s=u},S=r;S<=o;S++)b(S)},t._isVirtualizationDisabled=function(){return this.props.disableVirtualization||!1},t._isNestedWithSameOrientation=function(){var e=this.context;return!(!e||!!e.horizontal!=!!this.props.horizontal)},t.render=function(){var e=this,t=this.props,n=t.ListEmptyComponent,r=t.ListFooterComponent,o=t.ListHeaderComponent,a=this.props,s=a.data,l=a.horizontal,u=this._isVirtualizationDisabled(),c=this.props.inverted?this.props.horizontal?Ja.horizontallyInverted:Ja.verticallyInverted:null,f=[],d=new Set(this.props.stickyHeaderIndices),p=[];if(o){d.has(0)&&p.push(0);var h=i.isValidElement(o)?o:i.createElement(o,null);f.push(i.createElement(ka,{cellKey:this._getCellKey()+"-header",key:"$header"},i.createElement(Fi,{onLayout:this._onLayoutHeader,style:nr.compose(c,this.props.ListHeaderComponentStyle)},h)))}var m=this.props.getItemCount(s);if(m>0){Ka=!1,Za="";var v=l?"width":"height",g=this.props.initialScrollIndex?-1:this.props.initialNumToRender-1,y=this.state,b=y.first,S=y.last;this._pushCells(f,p,d,0,g,c);var x=Math.max(g+1,b);if(!u&&b>g+1){var _=!1;if(d.size>0)for(var E=o?1:0,C=x-1;C>g;C--)if(d.has(C+E)){var T,P,A=this._getFrameMetricsApprox(g),R=this._getFrameMetricsApprox(C),O=R.offset-A.offset-(this.props.initialScrollIndex?0:A.length);f.push(i.createElement(Fi,{key:"$sticky_lead",style:(T={},T[v]=O,T)})),this._pushCells(f,p,d,C,C,c);var w=this._getFrameMetricsApprox(b).offset-(R.offset+R.length);f.push(i.createElement(Fi,{key:"$sticky_trail",style:(P={},P[v]=w,P)})),_=!0;break}if(!_){var M,L=this._getFrameMetricsApprox(g),I=this._getFrameMetricsApprox(b).offset-(L.offset+L.length);f.push(i.createElement(Fi,{key:"$lead_spacer",style:(M={},M[v]=I,M)}))}}if(this._pushCells(f,p,d,x,S,c),!this._hasWarned.keys&&Ka&&(console.warn("VirtualizedList: missing keys for items, make sure to specify a key or id property on each item or provide a custom keyExtractor.",Za),this._hasWarned.keys=!0),!u&&S<m-1){var D,F=this._getFrameMetricsApprox(S),N=this.props.getItemLayout?m-1:Math.min(m-1,this._highestMeasuredFrameIndex),B=this._getFrameMetricsApprox(N),V=B.offset+B.length-(F.offset+F.length);f.push(i.createElement(Fi,{key:"$tail_spacer",style:(D={},D[v]=V,D)}))}}else if(n){var k=i.isValidElement(n)?n:i.createElement(n,null);f.push(i.cloneElement(k,{key:"$empty",onLayout:function(t){e._onLayoutEmpty(t),k.props.onLayout&&k.props.onLayout(t)},style:nr.compose(c,k.props.style)}))}if(r){var U=i.isValidElement(r)?r:i.createElement(r,null);f.push(i.createElement(ka,{cellKey:this._getFooterCellKey(),key:"$footer"},i.createElement(Fi,{onLayout:this._onLayoutFooter,style:nr.compose(c,this.props.ListFooterComponentStyle)},U)))}var z=Wa(Wa({},this.props),{},{onContentSizeChange:this._onContentSizeChange,onLayout:this._onLayout,onScroll:this._onScroll,onScrollBeginDrag:this._onScrollBeginDrag,onScrollEndDrag:this._onScrollEndDrag,onMomentumScrollBegin:this._onMomentumScrollBegin,onMomentumScrollEnd:this._onMomentumScrollEnd,scrollEventThrottle:this.props.scrollEventThrottle,stickyHeaderIndices:p,style:c?[c,this.props.style]:this.props.style});this._hasMore=this.state.last<this.props.getItemCount(this.props.data)-1;var j=i.createElement(Va,{value:{cellKey:null,getScrollMetrics:this._getScrollMetrics,horizontal:this.props.horizontal,getOutermostParentListRef:this._getOutermostParentListRef,getNestedChildState:this._getNestedChildState,registerAsNestedChild:this._registerAsNestedChild,unregisterAsNestedChild:this._unregisterAsNestedChild,debugInfo:this._getDebugInfo()}},i.cloneElement((this.props.renderScrollComponent||this._defaultRenderScrollComponent)(z),{ref:this._captureScrollRef},f));return this.props.debug?i.createElement(Fi,{style:Ja.debug},j,this._renderDebugOverlay()):j},t.componentDidUpdate=function(e){var t=this.props,n=t.data,r=t.extraData;n===e.data&&r===e.extraData||this._viewabilityTuples.forEach((function(e){e.viewabilityHelper.resetViewableIndices()}));var i=this._hiPriInProgress;this._scheduleCellsToRenderUpdate(),i&&(this._hiPriInProgress=!1)},t._computeBlankness=function(){this._fillRateHelper.computeBlankness(this.props,this.state,this._scrollMetrics)},t._onCellLayout=function(e,t,n){var r=e.nativeEvent.layout,i={offset:this._selectOffset(r),length:this._selectLength(r),index:n,inLayout:!0},o=this._frames[t];o&&i.offset===o.offset&&i.length===o.length&&n===o.index?this._frames[t].inLayout=!0:(this._totalCellLength+=i.length-(o?o.length:0),this._totalCellsMeasured+=o?0:1,this._averageCellLength=this._totalCellLength/this._totalCellsMeasured,this._frames[t]=i,this._highestMeasuredFrameIndex=Math.max(this._highestMeasuredFrameIndex,n),this._scheduleCellsToRenderUpdate()),this._triggerRemeasureForChildListsInCell(t),this._computeBlankness(),this._updateViewableItems(this.props.data)},t._triggerRemeasureForChildListsInCell=function(e){var t=this._cellKeysToChildListKeys.get(e);if(t)for(var n,r=Ua(t);!(n=r()).done;){var i=n.value,o=this._nestedChildLists.get(i);o&&o.ref&&o.ref.measureLayoutRelativeToContainingList()}},t.measureLayoutRelativeToContainingList=function(){var e=this;try{if(!this._scrollRef)return;this._scrollRef.measureLayout(this.context.getOutermostParentListRef().getScrollRef(),(function(t,n,r,i){e._offsetFromParentVirtualizedList=e._selectOffset({x:t,y:n}),e._scrollMetrics.contentLength=e._selectLength({width:r,height:i});var o=e._convertParentScrollMetrics(e.context.getScrollMetrics());e._scrollMetrics.visibleLength=o.visibleLength,e._scrollMetrics.offset=o.offset}),(function(e){console.warn("VirtualizedList: Encountered an error while measuring a list's offset from its containing VirtualizedList.")}))}catch(e){console.warn("measureLayoutRelativeToContainingList threw an error",e.stack)}},t._getFooterCellKey=function(){return this._getCellKey()+"-footer"},t._renderDebugOverlay=function(){for(var e=this._scrollMetrics.visibleLength/(this._scrollMetrics.contentLength||1),t=[],n=this.props.getItemCount(this.props.data),r=0;r<n;r++){var o=this._getFrameMetricsApprox(r);o.inLayout&&t.push(o)}var a=this._getFrameMetricsApprox(this.state.first).offset,s=this._getFrameMetricsApprox(this.state.last),l=s.offset+s.length-a,u=this._scrollMetrics.offset,c=this._scrollMetrics.visibleLength;return i.createElement(Fi,{style:[Ja.debugOverlayBase,Ja.debugOverlay]},t.map((function(t,n){return i.createElement(Fi,{key:"f"+n,style:[Ja.debugOverlayBase,Ja.debugOverlayFrame,{top:t.offset*e,height:t.length*e}]})})),i.createElement(Fi,{style:[Ja.debugOverlayBase,Ja.debugOverlayFrameLast,{top:a*e,height:l*e}]}),i.createElement(Fi,{style:[Ja.debugOverlayBase,Ja.debugOverlayFrameVis,{top:u*e,height:c*e}]}))},t._selectLength=function(e){return this.props.horizontal?e.width:e.height},t._selectOffset=function(e){return this.props.horizontal?e.x:e.y},t._maybeCallOnEndReached=function(){var e=this.props,t=e.data,n=e.getItemCount,r=e.onEndReached,i=e.onEndReachedThreshold,o=this._scrollMetrics,a=o.contentLength,s=o.visibleLength,l=a-s-o.offset,u=i?i*s:2;r&&this.state.last===n(t)-1&&l<u&&this._scrollMetrics.contentLength!==this._sentEndForContentLength?(this._sentEndForContentLength=this._scrollMetrics.contentLength,r({distanceFromEnd:l})):l>u&&(this._sentEndForContentLength=0)},t._scheduleCellsToRenderUpdate=function(){var e=this.state,t=e.first,n=e.last,r=this._scrollMetrics,i=r.offset,o=r.visibleLength,a=r.velocity,s=this.props.getItemCount(this.props.data),l=!1,u=this.props.onEndReachedThreshold*o/2;if(t>0){var c=i-this._getFrameMetricsApprox(t).offset;l=l||c<0||a<-2&&c<u}if(n<s-1){var f=this._getFrameMetricsApprox(n).offset-(i+o);l=l||f<0||a>2&&f<u}if(l&&(this._averageCellLength||this.props.getItemLayout)&&!this._hiPriInProgress)return this._hiPriInProgress=!0,this._updateCellsToRenderBatcher.dispose({abort:!0}),void this._updateCellsToRender();this._updateCellsToRenderBatcher.schedule()},t._updateViewableItems=function(e){var t=this,n=this.props.getItemCount;this._viewabilityTuples.forEach((function(r){r.viewabilityHelper.onUpdate(n(e),t._scrollMetrics.offset,t._scrollMetrics.visibleLength,t._getFrameMetrics,t._createViewToken,r.onViewableItemsChanged,t.state)}))},n}(i.PureComponent);qa.contextType=Ba,qa.defaultProps={disableVirtualization:!1,horizontal:!1,initialNumToRender:10,keyExtractor:function(e,t){return null!=e.key?e.key:null!=e.id?e.id:(Ka=!0,e.type&&e.type.displayName&&(Za=e.type.displayName),String(t))},maxToRenderPerBatch:10,onEndReachedThreshold:2,scrollEventThrottle:50,updateCellsBatchingPeriod:50,windowSize:21};var Qa=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).state={separatorProps:{highlighted:!1,leadingItem:t.props.item}},t._separators={highlight:function(){var e=t.props,n=e.cellKey,r=e.prevCellKey;t.props.onUpdateSeparators([n,r],{highlighted:!0})},unhighlight:function(){var e=t.props,n=e.cellKey,r=e.prevCellKey;t.props.onUpdateSeparators([n,r],{highlighted:!1})},updateProps:function(e,n){var r=t.props,i=r.cellKey,o=r.prevCellKey;t.props.onUpdateSeparators(["leading"===e?o:i],n)}},t}Xa(t,e),t.getDerivedStateFromProps=function(e,t){return{separatorProps:Wa(Wa({},t.separatorProps),{},{leadingItem:e.item})}};var n=t.prototype;return n.updateSeparatorProps=function(e){this.setState((function(t){return{separatorProps:Wa(Wa({},t.separatorProps),e)}}))},n.componentWillUnmount=function(){this.props.onUnmount(this.props.cellKey)},n._renderElement=function(e,t,n,r){return e&&t&&console.warn("VirtualizedList: Both ListItemComponent and renderItem props are present. ListItemComponent will take precedence over renderItem."),t?i.createElement(t,{item:n,index:r,separators:this._separators}):e?e({item:n,index:r,separators:this._separators}):void Tt()(!1,"VirtualizedList: Either ListItemComponent or renderItem props are required but none were found.")},n.render=function(){var e=this.props,t=e.CellRendererComponent,n=e.ItemSeparatorComponent,r=e.fillRateHelper,o=e.horizontal,a=e.item,s=e.index,l=e.inversionStyle,u=e.parentProps,c=u.renderItem,f=u.getItemLayout,d=u.ListItemComponent,p=this._renderElement(c,d,a,s),h=!f||u.debug||r.enabled()?this.props.onLayout:void 0,m=n&&i.createElement(n,this.state.separatorProps),v=l?o?[Ja.rowReverse,l]:[Ja.columnReverse,l]:o?[Ja.row,l]:l,g=t?i.createElement(t,ja({},this.props,{style:v,onLayout:h}),p,m):i.createElement(Fi,{style:v,onLayout:h},p,m);return i.createElement(ka,{cellKey:this.props.cellKey},g)},t}(i.Component);var Ja=nr.create({verticallyInverted:{transform:[{scaleY:-1}]},horizontallyInverted:{transform:[{scaleX:-1}]},row:{flexDirection:"row"},rowReverse:{flexDirection:"row-reverse"},columnReverse:{flexDirection:"column-reverse"},debug:{flex:1},debugOverlayBase:{position:"absolute",top:0,right:0},debugOverlay:{bottom:0,width:20,borderColor:"blue",borderWidth:1},debugOverlayFrame:{left:0,backgroundColor:"orange"},debugOverlayFrameLast:{left:0,borderColor:"green",borderWidth:2},debugOverlayFrameVis:{left:0,borderColor:"red",borderWidth:2}}),$a=qa;function es(){return(es=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ts(e,t){return(ts=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ns(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ns(Object(n),!0).forEach((function(t){is(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ns(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function is(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var os=rs(rs({},$a.defaultProps),{},{numColumns:1}),as=function(e){var t,n;n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,ts(t,n);var r=o.prototype;function o(t){var n;return(n=e.call(this,t)||this)._virtualizedListPairs=[],n._captureRef=function(e){n._listRef=e},n._getItem=function(e,t){var r=n.props.numColumns;if(r>1){for(var i=[],o=0;o<r;o++){var a=e[t*r+o];null!=a&&i.push(a)}return i}return e[t]},n._getItemCount=function(e){if(e){var t=n.props.numColumns;return t>1?Math.ceil(e.length/t):e.length}return 0},n._keyExtractor=function(e,t){var r=n.props,i=r.keyExtractor,o=r.numColumns;return o>1?(Tt()(Array.isArray(e),"FlatList: Encountered internal consistency error, expected each item to consist of an array with 1-%s columns; instead, received a single item.",o),e.map((function(e,n){return i(e,t*o+n)})).join(":")):i(e,t)},n._renderer=function(){var e,t=n.props,r=t.ListItemComponent,o=t.renderItem,a=t.numColumns,s=t.columnWrapperStyle,l=function(e){return r?i.createElement(r,e):o?o(e):null};return(e={})[r?"ListItemComponent":"renderItem"]=function(e){if(a>1){var t=e.item,n=e.index;return Tt()(Array.isArray(t),"Expected array of items with numColumns > 1"),i.createElement(Fi,{style:nr.compose(ss.row,s)},t.map((function(t,r){var o=l({item:t,index:n*a+r,separators:e.separators});return null!=o?i.createElement(i.Fragment,{key:r},o):null})))}return l(e)},e},n._checkProps(n.props),n.props.viewabilityConfigCallbackPairs?n._virtualizedListPairs=n.props.viewabilityConfigCallbackPairs.map((function(e){return{viewabilityConfig:e.viewabilityConfig,onViewableItemsChanged:n._createOnViewableItemsChanged(e.onViewableItemsChanged)}})):n.props.onViewableItemsChanged&&n._virtualizedListPairs.push({viewabilityConfig:n.props.viewabilityConfig,onViewableItemsChanged:n._createOnViewableItemsChanged(n.props.onViewableItemsChanged)}),n}return r.scrollToEnd=function(e){this._listRef&&this._listRef.scrollToEnd(e)},r.scrollToIndex=function(e){this._listRef&&this._listRef.scrollToIndex(e)},r.scrollToItem=function(e){this._listRef&&this._listRef.scrollToItem(e)},r.scrollToOffset=function(e){this._listRef&&this._listRef.scrollToOffset(e)},r.recordInteraction=function(){this._listRef&&this._listRef.recordInteraction()},r.flashScrollIndicators=function(){this._listRef&&this._listRef.flashScrollIndicators()},r.getScrollResponder=function(){if(this._listRef)return this._listRef.getScrollResponder()},r.getNativeScrollRef=function(){if(this._listRef)return this._listRef.getScrollRef()},r.getScrollableNode=function(){if(this._listRef)return this._listRef.getScrollableNode()},r.setNativeProps=function(e){this._listRef&&this._listRef.setNativeProps(e)},r.componentDidUpdate=function(e){Tt()(e.numColumns===this.props.numColumns,"Changing numColumns on the fly is not supported. Change the key prop on FlatList when changing the number of columns to force a fresh render of the component."),Tt()(e.onViewableItemsChanged===this.props.onViewableItemsChanged,"Changing onViewableItemsChanged on the fly is not supported"),Tt()(!Wo(e.viewabilityConfig,this.props.viewabilityConfig),"Changing viewabilityConfig on the fly is not supported"),Tt()(e.viewabilityConfigCallbackPairs===this.props.viewabilityConfigCallbackPairs,"Changing viewabilityConfigCallbackPairs on the fly is not supported"),this._checkProps(this.props)},r._checkProps=function(e){var t=e.getItem,n=e.getItemCount,r=e.horizontal,i=e.numColumns,o=e.columnWrapperStyle,a=e.onViewableItemsChanged,s=e.viewabilityConfigCallbackPairs;Tt()(!t&&!n,"FlatList does not support custom data formats."),i>1?Tt()(!r,"numColumns does not support horizontal."):Tt()(!o,"columnWrapperStyle not supported for single column lists"),Tt()(!(a&&s),"FlatList does not support setting both onViewableItemsChanged and viewabilityConfigCallbackPairs.")},r._pushMultiColumnViewable=function(e,t){var n=this.props,r=n.numColumns,i=n.keyExtractor;t.item.forEach((function(n,o){Tt()(null!=t.index,"Missing index!");var a=t.index*r+o;e.push(rs(rs({},t),{},{item:n,key:i(n,a),index:a}))}))},r._createOnViewableItemsChanged=function(e){var t=this;return function(n){var r=t.props.numColumns;if(e)if(r>1){var i=[],o=[];n.viewableItems.forEach((function(e){return t._pushMultiColumnViewable(o,e)})),n.changed.forEach((function(e){return t._pushMultiColumnViewable(i,e)})),e({viewableItems:o,changed:i})}else e(n)}},r.render=function(){var e=this.props,t=(e.numColumns,e.columnWrapperStyle,function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["numColumns","columnWrapperStyle"]));return i.createElement($a,es({},t,{getItem:this._getItem,getItemCount:this._getItemCount,keyExtractor:this._keyExtractor,ref:this._captureRef,viewabilityConfigCallbackPairs:this._virtualizedListPairs},this._renderer()))},o}(i.PureComponent);as.defaultProps=os;var ss=nr.create({row:{flexDirection:"row"}});
//!
//! Copyright (C) Microsoft Corporation.  All rights reserved.
//!
/*!
 * Copyright (C) Microsoft Corporation. All rights reserved.
 */
var ls=window.AppMagic,us=window.Core,cs=function(){return(cs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function fs(e){var t,n;return ds(e)?t=e:"object"==typeof(n=e)&&null!==n&&"string"==typeof n.message&&void 0===n.name?t=cs(cs({},e),{name:""}):"object"==typeof e&&null!==e?(t=new Error(JSON.stringify(e))).name="Unknown object":(t=new Error(e+"")).name="Unknown "+typeof e,t}function ds(e){return e instanceof Error||"object"==typeof e&&null!==e&&"string"==typeof e.name&&"string"==typeof e.message}function ps(e){return"string"==typeof e?e.split(/[\s]+/).map((function(e){return function(e){var t,n,r,i;if(!e||""===e.trim())return!1;var o,a=e.split("://");if(a.length>1){var s=null!==(n=null===(t=a.shift())||void 0===t?void 0:t.toLowerCase())&&void 0!==n?n:"";if(-1===["http","https","ftp"].indexOf(s))return!1}if(""===(e=a.join("://")))return!1;if(a=e.split("/"),e=null!==(r=a.shift())&&void 0!==r?r:"",(a=e.split("@")).length>1)return!1;var l=null!==(i=(a=e.split(":")).shift())&&void 0!==i?i:"";if(a.length&&(o=a.join(":")),o&&o.length>0){var u=parseInt(o,10);if(isNaN(u)||u<=0||u>65535)return!1}return!(!function(e){return/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(e)}(l)&&!function(e){if("."===e[e.length-1])return!1;if(0===e.indexOf("*."))return!1;var t=e.split("."),n=t[t.length-1];if(t.length<2)return!1;if(/\s/.test(n))return!1;if(!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(n))return!1;return t.every((function(e){return!!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(e)&&(!/[\uff01-\uff5e]/.test(e)&&!/^-|-$/.test(e))}))}(l))}(e)?"<URL_REMOVED>":e})).join(" ").trim():e}var hs,ms=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},vs=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};!function(e){e[e.URLUpdatedCORSCompliance=0]="URLUpdatedCORSCompliance"}(hs||(hs={}));var gs,ys=function(){function e(e,t){this.context=e,this.controlName=t,this.controlId="PMR.UX."+this.controlName}return e.prototype.setContext=function(e){this.context=e},e.prototype.reportSuccess=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=[{name:"action",value:"PMR."+e},{name:"controlName",value:this.controlName},{name:"ControlId",value:this.controlId},{name:"CustomControlId",value:this.controlId}];t&&r.push.apply(r,vs([],ms(t),!1)),this.context.reporting.reportSuccess(this.controlName,r)},e.prototype.reportFailure=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];n=vs(vs(vs([],ms(n),!1),ms(this.getTelemetryParamsFromException(t)),!1),[{name:"action",value:"PMR."+e},{name:"controlName",value:this.controlName},{name:"ControlId",value:this.controlId},{name:"CustomControlId",value:this.controlId}],!1),this.context.reporting.reportFailure(this.controlName,t,"",n)},e.prototype.reportEvent=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.reportEventOfType.apply(this,vs([!1,e],ms(t),!1))},e.prototype.reportErrorEvent=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=this.getTelemetryParamsFromException(t);n=vs(vs([],ms(n),!1),ms(i),!1),this.reportEventOfType.apply(this,vs([!0,e],ms(n),!1))},e.prototype.logDashboardEvent=function(e){if(us)try{us.Telemetry.Log.trackActivityEvent(e,null)}catch(t){this.reportEventOfType(!0,e)}},e.prototype.reportEventOfType=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=e?"PMR.Error.":"PMR.",o=[{name:"ControlId",value:this.controlId},{name:"CustomControlId",value:this.controlId},{name:"componentName",value:this.controlName},{name:"controlName",value:this.controlName},{name:"action",value:i+t}];n&&o.push.apply(o,vs([],ms(n),!1)),this.context.reporting.reportEvent({eventName:t,eventParameters:o})},e.prototype.getTelemetryParamsFromException=function(e){if(!e)return[];var t=[{name:"ErrorName",value:e.name},{name:"ErrorMessage",value:ps(e.message)},{name:"ErrorStack",value:e.stack}];return function(e){return"object"==typeof e&&null!==e&&"number"==typeof e.code}(e)&&(t=vs(vs([],ms(t),!1),[{name:"ErrorCode",value:e.code}],!1)),function(e){return ds(e)&&"object"==typeof e.response&&"number"==typeof e.response.status}(e)&&(t=vs(vs([],ms(t),!1),[{name:"ErrorHttpStatusCode",value:e.response.status}],!1)),function(e){var t,n=null===(t=null==ls?void 0:ls.Services)||void 0===t?void 0:t.ServiceError;return!!(n&&e instanceof n)}
/*!
 * Copyright (C) Microsoft Corporation. All rights reserved.
 */(e)&&(t=vs(vs([],ms(t),!1),[{name:"ErrorIsOnline",value:e.isOnline},{name:"ErrorIsCritical",value:e.isCritical}],!1)),t},e}(),bs=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ss=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},xs=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};!function(e){e[e.ArButtonInitSuccess=0]="ArButtonInitSuccess",e[e.ArButtonViewInArInvoked=1]="ArButtonViewInArInvoked",e[e.ArButtonViewInArFailed=2]="ArButtonViewInArFailed",e[e.ArButtonViewInARSuccess=3]="ArButtonViewInARSuccess",e[e.ArButtonWrongTypeError=4]="ArButtonWrongTypeError",e[e.BarcodeReaderButtonInitSuccess=5]="BarcodeReaderButtonInitSuccess",e[e.BarcodeReaderButtonInvoked=6]="BarcodeReaderButtonInvoked",e[e.BarcodeReaderButtonSuccess=7]="BarcodeReaderButtonSuccess",e[e.BarcodeReaderButtonFailed=8]="BarcodeReaderButtonFailed",e[e.BarcodeLegacyDeviceWarning=9]="BarcodeLegacyDeviceWarning",e[e.BarcodeIncompatibleDeviceError=10]="BarcodeIncompatibleDeviceError",e[e.BarcodeFeatureUnsupportedError=11]="BarcodeFeatureUnsupportedError",e[e.FitmentButtonInitSuccess=12]="FitmentButtonInitSuccess",e[e.FitmentButtonFitmentInvoked=13]="FitmentButtonFitmentInvoked",e[e.FitmentButtonFitmentFailed=14]="FitmentButtonFitmentFailed",e[e.FitmentButtonFitmentSuccess=15]="FitmentButtonFitmentSuccess",e[e.AnnotateButtonInitSuccess=16]="AnnotateButtonInitSuccess",e[e.AnnotateButtonTakeAnnotationInvoked=17]="AnnotateButtonTakeAnnotationInvoked",e[e.AnnotateButtonTakeAnnotationSuccess=18]="AnnotateButtonTakeAnnotationSuccess",e[e.AnnotateButtonTakeAnnotationFailed=19]="AnnotateButtonTakeAnnotationFailed",e[e.MeasureButtonInitSuccess=20]="MeasureButtonInitSuccess",e[e.MeasureButtonTakeMeasurementInvoked=21]="MeasureButtonTakeMeasurementInvoked",e[e.MeasureButtonTakeMeasurementFailed=22]="MeasureButtonTakeMeasurementFailed",e[e.MeasureButtonTakeMeasurementSuccess=23]="MeasureButtonTakeMeasurementSuccess",e[e.VolumeDrawButtonInitSuccess=24]="VolumeDrawButtonInitSuccess",e[e.VolumeDrawButtonFitTestingInvoked=25]="VolumeDrawButtonFitTestingInvoked",e[e.VolumeDrawButtonFitTestingFailed=26]="VolumeDrawButtonFitTestingFailed",e[e.VolumeDrawButtonFitTestingSuccess=27]="VolumeDrawButtonFitTestingSuccess",e[e.ApiVersionError=28]="ApiVersionError",e[e.MeasurementParseFailed=29]="MeasurementParseFailed",e[e.ArResultParseFailed=30]="ArResultParseFailed",e[e.IncompatibleDeviceError=31]="IncompatibleDeviceError",e[e.LongModelLoadWarning=32]="LongModelLoadWarning",e[e.URLUpdatedCORSCompliance=33]="URLUpdatedCORSCompliance",e[e.StudioPreviewStart=34]="StudioPreviewStart",e[e.StudioPreviewEnd=35]="StudioPreviewEnd",e[e.StudioPreviewThumbnailError=36]="StudioPreviewThumbnailError"}(gs||(gs={}));var _s=function(e){function t(t,n){return e.call(this,t,n+"Button")||this}return bs(t,e),t.prototype.reportSuccessfulAction=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.reportSuccess.apply(this,xs([gs[e]],Ss(t),!1))},t.prototype.reportFailedAction=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];this.reportFailure.apply(this,xs([gs[e],t],Ss(n),!1))},t.prototype.reportAction=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.reportEvent.apply(this,xs([gs[e]],Ss(t),!1))},t.prototype.reportErrorEventOf=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];(null==t?void 0:t.message)&&n.push({name:"error",value:t.message}),this.reportErrorEvent.apply(this,xs([gs[e],t],Ss(n),!1))},t.ActionName=gs,t}(ys),Es=function(){function e(){}return e.displayError=function(e,t,n){us?this.displayCanvasToast(us.UI.Toast.ToastType.error,t,n):e.navigation.openErrorDialog({message:t})},e.displayWarning=function(e,t,n){us?this.displayCanvasToast(us.UI.Toast.ToastType.warning,t,n):e.navigation.openErrorDialog({message:t})},e.displayCanvasSuccess=function(e,t,n){us&&this.displayCanvasToast(us.UI.Toast.ToastType.success,e,t,n)},e.displayCanvasInfo=function(e,t,n){us&&this.displayCanvasToast(us.UI.Toast.ToastType.info,e,t,n)},e.displayCanvasToast=function(e,t,n,r){us&&(n?us.UI.Toast.ToastHandler.suspendOnClickToast({type:e,message:t,timeout:r,clickHandler:function(){us&&us.UI.Utility.launchInBrowser(n)}}):us.UI.Toast.ToastHandler.suspendOnClickToast({type:e,message:t}))},e.launchInBrowser=function(e,t,n){try{if(!t)return void Xrm.Navigation.openUrl(e);if(n)return void n.navigation.openUrl(e);if(us)return void us.UI.Utility.launchInBrowser(e);window.open(e)}catch(t){window.open(e)}},e.initializeMessageFragments=function(e,t){for(var n=e,r=/##LINK(\d+)##/,i=[];n&&n.length>0;){var o=r.exec(n);if(o&&o.length>0){var a=n.substr(0,o.index);a&&a.length>0&&i.push({displayString:a}),n=n.substr(o.index+o[0].length);var s="##/LINK"+o[0].substr(6),l=parseInt(o[1],10),u=n.indexOf(s);u>=0&&l<t.length?(i.push({displayString:n.substr(0,u).trim(),link:t[l]}),n=n.substr(u+s.length)):(i.push({displayString:n}),n="")}else i.push({displayString:n}),n=""}return i},e}(),Cs=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},Ts=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},Ps={Aztec:["aztec"],Codabar:["codabar"],"Code 39":["code_39"],"Code 93":["code_93"],"Code 128":["code_128"],"Data Matrix":["data_matrix"],EAN:["ean_8","ean_13"],"Interleaved 2 of 5":["itf"],"Micro QR Code":["micro_qr_code"],"Pdf 417":["pdf417"],"QR Code":["qr_code"],"RSS 14":["databar"],"RSS Expanded":["databar_expanded"],UPC:["upc_a","upc_e"]},As={Aztec:["AZTEC"],Codabar:["CODABAR"],"Code 39":["CODE_39"],"Code 93":["CODE_93"],"Code 128":["CODE_128"],"Data Matrix":["DATA_MATRIX"],EAN:["EAN_8,EAN_13"],"Interleaved 2 of 5":["ITF"],"Pdf 417":["PDF_417"],"QR Code":["QR_CODE"],"RSS 14":["RSS14"],"RSS Expanded":["RSS_EXPANDED"],UPC:["UPC_A,UPC_E"]},Rs={aztec:"AZTEC",codabar:"CODABAR",code_39:"CODE_39",code_93:"CODE_93",code_128:"CODE_128",data_matrix:"DATA_MATRIX",ean_8:"EAN_8",ean_13:"EAN_13",itf:"ITF",micro_qr_code:"MICRO_QR_CODE",pdf417:"PDF_417",qr_code:"QR_CODE",databar:"RSS14",databar_expanded:"RSS_EXPANDED",upc_a:"UPC_A",upc_e:"UPC_E",unknown:""};
/*!
 * Copyright (C) Microsoft Corporation. All rights reserved.
 */function Os(e){var t=[];if(e.indexOf("Auto")<=-1)for(var n in Ps)e.indexOf(n)>-1&&t.push.apply(t,Ts([],Cs(Ps[n]),!1));return t}function ws(e){var t=[];if(e.indexOf("Auto")<=-1)for(var n in As)e.indexOf(n)>-1&&t.push.apply(t,Ts([],Cs(As[n]),!1));return 0==t.length?void 0:t.join()}function Ms(e){return Rs[e]}
/*!
 * Copyright (C) Microsoft Corporation. All rights reserved.
 */function Ls(e){var t=Os(e);return{succeeded:!0,canceled:!1,Barcodes:[{Value:"1231412",Type:t.length>0?Ms(t[0]):"DATA_MATRIX"}]}}var Is,Ds=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},Fs=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Ns=function(){function e(){}return e.scanBarcode=function(e,t,n){return Ds(this,void 0,void 0,(function(){var r,i;return Fs(this,(function(o){return(r=this.getBarcodePlugin())?(i={formats:e,preferFrontCamera:t,showFlipCameraButton:!0,showTorchButton:!0,torchOn:!1,prompt:"",resultDisplayDuration:500,disableAnimations:!0,disableSuccessBeep:!n,assumeGS1:!0},[2,new Promise((function(e){r.scan((function(t){t.text&&t.format?e({canceled:t.cancelled,succeeded:!0,Barcodes:[{Value:t.text,Type:t.format}]}):e({canceled:!0,succeeded:!0,Barcodes:[]})}),(function(){e({canceled:!1,succeeded:!1,Barcodes:[]})}),i)}))]):[2,Promise.resolve(null)]}))}))},e.getBarcodePlugin=function(){return this.isPluginSupported()?cordova.plugins.barcodeScanner:null},e.isPluginSupported=function(){var e,t;return window.cordova&&(null===(t=null===(e=cordova.plugins)||void 0===e?void 0:e.barcodeScanner)||void 0===t?void 0:t.scan)},e}(),Bs=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},Vs=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},ks=void 0;function Us(e){switch(e){case Is.SelectToScan:return g.SelectToScan;case Is.ScanMultiple:return g.ScanMultiple;case Is.ScanInline:return g.InlineScan;default:return g.AutomaticallySelect}}function zs(e){var t=JSON.parse(e);return(null==t?void 0:t.supportsBarcode)?{isCompatible:!0}:!1===(null==t?void 0:t.supportsBarcode)?{isCompatible:!1,incompatibilityDescription:"Incompatible native player"}:{isCompatible:!1,incompatibilityDescription:"Player does not support barcode detection. Reason: Out of date receiver."}}function js(e,t,n,r,i,o,a,s){return Bs(this,void 0,void 0,(function(){var l,u,c,f,d,p,h,m;return Vs(this,(function(v){switch(v.label){case 0:return e.device.isGetMessageReceiverAvailable()?!1===ks?[3,4]:[4,e.device.getMessageReceiver("BarcodeReaderReceiver",{isCompatible:zs})]:(s.reportErrorEventOf(_s.ActionName.BarcodeIncompatibleDeviceError,new Error("Barcode reader is incompatible with device")),s.logDashboardEvent("PMR.BarcodeIncompatibleDeviceError"),Es.displayWarning(e,e.resources.getString("PCF_ErrorHelper_BrErrorMessage"),"https://go.microsoft.com/fwlink/?linkid=2204313"),[2,{succeeded:!1,canceled:!1,Barcodes:[]}]);case 1:return(l=v.sent()).isCompatible?(u=JSON.parse(l.versionInfo),(r===Is.SelectToScan&&!u.supportsSelectToScan||r===Is.ScanMultiple&&!u.supportsScanMultiple||r===Is.ScanInline&&!u.supportsScanInline)&&(Es.displayError(e,e.resources.getString("PCF_ErrorHelper_BrAppUpdateRequired")),s.reportErrorEventOf(_s.ActionName.BarcodeFeatureUnsupportedError,new Error("Outdated player attempted to use unsupported Scanning Mode: "+r)),r=u.supportsSelectToScan?Is.SelectToScan:Is.AutomaticallyScan),c={barcodeFormats:Os(t),preferFrontCamera:n,mode:Us(r),beepOnScan:i,vibrateOnScan:o,targetResolution:a},f=l.sendMessage(JSON.stringify(c)),h=(p=JSON).parse,[4,f.resultPromise]):[3,3];case 2:return d=h.apply(p,[v.sent()]),(m=function(e,t,n){var r,i,o,a,s,l,u;n.Succeeded||(t.reportErrorEventOf(_s.ActionName.BarcodeReaderButtonFailed,new Error("The BR results reported an error"),{name:"LocalizedErrorMessage",value:null===(r=n.LocalizedError)||void 0===r?void 0:r.LocalizedMessage}),t.logDashboardEvent("PMR.BarcodeReaderButtonFailed"),Es.displayError(e,null!==(o=null===(i=n.LocalizedError)||void 0===i?void 0:i.LocalizedMessage)&&void 0!==o?o:e.resources.getString("PCF_ErrorHelper_GenericBarcodeReaderError"),null===(a=n.LocalizedError)||void 0===a?void 0:a.MoreInfoHyperlink));var c=[];return null===(s=n.Barcodes)||void 0===s||s.forEach((function(e){c.push({Value:e.Value,Type:Ms(e.Type)})})),{canceled:null!==(l=n.Canceled)&&void 0!==l&&l,canceledReason:n.CanceledReason,succeeded:null!==(u=n.Succeeded)&&void 0!==u&&u,Barcodes:c}}(e,s,d)).canceled&&"incompatible"===m.canceledReason?(ks=!1,s.reportAction(_s.ActionName.BarcodeLegacyDeviceWarning,{name:"Message",value:"Legacy device attempted to use barcode reader: "+r}),[3,4]):(ks=!0,[2,m]);case 3:if("Incompatible native player"!==l.incompatibilityDescription)return Es.displayError(e,e.resources.getString("PCF_ErrorHelper_BrAppUpdateRequired")),s.reportErrorEventOf(_s.ActionName.BarcodeIncompatibleDeviceError,new Error(l.incompatibilityDescription)),s.logDashboardEvent("PMR.BarcodeIncompatibleDeviceError"),[2,{succeeded:!1,canceled:!1,Barcodes:[]}];s.reportAction(_s.ActionName.BarcodeLegacyDeviceWarning,{name:"Message",value:"Unsupported player attempted to use barcode reader: "+r}),ks=!1,v.label=4;case 4:return ks?[3,6]:[4,Ns.scanBarcode(ws(t),n,i)];case 5:return null===(m=v.sent())||!1===m.succeeded?(s.logDashboardEvent("PMR.BarcodeReaderButtonLegacyCallbackFailed"),Es.displayError(e,e.resources.getString("PCF_ErrorHelper_GenericBarcodeReaderError")),[2,{succeeded:!1,canceled:!1,Barcodes:[]}]):[2,m];case 6:return Es.displayError(e,e.resources.getString("PCF_ErrorHelper_BrAppUpdateRequired")),s.reportErrorEventOf(_s.ActionName.BarcodeIncompatibleDeviceError,new Error("Failed to open reader even though a capable device is available.")),s.logDashboardEvent("PMR.BarcodeIncompatibleDeviceError"),[2,{succeeded:!1,canceled:!1,Barcodes:[]}]}}))}))}
/*!
 * Copyright (C) Microsoft Corporation. All rights reserved.
 */!function(e){e[e.AutomaticallyScan=0]="AutomaticallyScan",e[e.SelectToScan=1]="SelectToScan",e[e.ScanMultiple=2]="ScanMultiple",e[e.LegacyScanner=3]="LegacyScanner",e[e.ScanInline=4]="ScanInline"}(Is||(Is={}));var Hs=function(){function e(){}return e.getBarcodeResultsSchema=function(){return Ws},e}(),Ws={Barcodes:{type:"array",items:{type:"object",properties:{Value:{type:"string"},Type:{type:"string"}}}}},Gs=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Xs=function(e){function t(n){return e.call(this,n,t.buttonPrefix)||this}return Gs(t,e),t.buttonPrefix="BarcodeReader",t}(_s),Ys=function(){function e(){}return e.BASE64_ICON_FONT="data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAl0AA4AAAAAEVQABHXDAAAAAAAAAAAAAAAAAAAAAAAAAABPUy8yAAABRAAAAEgAAABgLmVqa2NtYXAAAAGMAAAAOwAAAUrkO+XSY3Z0IAAAAcgAAAAgAAAAKgnZCa9mcGdtAAAB6AAAAPAAAAFZ/J7mjmdhc3AAAALYAAAADAAAAAwACAAbZ2x5ZgAAAuQAAAFtAAABqOoLyC9oZWFkAAAEVAAAADYAAAA2A+nT32hoZWEAAASMAAAAGwAAACQPhwiDaG10eAAABKgAAAAKAAAACg2qAKxsb2NhAAAEtAAAAAgAAAAIAGIA6m1heHAAAAS8AAAAHQAAACAAHwGZbmFtZQAABNwAAAP3AAAJ+pCX8lNwb3N0AAAI1AAAABQAAAAg/1EAenByZXAAAAjoAAAAiQAAANN4vfIOeJxjYGHnY5zAwMrAwDqL1ZiBgVEaQjNfZEhjEuJgZeViZGIEAwYgEGBAAN9gBQUGhyfyT5Q5wHwIyQBWxwLhKTAwAACgbgdkeJxjYGBgZoBgGQZGBhBwAfIYwXwWBg0gzQakGRmYnsg/Uf7/n4EBQks/lr4HVQ8EjGwMIx4AAOKPCtAAeJxj0GIIZShgaGBYxcjA2MDswHiAwQGLCBAAAKocB5V4nF2Pv07DQAzGcyS0hCdAOiGddSpDlYid6YZLJNQlJQznpYDUSqTvgJSFxQPP4m4Z82IIzBH+Lra/z/p8v3On+cl8dpylRyopVpw34aDUCw7q7Zn9+SFP7zZlYUzVeVb3ZcFqCaJrThf1TbBoyND1lkxtHh+2nC1il8WO8NJw0oZO6m0Adqi/xx3iVTySxSOEEt9P8X2MS/q1LFaG04smrAP3XrPzqAFMxWMTePQaEH/IpD91ZxPjbDll28BOc4JEn8oC90SahPtLj3/1oJL/hvttyL+rQfVN3PQW9IdhwYKwoZdn21AJGmD5DoT8ZMYAAQACAAgACv//AA94nE2OP0hCURSHz3l/urUEl5QHDcLr8XAJB5+P1zULQShoaBVEBMHRQboUtF0hECJoaXBwcogCBwcRDII2X7urb66mVksvXXxLZ/n9zuH74IAGjwDGjXkFOhCAgNrUtan9qEfLsTZenYF59XP7YJyDGoQNACLICnJqSWwbzl7GOEIvmUgZXvbY8HMZw7GRbKGFdjZlEFFodiczzmeTbrMgstV2b1Svj3rtajbuyxd0KrKErxU5109iTC/GGavF4n8+7nJewde1s2bUSyCgS4B8wCZQ2AUH9sGHY/Vj0qGuRSyCJO2aJE2dncAy3cCi3vrsUi+JrmVShQWowifpII2+R02VAYLAGgvf89iPGJaxzCIhorx8ks+qreThV8hkX2hvmMrLDyE/mQ5YExELQ7SE7LPw69CcLLAz5I0Gx+8WHwx4S05/T+OGbHpx2eBD7Cw0+57fyRAP7jiKobxetJSyLC3ktXIvL+AP4C6QgAAAAAABAAAABHXDqPn4EF8PPPUACwgAAAAAAL/9wYAAAAAA3URPoQAGAAAHgAf9AAAACQACAAAAAAAAeJxjYGRg4GAAASDJxtDA3sDAyIAKmAAXQAEiAAUqAKYIAAAGAIAAAAAAABYAYgDUeJxjYGRgYGBmsGdgZwABRjDJBcKMkSAmAAngALoAAAB4nLVUP4scNxR/e7v2XXB8BEPApYoQzscya18Om9jVYceVrzmbAzcB7Ug7Izw7EpLGwxgXKV3kY6Qx5FOEBFKmzidInSpl3nuj2b3zbswlkB1G89PT+/t7TwsAt0dfwgj631f49ngEt3DX4x3YhW8SHqP8WcITxN8mfA0+BZfwdfgM3ia8C1/D9wnvwefwS8I34BB+T/jm6OfRJOF9ONz5FaOMJp/gTu38mfAIvhifJ7wD++M3CY9R/i7hCeIfE74Gt8e/JXwdxPiPhHfBT/YS3oPDyeDnBryY/JDwzfG7yV8J78OLve9+ei+O7t57IE5N7m2wiygeW++sl9HYOhMnVSXOTFHGIM500P61VtlTOfcmF6dPnh2JkxB0DGe6aCrpNw82JefaB/QsjrPj+/0pHfZnz3VhtTBBSBG9VHop/SthFyKW+kJ+hbeNI3Ful07WRodsa/JljO7hbNa2bbYczjO0mcXO2cJLV3azha1jmK3NQ+NcZbQSdJCJl7YRS9mJJmhMAhMjsYhW5F7LqKdCmeAq2U2FrJVw3uBpjioavzIIp/3SxIju5h0XUZlc1+QLD4KwfgALijDdLNV5q5o8TgUxj7ZTshkCmFq0pcnLC5m1GNTUedUobNMqe1tXnTgwd4RezjGXtTp6+Fi2rK5MXQivQ8ROEavrAGS+8vWIGTgwGCXqJbXAG4yqbFtXVqrL7MmeKu2pHIuhcG2ia6JQmsoknVJX7jKjOIx1l9SpIegQ+SnN3GDO2dW7De9BwBHchXvwANEpGMjBg4WA7wIiyh4j8njnaZUoMYhqyPDkBCp8BJyhrIASzwLvNH41ar/GVaHmU7Sb4558U4wn+M9yxPaBNcmOrApo0J9EzatYXEXnnPMIKWcBx5jNMdy/ZDtYXrR7ztlYXAXqUFUS38gMKJQuOctXKCOW6KRk3W38FbxvkMFBO8fvEvcSczLMVvYvmCeeI0ofwgyflp8M/X1on6U4M8QdeynYj0MPHUoX7I2qnW2NHjhnhx0x3EexsqDev+SaBDPR4bdh7nomesYGbZJZrtqjBtWhYYp7xXqOO96xhPigOI4709vmyYtOe8m+HfeVao58RlZzzmPoRMUVkdWQV28RuAt+Q7JY1TC9Ulcd7xXa5LifMl/9zPdxp6s4H1ZgeBJb5inHdTtnbaqUtHOspuG5U1u5J5uK0QHq38EvTeg88bLNe5/Df+V27V2xpwJlnuc4pjs1zOq2Cobom3k9ujADVElfS+R4wy0g/32tCiUtV275Vn5s9uSlqdLcF5vWvqoeN3yzGrakbIduDn5Is+Kb/M8z2v8z1qkza+/DDTGJZZofynfOTPe9/R/u9t9sNTiWAHicY2BmAIP/fgzlDJiAGQApLQHLeJzbwKDNsImRk0mbcRMXiNzO1ZobaqvKwKG9nTs12EFPBsTiifCw0JAEsXidzbXlhUEsPh0VGREeEItfTkKYjwPEEuDj4WRnAbEEwQDEEtowoSDAAMhi2M4IN5oJbjQz3GgWuNGscKPZ5CShRrPDjeaAG80JN3qTMCO79gYGBdfaTAkXAMQBKBoAAAA=",e}();var Ks=function(e){var t=e.image,n="data:image/svg+xml;base64,"+btoa(t);return o.a.createElement("img",{src:n,alt:"",style:{width:"100%",height:"100%"}})},Zs=function(e){var t=e.width,n=void 0===t?"100px":t,r=e.height,i=void 0===r?"100px":r,a=e.message,s=e.image,l={color:"white",display:"flex",justifyContent:"center",alignItems:"center",width:n,height:i,position:"absolute"};return o.a.createElement("div",{style:l},s&&o.a.createElement(Ks,{image:s}),o.a.createElement("div",{"aria-label":a,style:{textAlign:"center",textOverflow:"ellipsis",fontSize:"20px",backgroundColor:"white",color:"black",position:"absolute",overflow:"hidden",padding:"5px",fontWeight:700}},a))},qs=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},Qs=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Js=function(){function e(){var e=this;this.beforeFirstUpdate=!0,this.startBarcodeRead=function(){return qs(e,void 0,void 0,(function(){var e,t,n,r,i,o,a,s,l,u,c;return Qs(this,(function(f){switch(f.label){case 0:return f.trys.push([0,2,3,4]),e=this.parseScanningMode(null!==(r=this.context.parameters.ScanningMode.raw)&&void 0!==r?r:""),this.reporter.reportAction(Xs.ActionName.BarcodeReaderButtonInvoked,{name:"isAuthoringMode",value:this.isAuthoringMode},{name:"barcodeType",value:null!==(i=this.context.parameters.BarcodeType.raw)&&void 0!==i?i:"Auto"},{name:"preferFrontCamera",value:this.context.parameters.PreferFrontCamera.raw},{name:"scanningMode",value:e},{name:"scanningQuality",value:this.context.parameters.ScanningQuality.raw},{name:"beepOnScan",value:this.context.parameters.BeepOnScan.raw},{name:"vibrateOnScan",value:this.context.parameters.VibrateOnScan.raw}),this.reporter.logDashboardEvent("PMR.BarcodeReaderButtonInvoked"),this.isAuthoringMode?(Es.displayWarning(this.context,this.context.resources.getString("PCF_ErrorHelper_BrErrorMessage"),"https://go.microsoft.com/fwlink/?linkid=2204313"),this.results=Ls(null!==(o=this.context.parameters.BarcodeType.raw)&&void 0!==o?o:"Auto"),[2]):(t=this,[4,js(this.context,null!==(a=this.context.parameters.BarcodeType.raw)&&void 0!==a?a:"Auto",null!==(s=this.context.parameters.PreferFrontCamera.raw)&&void 0!==s&&s,e,null===(l=this.context.parameters.BeepOnScan.raw)||void 0===l||l,null===(u=this.context.parameters.VibrateOnScan.raw)||void 0===u||u,this.parseScanningQuality(null!==(c=this.context.parameters.ScanningQuality.raw)&&void 0!==c?c:"Automatic"),this.reporter)]);case 1:return t.results=f.sent(),this.results.succeeded&&(this.reporter.reportSuccessfulAction(Xs.ActionName.BarcodeReaderButtonSuccess,{name:"userCancelled",value:this.results.canceled},{name:"barcodeCount",value:this.results.Barcodes.length},{name:"barcodeTypes",value:this.results.Barcodes.map((function(e){return e.Type})).join(", ")}),this.reporter.logDashboardEvent("PMR.BarcodeReaderButtonSuccess")),this.reporter.logDashboardEvent("PMR.BarcodeReaderButtonScanSuccess"),[3,4];case 2:return n=f.sent(),Es.displayError(this.context,this.context.resources.getString("PCF_ErrorHelper_GenericBarcodeReaderError")),this.reporter.reportFailedAction(Xs.ActionName.BarcodeReaderButtonFailed,fs(n)),this.reporter.logDashboardEvent("PMR.BarcodeReaderButtonFailed"),[3,4];case 3:return this.barcodeButtonClicked=!0,this.notifyOutputChanged(),[7];case 4:return[2]}}))}))},this.parseScanningQuality=function(e){switch(e.toLowerCase().trim()){case"low":return 540;case"medium":return 720;case"high":return 1080;case"very high":return 2160;default:return}},this.parseScanningMode=function(e){switch(e.toLowerCase().trim()){case"select to scan":return Is.SelectToScan;case"scan multiple":return Is.ScanMultiple;case"scan inline":return Is.ScanInline;default:return Is.AutomaticallyScan}}}return e.prototype.init=function(e,t,n,r){
/*!
 * Copyright (C) Microsoft Corporation. All rights reserved.
 */
var i;this.context=e,this.notifyOutputChanged=t,this.context.mode.trackContainerResize(!0),this.container=r,this.results={succeeded:!1,canceled:!1,Barcodes:[]},this.barcodeButtonClicked=!1,this.reporter=new Xs(this.context),this.isAuthoringMode=this.context.mode.isAuthoringMode,i={style:{MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",fontStyle:"normal",fontWeight:"normal",speak:"none"},fontFace:{fontFamily:'"FabricMDL2Icons"',src:"url(".concat(Ys.BASE64_ICON_FONT,") format('woff')")},icons:{ViewInAR:"",Reset:""}},Object(s.registerIcons)(i),this.reporter.reportSuccessfulAction(Xs.ActionName.BarcodeReaderButtonInitSuccess),this.reporter.logDashboardEvent("PMR.BarcodeReaderButtonInitSuccess")},e.prototype.updateView=function(t){var n;this.context=t,this.isAuthoringMode=this.isAuthoringMode||this.context.mode.isAuthoringMode,this.isAuthoringMode&&this.beforeFirstUpdate?(this.isAuthoringMode&&!e.sampleDataPromptShown&&(Es.displayCanvasSuccess(this.context.resources.getString("BarcodeReader_Sample_Data_Prompt"),"https://go.microsoft.com/fwlink/?linkid=2204313",3e4),e.sampleDataPromptShown=!0),this.results=Ls(this.context.parameters.BarcodeType.raw),this.notifyOutputChanged()):this.results={succeeded:!1,canceled:!1,Barcodes:[]},this.parseScanningMode(null!==(n=this.context.parameters.ScanningMode.raw)&&void 0!==n?n:"")!==Is.ScanInline?a.render(i.createElement(y,b.createButtonProps(this.context,this.startBarcodeRead)),this.container):a.render(i.createElement(Zs,{width:this.context.client.allocatedWidth,height:this.context.client.allocatedHeight,message:this.context.resources.getString("Inline_BarcodeReader_NotSupportedMessage"),image:'<svg \nxmlns="http://www.w3.org/2000/svg" \nx="0px" y="0px" width="270px" height="270px" viewBox="0 0 270 270"\n   preserveAspectRatio="none" enable-background="new 0 0 270 270" xml:space="preserve">\n<g class="st0">\n <rect y="0.7" fill="#E9E9E9" width="269" height="269.3"/>\n <polygon fill="#CBCBCA" points="277.9,187.1 245,143.4 188.6,202.8 75,80.5 -4.1,165.3 -4.1,272 277.9,272"/>\n <ellipse fill="#CBCBCA" cx="202.4" cy="84.1" rx="24.4" ry="24.3"/>\n</g>\n</svg>'}),this.container)},e.prototype.getOutputs=function(){return this.barcodeButtonClicked&&(this.results.canceled&&this.context.events.OnCancel?this.context.events.OnCancel():this.results.succeeded&&this.context.events.OnScan&&this.context.events.OnScan(),this.barcodeButtonClicked=!1),this.beforeFirstUpdate=!1,{Barcodes:this.results.Barcodes}},e.prototype.getOutputSchema=function(){return Promise.resolve(Hs.getBarcodeResultsSchema())},e.prototype.destroy=function(){a.unmountComponentAtNode(this.container)},e.sampleDataPromptShown=!1,e}()}]);
if (window.ComponentFramework && window.ComponentFramework.registerControl) {
	ComponentFramework.registerControl('Microsoft.BarcodeReader', pcf_tools_652ac3f36e1e4bca82eb3c1dc44e6fad.BarcodeReader);
} else {
	var Microsoft = Microsoft || {};
	Microsoft.BarcodeReader = pcf_tools_652ac3f36e1e4bca82eb3c1dc44e6fad.BarcodeReader;
	pcf_tools_652ac3f36e1e4bca82eb3c1dc44e6fad = undefined;
}